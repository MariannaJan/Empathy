(self.webpackChunkEmpathy=self.webpackChunkEmpathy||[]).push([[792],{222:(Bt,nt,M)=>{"use strict";var p=M(3953);let ie=null;function fe(){return ie}class te{}const de=new p.nKC("");let lt=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:()=>(0,p.WQX)($e),providedIn:"platform"})}return n})();const qe=new p.nKC("");let $e=(()=>{class n extends lt{constructor(){super(),this._doc=(0,p.WQX)(de),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fe().getBaseHref(this._doc)}onPopState(t){const r=fe().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=fe().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function he(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Me(n){return n&&"?"!==n[0]?"?"+n:n}let ee=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:()=>(0,p.WQX)(Ae),providedIn:"root"})}return n})();const Ue=new p.nKC("");let Ae=(()=>{class n extends ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,p.WQX)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return he(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Me(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+Me(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+Me(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(lt),p.KVO(Ue,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oe=(()=>{class n extends ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=he(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+Me(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+Me(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(lt),p.KVO(Ue,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})(),pe=(()=>{class n{constructor(t){this._subject=new p.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ve(Te(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Me(r))}normalize(t){return n.stripTrailingSlash(function dt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Me(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Me(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}static#e=this.normalizeQueryParams=Me;static#t=this.joinWithSlash=he;static#n=this.stripTrailingSlash=Ve;static#r=this.\u0275fac=function(r){return new(r||n)(p.KVO(ee))};static#i=this.\u0275prov=p.jDH({token:n,factory:()=>function Be(){return new pe((0,p.KVO)(ee))}(),providedIn:"root"})}return n})();function Te(n){return n.replace(/\/index.html$/,"")}class Ji{createSubscription(e,t){return(0,p.O8t)(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){(0,p.O8t)(()=>e.unsubscribe())}}class Eo{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const qa=new Eo,rs=new Ji;let U=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,p.jNT)(t))return qa;if((0,p.zjR)(t))return rs;throw function bo(n,e){return new p.wOt(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(p.gRc,16))};static#t=this.\u0275pipe=p.EJ8({name:"async",type:n,pure:!1,standalone:!0})}return n})(),kc=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({})}return n})();const jg="browser";function zt(n){return n===jg}function is(n){return"server"===n}let yu=(()=>{class n{static#e=this.\u0275prov=(0,p.jDH)({token:n,providedIn:"root",factory:()=>zt((0,p.WQX)(p.Agw))?new fl((0,p.WQX)(de),window):new ml})}return n})();class fl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function pl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}}class ml{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class zg extends te{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sn extends zg{static makeCurrent(){!function se(n){ie??=n}(new sn)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Gf(){return ec=ec||document.querySelector("base"),ec?ec.getAttribute("href"):null}();return null==t?null:function yl(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){ec=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ff(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let ec=null,kb=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();const Gd=new p.nKC("");let qf=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new p.wOt(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(Gd),p.KVO(p.SKi))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();class Iu{constructor(e){this._doc=e}}const Kg="ng-app-id";let qd=(()=>{class n{constructor(t,r,s,u={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=is(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Kg}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const u=s.get(t);return u.usage+=r,u.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,u=s?.get(r);if(u?.parentNode===t)return s.delete(r),u.removeAttribute(Kg),u;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=r,this.platformIsServer&&d.setAttribute(Kg,this.appId),t.appendChild(d),d}}addStyleToHost(t,r){const s=this.getStyleElement(t,r),u=this.styleRef,d=u.get(r)?.elements;d?d.push(s):u.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de),p.KVO(p.sZ2),p.KVO(p.BIS,8),p.KVO(p.Agw))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();const Wg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},tc=/%COMP%/g,Qf=new p.nKC("",{providedIn:"root",factory:()=>!0});function bD(n,e){return e.map(t=>t.replace(tc,n))}let Yf=(()=>{class n{constructor(t,r,s,u,d,f,g,D=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=u,this.doc=d,this.platformId=f,this.ngZone=g,this.nonce=D,this.rendererByCompId=new Map,this.platformIsServer=is(f),this.defaultRenderer=new Vb(t,d,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===p.gXe.ShadowDom&&(r={...r,encapsulation:p.gXe.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof ea?s.applyToHost(t):s instanceof Zf&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const d=this.doc,f=this.ngZone,g=this.eventManager,D=this.sharedStylesHost,S=this.removeStylesOnCompDestroy,P=this.platformIsServer;switch(r.encapsulation){case p.gXe.Emulated:u=new ea(g,D,r,this.appId,S,d,f,P);break;case p.gXe.ShadowDom:return new sM(g,D,t,r,d,f,this.nonce,P);default:u=new Zf(g,D,r,S,d,f,P)}s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(qf),p.KVO(qd),p.KVO(p.sZ2),p.KVO(Qf),p.KVO(de),p.KVO(p.Agw),p.KVO(p.SKi),p.KVO(p.BIS))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();class Vb{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Wg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Du(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Du(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new p.wOt(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Wg[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Wg[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(p.czy.DashCase|p.czy.Important)?e.style.setProperty(t,r,s&p.czy.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.czy.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=fe().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Du(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class sM extends Vb{constructor(e,t,r,s,u,d,f,g){super(e,u,d,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=bD(s.id,s.styles);for(const S of D){const P=document.createElement("style");f&&P.setAttribute("nonce",f),P.textContent=S,this.shadowRoot.appendChild(P)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Zf extends Vb{constructor(e,t,r,s,u,d,f,g){super(e,u,d,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=g?bD(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class ea extends Zf{constructor(e,t,r,s,u,d,f,g){const D=s+"-"+r.id;super(e,t,r,u,d,f,g,D),this.contentAttr=function Xf(n){return"_ngcontent-%COMP%".replace(tc,n)}(D),this.hostAttr=function Gg(n){return"_nghost-%COMP%".replace(tc,n)}(D)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Jn=(()=>{class n extends Iu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})(),ta=(()=>{class n extends Iu{constructor(t){super(t),this.delegate=(0,p.WQX)(p.zAP,{optional:!0})}supports(t){return!!this.delegate&&this.delegate.supports(t)}addEventListener(t,r,s){return this.delegate.addEventListener(t,r,s)}removeEventListener(t,r,s){return this.delegate.removeEventListener(t,r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();const qg=["alt","control","meta","shift"],Qg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Jf={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ep=(()=>{class n extends Iu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fe().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),d="code."),qg.forEach(D=>{const S=r.indexOf(D);S>-1&&(r.splice(S,1),d+=D+".")}),d+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=s,g.fullKey=d,g}static matchEventFullKeyCode(t,r){let s=Qg[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),qg.forEach(d=>{d!==s&&(0,Jf[d])(t)&&(u+=d+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();const zb=(0,p.oH4)(p.fpN,"browser",[{provide:p.Agw,useValue:jg},{provide:p.PLl,useValue:function $b(){sn.makeCurrent()},multi:!0},{provide:de,useFactory:function Qd(){return(0,p.TL$)(document),document},deps:[]}]),Kb=new p.nKC(""),Xd=[{provide:p.e01,useClass:class Nb{addToWindow(e){p.JZv.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new p.wOt(5103,!1);return u},p.JZv.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.JZv.getAllAngularRootElements=()=>e.getAllRootElements(),p.JZv.frameworkStabilizers||(p.JZv.frameworkStabilizers=[]),p.JZv.frameworkStabilizers.push(r=>{const s=p.JZv.getAllAngularTestabilities();let u=s.length;const d=function(){u--,0==u&&r()};s.forEach(f=>{f.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?fe().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:p.WHO,useClass:p.NYb,deps:[p.SKi,p.giA,p.e01]},{provide:p.NYb,useClass:p.NYb,deps:[p.SKi,p.giA,p.e01]}],Yg=[{provide:p.H8p,useValue:"root"},{provide:p.zcH,useFactory:function Hb(){return new p.zcH},deps:[]},{provide:Gd,useClass:Jn,multi:!0,deps:[de,p.SKi,p.Agw]},{provide:Gd,useClass:ep,multi:!0,deps:[de]},{provide:Gd,useClass:ta,multi:!0},Yf,qd,qf,{provide:p._9s,useExisting:Yf},{provide:class os{},useClass:kb,deps:[]},[]];let ED=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.sZ2,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(Kb,12))};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({providers:[...Yg,...Xd],imports:[kc,p.Hbi]})}return n})(),Wb=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Yd=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:function(r){let s=null;return s=r?new(r||n):p.KVO(Hn),s},providedIn:"root"})}return n})(),Hn=(()=>{class n extends Yd{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case p.WPN.NONE:return r;case p.WPN.HTML:return(0,p.ZF7)(r,"HTML")?(0,p.rcV)(r):(0,p.h9k)(this._doc,String(r)).toString();case p.WPN.STYLE:return(0,p.ZF7)(r,"Style")?(0,p.rcV)(r):r;case p.WPN.SCRIPT:if((0,p.ZF7)(r,"Script"))return(0,p.rcV)(r);throw new p.wOt(5200,!1);case p.WPN.URL:return(0,p.ZF7)(r,"URL")?(0,p.rcV)(r):(0,p.$MX)(String(r));case p.WPN.RESOURCE_URL:if((0,p.ZF7)(r,"ResourceURL"))return(0,p.rcV)(r);throw new p.wOt(5201,!1);default:throw new p.wOt(5202,!1)}}bypassSecurityTrustHtml(t){return(0,p.Kcf)(t)}bypassSecurityTrustStyle(t){return(0,p.cWb)(t)}bypassSecurityTrustScript(t){return(0,p.UyX)(t)}bypassSecurityTrustUrl(t){return(0,p.osQ)(t)}bypassSecurityTrustResourceUrl(t){return(0,p.e5t)(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var rt=M(467),so=M(1985),ao=M(8071),vi=M(6648),Zd=M(9326);function cn(...n){const e=(0,Zd.lI)(n);return(0,vi.H)(n,e)}var Ti=M(4412);const{isArray:ev}=Array,{getPrototypeOf:tv,prototype:Jd,keys:nc}=Object;function Zb(n){if(1===n.length){const e=n[0];if(ev(e))return{args:e,keys:null};if(function nv(n){return n&&"object"==typeof n&&tv(n)===Jd}(e)){const t=nc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var jc=M(3669),Mn=M(6354);const{isArray:rv}=Array;function Uo(n){return(0,Mn.T)(e=>function tp(n,e){return rv(e)?n(...e):n(e)}(n,e))}function Au(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var ai=M(4360),iv=M(5225);function xu(...n){const e=(0,Zd.lI)(n),t=(0,Zd.ms)(n),{args:r,keys:s}=Zb(n);if(0===r.length)return(0,vi.H)([],e);const u=new so.c(function ov(n,e,t=jc.D){return r=>{Uc(e,()=>{const{length:s}=n,u=new Array(s);let d=s,f=s;for(let g=0;g<s;g++)Uc(e,()=>{const D=(0,vi.H)(n[g],e);let S=!1;D.subscribe((0,ai._)(r,P=>{u[g]=P,S||(S=!0,f--),f||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>Au(s,d):jc.D));return t?u.pipe(Uo(t)):u}function Uc(n,e,t){n?(0,iv.N)(t,n,e):e()}var eh=M(9350),th=M(8793),Da=M(8750);function Ru(n){return new so.c(e=>{(0,Da.Tg)(n()).subscribe(e)})}var sv=M(1203);function $c(n,e){const t=(0,ao.T)(n)?n:()=>n,r=s=>s.error(t());return new so.c(e?s=>e.schedule(r,0,s):r)}var cs=M(983),Ni=M(8359),ki=M(9974);function np(){return(0,ki.N)((n,e)=>{let t=null;n._refCount++;const r=(0,ai._)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ci extends so.c{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ki.S)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ni.yU;const t=this.getSubject();e.add(this.source.subscribe((0,ai._)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ni.yU.EMPTY)}return e}refCount(){return np()(this)}}var Vn=M(1413);function Wi(n,e){return(0,ki.N)((t,r)=>{let s=null,u=0,d=!1;const f=()=>d&&!s&&r.complete();t.subscribe((0,ai._)(r,g=>{s?.unsubscribe();let D=0;const S=u++;(0,Da.Tg)(n(g,S)).subscribe(s=(0,ai._)(r,P=>r.next(e?e(g,P,S,D++):P),()=>{s=null,f()}))},()=>{d=!0,f()}))})}function Xr(n){return n<=0?()=>cs.w:(0,ki.N)((e,t)=>{let r=0;e.subscribe((0,ai._)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}var El=M(9172),Er=M(5964),_i=M(1397);function nh(n){return(0,ki.N)((e,t)=>{let r=!1;e.subscribe((0,ai._)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function av(n=Jb){return(0,ki.N)((e,t)=>{let r=!1;e.subscribe((0,ai._)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Jb(){return new eh.G}function Ca(n,e){const t=arguments.length>=2;return r=>r.pipe(n?(0,Er.p)((s,u)=>n(s,u,r)):jc.D,Xr(1),t?nh(e):av(()=>new eh.G))}function Ta(n,e){return(0,ao.T)(e)?(0,_i.Z)(n,e,1):(0,_i.Z)(n,1)}function On(n,e,t){const r=(0,ao.T)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,ki.N)((s,u)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let f=!0;s.subscribe((0,ai._)(u,g=>{var D;null===(D=r.next)||void 0===D||D.call(r,g),u.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),u.complete()},g=>{var D;f=!1,null===(D=r.error)||void 0===D||D.call(r,g),u.error(g)},()=>{var g,D;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(D=r.finalize)||void 0===D||D.call(r)}))}):jc.D}function y(n){return(0,ki.N)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,ai._)(t,void 0,void 0,d=>{u=(0,Da.Tg)(n(d,y(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function w(n){return n<=0?()=>cs.w:(0,ki.N)((e,t)=>{let r=[];e.subscribe((0,ai._)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function B(n){return(0,Mn.T)(()=>n)}function Y(n){return(0,ki.N)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Z=M(5343);function ve(n){return(0,ki.N)((e,t)=>{(0,Da.Tg)(n).subscribe((0,ai._)(t,()=>t.complete(),Z.l)),!t.closed&&e.subscribe(t)})}var at=M(6365);const xe="primary",wt=Symbol("RouteTitle");class nn{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yt(n){return new nn(n)}function mn(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],f=n[u];if(":"===d[0])s[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Fn(n,e){const t=n?ur(n):void 0,r=e?ur(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!ui(n[s],e[s]))return!1;return!0}function ur(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ui(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function $o(n){return n.length>0?n[n.length-1]:null}function sr(n){return function Yb(n){return!!n&&(n instanceof so.c||(0,ao.T)(n.lift)&&(0,ao.T)(n.subscribe))}(n)?n:(0,p.jNT)(n)?(0,vi.H)(Promise.resolve(n)):cn(n)}const co={exact:function To(n,e,t){if(!Ms(n.segments,e.segments)||!Rr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!To(n.children[r],e.children[r],t))return!1;return!0},subset:Hc},uo={exact:function rp(n,e){return Fn(n,e)},subset:function Ho(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ui(n[t],e[t]))},ignored:()=>!0};function an(n,e,t){return co[t.paths](n.root,e.root,t.matrixParams)&&uo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Hc(n,e,t){return Sa(n,e,e.segments,t)}function Sa(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Ms(s,t)||e.hasChildren()||!Rr(s,t,r))}if(n.segments.length===t.length){if(!Ms(n.segments,t)||!Rr(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Hc(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ms(n.segments,s)&&Rr(n.segments,s,r)&&n.children[xe])&&Sa(n.children[xe],e,u,r)}}function Rr(n,e,t){return e.every((r,s)=>uo[t](n[s].parameters,r.parameters))}class us{constructor(e=new Cn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Yt(this.queryParams),this._queryParamMap}toString(){return pM.serialize(this)}}class Cn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return uv(this)}}class Kr{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Yt(this.parameters),this._parameterMap}toString(){return gM(this)}}function Ms(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let So=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:()=>new Mu,providedIn:"root"})}return n})();class Mu{parse(e){const t=new fF(e);return new us(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${wl(e.root,!0)}`,r=function aF(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(s=>`${lv(t)}=${lv(s)}`).join("&"):`${lv(t)}=${lv(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function nE(n){return encodeURI(n)}(e.fragment)}`:""}`}}const pM=new Mu;function uv(n){return n.segments.map(e=>gM(e)).join("/")}function wl(n,e){if(!n.hasChildren())return uv(n);if(e){const t=n.children[xe]?wl(n.children[xe],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==xe&&r.push(`${s}:${wl(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function cv(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===xe&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==xe&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===xe?[wl(n.children[xe],!1)]:[`${s}:${wl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[xe]?`${uv(n)}/${t[0]}`:`${uv(n)}/(${t.join("//")})`}}function tE(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lv(n){return tE(n).replace(/%3B/gi,";")}function AD(n){return tE(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function rE(n){return decodeURIComponent(n)}function mM(n){return rE(n.replace(/\+/g,"%20"))}function gM(n){return`${AD(n.path)}${function sF(n){return Object.entries(n).map(([e,t])=>`;${AD(e)}=${AD(t)}`).join("")}(n.parameters)}`}const cF=/^[^\/()?;#]+/;function xD(n){const e=n.match(cF);return e?e[0]:""}const uF=/^[^\/()?;=#]+/,dF=/^[^=?&#]+/,RD=/^[^&#]+/;class fF{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Cn([],{}):new Cn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[xe]=new Cn(e,t)),r}parseSegment(){const e=xD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new p.wOt(4009,!1);return this.capture(e),new Kr(rE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function lF(n){const e=n.match(uF);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=xD(this.remaining);s&&(r=s,this.capture(r))}e[rE(t)]=rE(r)}parseQueryParam(e){const t=function hF(n){const e=n.match(dF);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function MD(n){const e=n.match(RD);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=mM(t),u=mM(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=xD(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new p.wOt(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=xe);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[xe]:new Cn([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new p.wOt(4011,!1)}}function vM(n){return n.segments.length>0?new Cn([],{[xe]:n}):n}function _M(n){const e={};for(const[r,s]of Object.entries(n.children)){const u=_M(s);if(r===xe&&0===u.segments.length&&u.hasChildren())for(const[d,f]of Object.entries(u.children))e[d]=f;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function pF(n){if(1===n.numberOfChildren&&n.children[xe]){const e=n.children[xe];return new Cn(n.segments.concat(e.segments),e.children)}return n}(new Cn(n.segments,e))}function Il(n){return n instanceof us}function dv(n){let e;const s=vM(function t(u){const d={};for(const g of u.children){const D=t(g);d[g.outlet]=D}const f=new Cn(u.url,d);return u===n&&(e=f),f}(n.root));return e??s}function iE(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return fv(s,s,s,t,r);const u=function sE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new PD(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Object.entries(u.outlets).forEach(([g,D])=>{f[g]="string"==typeof D?D.split("/"):D}),[...s,{outlets:f}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&s.push(f))}),s):[...s,u]},[]);return new PD(t,e,r)}(e);if(u.toRoot())return fv(s,s,new Cn([],{}),t,r);const d=function rc(n,e,t){if(n.isAbsolute)return new pv(e,!0,0);if(!t)return new pv(e,!1,NaN);if(null===t.parent)return new pv(t,!0,0);const r=hv(n.commands[0])?0:1;return function ND(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new p.wOt(4005,!1);s=r.segments.length}return new pv(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),f=d.processChildren?Dl(d.segmentGroup,d.index,u.commands):ar(d.segmentGroup,d.index,u.commands);return fv(s,d.segmentGroup,f,t,r)}function hv(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ip(n){return"object"==typeof n&&null!=n&&n.outlets}function fv(n,e,t,r,s){let d,u={};r&&Object.entries(r).forEach(([g,D])=>{u[g]=Array.isArray(D)?D.map(S=>`${S}`):`${D}`}),d=n===e?t:oE(n,e,t);const f=vM(_M(d));return new us(f,u,s)}function oE(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:oE(u,e,t)}),new Cn(n.segments,r)}class PD{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&hv(r[0]))throw new p.wOt(4003,!1);const s=r.find(ip);if(s&&s!==$o(r))throw new p.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pv{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function ar(n,e,t){if(n??=new Cn([],{}),0===n.segments.length&&n.hasChildren())return Dl(n,e,t);const r=function op(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],f=t[r];if(ip(f))break;const g=`${f}`,D=r<t.length-1?t[r+1]:null;if(s>0&&void 0===g)break;if(g&&D&&"object"==typeof D&&void 0===D.outlets){if(!Ou(g,D,d))return u;r+=2}else{if(!Ou(g,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Cn(n.segments.slice(0,r.pathIndex),{});return u.children[xe]=new Cn(n.segments.slice(r.pathIndex),n.children),Dl(u,0,s)}return r.match&&0===s.length?new Cn(n.segments,{}):r.match&&!n.hasChildren()?lo(n,e,t):r.match?Dl(n,0,s):lo(n,e,t)}function Dl(n,e,t){if(0===t.length)return new Cn(n.segments,{});{const r=function kD(n){return ip(n[0])?n[0].outlets:{[xe]:n}}(t),s={};if(Object.keys(r).some(u=>u!==xe)&&n.children[xe]&&1===n.numberOfChildren&&0===n.children[xe].segments.length){const u=Dl(n.children[xe],e,t);return new Cn(n.segments,u.children)}return Object.entries(r).forEach(([u,d])=>{"string"==typeof d&&(d=[d]),null!==d&&(s[u]=ar(n.children[u],e,d))}),Object.entries(n.children).forEach(([u,d])=>{void 0===r[u]&&(s[u]=d)}),new Cn(n.segments,s)}}function lo(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(ip(u)){const g=yM(u.outlets);return new Cn(r,g)}if(0===s&&hv(t[0])){r.push(new Kr(n.segments[e].path,rh(t[0]))),s++;continue}const d=ip(u)?u.outlets[xe]:`${u}`,f=s<t.length-1?t[s+1]:null;d&&f&&hv(f)?(r.push(new Kr(d,rh(f))),s+=2):(r.push(new Kr(d,{})),s++)}return new Cn(r,{})}function yM(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=lo(new Cn([],{}),0,r))}),e}function rh(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Ou(n,e,t){return n==t.path&&Fn(e,t.parameters)}const ho="imperative";var er=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(er||{});class na{constructor(e,t){this.id=e,this.url=t}}class mv extends na{constructor(e,t,r="imperative",s=null){super(e,t),this.type=er.NavigationStart,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Si extends na{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=er.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ls=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ls||{}),sp=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(sp||{});class Pu extends na{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=er.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ic extends na{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=er.NavigationSkipped}}class ap extends na{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=er.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cp extends na{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=er.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class gv extends na{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=er.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aE extends na{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=er.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class zc extends na{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=er.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xn extends na{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=er.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vv{constructor(e){this.route=e,this.type=er.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cE{constructor(e){this.route=e,this.type=er.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class FD{constructor(e){this.snapshot=e,this.type=er.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mF{constructor(e){this.snapshot=e,this.type=er.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bM{constructor(e){this.snapshot=e,this.type=er.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class EM{constructor(e){this.snapshot=e,this.type=er.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class LD{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=er.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class _v{}class oc{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function ra(n){return n.outlet||xe}function zo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class uE{get injector(){return zo(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Cl(this.rootInjector),this.attachRef=null}}let Cl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new uE(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(p.uvJ))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class lE{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=BD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=BD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=jD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return jD(e,this._root).map(t=>t.value)}}function BD(n,e){if(n===e.value)return e;for(const t of e.children){const r=BD(n,t);if(r)return r}return null}function jD(n,e){if(n===e.value)return[e];for(const t of e.children){const r=jD(n,t);if(r.length)return r.unshift(e),r}return[]}class ia{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Tl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class dE extends lE{constructor(e,t){super(e),this.snapshot=t,yv(this,e)}toString(){return this.snapshot.toString()}}function Ao(n){const e=function Kc(n){const u=new oa([],{},{},"",{},xe,n,null,{});return new UD("",new ia(u,[]))}(n),t=new Ti.t([new Kr("",{})]),r=new Ti.t({}),s=new Ti.t({}),u=new Ti.t({}),d=new Ti.t(""),f=new Sl(t,r,u,d,s,xe,n,e.root);return f.snapshot=e.root,new dE(new ia(f,[]),e)}class Sl{constructor(e,t,r,s,u,d,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=d,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,Mn.T)(D=>D[wt]))??cn(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,Mn.T)(e=>Yt(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,Mn.T)(e=>Yt(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ds(n,e,t="emptyOnly"){let r;const{routeConfig:s}=n;return r=null===e||"always"!==t&&""!==s?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...s?.data,...n._resolvedData}},s&&bv(s)&&(r.resolve[wt]=s.title),r}class oa{get title(){return this.data?.[wt]}constructor(e,t,r,s,u,d,f,g,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=f,this.routeConfig=g,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yt(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class UD extends lE{constructor(e,t){super(t),this.url=e,yv(this,t)}toString(){return $D(this._root)}}function yv(n,e){e.value._routerState=n,e.children.forEach(t=>yv(n,t))}function $D(n){const e=n.children.length>0?` { ${n.children.map($D).join(", ")} } `:"";return`${n.value}${e}`}function hE(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fn(e.params,t.params)||n.paramsSubject.next(t.params),function jn(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fn(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Fn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function lp(n,e){const t=Fn(n.params,e.params)&&function eE(n,e){return Ms(n,e)&&n.every((t,r)=>Fn(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||lp(n.parent,e.parent))}function bv(n){return"string"==typeof n.title||null===n.title}let dp=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=xe,this.activateEvents=new p.bkB,this.deactivateEvents=new p.bkB,this.attachEvents=new p.bkB,this.detachEvents=new p.bkB,this.parentContexts=(0,p.WQX)(Cl),this.location=(0,p.WQX)(p.c1b),this.changeDetector=(0,p.WQX)(p.gRc),this.inputBinder=(0,p.WQX)(Ev,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new p.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new p.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new p.wOt(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new p.wOt(4013,!1);this._activatedRoute=t;const s=this.location,d=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new ih(t,f,s.injector);this.activated=s.createComponent(d,{index:s.length,injector:g,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=p.FsC({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[p.OA$]})}return n})();class ih{__ngOutletInjector(e){return new ih(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Sl?this.route:e===Cl?this.childContexts:this.parent.get(e,t)}}const Ev=new p.nKC("");let fE=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=xu([r.queryParams,r.params,r.data]).pipe(Wi(([u,d,f],g)=>(f={...u,...d,...f},0===g?cn(f):Promise.resolve(f)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const d=(0,p.HJs)(r.component);if(d)for(const{templateName:f}of d.inputs)t.activatedComponentRef.setInput(f,u[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();function oh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function HD(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return oh(n,r,s);return oh(n,r)})}(n,e,t);return new ia(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(f=>oh(n,f)),d}}const r=function zD(n){return new Sl(new Ti.t(n.url),new Ti.t(n.params),new Ti.t(n.queryParams),new Ti.t(n.fragment),new Ti.t(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>oh(n,u));return new ia(r,s)}}class wv{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const Iv="ngNavigationCancelingError";function Dv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Il(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=Gi(!1,ls.Redirect);return s.url=t,s.navigationBehaviorOptions=r,s}function Gi(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[Iv]=!0,t.cancellationCode=e,t}function Fr(n){return!!n&&n[Iv]}class TM{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Tl(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Tl(e);for(const d of Object.values(u))this.deactivateRouteAndItsChildren(d,s);if(r&&r.outlet){const d=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Tl(e);for(const d of Object.values(u))this.deactivateRouteAndItsChildren(d,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=Tl(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new EM(u.value.snapshot))}),e.children.length&&this.forwardEvent(new mF(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(hE(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const f=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),hE(f.route.value),this.activateChildRoutes(e,null,d.children)}else d.attachRef=null,d.route=s,d.outlet&&d.outlet.activateWith(s,d.injector),this.activateChildRoutes(e,null,d.children)}else this.activateChildRoutes(e,null,r)}}class KD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hp{constructor(e,t){this.component=e,this.route=t}}function WD(n,e,t){const r=n._root;return pp(r,e?e._root:null,t,[r.value])}function Ko(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,p.LfX)(n)?e.get(n):n:r}function pp(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Tl(e);return n.children.forEach(d=>{(function Cv(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const g=function Tv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ms(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ms(n.url,e.url)||!Fn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!lp(n,e)||!Fn(n.queryParams,e.queryParams);default:return!lp(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);g?s.canActivateChecks.push(new KD(r)):(u.data=d.data,u._resolvedData=d._resolvedData),pp(n,e,u.component?f?f.children:null:t,r,s),g&&f&&f.outlet&&f.outlet.isActivated&&s.canDeactivateChecks.push(new hp(f.outlet.component,d))}else d&&Nu(e,f,s),s.canActivateChecks.push(new KD(r)),pp(n,null,u.component?f?f.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),Object.entries(u).forEach(([d,f])=>Nu(f,t.getContext(d),s)),s}function Nu(n,e,t){const r=Tl(n),s=n.value;Object.entries(r).forEach(([u,d])=>{Nu(d,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new hp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function xl(n){return"function"==typeof n}function Sv(n){return n instanceof eh.G||"EmptyError"===n?.name}const gp=Symbol("INITIAL_VALUE");function ah(){return Wi(n=>xu(n.map(e=>e.pipe(Xr(1),(0,El.Z)(gp)))).pipe((0,Mn.T)(e=>{for(const t of e)if(!0!==t){if(t===gp)return gp;if(!1===t||xM(t))return t}return!0}),(0,Er.p)(e=>e!==gp),Xr(1)))}function xM(n){return Il(n)||n instanceof wv}function Av(n){return(0,sv.F)(On(e=>{if("boolean"!=typeof e)throw Dv(0,e)}),(0,Mn.T)(e=>!0===e))}class QD{constructor(e){this.segmentGroup=e||null}}class yp extends Error{constructor(e){super(),this.urlTree=e}}function Ml(n){return $c(new QD(n))}class Rv{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return cn(r);if(s.numberOfChildren>1||!s.children[xe])return $c(new p.wOt(4e3,!1));s=s.children[xe]}}applyRedirectCommands(e,t,r,s,u){if("string"!=typeof t){const f=t,{queryParams:g,fragment:D,routeConfig:S,url:P,outlet:j,params:Q,data:ye,title:Ee}=s,we=(0,p.N4e)(u,()=>f({params:Q,data:ye,queryParams:g,fragment:D,routeConfig:S,url:P,outlet:j,title:Ee}));if(we instanceof us)throw new yp(we);t=we}const d=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new yp(d);return d}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new us(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&":"===u[0]){const f=u.substring(1);r[s]=t[f]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return Object.entries(t.children).forEach(([f,g])=>{d[f]=this.createSegmentGroup(e,g,r,s)}),new Cn(u,d)}createSegments(e,t,r,s){return t.map(u=>":"===u.path[0]?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new p.wOt(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const bp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function XD(n,e,t,r,s){const u=ch(n,e,t);return u.matched?(r=function wM(n,e){return n.providers&&!n._injector&&(n._injector=(0,p.Ol2)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function xv(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?cn(s.map(d=>{const f=Ko(d,n);return sr(function AM(n){return n&&xl(n.canMatch)}(f)?f.canMatch(e,t):(0,p.N4e)(n,()=>f(e,t)))})).pipe(ah(),Av()):cn(!0)}(r,e,t).pipe((0,Mn.T)(d=>!0===d?u:{...bp}))):cn(u)}function ch(n,e,t){if("**"===e.path)return function vE(n){return{matched:!0,parameters:n.length>0?$o(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...bp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||mn)(t,n,e);if(!s)return{...bp};const u={};Object.entries(s.posParams??{}).forEach(([f,g])=>{u[f]=g.path});const d=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:s.posParams??{}}}function YD(n,e,t,r){return t.length>0&&function eC(n,e,t){return t.some(r=>Mv(n,e,r)&&ra(r)!==xe)}(n,t,r)?{segmentGroup:new Cn(e,JD(r,new Cn(t,n.children))),slicedSegments:[]}:0===t.length&&function tC(n,e,t){return t.some(r=>Mv(n,e,r))}(n,t,r)?{segmentGroup:new Cn(n.segments,ZD(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Cn(n.segments,n.children),slicedSegments:t}}function ZD(n,e,t,r){const s={};for(const u of t)if(Mv(n,e,u)&&!r[ra(u)]){const d=new Cn([],{});s[ra(u)]=d}return{...r,...s}}function JD(n,e){const t={};t[xe]=e;for(const r of n)if(""===r.path&&ra(r)!==xe){const s=new Cn([],{});t[ra(r)]=s}return t}function Mv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class PM{}class uh{constructor(e,t,r,s,u,d,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=d,this.urlSerializer=f,this.applyRedirects=new Rv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new p.wOt(4002,`'${e.segmentGroup}'`)}recognize(){const e=YD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe((0,Mn.T)(({children:t,rootSnapshot:r})=>{const s=new ia(r,t),u=new UD("",s),d=function OD(n,e,t=null,r=null){return iE(dv(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(d),{state:u,tree:d}}))}match(e){const t=new oa([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),xe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,xe,t).pipe((0,Mn.T)(r=>({children:r,rootSnapshot:t})),y(r=>{if(r instanceof yp)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof QD?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,s,u){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,u):this.processSegment(e,t,r,r.segments,s,!0,u).pipe((0,Mn.T)(d=>d instanceof ia?[d]:[]))}processChildren(e,t,r,s){const u=[];for(const d of Object.keys(r.children))"primary"===d?u.unshift(d):u.push(d);return(0,vi.H)(u).pipe(Ta(d=>{const f=r.children[d],g=function up(n,e){const t=n.filter(r=>ra(r)===e);return t.push(...n.filter(r=>ra(r)!==e)),t}(t,d);return this.processSegmentGroup(e,g,f,d,s)}),function C(n,e){return(0,ki.N)(function b(n,e,t,r,s){return(u,d)=>{let f=t,g=e,D=0;u.subscribe((0,ai._)(d,S=>{const P=D++;g=f?n(g,S,P):(f=!0,S),r&&d.next(g)},s&&(()=>{f&&d.next(g),d.complete()})))}}(n,e,arguments.length>=2,!0))}((d,f)=>(d.push(...f),d)),nh(null),function O(n,e){const t=arguments.length>=2;return r=>r.pipe(n?(0,Er.p)((s,u)=>n(s,u,r)):jc.D,w(1),t?nh(e):av(()=>new eh.G))}(),(0,_i.Z)(d=>{if(null===d)return Ml(r);const f=iC(d);return function lh(n){n.sort((e,t)=>e.value.outlet===xe?-1:t.value.outlet===xe?1:e.value.outlet.localeCompare(t.value.outlet))}(f),cn(f)}))}processSegment(e,t,r,s,u,d,f){return(0,vi.H)(t).pipe(Ta(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,s,u,d,f).pipe(y(D=>{if(D instanceof QD)return cn(null);throw D}))),Ca(g=>!!g),y(g=>{if(Sv(g))return function Ol(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?cn(new PM):Ml(r);throw g}))}processSegmentAgainstRoute(e,t,r,s,u,d,f,g){return function Ov(n,e,t,r){return!!(ra(n)===r||r!==xe&&Mv(e,t,n))&&ch(e,n,t).matched}(r,s,u,d)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,d,g):this.allowRedirects&&f?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,d,g):Ml(s):Ml(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d,f){const{matched:g,parameters:D,consumedSegments:S,positionalParamSegments:P,remainingSegments:j}=ch(t,s,u);if(!g)return Ml(t);"string"==typeof s.redirectTo&&"/"===s.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Q=new oa(u,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pv(s),ra(s),s.component??s._loadedComponent??null,s,oC(s)),ye=ds(Q,f,this.paramsInheritanceStrategy);Q.params=Object.freeze(ye.params),Q.data=Object.freeze(ye.data);const Ee=this.applyRedirects.applyRedirectCommands(S,s.redirectTo,P,Q,e);return this.applyRedirects.lineralizeSegments(s,Ee).pipe((0,_i.Z)(we=>this.processSegment(e,r,t,we.concat(j),d,!1,f)))}matchSegmentAgainstRoute(e,t,r,s,u,d){const f=XD(t,r,s,e);return"**"===r.path&&(t.children={}),f.pipe(Wi(g=>g.matched?this.getChildConfig(e=r._injector??e,r,s).pipe(Wi(({routes:D})=>{const S=r._loadedInjector??e,{parameters:P,consumedSegments:j,remainingSegments:Q}=g,ye=new oa(j,P,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Pv(r),ra(r),r.component??r._loadedComponent??null,r,oC(r)),Ee=ds(ye,d,this.paramsInheritanceStrategy);ye.params=Object.freeze(Ee.params),ye.data=Object.freeze(Ee.data);const{segmentGroup:we,slicedSegments:mt}=YD(t,j,Q,D);if(0===mt.length&&we.hasChildren())return this.processChildren(S,D,we,ye).pipe((0,Mn.T)(Dt=>new ia(ye,Dt)));if(0===D.length&&0===mt.length)return cn(new ia(ye,[]));const Et=ra(r)===u;return this.processSegment(S,D,we,mt,Et?xe:u,!0,ye).pipe((0,Mn.T)(Dt=>new ia(ye,Dt instanceof ia?[Dt]:[])))})):Ml(t)))}getChildConfig(e,t,r){return t.children?cn({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?cn({routes:t._loadedRoutes,injector:t._loadedInjector}):function MM(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?cn(!0):cn(s.map(d=>{const f=Ko(d,n);return sr(function qD(n){return n&&xl(n.canLoad)}(f)?f.canLoad(e,t):(0,p.N4e)(n,()=>f(e,t)))})).pipe(ah(),Av())}(e,t,r).pipe((0,_i.Z)(s=>s?this.configLoader.loadChildren(e,t).pipe(On(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function OM(n){return $c(Gi(!1,ls.GuardRejected))}())):cn({routes:[],injector:e})}}function Fi(n){const e=n.value.routeConfig;return e&&""===e.path}function iC(n){const e=[],t=new Set;for(const r of n){if(!Fi(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=iC(r.children);e.push(new ia(r.value,s))}return e.filter(r=>!t.has(r))}function Pv(n){return n.data||{}}function oC(n){return n.resolve||{}}function aC(n){const e=n.children.map(t=>aC(t)).flat();return[n,...e]}function Fv(n){return Wi(e=>{const t=n(e);return t?(0,vi.H)(t).pipe((0,Mn.T)(()=>e)):cn(e)})}let uC=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===xe);return r}getResolvedTitleForRoute(t){return t.data[wt]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:()=>(0,p.WQX)(kM),providedIn:"root"})}return n})(),kM=(()=>{class n extends uC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(Wb))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const dh=new p.nKC("",{providedIn:"root",factory:()=>({})});let yE=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["ng-component"]],standalone:!0,features:[p.aNF],decls:1,vars:0,template:function(r,s){1&r&&p.nrm(0,"router-outlet")},dependencies:[dp],encapsulation:2})}return n})();function bE(n){const e=n.children&&n.children.map(bE),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==xe&&(t.component=yE),t}const Pl=new p.nKC("");let EE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,p.WQX)(p.Ql9)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return cn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=sr(t.loadComponent()).pipe((0,Mn.T)(wE),On(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Y(()=>{this.componentLoaders.delete(t)})),s=new ci(r,()=>new Vn.B).pipe(np());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return cn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function FM(n,e,t,r){return sr(n.loadChildren()).pipe((0,Mn.T)(wE),(0,_i.Z)(s=>s instanceof p.Co$||Array.isArray(s)?cn(s):(0,vi.H)(e.compileModuleAsync(s))),(0,Mn.T)(s=>{r&&r(n);let u,d,f=!1;return Array.isArray(s)?(d=s,!0):(u=s.create(t).injector,d=u.get(Pl,[],{optional:!0,self:!0}).flat()),{routes:d.map(bE),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Y(()=>{this.childrenLoaders.delete(r)})),d=new ci(u,()=>new Vn.B).pipe(np());return this.childrenLoaders.set(r,d),d}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wE(n){return function IF(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Lv=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:()=>(0,p.WQX)(Li),providedIn:"root"})}return n})(),Li=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const LM=new p.nKC(""),lC=new p.nKC("");function DF(n,e,t){const r=n.get(lC),s=n.get(de);return n.get(p.SKi).runOutsideAngular(()=>{if(!s.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(D=>setTimeout(D));let u;const d=new Promise(D=>{u=D}),f=s.startViewTransition(()=>(u(),function dC(n){return new Promise(e=>{(0,p.mal)({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:g}=r;return g&&(0,p.N4e)(n,()=>g({transition:f,from:e,to:t})),d})}const VM=new p.nKC("");let hh=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Vn.B,this.transitionAbortSubject=new Vn.B,this.configLoader=(0,p.WQX)(EE),this.environmentInjector=(0,p.WQX)(p.uvJ),this.urlSerializer=(0,p.WQX)(So),this.rootContexts=(0,p.WQX)(Cl),this.location=(0,p.WQX)(pe),this.inputBindingEnabled=null!==(0,p.WQX)(Ev,{optional:!0}),this.titleStrategy=(0,p.WQX)(uC),this.options=(0,p.WQX)(dh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,p.WQX)(Lv),this.createViewTransition=(0,p.WQX)(LM,{optional:!0}),this.navigationErrorHandler=(0,p.WQX)(VM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>cn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new cE(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new vv(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,s){return this.transitions=new Ti.t({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ho,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Er.p)(u=>0!==u.id),(0,Mn.T)(u=>({...u,extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),Wi(u=>{let d=!1,f=!1;return cn(u).pipe(Wi(g=>{if(this.navigationId>u.id)return this.cancelNavigationTransition(u,"",ls.SupersededByNewNavigation),cs.w;this.currentTransition=u,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:"string"==typeof g.extras.browserUrl?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const D=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!D&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const P="";return this.events.next(new ic(g.id,this.urlSerializer.serialize(g.rawUrl),P,sp.IgnoredSameUrlNavigation)),g.resolve(!1),cs.w}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return cn(g).pipe(Wi(P=>{const j=this.transitions?.getValue();return this.events.next(new mv(P.id,this.urlSerializer.serialize(P.extractedUrl),P.source,P.restoredState)),j!==this.transitions?.getValue()?cs.w:Promise.resolve(P)}),function sC(n,e,t,r,s,u){return(0,_i.Z)(d=>function nC(n,e,t,r,s,u,d="emptyOnly"){return new uh(n,e,t,r,s,d,u).recognize()}(n,e,t,r,d.extractedUrl,s,u).pipe((0,Mn.T)(({state:f,tree:g})=>({...d,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),On(P=>{u.targetSnapshot=P.targetSnapshot,u.urlAfterRedirects=P.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects};const j=new cp(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(P.urlAfterRedirects),P.targetSnapshot);this.events.next(j)}));if(D&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:P,extractedUrl:j,source:Q,restoredState:ye,extras:Ee}=g,we=new mv(P,this.urlSerializer.serialize(j),Q,ye);this.events.next(we);const mt=Ao(this.rootComponentType).snapshot;return this.currentTransition=u={...g,targetSnapshot:mt,urlAfterRedirects:j,extras:{...Ee,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=j,cn(u)}{const P="";return this.events.next(new ic(g.id,this.urlSerializer.serialize(g.extractedUrl),P,sp.IgnoredByUrlHandlingStrategy)),g.resolve(!1),cs.w}}),On(g=>{const D=new gv(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(D)}),(0,Mn.T)(g=>(this.currentTransition=u={...g,guards:WD(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},u)),function bF(n,e){return(0,_i.Z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?cn({...t,guardsResult:!0}):function EF(n,e,t,r){return(0,vi.H)(n).pipe((0,_i.Z)(s=>function _p(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?cn(u.map(f=>{const g=zo(e)??s,D=Ko(f,g);return sr(function mp(n){return n&&xl(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):(0,p.N4e)(g,()=>D(n,e,t,r))).pipe(Ca())})).pipe(ah()):cn(!0)}(s.component,s.route,t,e,r)),Ca(s=>!0!==s,!0))}(d,r,s,n).pipe((0,_i.Z)(f=>f&&function GD(n){return"boolean"==typeof n}(f)?function mE(n,e,t,r){return(0,vi.H)(e).pipe(Ta(s=>(0,th.x)(function gE(n,e){return null!==n&&e&&e(new FD(n)),cn(!0)}(s.route.parent,r),function Rl(n,e){return null!==n&&e&&e(new bM(n)),cn(!0)}(s.route,r),function RM(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function fp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Ru(()=>cn(d.guards.map(g=>{const D=zo(d.node)??t,S=Ko(g,D);return sr(function sh(n){return n&&xl(n.canActivateChild)}(S)?S.canActivateChild(r,n):(0,p.N4e)(D,()=>S(r,n))).pipe(Ca())})).pipe(ah())));return cn(u).pipe(ah())}(n,s.path,t),function vp(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return cn(!0);const s=r.map(u=>Ru(()=>{const d=zo(e)??t,f=Ko(u,d);return sr(function SM(n){return n&&xl(n.canActivate)}(f)?f.canActivate(e,n):(0,p.N4e)(d,()=>f(e,n))).pipe(Ca())}));return cn(s).pipe(ah())}(n,s.route,t))),Ca(s=>!0!==s,!0))}(r,u,n,e):cn(f)),(0,Mn.T)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),On(g=>{if(u.guardsResult=g.guardsResult,g.guardsResult&&"boolean"!=typeof g.guardsResult)throw Dv(0,g.guardsResult);const D=new aE(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(D)}),(0,Er.p)(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",ls.GuardRejected),!1)),Fv(g=>{if(g.guards.canActivateChecks.length)return cn(g).pipe(On(D=>{const S=new zc(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(S)}),Wi(D=>{let S=!1;return cn(D).pipe(function Nv(n,e){return(0,_i.Z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return cn(t);const u=new Set(s.map(g=>g.route)),d=new Set;for(const g of u)if(!d.has(g))for(const D of aC(g))d.add(D);let f=0;return(0,vi.H)(d).pipe(Ta(g=>u.has(g)?function cC(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!bv(s)&&(u[wt]=s.title),function _E(n,e,t,r){const s=ur(n);if(0===s.length)return cn({});const u={};return(0,vi.H)(s).pipe((0,_i.Z)(d=>function kv(n,e,t,r){const s=zo(e)??r,u=Ko(n,s);return sr(u.resolve?u.resolve(e,t):(0,p.N4e)(s,()=>u(e,t)))}(n[d],e,t,r).pipe(Ca(),On(f=>{if(f instanceof wv)throw Dv(new Mu,f);u[d]=f}))),w(1),B(u),y(d=>Sv(d)?cs.w:$c(d)))}(u,n,e,r).pipe((0,Mn.T)(d=>(n._resolvedData=d,n.data=ds(n,n.parent,t).resolve,null)))}(g,r,n,e):(g.data=ds(g,g.parent,n).resolve,cn(void 0))),On(()=>f++),w(1),(0,_i.Z)(g=>f===d.size?cn(t):cs.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),On({next:()=>S=!0,complete:()=>{S||this.cancelNavigationTransition(D,"",ls.NoDataFromResolver)}}))}),On(D=>{const S=new xn(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(S)}))}),Fv(g=>{const D=S=>{const P=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&P.push(this.configLoader.loadComponent(S.routeConfig).pipe(On(j=>{S.component=j}),(0,Mn.T)(()=>{})));for(const j of S.children)P.push(...D(j));return P};return xu(D(g.targetSnapshot.root)).pipe(nh(null),Xr(1))}),Fv(()=>this.afterPreactivation()),Wi(()=>{const{currentSnapshot:g,targetSnapshot:D}=u,S=this.createViewTransition?.(this.environmentInjector,g.root,D.root);return S?(0,vi.H)(S).pipe((0,Mn.T)(()=>u)):cn(u)}),(0,Mn.T)(g=>{const D=function pE(n,e,t){const r=oh(n,e._root,t?t._root:void 0);return new dE(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=u={...g,targetRouterState:D},this.currentNavigation.targetRouterState=D,u}),On(()=>{this.events.next(new _v)}),((n,e,t,r)=>(0,Mn.T)(s=>(new TM(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),Xr(1),On({next:g=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Si(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{d=!0}}),ve(this.transitionAbortSubject.pipe(On(g=>{throw g}))),Y(()=>{!d&&!f&&this.cancelNavigationTransition(u,"",ls.SupersededByNewNavigation),this.currentTransition?.id===u.id&&(this.currentNavigation=null,this.currentTransition=null)}),y(g=>{if(f=!0,Fr(g))this.events.next(new Pu(u.id,this.urlSerializer.serialize(u.extractedUrl),g.message,g.cancellationCode)),function Al(n){return Fr(n)&&Il(n.url)}(g)?this.events.next(new oc(g.url,g.navigationBehaviorOptions)):u.resolve(!1);else{const D=new ap(u.id,this.urlSerializer.serialize(u.extractedUrl),g,u.targetSnapshot??void 0);try{const S=(0,p.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(D));if(S instanceof wv){const{message:P,cancellationCode:j}=Dv(0,S);this.events.next(new Pu(u.id,this.urlSerializer.serialize(u.extractedUrl),P,j)),this.events.next(new oc(S.redirectTo,S.navigationBehaviorOptions))}else{this.events.next(D);const P=t.errorHandler(g);u.resolve(!!P)}}catch(S){this.options.resolveNavigationPromiseOnError?u.resolve(!1):u.reject(S)}}return cs.w}))}))}cancelNavigationTransition(t,r,s){const u=new Pu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Aa(n){return n!==ho}let hC=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:()=>(0,p.WQX)(BM),providedIn:"root"})}return n})();class Ep{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let BM=(()=>{class n extends Ep{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=p.xGo(n)))(s||n)}})();static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fC=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:()=>(0,p.WQX)(pC),providedIn:"root"})}return n})(),pC=(()=>{class n extends fC{constructor(){super(...arguments),this.location=(0,p.WQX)(pe),this.urlSerializer=(0,p.WQX)(So),this.options=(0,p.WQX)(dh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,p.WQX)(Lv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new us,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ao(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof mv)this.stateMemento=this.createStateMemento();else if(t instanceof ic)this.rawUrlTree=r.initialUrl;else if(t instanceof cp){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else t instanceof _v?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Pu&&(t.code===ls.GuardRejected||t.code===ls.NoDataFromResolver)?this.restoreHistory(r):t instanceof ap?this.restoreHistory(r,!0):t instanceof Si&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const s=t instanceof us?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const d={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",d)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===t.finalUrl&&0===u&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=p.xGo(n)))(s||n)}})();static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Vv=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Vv||{});function jM(n,e){n.events.pipe((0,Er.p)(t=>t instanceof Si||t instanceof Pu||t instanceof ap||t instanceof ic),(0,Mn.T)(t=>t instanceof Si||t instanceof ic?Vv.COMPLETE:t instanceof Pu&&(t.code===ls.Redirect||t.code===ls.SupersededByNewNavigation)?Vv.REDIRECTING:Vv.FAILED),(0,Er.p)(t=>t!==Vv.REDIRECTING),Xr(1)).subscribe(()=>{e()})}function CF(n){throw n}const TF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},SF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ac=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,p.WQX)(p.H3F),this.stateManager=(0,p.WQX)(fC),this.options=(0,p.WQX)(dh,{optional:!0})||{},this.pendingTasks=(0,p.WQX)(p.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,p.WQX)(hh),this.urlSerializer=(0,p.WQX)(So),this.location=(0,p.WQX)(pe),this.urlHandlingStrategy=(0,p.WQX)(Lv),this._events=new Vn.B,this.errorHandler=this.options.errorHandler||CF,this.navigated=!1,this.routeReuseStrategy=(0,p.WQX)(hC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,p.WQX)(Pl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,p.WQX)(Ev,{optional:!0}),this.eventsSubscription=new Ni.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const s=this.navigationTransitions.currentTransition,u=this.navigationTransitions.currentNavigation;if(null!==s&&null!==u)if(this.stateManager.handleRouterEvent(r,u),r instanceof Pu&&r.code!==ls.Redirect&&r.code!==ls.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Si)this.navigated=!0;else if(r instanceof oc){const d=r.navigationBehaviorOptions,f=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),g={browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Aa(s.source),...d};this.scheduleNavigation(f,ho,null,g,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function wp(n){return!(n instanceof _v||n instanceof oc)})(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ho,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},d=s?.navigationId?s:null;if(s){const g={...s};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(u.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,d,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(bE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:f,preserveFragment:g}=r,D=g?this.currentUrlTree.fragment:d;let P,S=null;switch(f){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}null!==S&&(S=this.removeEmptyProps(S));try{P=dv(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),P=this.currentUrlTree.root}return iE(P,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Il(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,ho,null,r)}navigate(t,r={skipLocationChange:!1}){return function fh(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new p.wOt(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let s;if(s=!0===r?{...TF}:!1===r?{...SF}:r,Il(t))return an(this.currentUrlTree,t,s);const u=this.parseUrl(t);return an(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.entries(t).reduce((r,[s,u])=>(null!=u&&(r[s]=u),r),{})}scheduleNavigation(t,r,s,u,d){if(this.disposed)return Promise.resolve(!1);let f,g,D;d?(f=d.resolve,g=d.reject,D=d.promise):D=new Promise((P,j)=>{f=P,g=j});const S=this.pendingTasks.add();return jM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:f,reject:g,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(P=>Promise.reject(P))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ip=(()=>{class n{constructor(t,r,s,u,d,f){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this.locationStrategy=f,this.href=null,this.onChanges=new Vn.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const g=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(D=>{D instanceof Si&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Il(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,s,u,d){const f=this.urlTree;return!!(null===f||this.isAnchorElement&&(0!==t||r||s||u||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(f,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:(0,p.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.routerLinkInput?null:Il(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(ac),p.rXU(Sl),p.kS0("tabindex"),p.rXU(p.sFG),p.rXU(p.aKT),p.rXU(ee))};static#t=this.\u0275dir=p.FsC({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){1&r&&p.bIt("click",function(d){return s.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),2&r&&p.BMQ("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",p.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",p.L39],replaceUrl:[2,"replaceUrl","replaceUrl",p.L39],routerLink:"routerLink"},standalone:!0,features:[p.GFd,p.OA$]})}return n})();class mC{}let Bv=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe((0,Er.p)(t=>t instanceof Si),Ta(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,p.Ol2)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,f=u._loadedInjector??d;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(d,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,vi.H)(s).pipe((0,at.U)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):cn(null);const u=s.pipe((0,_i.Z)(d=>null===d?cn(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,vi.H)([u,d]).pipe((0,at.U)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(ac),p.KVO(p.Ql9),p.KVO(p.uvJ),p.KVO(mC),p.KVO(EE))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const kl=new p.nKC("");let gC=(()=>{class n{constructor(t,r,s,u,d={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,p.WQX)(p.uvJ),d.scrollPositionRestoration||="disabled",d.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mv?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Si?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ic&&t.code===sp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof LD&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){var s=this;this.zone.runOutsideAngular((0,rt.A)(function*(){yield new Promise(u=>{setTimeout(()=>{u()}),(0,p.mal)(()=>{u()},{injector:s.environmentInjector})}),s.zone.run(()=>{s.transitions.events.next(new LD(t,"popstate"===s.lastSource?s.store[s.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){p.QTQ()};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();function Os(n,e){return{\u0275kind:n,\u0275providers:e}}function _C(){const n=(0,p.WQX)(p.zZn);return e=>{const t=n.get(p.o8S);if(e!==t.components[0])return;const r=n.get(ac),s=n.get(DE);1===n.get(CE)&&r.initialNavigation(),n.get(TE,null,p.$GK.Optional)?.setUpPreloading(),n.get(kl,null,p.$GK.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const DE=new p.nKC("",{factory:()=>new Vn.B}),CE=new p.nKC("",{providedIn:"root",factory:()=>1}),TE=new p.nKC("");function Uv(n){return Os(0,[{provide:TE,useExisting:Bv},{provide:mC,useExisting:n}])}function bC(n){return Os(9,[{provide:LM,useValue:DF},{provide:lC,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const EC=new p.nKC("ROUTER_FORROOT_GUARD"),wC=[pe,{provide:So,useClass:Mu},ac,Cl,{provide:Sl,useFactory:function IE(n){return n.routerState.root},deps:[ac]},EE,[]];let IC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[wC,[],{provide:Pl,multi:!0,useValue:t},{provide:EC,useFactory:KM,deps:[[ac,new p.Xx1,new p.kdw]]},{provide:dh,useValue:r||{}},r?.useHash?{provide:ee,useClass:Oe}:{provide:ee,useClass:Ae},{provide:kl,useFactory:()=>{const n=(0,p.WQX)(yu),e=(0,p.WQX)(p.SKi),t=(0,p.WQX)(dh),r=(0,p.WQX)(hh),s=(0,p.WQX)(So);return t.scrollOffset&&n.setOffset(t.scrollOffset),new gC(s,r,n,e,t)}},r?.preloadingStrategy?Uv(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?WM(r):[],r?.bindToComponentInputs?Os(8,[fE,{provide:Ev,useExisting:fE}]).\u0275providers:[],r?.enableViewTransitions?bC().\u0275providers:[],[{provide:TC,useFactory:_C},{provide:p.iLQ,multi:!0,useExisting:TC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Pl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(EC,8))};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({})}return n})();function KM(n){return"guarded"}function WM(n){return["disabled"===n.initialNavigation?Os(3,[{provide:p.hnV,multi:!0,useFactory:()=>{const e=(0,p.WQX)(ac);return()=>{e.setUpLocationChangeListener()}}},{provide:CE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Os(2,[{provide:CE,useValue:0},{provide:p.hnV,multi:!0,deps:[p.zZn],useFactory:e=>{const t=e.get(qe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(ac),u=e.get(DE);jM(s,()=>{r(!0)}),e.get(hh).afterPreactivation=()=>(r(!0),u.closed?cn(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const TC=new p.nKC("");var $v=M(5505);const AE=Symbol.for("Dexie"),Hv=globalThis[AE]||(globalThis[AE]=$v);if($v.semVer!==Hv.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${$v.semVer} and ${Hv.semVer}`);var xE=M(9403),li=M(6434),Fl=M(1744),Ps=M(7176),Ns=M(1885),mh="docs",AC="attachments",RC=new Map,zv=new Map;function gh(){return(gh=(0,rt.A)(function*(n){var e=yield n,r=zv.get(n)-1;0===r?(e.dexieDb.close(),zv.delete(n)):zv.set(n,r)})).apply(this,arguments)}var RE="__";function Ll(n){var e=n.split(".");if(e.length>1)return e.map(r=>Ll(r)).join(".");if(n.startsWith("|")){var t=n.substring(1);return RE+t}return n}function Kv(n){var e=n.split(".");return e.length>1?e.map(r=>Kv(r)).join("."):n.startsWith(RE)?"|"+n.substring(RE.length):n}function vh(n,e){return e&&(e=Cp(e=(0,li.FD)(e)),n.forEach(t=>{var r=(0,Fl.UU)(e,t);(0,Fl.oq)(e,t,r?"1":"0")}),e)}function Dp(n,e){return e&&(e=Vl(e=(0,li.FD)(e)),n.forEach(t=>{var r=(0,Fl.UU)(e,t);(0,Fl.oq)(e,t,"1"===r)}),e)}function Cp(n){if(!n||"string"==typeof n||"number"==typeof n||"boolean"==typeof n)return n;if(Array.isArray(n))return n.map(t=>Cp(t));if("object"==typeof n){var e={};return Object.entries(n).forEach(([t,r])=>{"object"==typeof r&&(r=Cp(r)),e[Ll(t)]=r}),e}}function Vl(n){if(!n||"string"==typeof n||"number"==typeof n||"boolean"==typeof n)return n;if(Array.isArray(n))return n.map(t=>Vl(t));if("object"==typeof n){var e={};return Object.entries(n).forEach(([t,r])=>{("object"==typeof r||Array.isArray(n))&&(r=Vl(r)),e[Kv(t)]=r}),e}}function Wv(n){var e=[],t=(0,Ns.xQ)(n.primaryKey);e.push([t]),e.push(["_deleted",t]),n.indexes&&n.indexes.forEach(u=>{var d=(0,Ps.$r)(u);e.push(d)}),e.push(["_meta.lwt",t]),e.push(["_meta.lwt"]);var r=(e=e.map(u=>u.map(d=>Ll(d)))).map(u=>1===u.length?u[0]:"["+u.join("+")+"]");return(r=r.filter((u,d,f)=>f.indexOf(u)===d)).join(", ")}function Bl(n,e){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,rt.A)(function*(n,e){var t=yield n;return(yield t.dexieTable.bulkGet(e)).map(s=>Dp(t.booleanIndexes,s))})).apply(this,arguments)}function jl(n,e){return n+"||"+e}function Sp(n){var e=new Set,t=[];return n.indexes?(n.indexes.forEach(r=>{(0,Ps.$r)(r).forEach(u=>{e.has(u)||(e.add(u),"boolean"===(0,Ns.nT)(n,u).type&&t.push(u))})}),t.push("_deleted"),(0,Ps.jw)(t)):t}var ku=M(4552),ME=M(7014),OE=M(6243),Lr=M(8663),MC=M(997),PE=M(5365);function OC(n){return n===MC.OK?-1/0:n}function PC(n,e,t){return n.includes(e)?t===MC.g0||!0===t?"1":"0":t}function Gv(n,e,t){if(!t){if(typeof window>"u")throw new Error("IDBKeyRange missing");t=window.IDBKeyRange}var r=e.startKeys.map((d,f)=>PC(n,e.index[f],d)).map(OC),s=e.endKeys.map((d,f)=>PC(n,e.index[f],d)).map(OC);return t.bound(r,s,!e.inclusiveStart,!e.inclusiveEnd)}function NE(n,e){return kE.apply(this,arguments)}function kE(){return kE=(0,rt.A)(function*(n,e){var t=yield n.internals,r=e.query,s=r.skip?r.skip:0,d=s+(r.limit?r.limit:1/0),f=e.queryPlan,g=!1;f.selectorSatisfiedByIndex||(g=(0,PE.Lr)(n.schema,e.query));var D=Gv(t.booleanIndexes,f,t.dexieDb._options.IDBKeyRange),S=f.index,P=[];if(yield t.dexieDb.transaction("r",t.dexieTable,function(){var Q=(0,rt.A)(function*(ye){var Et,we=ye.idbtrans.objectStore(mh);Et="["+S.map(Ht=>Ll(Ht)).join("+")+"]";var Dt=we.index(Et).openCursor(D);yield new Promise(Ht=>{Dt.onsuccess=function(En){var un=En.target.result;if(un){var Fe=Dp(t.booleanIndexes,un.value);(!g||g(Fe))&&P.push(Fe),f.sortSatisfiedByIndex&&P.length===d?Ht():un.continue()}else Ht()}})});return function(ye){return Q.apply(this,arguments)}}()),!f.sortSatisfiedByIndex){var j=(0,PE.Xw)(n.schema,e.query);P=P.sort(j)}return{documents:P=P.slice(s,d)}}),kE.apply(this,arguments)}function Ul(){return Ul=(0,rt.A)(function*(n,e){var t=yield n.internals,r=e.queryPlan,s=r.index,u=Gv(t.booleanIndexes,r,t.dexieDb._options.IDBKeyRange),d=-1;return yield t.dexieDb.transaction("r",t.dexieTable,function(){var f=(0,rt.A)(function*(g){var j,S=g.idbtrans.objectStore(mh);j="["+s.map(ye=>Ll(ye)).join("+")+"]";var Q=S.index(j).count(u);d=yield new Promise((ye,Ee)=>{Q.onsuccess=function(){ye(Q.result)},Q.onerror=we=>Ee(we)})});return function(g){return f.apply(this,arguments)}}()),d}),Ul.apply(this,arguments)}var xo=M(6893);const{isArray:FE}=Array;Promise.resolve(!1);var qv=Promise.resolve(!0),xa=Promise.resolve();function Fu(n,e){return n||(n=0),new Promise(function(t){return setTimeout(function(){return t(e)},n)})}function _h(){return Math.random().toString(36).substring(2)}var xp=0;function yh(){var n=1e3*Date.now();return n<=xp&&(n=xp+1),xp=n,n}var Yv={create:function kC(n){var e={time:yh(),messagesCallback:null,bc:new BroadcastChannel(n),subFns:[]};return e.bc.onmessage=function(t){e.messagesCallback&&e.messagesCallback(t.data)},e},close:function FC(n){n.bc.close(),n.subFns=[]},onMessage:function Xv(n,e){n.messagesCallback=e},postMessage:function LC(n,e){try{return n.bc.postMessage(e,!1),xa}catch(t){return Promise.reject(t)}},canBeUsed:function LE(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&"function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function VC(){return 150},microSeconds:yh},Zv=M(9556);function Lu(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=JSON.parse(JSON.stringify(n));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=45e3),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),n.idb&&"function"==typeof n.idb.onclose&&(e.idb.onclose=n.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=6e4),n.methods&&(e.methods=n.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=12e4),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var cc="messages",Vu={durability:"relaxed"};function BE(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Mp(n){n.commit&&n.commit()}function Hl(n){n.closed||jC(n).then(function(){return Fu(n.options.idb.fallbackInterval)}).then(function(){return Hl(n)})}function jC(n){return n.closed||!n.messagesCallback?xa:function aO(n,e){var t=n.transaction(cc,"readonly",Vu),r=t.objectStore(cc),s=[],u=IDBKeyRange.bound(e+1,1/0);if(r.getAll){var d=r.getAll(u);return new Promise(function(g,D){d.onerror=function(S){return D(S)},d.onsuccess=function(S){g(S.target.result)}})}return new Promise(function(g,D){var S=function f(){try{return u=IDBKeyRange.bound(e+1,1/0),r.openCursor(u)}catch{return r.openCursor()}}();S.onerror=function(P){return D(P)},S.onsuccess=function(P){var j=P.target.result;j?j.value.id<e+1?j.continue(e+1):(s.push(j.value),j.continue()):(Mp(t),g(s))}})}(n.db,n.lastCursorId).then(function(e){var t=e.filter(function(r){return!!r}).map(function(r){return r.id>n.lastCursorId&&(n.lastCursorId=r.id),r}).filter(function(r){return function dO(n,e){return!(n.uuid===e.uuid||e.eMIs.has(n.id)||n.data.time<e.messagesCallbackTime)}(r,n)}).sort(function(r,s){return r.time-s.time});return t.forEach(function(r){n.messagesCallback&&(n.eMIs.add(r.id),n.messagesCallback(r.data))}),xa})}var gO={create:function Gc(n,e){return e=Lu(e),function BC(n){var r=BE().open("pubkey.broadcast-channel-0-"+n);return r.onupgradeneeded=function(s){s.target.result.createObjectStore(cc,{keyPath:"id",autoIncrement:!0})},new Promise(function(s,u){r.onerror=function(d){return u(d)},r.onsuccess=function(){s(r.result)}})}(n).then(function(t){var r={closed:!1,lastCursorId:0,channelName:n,options:e,uuid:_h(),eMIs:new Zv.p4(2*e.idb.ttl),writeBlockPromise:xa,messagesCallback:null,readQueuePromises:[],db:t};return t.onclose=function(){r.closed=!0,e.idb.onclose&&e.idb.onclose()},Hl(r),r})},close:function hO(n){n.closed=!0,n.db.close()},onMessage:function pO(n,e,t){n.messagesCallbackTime=t,n.messagesCallback=e,jC(n)},postMessage:function fO(n,e){return n.writeBlockPromise=n.writeBlockPromise.then(function(){return function $l(n,e,t){var s={uuid:e,time:Date.now(),data:t},u=n.transaction([cc],"readwrite",Vu);return new Promise(function(d,f){u.oncomplete=function(){return d()},u.onerror=function(D){return f(D)},u.objectStore(cc).add(s),Mp(u)})}(n.db,n.uuid,e)}).then(function(){0===function iO(n,e){return Math.floor(Math.random()*(e-n+1)+n)}(0,10)&&function lO(n){return function uO(n,e){var t=Date.now()-e,r=n.transaction(cc,"readonly",Vu),s=r.objectStore(cc),u=[];return new Promise(function(d){s.openCursor().onsuccess=function(f){var g=f.target.result;if(g){var D=g.value;D.time<t?(u.push(D),g.continue()):(Mp(r),d(u))}else d(u)}})}(n.db,n.options.idb.ttl).then(function(e){return function cO(n,e){if(n.closed)return Promise.resolve([]);var r=n.db.transaction(cc,"readwrite",Vu).objectStore(cc);return Promise.all(e.map(function(s){var u=r.delete(s);return new Promise(function(d){u.onsuccess=function(){return d()}})}))}(n,e.map(function(t){return t.id}))})}(n)}),n.writeBlockPromise},canBeUsed:function mO(){return!!BE()},type:"idb",averageResponseTime:function UC(n){return 2*n.idb.fallbackInterval},microSeconds:yh};function Op(){var n;if(typeof window>"u")return null;try{n=window.localStorage,n=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return n}function uc(n){return"pubkey.broadcastChannel-"+n}function bO(){var n=Op();if(!n)return!1;try{var e="__broadcastchannel_check";n.setItem(e,"works"),n.removeItem(e)}catch{return!1}return!0}var UE={create:function zC(n,e){if(e=Lu(e),!bO())throw new Error("BroadcastChannel: localstorage cannot be used");var t=_h(),r=new Zv.p4(e.localstorage.removeTimeout),s={channelName:n,uuid:t,eMIs:r};return s.listener=function $C(n,e){var t=uc(n),r=function(u){u.key===t&&e(JSON.parse(u.newValue))};return window.addEventListener("storage",r),r}(n,function(u){s.messagesCallback&&u.uuid!==t&&(!u.token||r.has(u.token)||u.data.time&&u.data.time<s.messagesCallbackTime||(r.add(u.token),s.messagesCallback(u.data)))}),s},close:function KF(n){!function HC(n){window.removeEventListener("storage",n)}(n.listener)},onMessage:function WF(n,e,t){n.messagesCallbackTime=t,n.messagesCallback=e},postMessage:function Pp(n,e){return new Promise(function(t){Fu().then(function(){var r=uc(n.channelName),s={token:_h(),time:Date.now(),data:e,uuid:n.uuid},u=JSON.stringify(s);Op().setItem(r,u);var d=document.createEvent("Event");d.initEvent("storage",!0,!0),d.key=r,d.newValue=u,window.dispatchEvent(d),t()})})},canBeUsed:bO,type:"localstorage",averageResponseTime:function jE(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:yh},EO=yh,Jv=new Set,TO={create:function wO(n){var e={time:EO(),name:n,messagesCallback:null};return Jv.add(e),e},close:function IO(n){Jv.delete(n)},onMessage:function CO(n,e){n.messagesCallback=e},postMessage:function DO(n,e){return new Promise(function(t){return setTimeout(function(){Array.from(Jv).forEach(function(s){s.name===n.name&&s!==n&&s.messagesCallback&&s.time<e.time&&s.messagesCallback(e)}),t()},5)})},canBeUsed:function WC(){return!0},type:"simulate",averageResponseTime:function GC(){return 5},microSeconds:EO},qC=[Yv,gO,UE],Np=new Set,XC=0,kp=function(e,t){this.id=XC++,Np.add(this),this.name=e,this.options=Lu(t),this.method=function QC(n){var e=[].concat(n.methods,qC).filter(Boolean);if(n.type){if("simulate"===n.type)return TO;var t=e.find(function(s){return s.type===n.type});if(t)return t;throw new Error("method-type "+n.type+" not found")}n.webWorkerSupport||(e=e.filter(function(s){return"idb"!==s.type}));var r=e.find(function(s){return s.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(qC.map(function(s){return s.type})))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function ZC(n){var e=n.method.create(n.name,n.options);!function Ap(n){return n&&"function"==typeof n.then}(e)?n._state=e:(n._prepP=e,e.then(function(t){n._state=t}))}(this)};function YC(n,e,t){var s={time:n.method.microSeconds(),type:e,data:t};return(n._prepP?n._prepP:xa).then(function(){var d=n.method.postMessage(n._state,s);return n._uMP.add(d),d.catch().then(function(){return n._uMP.delete(d)}),d})}function $E(n){return n._addEL.message.length>0||n._addEL.internal.length>0}function JC(n,e,t){n._addEL[e].push(t),function SO(n){if(!n._iL&&$E(n)){var e=function(s){n._addEL[s.type].forEach(function(u){s.time>=u.time&&u.fn(s.data)})},t=n.method.microSeconds();n._prepP?n._prepP.then(function(){n._iL=!0,n.method.onMessage(n._state,e,t)}):(n._iL=!0,n.method.onMessage(n._state,e,t))}}(n)}function eT(n,e,t){n._addEL[e]=n._addEL[e].filter(function(r){return r!==t}),function AO(n){if(n._iL&&!$E(n)){n._iL=!1;var e=n.method.microSeconds();n.method.onMessage(n._state,null,e)}}(n)}kp._pubkey=!0,kp.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return YC(this,"message",e)},postInternal:function(e){return YC(this,"internal",e)},set onmessage(n){var t={time:this.method.microSeconds(),fn:n};eT(this,"message",this._onML),n&&"function"==typeof n?(this._onML=t,JC(this,"message",t)):this._onML=null},addEventListener:function(e,t){JC(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){eT(this,e,this._addEL[e].find(function(s){return s.fn===t}))},close:function(){var e=this;if(!this.closed){Np.delete(this),this.closed=!0;var t=this._prepP?this._prepP:xa;return this._onML=null,this._addEL.message=[],t.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(r){return r()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};var Fp=new Map;function xO(n,e,t,r){var s=Fp.get(e);return s||(s={bc:new kp(["RxDB:",n,t].join("|")),refs:new Set},Fp.set(e,s)),s.refs.add(r),s.bc}function tT(n,e){var t=Fp.get(n);if(t&&(t.refs.delete(e),0===t.refs.size))return Fp.delete(n),t.bc.close()}function Lp(n,e,t,r){if(e.multiInstance){var s=r||xO(n,e.databaseInstanceToken,t.databaseName,t),u=new Vn.B,d=j=>{j.storageName===n&&j.databaseName===e.databaseName&&j.collectionName===e.collectionName&&j.version===e.schema.version&&u.next(j.eventBulk)};s.addEventListener("message",d);var f=t.changeStream(),g=!1,D=f.subscribe(j=>{g||s.postMessage({storageName:n,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:j})});t.changeStream=function(){return u.asObservable().pipe(function $F(...n){return function UF(...n){const e=(0,Zd.lI)(n),t=(0,Zd.R0)(n,1/0);return n=function rO(n){return 1===n.length&&FE(n[0])?n[0]:n}(n),(0,ki.N)((r,s)=>{(0,at.U)(t)((0,vi.H)([r,...n],e)).subscribe(s)})}(...n)}(f))};var S=t.close.bind(t);t.close=(0,rt.A)(function*(){return g=!0,D.unsubscribe(),s.removeEventListener("message",d),r||(yield tT(e.databaseInstanceToken,t)),S()});var P=t.remove.bind(t);t.remove=(0,rt.A)(function*(){return g=!0,D.unsubscribe(),s.removeEventListener("message",d),r||(yield tT(e.databaseInstanceToken,t)),P()})}}var lc=M(7650),RO=(0,ku.t)(),HE=!1,nT=function(){function n(t,r,s,u,d,f,g,D){this.changes$=new Vn.B,this.instanceId=RO++,this.storage=t,this.databaseName=r,this.collectionName=s,this.schema=u,this.internals=d,this.options=f,this.settings=g,this.devMode=D,this.primaryPath=(0,Ns.xQ)(this.schema.primaryKey)}var e=n.prototype;return e.bulkWrite=function(){var t=(0,rt.A)(function*(s,u){var d=this;zl(this),!HE&&(!ME.P.premium||"string"!=typeof ME.P.premium||(yield(0,OE.V0)(ME.P.premium))!==ME.Y)&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join("\n")),HE=!0,s.forEach(j=>{if(!j.document._rev||j.previous&&!j.previous._rev)throw(0,lc.Br)("SNH",{args:{row:j}})});var f=yield this.internals,g={error:[]};this.devMode&&(s=s.map(j=>{var Q=(0,xo.C9)(j.document);return{previous:j.previous,document:Q}}));var S,D=s.map(j=>j.document[this.primaryPath]);if(yield f.dexieDb.transaction("rw",f.dexieTable,f.dexieAttachmentsTable,(0,rt.A)(function*(){var j=new Map;(yield Bl(d.internals,D)).forEach(we=>{var mt=we;return mt&&j.set(mt[d.primaryPath],mt),mt}),S=(0,xo.gi)(d,d.primaryPath,j,s,u),g.error=S.errors;var ye=[];S.bulkInsertDocs.forEach(we=>{ye.push(we.document)}),S.bulkUpdateDocs.forEach(we=>{ye.push(we.document)}),(ye=ye.map(we=>vh(f.booleanIndexes,we))).length>0&&(yield f.dexieTable.bulkPut(ye));var Ee=[];S.attachmentsAdd.forEach(we=>{Ee.push({id:jl(we.documentId,we.attachmentId),data:we.attachmentData.data})}),S.attachmentsUpdate.forEach(we=>{Ee.push({id:jl(we.documentId,we.attachmentId),data:we.attachmentData.data})}),yield f.dexieAttachmentsTable.bulkPut(Ee),yield f.dexieAttachmentsTable.bulkDelete(S.attachmentsRemove.map(we=>jl(we.documentId,we.attachmentId)))})),(S=(0,Lr.ZN)(S)).eventBulk.events.length>0){var P=(0,Lr.ZN)(S.newestRow).document;S.eventBulk.checkpoint={id:P[this.primaryPath],lwt:P._meta.lwt},S.eventBulk.endTime=(0,ku.t)(),this.changes$.next(S.eventBulk)}return g});return function r(s,u){return t.apply(this,arguments)}}(),e.findDocumentsById=function(){var t=(0,rt.A)(function*(s,u){var d=this;zl(this);var f=yield this.internals,g=[];return yield f.dexieDb.transaction("r",f.dexieTable,(0,rt.A)(function*(){(yield Bl(d.internals,s)).forEach(S=>{S&&(!S._deleted||u)&&g.push(S)})})),g});return function r(s,u){return t.apply(this,arguments)}}(),e.query=function(r){return zl(this),NE(this,r)},e.count=function(){var t=(0,rt.A)(function*(s){if(s.queryPlan.selectorSatisfiedByIndex){var u=yield function nO(n,e){return Ul.apply(this,arguments)}(this,s);return{count:u,mode:"fast"}}return{count:(yield NE(this,s)).documents.length,mode:"slow"}});return function r(s){return t.apply(this,arguments)}}(),e.changeStream=function(){return zl(this),this.changes$.asObservable()},e.cleanup=function(){var t=(0,rt.A)(function*(s){var u=this;zl(this);var d=yield this.internals;return yield d.dexieDb.transaction("rw",d.dexieTable,(0,rt.A)(function*(){var f=(0,ku.t)()-s,g=yield d.dexieTable.where("_meta.lwt").below(f).toArray(),D=[];g.forEach(S=>{"1"===S._deleted&&D.push(S[u.primaryPath])}),yield d.dexieTable.bulkDelete(D)})),!0});return function r(s){return t.apply(this,arguments)}}(),e.getAttachmentData=function(){var t=(0,rt.A)(function*(s,u,d){zl(this);var f=yield this.internals,g=jl(s,u);return yield f.dexieDb.transaction("r",f.dexieAttachmentsTable,(0,rt.A)(function*(){var D=yield f.dexieAttachmentsTable.get(g);if(D)return D.data;throw new Error("attachment missing documentId: "+s+" attachmentId: "+u)}))});return function r(s,u,d){return t.apply(this,arguments)}}(),e.remove=function(){var t=(0,rt.A)(function*(){zl(this);var s=yield this.internals;return yield s.dexieTable.clear(),this.close()});return function r(){return t.apply(this,arguments)}}(),e.close=function(){var r=this;return this.closed||(this.closed=(0,rt.A)(function*(){r.changes$.complete(),yield function jF(n){return gh.apply(this,arguments)}(r.internals)})()),this.closed},e.conflictResultionTasks=function(){return new Vn.B},e.resolveConflictResultionTask=function(){var t=(0,rt.A)(function*(s){});return function r(s){return t.apply(this,arguments)}}(),n}();function zE(){return(zE=(0,rt.A)(function*(n,e,t){var r=function BF(n,e,t,r){var s="rxdb-dexie-"+n+"--"+r.version+"--"+e,u=(0,xE.q)(RC,s,()=>{var d=(0,rt.A)(function*(){var f=(0,li.FD)(t);f.autoOpen=!1;var g=new Hv(s,f),D={[mh]:Wv(r),changes:"++sequence, id",[AC]:"id"};return g.version(1).stores(D),yield g.open(),{dexieDb:g,dexieTable:g[mh],dexieAttachmentsTable:g[AC],booleanIndexes:Sp(r)}})();return RC.set(s,u),zv.set(u,0),d});return u}(e.databaseName,e.collectionName,t,e.schema),s=new nT(n,e.databaseName,e.collectionName,e.schema,r,e.options,t,e.devMode);return yield Lp("dexie",e,s),Promise.resolve(s)})).apply(this,arguments)}function zl(n){if(n.closed)throw new Error("RxStorageInstanceDexie is closed "+n.databaseName+"-"+n.collectionName)}var OO=M(6052),PO=function(){function n(t){this.name="dexie",this.rxdbVersion=OO.o,this.settings=t}return n.prototype.createStorageInstance=function(r){return(0,xo.pZ)(r),function MO(n,e,t){return zE.apply(this,arguments)}(this,r,this.settings)},n}();function NO(n={}){return new PO(n)}var KE=M(9182),XF=M(5908),YF=M(5672),WE=M(4395),kO=M(7396),FO=M(3896),e_=M(2284),ZF={RxSchema:KE.wJ.prototype,RxDocument:XF.ky,RxQuery:YF.Mh.prototype,RxCollection:WE.wm.prototype,RxDatabase:kO.lB.prototype},rT=new Set,iT=new Set;function Vp(n){if((0,e_.Xi)("preAddRxPlugin",{plugin:n,plugins:rT}),!rT.has(n)){if(iT.has(n.name))throw(0,lc.Br)("PL3",{name:n.name,plugin:n});if(rT.add(n),iT.add(n.name),!n.rxdb)throw(0,lc.JX)("PL1",{plugin:n});n.init&&n.init(),n.prototypes&&Object.entries(n.prototypes).forEach(([e,t])=>t(ZF[e])),n.overwritable&&Object.assign(FO.h,n.overwritable),n.hooks&&Object.entries(n.hooks).forEach(([e,t])=>{t.after&&e_.r[e].push(t.after),t.before&&e_.r[e].unshift(t.before)})}}const GE={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var Bp,oT=new Uint8Array(16);function LO(){if(!Bp&&!(Bp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bp(oT)}for(var fo=[],n_=0;n_<256;++n_)fo.push((n_+256).toString(16).slice(1));const JF=function sT(n,e,t){if(GE.randomUUID&&!e&&!n)return GE.randomUUID();var r=(n=n||{}).random||(n.rng||LO)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){t=t||0;for(var s=0;s<16;++s)e[t+s]=r[s];return e}return function Kl(n,e=0){return(fo[n[e+0]]+fo[n[e+1]]+fo[n[e+2]]+fo[n[e+3]]+"-"+fo[n[e+4]]+fo[n[e+5]]+"-"+fo[n[e+6]]+fo[n[e+7]]+"-"+fo[n[e+8]]+fo[n[e+9]]+"-"+fo[n[e+10]]+fo[n[e+11]]+fo[n[e+12]]+fo[n[e+13]]+fo[n[e+14]]+fo[n[e+15]]).toLowerCase()}(r)},QE=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):55296==(64512&s)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&n.charCodeAt(++r)),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e},VO={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const u=n[s],d=s+1<n.length,f=d?n[s+1]:0,g=s+2<n.length,D=g?n[s+2]:0;let j=(15&f)<<2|D>>6,Q=63&D;g||(Q=64,d||(j=64)),r.push(t[u>>2],t[(3&u)<<4|f>>4],t[j],t[Q])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(QE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const u=n[t++];e[r++]=String.fromCharCode((31&s)<<6|63&u)}else if(s>239&&s<365){const g=((7&s)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(1023&g))}else{const u=n[t++],d=n[t++];e[r++]=String.fromCharCode((15&s)<<12|(63&u)<<6|63&d)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const u=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const D=s<n.length?t[n.charAt(s)]:64;++s;const P=s<n.length?t[n.charAt(s)]:64;if(++s,null==u||null==f||null==D||null==P)throw new r_;r.push(u<<2|f>>4),64!==D&&(r.push(f<<4&240|D>>2),64!==P&&r.push(D<<6&192|P))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class r_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bh=function(n){return function(n){const e=QE(n);return VO.encodeByteArray(e,!0)}(n).replace(/\./g,"")},Up=()=>{try{return function ZE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&function(n){try{return VO.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},JE=()=>{var n;return null===(n=Up())||void 0===n?void 0:n.config};class Eh{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}class Wl extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,Wl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$p.prototype.create)}}class $p{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,u=this.errors[e],d=u?function Ih(n,e){return n.replace(pT,(t,r)=>{const s=e[r];return null!=s?String(s):`<${r}?>`})}(u,r):"Error";return new Wl(s,`${this.serviceName}: ${d} (${s}).`,r)}}const pT=/\{\$([^}]+)}/g;function Dh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const u=n[s],d=e[s];if(kn(u)&&kn(d)){if(!Dh(u,d))return!1}else if(u!==d)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function kn(n){return null!==n&&"object"==typeof n}function fs(n){return n&&n._delegate?n._delegate:n}class Wp{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ql="[DEFAULT]";class ps{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Eh;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(s)return null;throw u}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function oP(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ql})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:s});r.resolve(u)}catch{}}}}clearInstance(e=ql){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,rt.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=ql){return this.instances.has(e)}getOptions(e=ql){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,d]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(u)&&d.resolve(s);return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),u=null!==(r=this.onInitCallbacks.get(s))&&void 0!==r?r:new Set;u.add(e),this.onInitCallbacks.set(s,u);const d=this.instances.get(s);return d&&e(d,s),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===ql?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=ql){return this.component?this.component.multipleInstances?e:ql:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ps(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Gp=[];var tr=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(tr||{});const ET={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},sP=tr.INFO,aP={[tr.DEBUG]:"log",[tr.VERBOSE]:"log",[tr.INFO]:"info",[tr.WARN]:"warn",[tr.ERROR]:"error"},wT=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),s=aP[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${r}]  ${n.name}:`,...t)};class IT{constructor(e){this.name=e,this._logLevel=sP,this._logHandler=wT,this._userLogHandler=null,Gp.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tr))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?ET[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tr.DEBUG,...e),this._logHandler(this,tr.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tr.VERBOSE,...e),this._logHandler(this,tr.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tr.INFO,...e),this._logHandler(this,tr.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tr.WARN,...e),this._logHandler(this,tr.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tr.ERROR,...e),this._logHandler(this,tr.ERROR,...e)}}const cP=(n,e)=>e.some(t=>n instanceof t);let CT,TT;const Ra=new WeakMap,qp=new WeakMap,ST=new WeakMap,s0=new WeakMap,l_=new WeakMap;let Qp={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return qp.get(n);if("objectStoreNames"===e)return n.objectStoreNames||ST.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qc(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function RT(n){return"function"==typeof n?function xT(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function lP(){return TT||(TT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(Th(this),e),Qc(Ra.get(this))}:function(...e){return Qc(n.apply(Th(this),e))}:function(e,...t){const r=n.call(Th(this),e,...t);return ST.set(r,e.sort?e.sort():[e]),Qc(r)}}(n):(n instanceof IDBTransaction&&function d_(n){if(qp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",d),n.removeEventListener("abort",d)},u=()=>{t(),s()},d=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",u),n.addEventListener("error",d),n.addEventListener("abort",d)});qp.set(n,e)}(n),cP(n,function uP(){return CT||(CT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,Qp):n)}function Qc(n){if(n instanceof IDBRequest)return function AT(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",u),n.removeEventListener("error",d)},u=()=>{t(Qc(n.result)),s()},d=()=>{r(n.error),s()};n.addEventListener("success",u),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&Ra.set(t,n)}).catch(()=>{}),l_.set(e,n),e}(n);if(s0.has(n))return s0.get(n);const e=RT(n);return e!==n&&(s0.set(n,e),l_.set(e,n)),e}const Th=n=>l_.get(n),dP=["get","getKey","getAll","getAllKeys","count"],hP=["put","add","delete","clear"],Xp=new Map;function MT(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(Xp.get(e))return Xp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=hP.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!dP.includes(t))return;const u=function(){var d=(0,rt.A)(function*(f,...g){const D=this.transaction(f,s?"readwrite":"readonly");let S=D.store;return r&&(S=S.index(g.shift())),(yield Promise.all([S[t](...g),s&&D.done]))[0]});return function(g){return d.apply(this,arguments)}}();return Xp.set(e,u),u}!function mL(n){Qp=n(Qp)}(n=>({...n,get:(e,t,r)=>MT(e,t)||n.get(e,t,r),has:(e,t)=>!!MT(e,t)||n.has(e,t)}));class Sh{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function OT(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const hc="@firebase/app",Xc=new IT("@firebase/app"),f_="[DEFAULT]",p_={[hc]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Yc=new Map,tm=new Map,m_=new Map;function TP(n,e){try{n.container.addComponent(e)}catch(t){Xc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function g_(n){const e=n.name;if(m_.has(e))return Xc.debug(`There were multiple attempts to register component ${e}.`),!1;m_.set(e,n);for(const t of Yc.values())TP(t,n);for(const t of tm.values())TP(t,n);return!0}const ms=new $p("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ah{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wp("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}function l0(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:f_,automaticDataCollectionEnabled:!1},e),s=r.name;if("string"!=typeof s||!s)throw ms.create("bad-app-name",{appName:String(s)});if(t||(t=JE()),!t)throw ms.create("no-options");const u=Yc.get(s);if(u){if(Dh(t,u.options)&&Dh(r,u.config))return u;throw ms.create("duplicate-app",{appName:s})}const d=new fL(s);for(const g of m_.values())d.addComponent(g);const f=new Ah(t,r,d);return Yc.set(s,f),f}function Uu(n,e,t){var r;let s=null!==(r=p_[n])&&void 0!==r?r:n;t&&(s+=`-${t}`);const u=s.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const f=[`Unable to register library "${s}" with version "${e}":`];return u&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),u&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Xc.warn(f.join(" "))}g_(new Wp(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const MP="firebase-heartbeat-database",OP=1,rm="firebase-heartbeat-store";let Ql=null;function UT(){return Ql||(Ql=function a0(n,e,{blocked:t,upgrade:r,blocking:s,terminated:u}={}){const d=indexedDB.open(n,e),f=Qc(d);return r&&d.addEventListener("upgradeneeded",g=>{r(Qc(d.result),g.oldVersion,g.newVersion,Qc(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{u&&g.addEventListener("close",()=>u()),s&&g.addEventListener("versionchange",D=>s(D.oldVersion,D.newVersion,D))}).catch(()=>{}),f}(MP,OP,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(rm)}catch(t){console.warn(t)}}}).catch(n=>{throw ms.create("idb-open",{originalErrorMessage:n.message})})),Ql}function d0(){return(d0=(0,rt.A)(function*(n){try{const t=(yield UT()).transaction(rm),r=yield t.objectStore(rm).get(h0(n));return yield t.done,r}catch(e){if(e instanceof Wl)Xc.warn(e.message);else{const t=ms.create("idb-get",{originalErrorMessage:e?.message});Xc.warn(t.message)}}})).apply(this,arguments)}function im(n,e){return b_.apply(this,arguments)}function b_(){return(b_=(0,rt.A)(function*(n,e){try{const r=(yield UT()).transaction(rm,"readwrite");yield r.objectStore(rm).put(e,h0(n)),yield r.done}catch(t){if(t instanceof Wl)Xc.warn(t.message);else{const r=ms.create("idb-set",{originalErrorMessage:t?.message});Xc.warn(r.message)}}})).apply(this,arguments)}function h0(n){return`${n.name}!${n.options.appId}`}class HT{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new kP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,rt.A)(function*(){var t,r;const u=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=E_();if((null!=(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(e._heartbeatsCache=yield e._heartbeatsCachePromise,null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)))&&e._heartbeatsCache.lastSentHeartbeatDate!==d&&!e._heartbeatsCache.heartbeats.some(f=>f.date===d))return e._heartbeatsCache.heartbeats.push({date:d,agent:u}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(f=>{const g=new Date(f.date).valueOf();return Date.now()-g<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,rt.A)(function*(){var t;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=E_(),{heartbeatsToSend:s,unsentEntries:u}=function w_(n,e=1024){const t=[];let r=n.slice();for(const s of n){const u=t.find(d=>d.agent===s.agent);if(u){if(u.dates.push(s.date),zT(t)>e){u.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),zT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),d=bh(JSON.stringify({version:2,heartbeats:s}));return e._heartbeatsCache.lastSentHeartbeatDate=r,u.length>0?(e._heartbeatsCache.heartbeats=u,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),d})()}}function E_(){return(new Date).toISOString().substring(0,10)}class kP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,rt.A)(function*(){return!!function t0(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function fT(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var u;e((null===(u=s.error)||void 0===u?void 0:u.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,rt.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function PP(n){return d0.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,rt.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const u=yield t.read();return im(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:u.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,rt.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const u=yield t.read();return im(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...e.heartbeats]})}})()}}function zT(n){return bh(JSON.stringify({version:2,heartbeats:n})).length}!function FP(n){g_(new Wp("platform-logger",e=>new Sh(e),"PRIVATE")),g_(new Wp("heartbeat",e=>new HT(e),"PRIVATE")),Uu(hc,"0.10.7",n),Uu(hc,"0.10.7","esm2017"),Uu("fire-js","")}(""),Uu("firebase","10.12.4","app");var Ma,f0,KT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},I_={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function s(Fe,ue,Ce){Ce||(Ce=0);var Le=Array(16);if("string"==typeof ue)for(var ze=0;16>ze;++ze)Le[ze]=ue.charCodeAt(Ce++)|ue.charCodeAt(Ce++)<<8|ue.charCodeAt(Ce++)<<16|ue.charCodeAt(Ce++)<<24;else for(ze=0;16>ze;++ze)Le[ze]=ue[Ce++]|ue[Ce++]<<8|ue[Ce++]<<16|ue[Ce++]<<24;var ot=Fe.g[3],De=(ue=Fe.g[0])+(ot^(Ce=Fe.g[1])&((ze=Fe.g[2])^ot))+Le[0]+3614090360&4294967295;De=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=(Ce=(ze=(ot=(ue=Ce+(De<<7&4294967295|De>>>25))+((De=ot+(ze^ue&(Ce^ze))+Le[1]+3905402710&4294967295)<<12&4294967295|De>>>20))+((De=ze+(Ce^ot&(ue^Ce))+Le[2]+606105819&4294967295)<<17&4294967295|De>>>15))+((De=Ce+(ue^ze&(ot^ue))+Le[3]+3250441966&4294967295)<<22&4294967295|De>>>10))+((De=ue+(ot^Ce&(ze^ot))+Le[4]+4118548399&4294967295)<<7&4294967295|De>>>25))+((De=ot+(ze^ue&(Ce^ze))+Le[5]+1200080426&4294967295)<<12&4294967295|De>>>20))+((De=ze+(Ce^ot&(ue^Ce))+Le[6]+2821735955&4294967295)<<17&4294967295|De>>>15))+((De=Ce+(ue^ze&(ot^ue))+Le[7]+4249261313&4294967295)<<22&4294967295|De>>>10))+((De=ue+(ot^Ce&(ze^ot))+Le[8]+1770035416&4294967295)<<7&4294967295|De>>>25))+((De=ot+(ze^ue&(Ce^ze))+Le[9]+2336552879&4294967295)<<12&4294967295|De>>>20))+((De=ze+(Ce^ot&(ue^Ce))+Le[10]+4294925233&4294967295)<<17&4294967295|De>>>15))+((De=Ce+(ue^ze&(ot^ue))+Le[11]+2304563134&4294967295)<<22&4294967295|De>>>10))+((De=ue+(ot^Ce&(ze^ot))+Le[12]+1804603682&4294967295)<<7&4294967295|De>>>25))+((De=ot+(ze^ue&(Ce^ze))+Le[13]+4254626195&4294967295)<<12&4294967295|De>>>20))+((De=ze+(Ce^ot&(ue^Ce))+Le[14]+2792965006&4294967295)<<17&4294967295|De>>>15))+((De=Ce+(ue^ze&(ot^ue))+Le[15]+1236535329&4294967295)<<22&4294967295|De>>>10))+((De=ue+(ze^ot&(Ce^ze))+Le[1]+4129170786&4294967295)<<5&4294967295|De>>>27))+((De=ot+(Ce^ze&(ue^Ce))+Le[6]+3225465664&4294967295)<<9&4294967295|De>>>23))+((De=ze+(ue^Ce&(ot^ue))+Le[11]+643717713&4294967295)<<14&4294967295|De>>>18))+((De=Ce+(ot^ue&(ze^ot))+Le[0]+3921069994&4294967295)<<20&4294967295|De>>>12))+((De=ue+(ze^ot&(Ce^ze))+Le[5]+3593408605&4294967295)<<5&4294967295|De>>>27))+((De=ot+(Ce^ze&(ue^Ce))+Le[10]+38016083&4294967295)<<9&4294967295|De>>>23))+((De=ze+(ue^Ce&(ot^ue))+Le[15]+3634488961&4294967295)<<14&4294967295|De>>>18))+((De=Ce+(ot^ue&(ze^ot))+Le[4]+3889429448&4294967295)<<20&4294967295|De>>>12))+((De=ue+(ze^ot&(Ce^ze))+Le[9]+568446438&4294967295)<<5&4294967295|De>>>27))+((De=ot+(Ce^ze&(ue^Ce))+Le[14]+3275163606&4294967295)<<9&4294967295|De>>>23))+((De=ze+(ue^Ce&(ot^ue))+Le[3]+4107603335&4294967295)<<14&4294967295|De>>>18))+((De=Ce+(ot^ue&(ze^ot))+Le[8]+1163531501&4294967295)<<20&4294967295|De>>>12))+((De=ue+(ze^ot&(Ce^ze))+Le[13]+2850285829&4294967295)<<5&4294967295|De>>>27))+((De=ot+(Ce^ze&(ue^Ce))+Le[2]+4243563512&4294967295)<<9&4294967295|De>>>23))+((De=ze+(ue^Ce&(ot^ue))+Le[7]+1735328473&4294967295)<<14&4294967295|De>>>18))+((De=Ce+(ot^ue&(ze^ot))+Le[12]+2368359562&4294967295)<<20&4294967295|De>>>12))+((De=ue+(Ce^ze^ot)+Le[5]+4294588738&4294967295)<<4&4294967295|De>>>28))+((De=ot+(ue^Ce^ze)+Le[8]+2272392833&4294967295)<<11&4294967295|De>>>21))+((De=ze+(ot^ue^Ce)+Le[11]+1839030562&4294967295)<<16&4294967295|De>>>16))+((De=Ce+(ze^ot^ue)+Le[14]+4259657740&4294967295)<<23&4294967295|De>>>9))+((De=ue+(Ce^ze^ot)+Le[1]+2763975236&4294967295)<<4&4294967295|De>>>28))+((De=ot+(ue^Ce^ze)+Le[4]+1272893353&4294967295)<<11&4294967295|De>>>21))+((De=ze+(ot^ue^Ce)+Le[7]+4139469664&4294967295)<<16&4294967295|De>>>16))+((De=Ce+(ze^ot^ue)+Le[10]+3200236656&4294967295)<<23&4294967295|De>>>9))+((De=ue+(Ce^ze^ot)+Le[13]+681279174&4294967295)<<4&4294967295|De>>>28))+((De=ot+(ue^Ce^ze)+Le[0]+3936430074&4294967295)<<11&4294967295|De>>>21))+((De=ze+(ot^ue^Ce)+Le[3]+3572445317&4294967295)<<16&4294967295|De>>>16))+((De=Ce+(ze^ot^ue)+Le[6]+76029189&4294967295)<<23&4294967295|De>>>9))+((De=ue+(Ce^ze^ot)+Le[9]+3654602809&4294967295)<<4&4294967295|De>>>28))+((De=ot+(ue^Ce^ze)+Le[12]+3873151461&4294967295)<<11&4294967295|De>>>21))+((De=ze+(ot^ue^Ce)+Le[15]+530742520&4294967295)<<16&4294967295|De>>>16))+((De=Ce+(ze^ot^ue)+Le[2]+3299628645&4294967295)<<23&4294967295|De>>>9))+((De=ue+(ze^(Ce|~ot))+Le[0]+4096336452&4294967295)<<6&4294967295|De>>>26))+((De=ot+(Ce^(ue|~ze))+Le[7]+1126891415&4294967295)<<10&4294967295|De>>>22))+((De=ze+(ue^(ot|~Ce))+Le[14]+2878612391&4294967295)<<15&4294967295|De>>>17))+((De=Ce+(ot^(ze|~ue))+Le[5]+4237533241&4294967295)<<21&4294967295|De>>>11))+((De=ue+(ze^(Ce|~ot))+Le[12]+1700485571&4294967295)<<6&4294967295|De>>>26))+((De=ot+(Ce^(ue|~ze))+Le[3]+2399980690&4294967295)<<10&4294967295|De>>>22))+((De=ze+(ue^(ot|~Ce))+Le[10]+4293915773&4294967295)<<15&4294967295|De>>>17))+((De=Ce+(ot^(ze|~ue))+Le[1]+2240044497&4294967295)<<21&4294967295|De>>>11))+((De=ue+(ze^(Ce|~ot))+Le[8]+1873313359&4294967295)<<6&4294967295|De>>>26))+((De=ot+(Ce^(ue|~ze))+Le[15]+4264355552&4294967295)<<10&4294967295|De>>>22))+((De=ze+(ue^(ot|~Ce))+Le[6]+2734768916&4294967295)<<15&4294967295|De>>>17))+((De=Ce+(ot^(ze|~ue))+Le[13]+1309151649&4294967295)<<21&4294967295|De>>>11))+((ot=(ue=Ce+((De=ue+(ze^(Ce|~ot))+Le[4]+4149444226&4294967295)<<6&4294967295|De>>>26))+((De=ot+(Ce^(ue|~ze))+Le[11]+3174756917&4294967295)<<10&4294967295|De>>>22))^((ze=ot+((De=ze+(ue^(ot|~Ce))+Le[2]+718787259&4294967295)<<15&4294967295|De>>>17))|~ue))+Le[9]+3951481745&4294967295,Fe.g[0]=Fe.g[0]+ue&4294967295,Fe.g[1]=Fe.g[1]+(ze+(De<<21&4294967295|De>>>11))&4294967295,Fe.g[2]=Fe.g[2]+ze&4294967295,Fe.g[3]=Fe.g[3]+ot&4294967295}function d(Fe,ue){this.h=ue;for(var Ce=[],Le=!0,ze=Fe.length-1;0<=ze;ze--){var ot=0|Fe[ze];Le&&ot==ue||(Ce[ze]=ot,Le=!1)}this.g=Ce}(function e(Fe,ue){function Ce(){}Ce.prototype=ue.prototype,Fe.D=ue.prototype,Fe.prototype=new Ce,Fe.prototype.constructor=Fe,Fe.C=function(Le,ze,ot){for(var De=Array(arguments.length-2),fr=2;fr<arguments.length;fr++)De[fr-2]=arguments[fr];return ue.prototype[ze].apply(Le,De)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(Fe,ue){void 0===ue&&(ue=Fe.length);for(var Ce=ue-this.blockSize,Le=this.B,ze=this.h,ot=0;ot<ue;){if(0==ze)for(;ot<=Ce;)s(this,Fe,ot),ot+=this.blockSize;if("string"==typeof Fe){for(;ot<ue;)if(Le[ze++]=Fe.charCodeAt(ot++),ze==this.blockSize){s(this,Le),ze=0;break}}else for(;ot<ue;)if(Le[ze++]=Fe[ot++],ze==this.blockSize){s(this,Le),ze=0;break}}this.h=ze,this.o+=ue},r.prototype.v=function(){var Fe=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Fe[0]=128;for(var ue=1;ue<Fe.length-8;++ue)Fe[ue]=0;var Ce=8*this.o;for(ue=Fe.length-8;ue<Fe.length;++ue)Fe[ue]=255&Ce,Ce/=256;for(this.u(Fe),Fe=Array(16),ue=Ce=0;4>ue;++ue)for(var Le=0;32>Le;Le+=8)Fe[Ce++]=this.g[ue]>>>Le&255;return Fe};var f={};function g(Fe){return-128<=Fe&&128>Fe?function u(Fe,ue){var Ce=f;return Object.prototype.hasOwnProperty.call(Ce,Fe)?Ce[Fe]:Ce[Fe]=ue(Fe)}(Fe,function(ue){return new d([0|ue],0>ue?-1:0)}):new d([0|Fe],0>Fe?-1:0)}function D(Fe){if(isNaN(Fe)||!isFinite(Fe))return P;if(0>Fe)return we(D(-Fe));for(var ue=[],Ce=1,Le=0;Fe>=Ce;Le++)ue[Le]=Fe/Ce|0,Ce*=4294967296;return new d(ue,0)}var P=g(0),j=g(1),Q=g(16777216);function ye(Fe){if(0!=Fe.h)return!1;for(var ue=0;ue<Fe.g.length;ue++)if(0!=Fe.g[ue])return!1;return!0}function Ee(Fe){return-1==Fe.h}function we(Fe){for(var ue=Fe.g.length,Ce=[],Le=0;Le<ue;Le++)Ce[Le]=~Fe.g[Le];return new d(Ce,~Fe.h).add(j)}function mt(Fe,ue){return Fe.add(we(ue))}function Et(Fe,ue){for(;(65535&Fe[ue])!=Fe[ue];)Fe[ue+1]+=Fe[ue]>>>16,Fe[ue]&=65535,ue++}function Dt(Fe,ue){this.g=Fe,this.h=ue}function Ht(Fe,ue){if(ye(ue))throw Error("division by zero");if(ye(Fe))return new Dt(P,P);if(Ee(Fe))return ue=Ht(we(Fe),ue),new Dt(we(ue.g),we(ue.h));if(Ee(ue))return ue=Ht(Fe,we(ue)),new Dt(we(ue.g),ue.h);if(30<Fe.g.length){if(Ee(Fe)||Ee(ue))throw Error("slowDivide_ only works with positive integers.");for(var Ce=j,Le=ue;0>=Le.l(Fe);)Ce=En(Ce),Le=En(Le);var ze=un(Ce,1),ot=un(Le,1);for(Le=un(Le,2),Ce=un(Ce,2);!ye(Le);){var De=ot.add(Le);0>=De.l(Fe)&&(ze=ze.add(Ce),ot=De),Le=un(Le,1),Ce=un(Ce,1)}return ue=mt(Fe,ze.j(ue)),new Dt(ze,ue)}for(ze=P;0<=Fe.l(ue);){for(Ce=Math.max(1,Math.floor(Fe.m()/ue.m())),Le=48>=(Le=Math.ceil(Math.log(Ce)/Math.LN2))?1:Math.pow(2,Le-48),De=(ot=D(Ce)).j(ue);Ee(De)||0<De.l(Fe);)De=(ot=D(Ce-=Le)).j(ue);ye(ot)&&(ot=j),ze=ze.add(ot),Fe=mt(Fe,De)}return new Dt(ze,Fe)}function En(Fe){for(var ue=Fe.g.length+1,Ce=[],Le=0;Le<ue;Le++)Ce[Le]=Fe.i(Le)<<1|Fe.i(Le-1)>>>31;return new d(Ce,Fe.h)}function un(Fe,ue){var Ce=ue>>5;ue%=32;for(var Le=Fe.g.length-Ce,ze=[],ot=0;ot<Le;ot++)ze[ot]=0<ue?Fe.i(ot+Ce)>>>ue|Fe.i(ot+Ce+1)<<32-ue:Fe.i(ot+Ce);return new d(ze,Fe.h)}(n=d.prototype).m=function(){if(Ee(this))return-we(this).m();for(var Fe=0,ue=1,Ce=0;Ce<this.g.length;Ce++){var Le=this.i(Ce);Fe+=(0<=Le?Le:4294967296+Le)*ue,ue*=4294967296}return Fe},n.toString=function(Fe){if(2>(Fe=Fe||10)||36<Fe)throw Error("radix out of range: "+Fe);if(ye(this))return"0";if(Ee(this))return"-"+we(this).toString(Fe);for(var ue=D(Math.pow(Fe,6)),Ce=this,Le="";;){var ze=Ht(Ce,ue).g,ot=((0<(Ce=mt(Ce,ze.j(ue))).g.length?Ce.g[0]:Ce.h)>>>0).toString(Fe);if(ye(Ce=ze))return ot+Le;for(;6>ot.length;)ot="0"+ot;Le=ot+Le}},n.i=function(Fe){return 0>Fe?0:Fe<this.g.length?this.g[Fe]:this.h},n.l=function(Fe){return Ee(Fe=mt(this,Fe))?-1:ye(Fe)?0:1},n.abs=function(){return Ee(this)?we(this):this},n.add=function(Fe){for(var ue=Math.max(this.g.length,Fe.g.length),Ce=[],Le=0,ze=0;ze<=ue;ze++){var ot=Le+(65535&this.i(ze))+(65535&Fe.i(ze)),De=(ot>>>16)+(this.i(ze)>>>16)+(Fe.i(ze)>>>16);Le=De>>>16,Ce[ze]=(De&=65535)<<16|(ot&=65535)}return new d(Ce,-2147483648&Ce[Ce.length-1]?-1:0)},n.j=function(Fe){if(ye(this)||ye(Fe))return P;if(Ee(this))return Ee(Fe)?we(this).j(we(Fe)):we(we(this).j(Fe));if(Ee(Fe))return we(this.j(we(Fe)));if(0>this.l(Q)&&0>Fe.l(Q))return D(this.m()*Fe.m());for(var ue=this.g.length+Fe.g.length,Ce=[],Le=0;Le<2*ue;Le++)Ce[Le]=0;for(Le=0;Le<this.g.length;Le++)for(var ze=0;ze<Fe.g.length;ze++){var ot=this.i(Le)>>>16,De=65535&this.i(Le),fr=Fe.i(ze)>>>16,_s=65535&Fe.i(ze);Ce[2*Le+2*ze]+=De*_s,Et(Ce,2*Le+2*ze),Ce[2*Le+2*ze+1]+=ot*_s,Et(Ce,2*Le+2*ze+1),Ce[2*Le+2*ze+1]+=De*fr,Et(Ce,2*Le+2*ze+1),Ce[2*Le+2*ze+2]+=ot*fr,Et(Ce,2*Le+2*ze+2)}for(Le=0;Le<ue;Le++)Ce[Le]=Ce[2*Le+1]<<16|Ce[2*Le];for(Le=ue;Le<2*ue;Le++)Ce[Le]=0;return new d(Ce,0)},n.A=function(Fe){return Ht(this,Fe).h},n.and=function(Fe){for(var ue=Math.max(this.g.length,Fe.g.length),Ce=[],Le=0;Le<ue;Le++)Ce[Le]=this.i(Le)&Fe.i(Le);return new d(Ce,this.h&Fe.h)},n.or=function(Fe){for(var ue=Math.max(this.g.length,Fe.g.length),Ce=[],Le=0;Le<ue;Le++)Ce[Le]=this.i(Le)|Fe.i(Le);return new d(Ce,this.h|Fe.h)},n.xor=function(Fe){for(var ue=Math.max(this.g.length,Fe.g.length),Ce=[],Le=0;Le<ue;Le++)Ce[Le]=this.i(Le)^Fe.i(Le);return new d(Ce,this.h^Fe.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,f0=I_.Md5=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=D,d.fromString=function S(Fe,ue){if(0==Fe.length)throw Error("number format error: empty string");if(2>(ue=ue||10)||36<ue)throw Error("radix out of range: "+ue);if("-"==Fe.charAt(0))return we(S(Fe.substring(1),ue));if(0<=Fe.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ce=D(Math.pow(ue,8)),Le=P,ze=0;ze<Fe.length;ze+=8){var ot=Math.min(8,Fe.length-ze),De=parseInt(Fe.substring(ze,ze+ot),ue);8>ot?(ot=D(Math.pow(ue,ot)),Le=Le.j(ot).add(D(De))):Le=(Le=Le.j(Ce)).add(D(De))}return Le},Ma=I_.Integer=d}).apply(typeof KT<"u"?KT:typeof self<"u"?self:typeof window<"u"?window:{});var xh,sm,D_,WT,am,cm,GT,p0,qT,om=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zc={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(v,x,F){return v==Array.prototype||v==Object.prototype||(v[x]=F.value),v},r=function t(v){v=["object"==typeof globalThis&&globalThis,v,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof om&&om];for(var x=0;x<v.length;++x){var F=v[x];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}(this);!function s(v,x){if(x)e:{var F=r;v=v.split(".");for(var G=0;G<v.length-1;G++){var ut=v[G];if(!(ut in F))break e;F=F[ut]}(x=x(G=F[v=v[v.length-1]]))!=G&&null!=x&&e(F,v,{configurable:!0,writable:!0,value:x})}}("Array.prototype.values",function(v){return v||function(){return function u(v,x){v instanceof String&&(v+="");var F=0,G=!1,ut={next:function(){if(!G&&F<v.length){var vt=F++;return{value:x(vt,v[vt]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ut[Symbol.iterator]=function(){return ut},ut}(this,function(x,F){return F})}});var d=d||{},f=this||self;function g(v){var x=typeof v;return"array"==(x="object"!=x?x:v?Array.isArray(v)?"array":x:"null")||"object"==x&&"number"==typeof v.length}function D(v){var x=typeof v;return"object"==x&&null!=v||"function"==x}function S(v,x,F){return v.call.apply(v.bind,arguments)}function P(v,x,F){if(!v)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ut=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ut,G),v.apply(x,ut)}}return function(){return v.apply(x,arguments)}}function j(v,x,F){return(j=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S:P).apply(null,arguments)}function Q(v,x){var F=Array.prototype.slice.call(arguments,1);return function(){var G=F.slice();return G.push.apply(G,arguments),v.apply(this,G)}}function ye(v,x){function F(){}F.prototype=x.prototype,v.aa=x.prototype,v.prototype=new F,v.prototype.constructor=v,v.Qb=function(G,ut,vt){for(var Xt=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)Xt[Gr-2]=arguments[Gr];return x.prototype[ut].apply(G,Xt)}}function Ee(v){const x=v.length;if(0<x){const F=Array(x);for(let G=0;G<x;G++)F[G]=v[G];return F}return[]}function we(v,x){for(let F=1;F<arguments.length;F++){const G=arguments[F];if(g(G)){const ut=v.length||0,vt=G.length||0;v.length=ut+vt;for(let Xt=0;Xt<vt;Xt++)v[ut+Xt]=G[Xt]}else v.push(G)}}function Et(v){return/^[\s\xa0]*$/.test(v)}function Dt(){var v=f.navigator;return v&&(v=v.userAgent)?v:""}function Ht(v){return Ht[" "](v),v}Ht[" "]=function(){};var En=!(-1==Dt().indexOf("Gecko")||-1!=Dt().toLowerCase().indexOf("webkit")&&-1==Dt().indexOf("Edge")||-1!=Dt().indexOf("Trident")||-1!=Dt().indexOf("MSIE")||-1!=Dt().indexOf("Edge"));function un(v,x,F){for(const G in v)x.call(F,v[G],G,v)}function ue(v){const x={};for(const F in v)x[F]=v[F];return x}const Ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Le(v,x){let F,G;for(let ut=1;ut<arguments.length;ut++){for(F in G=arguments[ut],G)v[F]=G[F];for(let vt=0;vt<Ce.length;vt++)F=Ce[vt],Object.prototype.hasOwnProperty.call(G,F)&&(v[F]=G[F])}}function ze(v){var x=1;v=v.split(":");const F=[];for(;0<x&&v.length;)F.push(v.shift()),x--;return v.length&&F.push(v.join(":")),F}function ot(v){f.setTimeout(()=>{throw v},0)}function De(){var v=Mi;let x=null;return v.g&&(x=v.g,v.g=v.g.next,v.g||(v.h=null),x.next=null),x}var _s=new class mt{constructor(x,F){this.i=x,this.j=F,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}(()=>new Yo,v=>v.reset());class Yo{constructor(){this.next=this.g=this.h=null}set(x,F){this.h=x,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let ji,Zr=!1,Mi=new class fr{constructor(){this.h=this.g=null}add(x,F){const G=_s.get();G.set(x,F),this.h?this.h.next=G:this.g=G,this.h=G}},No=()=>{const v=f.Promise.resolve(void 0);ji=()=>{v.then(Bs)}};var Bs=()=>{for(var v;v=De();){try{v.h.call(v.g)}catch(F){ot(F)}var x=_s;x.j(v),100>x.h&&(x.h++,v.next=x.g,x.g=v)}Zr=!1};function dr(){this.s=this.s,this.C=this.C}function Jr(v,x){this.type=v,this.g=this.target=x,this.defaultPrevented=!1}dr.prototype.s=!1,dr.prototype.ma=function(){this.s||(this.s=!0,this.N())},dr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},Jr.prototype.h=function(){this.defaultPrevented=!0};var jR=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var v=!1,x=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const F=()=>{};f.addEventListener("test",F,x),f.removeEventListener("test",F,x)}catch{}return v}();function iD(v,x){if(Jr.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var F=this.type=v.type,G=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=x,x=v.relatedTarget){if(En){e:{try{Ht(x.nodeName);var ut=!0;break e}catch{}ut=!1}ut||(x=null)}}else"mouseover"==F?x=v.fromElement:"mouseout"==F&&(x=v.toElement);this.relatedTarget=x,G?(this.clientX=void 0!==G.clientX?G.clientX:G.pageX,this.clientY=void 0!==G.clientY?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=void 0!==v.clientX?v.clientX:v.pageX,this.clientY=void 0!==v.clientY?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType="string"==typeof v.pointerType?v.pointerType:K4[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&iD.aa.h.call(this)}}ye(iD,Jr);var K4={2:"touch",3:"pen",4:"mouse"};iD.prototype.h=function(){iD.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var oD="closure_listenable_"+(1e6*Math.random()|0),W4=0;function G4(v,x,F,G,ut){this.listener=v,this.proxy=null,this.src=x,this.type=F,this.capture=!!G,this.ha=ut,this.key=++W4,this.da=this.fa=!1}function UR(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function $R(v){this.src=v,this.g={},this.h=0}function F1(v,x){var F=x.type;if(F in v.g){var vt,G=v.g[F],ut=Array.prototype.indexOf.call(G,x,void 0);(vt=0<=ut)&&Array.prototype.splice.call(G,ut,1),vt&&(UR(x),0==v.g[F].length&&(delete v.g[F],v.h--))}}function L1(v,x,F,G){for(var ut=0;ut<v.length;++ut){var vt=v[ut];if(!vt.da&&vt.listener==x&&vt.capture==!!F&&vt.ha==G)return ut}return-1}$R.prototype.add=function(v,x,F,G,ut){var vt=v.toString();(v=this.g[vt])||(v=this.g[vt]=[],this.h++);var Xt=L1(v,x,G,ut);return-1<Xt?(x=v[Xt],F||(x.fa=!1)):((x=new G4(x,this.src,vt,!!G,ut)).fa=F,v.push(x)),x};var V1="closure_lm_"+(1e6*Math.random()|0),B1={};function MB(v,x,F,G,ut){if(G&&G.once)return PB(v,x,F,G,ut);if(Array.isArray(x)){for(var vt=0;vt<x.length;vt++)MB(v,x[vt],F,G,ut);return null}return F=H1(F),v&&v[oD]?v.K(x,F,D(G)?!!G.capture:!!G,ut):OB(v,x,F,!1,G,ut)}function OB(v,x,F,G,ut,vt){if(!x)throw Error("Invalid event type");var Xt=D(ut)?!!ut.capture:!!ut,Gr=U1(v);if(Gr||(v[V1]=Gr=new $R(v)),(F=Gr.add(x,F,G,Xt,vt)).proxy)return F;if(G=function q4(){const x=Q4;return function v(F){return x.call(v.src,v.listener,F)}}(),F.proxy=G,G.src=v,G.listener=F,v.addEventListener)jR||(ut=Xt),void 0===ut&&(ut=!1),v.addEventListener(x.toString(),G,ut);else if(v.attachEvent)v.attachEvent(kB(x.toString()),G);else{if(!v.addListener||!v.removeListener)throw Error("addEventListener and attachEvent are unavailable.");v.addListener(G)}return F}function PB(v,x,F,G,ut){if(Array.isArray(x)){for(var vt=0;vt<x.length;vt++)PB(v,x[vt],F,G,ut);return null}return F=H1(F),v&&v[oD]?v.L(x,F,D(G)?!!G.capture:!!G,ut):OB(v,x,F,!0,G,ut)}function NB(v,x,F,G,ut){if(Array.isArray(x))for(var vt=0;vt<x.length;vt++)NB(v,x[vt],F,G,ut);else G=D(G)?!!G.capture:!!G,F=H1(F),v&&v[oD]?(v=v.i,(x=String(x).toString())in v.g&&-1<(F=L1(vt=v.g[x],F,G,ut))&&(UR(vt[F]),Array.prototype.splice.call(vt,F,1),0==vt.length&&(delete v.g[x],v.h--))):v&&(v=U1(v))&&(x=v.g[x.toString()],v=-1,x&&(v=L1(x,F,G,ut)),(F=-1<v?x[v]:null)&&j1(F))}function j1(v){if("number"!=typeof v&&v&&!v.da){var x=v.src;if(x&&x[oD])F1(x.i,v);else{var F=v.type,G=v.proxy;x.removeEventListener?x.removeEventListener(F,G,v.capture):x.detachEvent?x.detachEvent(kB(F),G):x.addListener&&x.removeListener&&x.removeListener(G),(F=U1(x))?(F1(F,v),0==F.h&&(F.src=null,x[V1]=null)):UR(v)}}}function kB(v){return v in B1?B1[v]:B1[v]="on"+v}function Q4(v,x){if(v.da)v=!0;else{x=new iD(x,this);var F=v.listener,G=v.ha||v.src;v.fa&&j1(v),v=F.call(G,x)}return v}function U1(v){return(v=v[V1])instanceof $R?v:null}var $1="__closure_events_fn_"+(1e9*Math.random()>>>0);function H1(v){return"function"==typeof v?v:(v[$1]||(v[$1]=function(x){return v.handleEvent(x)}),v[$1])}function ys(){dr.call(this),this.i=new $R(this),this.M=this,this.F=null}function js(v,x){var F,G=v.F;if(G)for(F=[];G;G=G.F)F.push(G);if(v=v.M,G=x.type||x,"string"==typeof x)x=new Jr(x,v);else if(x instanceof Jr)x.target=x.target||v;else{var ut=x;Le(x=new Jr(G,v),ut)}if(ut=!0,F)for(var vt=F.length-1;0<=vt;vt--){var Xt=x.g=F[vt];ut=HR(Xt,G,!0,x)&&ut}if(ut=HR(Xt=x.g=v,G,!0,x)&&ut,ut=HR(Xt,G,!1,x)&&ut,F)for(vt=0;vt<F.length;vt++)ut=HR(Xt=x.g=F[vt],G,!1,x)&&ut}function HR(v,x,F,G){if(!(x=v.i.g[String(x)]))return!0;x=x.concat();for(var ut=!0,vt=0;vt<x.length;++vt){var Xt=x[vt];if(Xt&&!Xt.da&&Xt.capture==F){var Gr=Xt.listener,Zo=Xt.ha||Xt.src;Xt.fa&&F1(v.i,Xt),ut=!1!==Gr.call(Zo,G)&&ut}}return ut&&!G.defaultPrevented}function FB(v,x,F){if("function"==typeof v)F&&(v=j(v,F));else{if(!v||"function"!=typeof v.handleEvent)throw Error("Invalid listener argument");v=j(v.handleEvent,v)}return 2147483647<Number(x)?-1:f.setTimeout(v,x||0)}function LB(v){v.g=FB(()=>{v.g=null,v.i&&(v.i=!1,LB(v))},v.l);const x=v.h;v.h=null,v.m.apply(null,x)}ye(ys,dr),ys.prototype[oD]=!0,ys.prototype.removeEventListener=function(v,x,F,G){NB(this,v,x,F,G)},ys.prototype.N=function(){if(ys.aa.N.call(this),this.i){var x,v=this.i;for(x in v.g){for(var F=v.g[x],G=0;G<F.length;G++)UR(F[G]);delete v.g[x],v.h--}}this.F=null},ys.prototype.K=function(v,x,F,G){return this.i.add(String(v),x,!1,F,G)},ys.prototype.L=function(v,x,F,G){return this.i.add(String(v),x,!0,F,G)};class X4 extends dr{constructor(x,F){super(),this.m=x,this.l=F,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:LB(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sD(v){dr.call(this),this.h=v,this.g={}}ye(sD,dr);var VB=[];function BB(v){un(v.g,function(x,F){this.g.hasOwnProperty(F)&&j1(x)},v),v.g={}}sD.prototype.N=function(){sD.aa.N.call(this),BB(this)},sD.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var z1=f.JSON.stringify,Y4=f.JSON.parse,Z4=class{stringify(v){return f.JSON.stringify(v,void 0)}parse(v){return f.JSON.parse(v,void 0)}};function K1(){}function UB(){}K1.prototype.h=null;var aD={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function W1(){Jr.call(this,"d")}function G1(){Jr.call(this,"c")}ye(W1,Jr),ye(G1,Jr);var kg={},$B=null;function zR(){return $B=$B||new ys}function HB(v){Jr.call(this,kg.La,v)}function cD(v){const x=zR();js(x,new HB(x))}function zB(v,x){Jr.call(this,kg.STAT_EVENT,v),this.stat=x}function Us(v){const x=zR();js(x,new zB(x,v))}function KB(v,x){Jr.call(this,kg.Ma,v),this.size=x}function uD(v,x){if("function"!=typeof v)throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){v()},x)}function lD(){this.g=!0}function Cb(v,x,F,G){v.info(function(){return"XMLHTTP TEXT ("+x+"): "+function nz(v,x){if(!v.g)return x;if(!x)return null;try{var F=JSON.parse(x);if(F)for(v=0;v<F.length;v++)if(Array.isArray(F[v])){var G=F[v];if(!(2>G.length)){var ut=G[1];if(Array.isArray(ut)&&!(1>ut.length)){var vt=ut[0];if("noop"!=vt&&"stop"!=vt&&"close"!=vt)for(var Xt=1;Xt<ut.length;Xt++)ut[Xt]=""}}}return z1(F)}catch{return x}}(v,F)+(G?" "+G:"")})}kg.La="serverreachability",ye(HB,Jr),kg.STAT_EVENT="statevent",ye(zB,Jr),kg.Ma="timingevent",ye(KB,Jr),lD.prototype.xa=function(){this.g=!1},lD.prototype.info=function(){};var q1,KR={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},WB={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function WR(){}function Pf(v,x,F,G){this.j=v,this.i=x,this.l=F,this.R=G||1,this.U=new sD(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new GB}function GB(){this.i=null,this.g="",this.h=!1}ye(WR,K1),WR.prototype.g=function(){return new XMLHttpRequest},WR.prototype.i=function(){return{}},q1=new WR;var qB={},Q1={};function X1(v,x,F){v.L=1,v.v=XR(Bd(x)),v.m=F,v.P=!0,QB(v,null)}function QB(v,x){v.F=Date.now(),GR(v),v.A=Bd(v.v);var F=v.A,G=v.R;Array.isArray(G)||(G=[String(G)]),uj(F.i,"t",G),v.C=0,F=v.j.J,v.h=new GB,v.g=Sj(v.j,F?x:null,!v.m),0<v.O&&(v.M=new X4(j(v.Y,v,v.g),v.O)),x=v.U,F=v.g,G=v.ca;var ut="readystatechange";Array.isArray(ut)||(ut&&(VB[0]=ut.toString()),ut=VB);for(var vt=0;vt<ut.length;vt++){var Xt=MB(F,ut[vt],G||x.handleEvent,!1,x.h||x);if(!Xt)break;x.g[Xt.key]=Xt}x=v.H?ue(v.H):{},v.m?(v.u||(v.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,x)):(v.u="GET",v.g.ea(v.A,v.u,null,x)),cD(),function J4(v,x,F,G,ut,vt){v.info(function(){if(v.g)if(vt)for(var Xt="",Gr=vt.split("&"),Zo=0;Zo<Gr.length;Zo++){var Ir=Gr[Zo].split("=");if(1<Ir.length){var bs=Ir[0];Ir=Ir[1];var Es=bs.split("_");Xt=2<=Es.length&&"type"==Es[1]?Xt+(bs+"=")+Ir+"&":Xt+(bs+"=redacted&")}}else Xt=null;else Xt=vt;return"XMLHTTP REQ ("+G+") [attempt "+ut+"]: "+x+"\n"+F+"\n"+Xt})}(v.i,v.u,v.A,v.l,v.R,v.m)}function XB(v){return!!v.g&&"GET"==v.u&&2!=v.L&&v.j.Ca}function rz(v,x){var F=v.C,G=x.indexOf("\n",F);return-1==G?Q1:(F=Number(x.substring(F,G)),isNaN(F)?qB:(G+=1)+F>x.length?Q1:(x=x.slice(G,G+F),v.C=G+F,x))}function GR(v){v.S=Date.now()+v.I,YB(v,v.I)}function YB(v,x){if(null!=v.B)throw Error("WatchDog timer not null");v.B=uD(j(v.ba,v),x)}function Y1(v){v.B&&(f.clearTimeout(v.B),v.B=null)}function dD(v){0==v.j.G||v.J||Ij(v.j,v)}function Fg(v){Y1(v);var x=v.M;x&&"function"==typeof x.ma&&x.ma(),v.M=null,BB(v.U),v.g&&(x=v.g,v.g=null,x.abort(),x.ma())}function Z1(v,x){try{var F=v.j;if(0!=F.G&&(F.g==v||J1(F.h,v)))if(!v.K&&J1(F.h,v)&&3==F.G){try{var G=F.Da.g.parse(x)}catch{G=null}if(Array.isArray(G)&&3==G.length){var ut=G;if(0==ut[0]){e:if(!F.u){if(F.g){if(!(F.g.F+3e3<v.F))break e;tM(F),JR(F)}rF(F),Us(18)}}else F.za=ut[1],0<F.za-F.T&&37500>ut[2]&&F.F&&0==F.v&&!F.C&&(F.C=uD(j(F.Za,F),6e3));if(1>=ej(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else Vg(F,11)}else if((v.K||F.g==v)&&tM(F),!Et(x))for(ut=F.Da.g.parse(x),x=0;x<ut.length;x++){let Ir=ut[x];if(F.T=Ir[0],Ir=Ir[1],2==F.G)if("c"==Ir[0]){F.K=Ir[1],F.ia=Ir[2];const bs=Ir[3];null!=bs&&(F.la=bs,F.j.info("VER="+F.la));const Es=Ir[4];null!=Es&&(F.Aa=Es,F.j.info("SVER="+F.Aa));const Ab=Ir[5];null!=Ab&&"number"==typeof Ab&&0<Ab&&(F.L=G=1.5*Ab,F.j.info("backChannelRequestTimeoutMs_="+G)),G=F;const gu=v.g;if(gu){const rM=gu.g?gu.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rM){var vt=G.h;vt.g||-1==rM.indexOf("spdy")&&-1==rM.indexOf("quic")&&-1==rM.indexOf("h2")||(vt.j=vt.l,vt.g=new Set,vt.h&&(eF(vt,vt.h),vt.h=null))}if(G.D){const oF=gu.g?gu.g.getResponseHeader("X-HTTP-Session-Id"):null;oF&&(G.ya=oF,ri(G.I,G.D,oF))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-v.F,F.j.info("Handshake RTT: "+F.R+"ms"));var Xt=v;if((G=F).qa=Tj(G,G.J?G.ia:null,G.W),Xt.K){tj(G.h,Xt);var Gr=Xt,Zo=G.L;Zo&&(Gr.I=Zo),Gr.B&&(Y1(Gr),GR(Gr)),G.g=Xt}else Ej(G);0<F.i.length&&eM(F)}else"stop"!=Ir[0]&&"close"!=Ir[0]||Vg(F,7);else 3==F.G&&("stop"==Ir[0]||"close"==Ir[0]?"stop"==Ir[0]?Vg(F,7):nF(F):"noop"!=Ir[0]&&F.l&&F.l.ta(Ir),F.v=0)}cD()}catch{}}Pf.prototype.ca=function(v){v=v.target;const x=this.M;x&&3==jd(v)?x.j():this.Y(v)},Pf.prototype.Y=function(v){try{if(v==this.g)e:{const Es=jd(this.g);var x=this.g.Ba();if(this.g.Z(),!(3>Es)&&(3!=Es||this.g&&(this.h.h||this.g.oa()||gj(this.g)))){this.J||4!=Es||7==x||cD(),Y1(this);var F=this.g.Z();this.X=F;t:if(XB(this)){var G=gj(this.g);v="";var ut=G.length,vt=4==jd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Fg(this),dD(this);var Xt="";break t}this.h.i=new f.TextDecoder}for(x=0;x<ut;x++)this.h.h=!0,v+=this.h.i.decode(G[x],{stream:!(vt&&x==ut-1)});G.length=0,this.h.g+=v,this.C=0,Xt=this.h.g}else Xt=this.g.oa();if(this.o=200==F,function ez(v,x,F,G,ut,vt,Xt){v.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ut+"]: "+x+"\n"+F+"\n"+vt+" "+Xt})}(this.i,this.u,this.A,this.l,this.R,Es,F),this.o){if(this.T&&!this.K){t:{if(this.g){var Gr,Zo=this.g;if((Gr=Zo.g?Zo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Et(Gr)){var Ir=Gr;break t}}Ir=null}if(!(F=Ir)){this.o=!1,this.s=3,Us(12),Fg(this),dD(this);break e}Cb(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Z1(this,F)}if(this.P){let gu;for(F=!0;!this.J&&this.C<Xt.length;){if(gu=rz(this,Xt),gu==Q1){4==Es&&(this.s=4,Us(14),F=!1),Cb(this.i,this.l,null,"[Incomplete Response]");break}if(gu==qB){this.s=4,Us(15),Cb(this.i,this.l,Xt,"[Invalid Chunk]"),F=!1;break}Cb(this.i,this.l,gu,null),Z1(this,gu)}if(XB(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Es||0!=Xt.length||this.h.h||(this.s=1,Us(16),F=!1),this.o=this.o&&F,F){if(0<Xt.length&&!this.W){this.W=!0;var bs=this.j;bs.g==this&&bs.ba&&!bs.M&&(bs.j.info("Great, no buffering proxy detected. Bytes received: "+Xt.length),iF(bs),bs.M=!0,Us(11))}}else Cb(this.i,this.l,Xt,"[Invalid Chunked Response]"),Fg(this),dD(this)}else Cb(this.i,this.l,Xt,null),Z1(this,Xt);4==Es&&Fg(this),this.o&&!this.J&&(4==Es?Ij(this.j,this):(this.o=!1,GR(this)))}else(function bz(v){const x={};v=(v.g&&2<=jd(v)&&v.g.getAllResponseHeaders()||"").split("\r\n");for(let G=0;G<v.length;G++){if(Et(v[G]))continue;var F=ze(v[G]);const ut=F[0];if("string"!=typeof(F=F[1]))continue;F=F.trim();const vt=x[ut]||[];x[ut]=vt,vt.push(F)}!function Fe(v,x){for(const F in v)x.call(void 0,v[F],F,v)}(x,function(G){return G.join(", ")})})(this.g),400==F&&0<Xt.indexOf("Unknown SID")?(this.s=3,Us(12)):(this.s=0,Us(13)),Fg(this),dD(this)}}}catch{}},Pf.prototype.cancel=function(){this.J=!0,Fg(this)},Pf.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(function tz(v,x){v.info(function(){return"TIMEOUT: "+x})}(this.i,this.A),2!=this.L&&(cD(),Us(17)),Fg(this),this.s=2,dD(this)):YB(this,this.S-v)};var iz=class{constructor(v,x){this.g=v,this.map=x}};function ZB(v){this.l=v||10,v=f.PerformanceNavigationTiming?0<(v=f.performance.getEntriesByType("navigation")).length&&("hq"==v[0].nextHopProtocol||"h2"==v[0].nextHopProtocol):!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function JB(v){return!!v.h||!!v.g&&v.g.size>=v.j}function ej(v){return v.h?1:v.g?v.g.size:0}function J1(v,x){return v.h?v.h==x:!!v.g&&v.g.has(x)}function eF(v,x){v.g?v.g.add(x):v.h=x}function tj(v,x){v.h&&v.h==x?v.h=null:v.g&&v.g.has(x)&&v.g.delete(x)}function nj(v){if(null!=v.h)return v.i.concat(v.h.D);if(null!=v.g&&0!==v.g.size){let x=v.i;for(const F of v.g.values())x=x.concat(F.D);return x}return Ee(v.i)}function rj(v,x){if(v.forEach&&"function"==typeof v.forEach)v.forEach(x,void 0);else if(g(v)||"string"==typeof v)Array.prototype.forEach.call(v,x,void 0);else for(var F=function sz(v){if(v.na&&"function"==typeof v.na)return v.na();if(!v.V||"function"!=typeof v.V){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(g(v)||"string"==typeof v){var x=[];v=v.length;for(var F=0;F<v;F++)x.push(F);return x}x=[],F=0;for(const G in v)x[F++]=G;return x}}}(v),G=function oz(v){if(v.V&&"function"==typeof v.V)return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if("string"==typeof v)return v.split("");if(g(v)){for(var x=[],F=v.length,G=0;G<F;G++)x.push(v[G]);return x}for(G in x=[],F=0,v)x[F++]=v[G];return x}(v),ut=G.length,vt=0;vt<ut;vt++)x.call(void 0,G[vt],F&&F[vt],v)}ZB.prototype.cancel=function(){if(this.i=nj(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const v of this.g.values())v.cancel();this.g.clear()}};var ij=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lg(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Lg){this.h=v.h,qR(this,v.j),this.o=v.o,this.g=v.g,QR(this,v.s),this.l=v.l;var x=v.i,F=new pD;F.i=x.i,x.g&&(F.g=new Map(x.g),F.h=x.h),oj(this,F),this.m=v.m}else v&&(x=String(v).match(ij))?(this.h=!1,qR(this,x[1]||"",!0),this.o=hD(x[2]||""),this.g=hD(x[3]||"",!0),QR(this,x[4]),this.l=hD(x[5]||"",!0),oj(this,x[6]||"",!0),this.m=hD(x[7]||"")):(this.h=!1,this.i=new pD(null,this.h))}function Bd(v){return new Lg(v)}function qR(v,x,F){v.j=F?hD(x,!0):x,v.j&&(v.j=v.j.replace(/:$/,""))}function QR(v,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);v.s=x}else v.s=null}function oj(v,x,F){x instanceof pD?(v.i=x,function fz(v,x){x&&!v.j&&(Nf(v),v.i=null,v.g.forEach(function(F,G){var ut=G.toLowerCase();G!=ut&&(aj(this,G),uj(this,ut,F))},v)),v.j=x}(v.i,v.h)):(F||(x=fD(x,dz)),v.i=new pD(x,v.h))}function ri(v,x,F){v.i.set(x,F)}function XR(v){return ri(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function hD(v,x){return v?x?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function fD(v,x,F){return"string"==typeof v?(v=encodeURI(v).replace(x,cz),F&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function cz(v){return"%"+((v=v.charCodeAt(0))>>4&15).toString(16)+(15&v).toString(16)}Lg.prototype.toString=function(){var v=[],x=this.j;x&&v.push(fD(x,sj,!0),":");var F=this.g;return(F||"file"==x)&&(v.push("//"),(x=this.o)&&v.push(fD(x,sj,!0),"@"),v.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(F=this.s)&&v.push(":",String(F))),(F=this.l)&&(this.g&&"/"!=F.charAt(0)&&v.push("/"),v.push(fD(F,"/"==F.charAt(0)?lz:uz,!0))),(F=this.i.toString())&&v.push("?",F),(F=this.m)&&v.push("#",fD(F,hz)),v.join("")};var sj=/[#\/\?@]/g,uz=/[#\?:]/g,lz=/[#\?]/g,dz=/[#\?@]/g,hz=/#/g;function pD(v,x){this.h=this.g=null,this.i=v||null,this.j=!!x}function Nf(v){v.g||(v.g=new Map,v.h=0,v.i&&function az(v,x){if(v){v=v.split("&");for(var F=0;F<v.length;F++){var G=v[F].indexOf("="),ut=null;if(0<=G){var vt=v[F].substring(0,G);ut=v[F].substring(G+1)}else vt=v[F];x(vt,ut?decodeURIComponent(ut.replace(/\+/g," ")):"")}}}(v.i,function(x,F){v.add(decodeURIComponent(x.replace(/\+/g," ")),F)}))}function aj(v,x){Nf(v),x=Tb(v,x),v.g.has(x)&&(v.i=null,v.h-=v.g.get(x).length,v.g.delete(x))}function cj(v,x){return Nf(v),x=Tb(v,x),v.g.has(x)}function uj(v,x,F){aj(v,x),0<F.length&&(v.i=null,v.g.set(Tb(v,x),Ee(F)),v.h+=F.length)}function Tb(v,x){return x=String(x),v.j&&(x=x.toLowerCase()),x}function kf(v,x,F,G,ut){try{ut&&(ut.onload=null,ut.onerror=null,ut.onabort=null,ut.ontimeout=null),G(F)}catch{}}function gz(){this.g=new Z4}function vz(v,x,F){const G=F||"";try{rj(v,function(ut,vt){let Xt=ut;D(ut)&&(Xt=z1(ut)),x.push(G+vt+"="+encodeURIComponent(Xt))})}catch(ut){throw x.push(G+"type="+encodeURIComponent("_badmap")),ut}}function mD(v){this.l=v.Ub||null,this.j=v.eb||!1}function YR(v,x){ys.call(this),this.D=v,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function lj(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}function gD(v){v.readyState=4,v.l=null,v.j=null,v.v=null,vD(v)}function vD(v){v.onreadystatechange&&v.onreadystatechange.call(v)}function dj(v){let x="";return un(v,function(F,G){x+=G,x+=":",x+=F,x+="\r\n"}),x}function tF(v,x,F){e:{for(G in F){var G=!1;break e}G=!0}G||(F=dj(F),"string"==typeof v?null!=F&&encodeURIComponent(String(F)):ri(v,x,F))}function Oi(v){ys.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=pD.prototype).add=function(v,x){Nf(this),this.i=null,v=Tb(this,v);var F=this.g.get(v);return F||this.g.set(v,F=[]),F.push(x),this.h+=1,this},n.forEach=function(v,x){Nf(this),this.g.forEach(function(F,G){F.forEach(function(ut){v.call(x,ut,G,this)},this)},this)},n.na=function(){Nf(this);const v=Array.from(this.g.values()),x=Array.from(this.g.keys()),F=[];for(let G=0;G<x.length;G++){const ut=v[G];for(let vt=0;vt<ut.length;vt++)F.push(x[G])}return F},n.V=function(v){Nf(this);let x=[];if("string"==typeof v)cj(this,v)&&(x=x.concat(this.g.get(Tb(this,v))));else{v=Array.from(this.g.values());for(let F=0;F<v.length;F++)x=x.concat(v[F])}return x},n.set=function(v,x){return Nf(this),this.i=null,cj(this,v=Tb(this,v))&&(this.h-=this.g.get(v).length),this.g.set(v,[x]),this.h+=1,this},n.get=function(v,x){return v&&0<(v=this.V(v)).length?String(v[0]):x},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],x=Array.from(this.g.keys());for(var F=0;F<x.length;F++){var G=x[F];const vt=encodeURIComponent(String(G)),Xt=this.V(G);for(G=0;G<Xt.length;G++){var ut=vt;""!==Xt[G]&&(ut+="="+encodeURIComponent(String(Xt[G]))),v.push(ut)}}return this.i=v.join("&")},ye(mD,K1),mD.prototype.g=function(){return new YR(this.l,this.j)},mD.prototype.i=function(v){return function(){return v}}({}),ye(YR,ys),(n=YR.prototype).open=function(v,x){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=x,this.readyState=1,vD(this)},n.send=function(v){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(x.body=v),(this.D||f).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,gD(this)),this.readyState=0},n.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,vD(this)),this.g&&(this.readyState=3,vD(this),this.g)))if("arraybuffer"===this.responseType)v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lj(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var x=v.value?v.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!v.done}))&&(this.response=this.responseText+=x)}v.done?gD(this):vD(this),3==this.readyState&&lj(this)}},n.Ra=function(v){this.g&&(this.response=this.responseText=v,gD(this))},n.Qa=function(v){this.g&&(this.response=v,gD(this))},n.ga=function(){this.g&&gD(this)},n.setRequestHeader=function(v,x){this.u.append(v,x)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],x=this.h.entries();for(var F=x.next();!F.done;)v.push((F=F.value)[0]+": "+F[1]),F=x.next();return v.join("\r\n")},Object.defineProperty(YR.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(v){this.m=v?"include":"same-origin"}}),ye(Oi,ys);var _z=/^https?$/i,yz=["POST","PUT"];function hj(v,x){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=x,v.m=5,fj(v),ZR(v)}function fj(v){v.A||(v.A=!0,js(v,"complete"),js(v,"error"))}function pj(v){if(v.h&&typeof d<"u"&&(!v.v[1]||4!=jd(v)||2!=v.Z()))if(v.u&&4==jd(v))FB(v.Ea,0,v);else if(js(v,"readystatechange"),4==jd(v)){v.h=!1;try{const Xt=v.Z();e:switch(Xt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var F;if(!(F=x)){var G;if(G=0===Xt){var ut=String(v.D).match(ij)[1]||null;!ut&&f.self&&f.self.location&&(ut=f.self.location.protocol.slice(0,-1)),G=!_z.test(ut?ut.toLowerCase():"")}F=G}if(F)js(v,"complete"),js(v,"success");else{v.m=6;try{var vt=2<jd(v)?v.g.statusText:""}catch{vt=""}v.l=vt+" ["+v.Z()+"]",fj(v)}}finally{ZR(v)}}}function ZR(v,x){if(v.g){mj(v);const F=v.g,G=v.v[0]?()=>{}:null;v.g=null,v.v=null,x||js(v,"ready");try{F.onreadystatechange=G}catch{}}}function mj(v){v.I&&(f.clearTimeout(v.I),v.I=null)}function jd(v){return v.g?v.g.readyState:0}function gj(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function _D(v,x,F){return F&&F.internalChannelParams&&F.internalChannelParams[v]||x}function vj(v){this.Aa=0,this.i=[],this.j=new lD,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_D("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_D("baseRetryDelayMs",5e3,v),this.cb=_D("retryDelaySeedMs",1e4,v),this.Wa=_D("forwardChannelMaxRetries",2,v),this.wa=_D("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new ZB(v&&v.concurrentRequestLimit),this.Da=new gz,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function nF(v){if(_j(v),3==v.G){var x=v.U++,F=Bd(v.I);if(ri(F,"SID",v.K),ri(F,"RID",x),ri(F,"TYPE","terminate"),yD(v,F),(x=new Pf(v,v.j,x)).L=2,x.v=XR(Bd(F)),F=!1,f.navigator&&f.navigator.sendBeacon)try{F=f.navigator.sendBeacon(x.v.toString(),"")}catch{}!F&&f.Image&&((new Image).src=x.v,F=!0),F||(x.g=Sj(x.j,null),x.g.ea(x.v)),x.F=Date.now(),GR(x)}Cj(v)}function JR(v){v.g&&(iF(v),v.g.cancel(),v.g=null)}function _j(v){JR(v),v.u&&(f.clearTimeout(v.u),v.u=null),tM(v),v.h.cancel(),v.s&&("number"==typeof v.s&&f.clearTimeout(v.s),v.s=null)}function eM(v){if(!JB(v.h)&&!v.s){v.s=!0;var x=v.Ga;ji||No(),Zr||(ji(),Zr=!0),Mi.add(x,v),v.B=0}}function yj(v,x){var F;F=x?x.l:v.U++;const G=Bd(v.I);ri(G,"SID",v.K),ri(G,"RID",F),ri(G,"AID",v.T),yD(v,G),v.m&&v.o&&tF(G,v.m,v.o),F=new Pf(v,v.j,F,v.B+1),null===v.m&&(F.H=v.o),x&&(v.i=x.D.concat(v.i)),x=bj(v,F,1e3),F.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),eF(v.h,F),X1(F,G,x)}function yD(v,x){v.H&&un(v.H,function(F,G){ri(x,G,F)}),v.l&&rj({},function(F,G){ri(x,G,F)})}function bj(v,x,F){F=Math.min(v.i.length,F);var G=v.l?j(v.l.Na,v.l,v):null;e:{var ut=v.i;let vt=-1;for(;;){const Xt=["count="+F];-1==vt?0<F?(vt=ut[0].g,Xt.push("ofs="+vt)):vt=0:Xt.push("ofs="+vt);let Gr=!0;for(let Zo=0;Zo<F;Zo++){let Ir=ut[Zo].g;const bs=ut[Zo].map;if(Ir-=vt,0>Ir)vt=Math.max(0,ut[Zo].g-100),Gr=!1;else try{vz(bs,Xt,"req"+Ir+"_")}catch{G&&G(bs)}}if(Gr){G=Xt.join("&");break e}}}return v=v.i.splice(0,F),x.D=v,G}function Ej(v){if(!v.g&&!v.u){v.Y=1;var x=v.Fa;ji||No(),Zr||(ji(),Zr=!0),Mi.add(x,v),v.v=0}}function rF(v){return!(v.g||v.u||3<=v.v||(v.Y++,v.u=uD(j(v.Fa,v),Dj(v,v.v)),v.v++,0))}function iF(v){null!=v.A&&(f.clearTimeout(v.A),v.A=null)}function wj(v){v.g=new Pf(v,v.j,"rpc",v.Y),null===v.m&&(v.g.H=v.o),v.g.O=0;var x=Bd(v.qa);ri(x,"RID","rpc"),ri(x,"SID",v.K),ri(x,"AID",v.T),ri(x,"CI",v.F?"0":"1"),!v.F&&v.ja&&ri(x,"TO",v.ja),ri(x,"TYPE","xmlhttp"),yD(v,x),v.m&&v.o&&tF(x,v.m,v.o),v.L&&(v.g.I=v.L);var F=v.g;v=v.ia,F.L=1,F.v=XR(Bd(x)),F.m=null,F.P=!0,QB(F,v)}function tM(v){null!=v.C&&(f.clearTimeout(v.C),v.C=null)}function Ij(v,x){var F=null;if(v.g==x){tM(v),iF(v),v.g=null;var G=2}else{if(!J1(v.h,x))return;F=x.D,tj(v.h,x),G=1}if(0!=v.G)if(x.o)if(1==G){F=x.m?x.m.length:0,x=Date.now()-x.F;var ut=v.B;js(G=zR(),new KB(G,F)),eM(v)}else Ej(v);else if(3==(ut=x.s)||0==ut&&0<x.X||!(1==G&&function Ez(v,x){return!(ej(v.h)>=v.h.j-(v.s?1:0)||(v.s?(v.i=x.D.concat(v.i),0):1==v.G||2==v.G||v.B>=(v.Va?0:v.Wa)||(v.s=uD(j(v.Ga,v,x),Dj(v,v.B)),v.B++,0)))}(v,x)||2==G&&rF(v)))switch(F&&0<F.length&&(x=v.h,x.i=x.i.concat(F)),ut){case 1:Vg(v,5);break;case 4:Vg(v,10);break;case 3:Vg(v,6);break;default:Vg(v,2)}}function Dj(v,x){let F=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(F*=2),F*x}function Vg(v,x){if(v.j.info("Error code "+x),2==x){var F=j(v.fb,v),G=v.Xa;const ut=!G;G=new Lg(G||"//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||qR(G,"https"),XR(G),ut?function pz(v,x){const F=new lD;if(f.Image){const G=new Image;G.onload=Q(kf,F,"TestLoadImage: loaded",!0,x,G),G.onerror=Q(kf,F,"TestLoadImage: error",!1,x,G),G.onabort=Q(kf,F,"TestLoadImage: abort",!1,x,G),G.ontimeout=Q(kf,F,"TestLoadImage: timeout",!1,x,G),f.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=v}else x(!1)}(G.toString(),F):function mz(v,x){new lD;const G=new AbortController,ut=setTimeout(()=>{G.abort(),kf(0,0,!1,x)},1e4);fetch(v,{signal:G.signal}).then(vt=>{clearTimeout(ut),kf(0,0,!!vt.ok,x)}).catch(()=>{clearTimeout(ut),kf(0,0,!1,x)})}(G.toString(),F)}else Us(2);v.G=0,v.l&&v.l.sa(x),Cj(v),_j(v)}function Cj(v){if(v.G=0,v.ka=[],v.l){const x=nj(v.h);(0!=x.length||0!=v.i.length)&&(we(v.ka,x),we(v.ka,v.i),v.h.i.length=0,Ee(v.i),v.i.length=0),v.l.ra()}}function Tj(v,x,F){var G=F instanceof Lg?Bd(F):new Lg(F);if(""!=G.g)x&&(G.g=x+"."+G.g),QR(G,G.s);else{var ut=f.location;G=ut.protocol,x=x?x+"."+ut.hostname:ut.hostname,ut=+ut.port;var vt=new Lg(null);G&&qR(vt,G),x&&(vt.g=x),ut&&QR(vt,ut),F&&(vt.l=F),G=vt}return x=v.ya,(F=v.D)&&x&&ri(G,F,x),ri(G,"VER",v.la),yD(v,G),G}function Sj(v,x,F){if(x&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return(x=new Oi(v.Ca&&!v.pa?new mD({eb:F}):v.pa)).Ha(v.J),x}function Aj(){}function nM(){}function za(v,x){ys.call(this),this.g=new vj(x),this.l=v,this.h=x&&x.messageUrlParams||null,v=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(v?v["X-WebChannel-Content-Type"]=x.messageContentType:v={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(v?v["X-WebChannel-Client-Profile"]=x.va:v={"X-WebChannel-Client-Profile":x.va}),this.g.S=v,(v=x&&x.Sb)&&!Et(v)&&(this.g.m=v),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!Et(x)&&(this.g.D=x,null!==(v=this.h)&&x in v&&x in(v=this.h)&&delete v[x]),this.j=new Sb(this)}function xj(v){W1.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var x=v.__sm__;if(x){e:{for(const F in x){v=F;break e}v=void 0}(this.i=v)&&(v=this.i,x=null!==x&&v in x?x[v]:void 0),this.data=x}else this.data=v}function Rj(){G1.call(this),this.status=1}function Sb(v){this.g=v}(n=Oi.prototype).Ha=function(v){this.J=v},n.ea=function(v,x,F,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);x=x?x.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():q1.g(),this.v=function jB(v){return v.h||(v.h=v.i())}(this.o?this.o:q1),this.g.onreadystatechange=j(this.Ea,this);try{this.B=!0,this.g.open(x,String(v),!0),this.B=!1}catch(vt){return void hj(this,vt)}if(v=F||"",F=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ut in G)F.set(ut,G[ut]);else{if("function"!=typeof G.keys||"function"!=typeof G.get)throw Error("Unknown input type for opt_headers: "+String(G));for(const vt of G.keys())F.set(vt,G.get(vt))}G=Array.from(F.keys()).find(vt=>"content-type"==vt.toLowerCase()),ut=f.FormData&&v instanceof f.FormData,!(0<=Array.prototype.indexOf.call(yz,x,void 0))||G||ut||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[vt,Xt]of F)this.g.setRequestHeader(vt,Xt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{mj(this),this.u=!0,this.g.send(v),this.u=!1}catch(vt){hj(this,vt)}},n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,js(this,"complete"),js(this,"abort"),ZR(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ZR(this,!0)),Oi.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pj(this):this.bb())},n.bb=function(){pj(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<jd(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(v){if(this.g){var x=this.g.responseText;return v&&0==x.indexOf(v)&&(x=x.substring(v.length)),Y4(x)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=vj.prototype).la=8,n.G=1,n.connect=function(v,x,F,G){Us(0),this.W=v,this.H=x||{},F&&void 0!==G&&(this.H.OSID=F,this.H.OAID=G),this.F=this.X,this.I=Tj(this,null,this.W),eM(this)},n.Ga=function(v){if(this.s)if(this.s=null,1==this.G){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const ut=new Pf(this,this.j,v);let vt=this.o;if(this.S&&(vt?(vt=ue(vt),Le(vt,this.S)):vt=this.S),null!==this.m||this.O||(ut.H=vt,vt=null),this.P)e:{for(var x=0,F=0;F<this.i.length;F++){var G=this.i[F];if(void 0===(G="__data__"in G.map&&"string"==typeof(G=G.map.__data__)?G.length:void 0))break;if(4096<(x+=G)){x=F;break e}if(4096===x||F===this.i.length-1){x=F+1;break e}}x=1e3}else x=1e3;x=bj(this,ut,x),ri(F=Bd(this.I),"RID",v),ri(F,"CVER",22),this.D&&ri(F,"X-HTTP-Session-Id",this.D),yD(this,F),vt&&(this.O?x="headers="+encodeURIComponent(String(dj(vt)))+"&"+x:this.m&&tF(F,this.m,vt)),eF(this.h,ut),this.Ua&&ri(F,"TYPE","init"),this.P?(ri(F,"$req",x),ri(F,"SID","null"),ut.T=!0,X1(ut,F,null)):X1(ut,F,x),this.G=2}}else 3==this.G&&(v?yj(this,v):0==this.i.length||JB(this.h)||yj(this))},n.Fa=function(){if(this.u=null,wj(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=uD(j(this.ab,this),v)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Us(10),JR(this),wj(this))},n.Za=function(){null!=this.C&&(this.C=null,JR(this),rF(this),Us(19))},n.fb=function(v){v?(this.j.info("Successfully pinged google.com"),Us(2)):(this.j.info("Failed to ping google.com"),Us(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=Aj.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},nM.prototype.g=function(v,x){return new za(v,x)},ye(za,ys),za.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},za.prototype.close=function(){nF(this.g)},za.prototype.o=function(v){var x=this.g;if("string"==typeof v){var F={};F.__data__=v,v=F}else this.u&&((F={}).__data__=z1(v),v=F);x.i.push(new iz(x.Ya++,v)),3==x.G&&eM(x)},za.prototype.N=function(){this.g.l=null,delete this.j,nF(this.g),delete this.g,za.aa.N.call(this)},ye(xj,W1),ye(Rj,G1),ye(Sb,Aj),Sb.prototype.ua=function(){js(this.g,"a")},Sb.prototype.ta=function(v){js(this.g,new xj(v))},Sb.prototype.sa=function(v){js(this.g,new Rj)},Sb.prototype.ra=function(){js(this.g,"b")},nM.prototype.createWebChannel=nM.prototype.g,za.prototype.send=za.prototype.o,za.prototype.open=za.prototype.m,za.prototype.close=za.prototype.close,qT=Zc.createWebChannelTransport=function(){return new nM},p0=Zc.getStatEventTarget=function(){return zR()},GT=Zc.Event=kg,cm=Zc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},KR.NO_ERROR=0,KR.TIMEOUT=8,KR.HTTP_ERROR=6,am=Zc.ErrorCode=KR,WB.COMPLETE="complete",WT=Zc.EventType=WB,UB.EventType=aD,aD.OPEN="a",aD.CLOSE="b",aD.ERROR="c",aD.MESSAGE="d",ys.prototype.listen=ys.prototype.K,D_=Zc.WebChannel=UB,sm=Zc.FetchXmlHttpFactory=mD,Oi.prototype.listenOnce=Oi.prototype.L,Oi.prototype.getLastError=Oi.prototype.Ka,Oi.prototype.getLastErrorCode=Oi.prototype.Ba,Oi.prototype.getStatus=Oi.prototype.Z,Oi.prototype.getResponseJson=Oi.prototype.Oa,Oi.prototype.getResponseText=Oi.prototype.oa,Oi.prototype.send=Oi.prototype.ea,Oi.prototype.setWithCredentials=Oi.prototype.Ha,xh=Zc.XhrIo=Oi}).apply(typeof om<"u"?om:typeof self<"u"?self:typeof window<"u"?window:{});const m0="@firebase/firestore";class Vi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vi.UNAUTHENTICATED=new Vi(null),Vi.GOOGLE_CREDENTIALS=new Vi("google-credentials-uid"),Vi.FIRST_PARTY=new Vi("first-party-uid"),Vi.MOCK_USER=new Vi("mock-user");let Xl="10.12.3";const fc=new IT("@firebase/firestore");function Rh(){return fc.logLevel}function Ot(n,...e){if(fc.logLevel<=tr.DEBUG){const t=e.map(g0);fc.debug(`Firestore (${Xl}): ${n}`,...t)}}function yi(n,...e){if(fc.logLevel<=tr.ERROR){const t=e.map(g0);fc.error(`Firestore (${Xl}): ${n}`,...t)}}function Fs(n,...e){if(fc.logLevel<=tr.WARN){const t=e.map(g0);fc.warn(`Firestore (${Xl}): ${n}`,...t)}}function g0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Jt(n="Unexpected state"){const e=`FIRESTORE (${Xl}) INTERNAL ASSERTION FAILED: `+n;throw yi(e),new Error(e)}function dn(n,e){n||Jt()}function Qt(n,e){return n}const gt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xt extends Wl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class bi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class C_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vi.UNAUTHENTICATED))}shutdown(){}}class Mh{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class QT{constructor(e){this.t=e,this.currentUser=Vi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let d=new bi;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new bi,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const D=d;e.enqueueRetryable((0,rt.A)(function*(){yield D.promise,yield u(r.currentUser)}))},g=D=>{Ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(D=>g(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?g(D):(Ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new bi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dn("string"==typeof r.accessToken),new C_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dn(null===e||"string"==typeof e),new Vi(e)}}class jP{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Vi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class UP{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new jP(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Vi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $P{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=u=>{null!=u.error&&Ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.R;return this.R=u.token,Ot("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?s(u):Ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dn("string"==typeof t.token),this.R=t.token,new XT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function YT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class ZT{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=YT(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function Pn(n,e){return n<e?-1:n>e?1:0}function Jc(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}class Yr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xt(gt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xt(gt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Yr.fromMillis(Date.now())}static fromDate(e){return Yr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Yr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pn(this.nanoseconds,e.nanoseconds):Pn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fn(e)}static min(){return new fn(new Yr(0,0))}static max(){return new fn(new Yr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class um{constructor(e,t,r){void 0===t?t=0:t>e.length&&Jt(),void 0===r?r=e.length-t:r>e.length-t&&Jt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===um.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof um?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zn extends um{construct(e,t,r){return new Zn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xt(gt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Zn(t)}static emptyPath(){return new Zn([])}}const Yl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wr extends um{construct(e,t,r){return new wr(e,t,r)}static isValidIdentifier(e){return Yl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new xt(gt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const f=e[s];if("\\"===f){if(s+1===e.length)throw new xt(gt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[s+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new xt(gt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,s+=2}else"`"===f?(d=!d,s++):"."!==f||d?(r+=f,s++):(u(),s++)}if(u(),d)throw new xt(gt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wr(t)}static emptyPath(){return new wr([])}}class Gt{constructor(e){this.path=e}static fromPath(e){return new Gt(Zn.fromString(e))}static fromName(e){return new Gt(Zn.fromString(e).popFirst(5))}static empty(){return new Gt(Zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Zn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Zn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Gt(new Zn(e.slice()))}}class Go{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Go(fn.min(),Gt.empty(),-1)}static max(){return new Go(fn.max(),Gt.empty(),-1)}}function v0(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Gt.comparator(n.documentKey,e.documentKey),0!==t?t:Pn(n.largestBatchId,e.largestBatchId))}const rS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class iS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ed(n){return S_.apply(this,arguments)}function S_(){return(S_=(0,rt.A)(function*(n){if(n.code!==gt.FAILED_PRECONDITION||n.message!==rS)throw n;Ot("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class et{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new et((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof et?t:et.resolve(t)}catch(t){return et.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):et.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):et.reject(t)}static resolve(e){return new et((t,r)=>{t(e)})}static reject(e){return new et((t,r)=>{r(e)})}static waitFor(e){return new et((t,r)=>{let s=0,u=0,d=!1;e.forEach(f=>{++s,f.next(()=>{++u,d&&u===s&&t()},g=>r(g))}),d=!0,u===s&&t()})}static or(e){let t=et.resolve(!1);for(const r of e)t=t.next(s=>s?et.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new et((r,s)=>{const u=e.length,d=new Array(u);let f=0;for(let g=0;g<u;g++){const D=g;t(e[D]).next(S=>{d[D]=S,++f,f===u&&r(d)},S=>s(S))}})}static doWhile(e,t){return new et((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}function $u(n){return"IndexedDbTransactionError"===n.name}let qo=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ie(s),this.se=s=>r.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function pm(n){return null==n}function mm(n){return 0===n&&1/n==-1/0}function fS(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ku(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function mS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class $r{constructor(e,t){this.comparator=e,this.root=t||Ai.EMPTY}insert(e,t){return new $r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ai.BLACK,null,null))}remove(e){return new $r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new M_(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new M_(this.root,e,this.comparator,!1)}getReverseIterator(){return new M_(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new M_(this.root,e,this.comparator,!0)}}class M_{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ai{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Ai.RED,this.left=s??Ai.EMPTY,this.right=u??Ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Ai(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Ai.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Jt();const e=this.left.check();if(e!==this.right.check())throw Jt();return e+(this.isRed()?0:1)}}Ai.EMPTY=null,Ai.RED=!0,Ai.BLACK=!1,Ai.EMPTY=new class{constructor(){this.size=0}get key(){throw Jt()}get value(){throw Jt()}get color(){throw Jt()}get left(){throw Jt()}get right(){throw Jt()}copy(e,t,r,s,u){return this}insert(e,t,r){return new Ai(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Mr{constructor(e){this.comparator=e,this.data=new $r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gS(this.data.getIterator())}getIteratorFrom(e){return new gS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Mr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Mr(this.comparator);return t.data=e,t}}class gS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Xo{constructor(e){this.fields=e,e.sort(wr.comparator)}static empty(){return new Xo([])}unionWith(e){let t=new Mr(wr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Xo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class O_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Bi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new O_("Invalid base64 string: "+u):u}}(e);return new Bi(t)}static fromUint8Array(e){const t=function(s){let u="";for(let d=0;d<s.length;++d)u+=String.fromCharCode(s[d]);return u}(e);return new Bi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bi.EMPTY_BYTE_STRING=new Bi("");const vS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pa(n){if(dn(!!n),"string"==typeof n){let e=0;const t=vS.exec(n);if(dn(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ni(n.seconds),nanos:ni(n.nanos)}}function ni(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function pc(n){return"string"==typeof n?Bi.fromBase64String(n):Bi.fromUint8Array(n)}function P_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function N_(n){const e=n.mapValue.fields.__previous_value__;return P_(e)?N_(e):e}function bm(n){const e=Pa(n.mapValue.fields.__local_write_time__.timestampValue);return new Yr(e.seconds,e.nanos)}class A0{constructor(e,t,r,s,u,d,f,g,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=D}}class eu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new eu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof eu&&e.projectId===this.projectId&&e.database===this.database}}const tu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function mc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?P_(n)?4:R0(n)?9007199254740991:10:Jt()}function gc(n,e){if(n===e)return!0;const t=mc(n);if(t!==mc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return bm(n).isEqual(bm(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const d=Pa(s.timestampValue),f=Pa(u.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return u=e,pc(n.bytesValue).isEqual(pc(u.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,u){return ni(s.geoPointValue.latitude)===ni(u.geoPointValue.latitude)&&ni(s.geoPointValue.longitude)===ni(u.geoPointValue.longitude)}(n,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return ni(s.integerValue)===ni(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const d=ni(s.doubleValue),f=ni(u.doubleValue);return d===f?mm(d)===mm(f):isNaN(d)&&isNaN(f)}return!1}(n,e);case 9:return Jc(n.arrayValue.values||[],e.arrayValue.values||[],gc);case 10:return function(s,u){const d=s.mapValue.fields||{},f=u.mapValue.fields||{};if(fS(d)!==fS(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(void 0===f[g]||!gc(d[g],f[g])))return!1;return!0}(n,e);default:return Jt()}var u}function Em(n,e){return void 0!==(n.values||[]).find(t=>gc(t,e))}function Wu(n,e){if(n===e)return 0;const t=mc(n),r=mc(e);if(t!==r)return Pn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pn(n.booleanValue,e.booleanValue);case 2:return function(u,d){const f=ni(u.integerValue||u.doubleValue),g=ni(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(n,e);case 3:return _S(n.timestampValue,e.timestampValue);case 4:return _S(bm(n),bm(e));case 5:return Pn(n.stringValue,e.stringValue);case 6:return function(u,d){const f=pc(u),g=pc(d);return f.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(u,d){const f=u.split("/"),g=d.split("/");for(let D=0;D<f.length&&D<g.length;D++){const S=Pn(f[D],g[D]);if(0!==S)return S}return Pn(f.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(u,d){const f=Pn(ni(u.latitude),ni(d.latitude));return 0!==f?f:Pn(ni(u.longitude),ni(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(u,d){const f=u.values||[],g=d.values||[];for(let D=0;D<f.length&&D<g.length;++D){const S=Wu(f[D],g[D]);if(S)return S}return Pn(f.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===tu.mapValue&&d===tu.mapValue)return 0;if(u===tu.mapValue)return 1;if(d===tu.mapValue)return-1;const f=u.fields||{},g=Object.keys(f),D=d.fields||{},S=Object.keys(D);g.sort(),S.sort();for(let P=0;P<g.length&&P<S.length;++P){const j=Pn(g[P],S[P]);if(0!==j)return j;const Q=Wu(f[g[P]],D[S[P]]);if(0!==Q)return Q}return Pn(g.length,S.length)}(n.mapValue,e.mapValue);default:throw Jt()}}function _S(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pn(n,e);const t=Pa(n),r=Pa(e),s=Pn(t.seconds,r.seconds);return 0!==s?s:Pn(t.nanos,r.nanos)}function rd(n){return wm(n)}function wm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Pa(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?pc(n.bytesValue).toBase64():"referenceValue"in n?Gt.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const u of t.values||[])s?s=!1:r+=",",r+=wm(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",u=!0;for(const d of r)u?u=!1:s+=",",s+=`${d}:${wm(t.fields[d])}`;return s+"}"}(n.mapValue):Jt()}function Gu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function k_(n){return!!n&&"integerValue"in n}function kh(n){return!!n&&"arrayValue"in n}function yS(n){return!!n&&"nullValue"in n}function x0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function F_(n){return!!n&&"mapValue"in n}function id(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ku(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=id(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=id(n.arrayValue.values[t]);return e}return Object.assign({},n)}function R0(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Qi{constructor(e){this.value=e}static empty(){return new Qi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!F_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=id(t)}setAll(e){let t=wr.emptyPath(),r={},s=[];e.forEach((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,s),r={},s=[],t=f.popLast()}d?r[f.lastSegment()]=id(d):s.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());F_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];F_(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ku(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Qi(id(this.value))}}function O0(n){const e=[];return Ku(n.fields,(t,r)=>{const s=new wr([t]);if(F_(r)){const u=O0(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new Xo(e)}class Vr{constructor(e,t,r,s,u,d,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Vr(e,0,fn.min(),fn.min(),fn.min(),Qi.empty(),0)}static newFoundDocument(e,t,r,s){return new Vr(e,1,t,fn.min(),r,s,0)}static newNoDocument(e,t){return new Vr(e,2,t,fn.min(),fn.min(),Qi.empty(),0)}static newUnknownDocument(e,t){return new Vr(e,3,t,fn.min(),fn.min(),Qi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class nu{constructor(e,t){this.position=e,this.inclusive=t}}function P0(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?Gt.comparator(Gt.fromName(d.referenceValue),t.key):Wu(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function N0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gc(n.position[t],e.position[t]))return!1;return!0}class Fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function XP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class YP{}class nr extends YP{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new SL(e,t,r):"array-contains"===t?new RL(e,r):"in"===t?new tN(e,r):"not-in"===t?new ML(e,r):"array-contains-any"===t?new OL(e,r):new nr(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new AL(e,r):new xL(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Wu(t,this.value)):null!==t&&mc(this.value)===mc(t)&&this.matchesComparison(Wu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends YP{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Or(e,t)}matches(e){return Im(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Im(n){return"and"===n.op}function wS(n){return function ZP(n){for(const e of n.filters)if(e instanceof Or)return!1;return!0}(n)&&Im(n)}function IS(n){if(n instanceof nr)return n.field.canonicalString()+n.op.toString()+rd(n.value);if(wS(n))return n.filters.map(e=>IS(e)).join(",");{const e=n.filters.map(t=>IS(t)).join(",");return`${n.op}(${e})`}}function k0(n,e){return n instanceof nr?(r=n,(s=e)instanceof nr&&r.op===s.op&&r.field.isEqual(s.field)&&gc(r.value,s.value)):n instanceof Or?function(r,s){return s instanceof Or&&r.op===s.op&&r.filters.length===s.filters.length&&r.filters.reduce((u,d,f)=>u&&k0(d,s.filters[f]),!0)}(n,e):void Jt();var r,s}function JP(n){return n instanceof nr?`${(t=n).field.canonicalString()} ${t.op} ${rd(t.value)}`:n instanceof Or?function(t){return t.op.toString()+" {"+t.getFilters().map(JP).join(" ,")+"}"}(n):"Filter";var t}class SL extends nr{constructor(e,t,r){super(e,t,r),this.key=Gt.fromName(r.referenceValue)}matches(e){const t=Gt.comparator(e.key,this.key);return this.matchesComparison(t)}}class AL extends nr{constructor(e,t){super(e,"in",t),this.keys=eN(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xL extends nr{constructor(e,t){super(e,"not-in",t),this.keys=eN(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function eN(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Gt.fromName(r.referenceValue))}class RL extends nr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kh(t)&&Em(t.arrayValue,this.value)}}class tN extends nr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Em(this.value.arrayValue,t)}}class ML extends nr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Em(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Em(this.value.arrayValue,t)}}class OL extends nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Em(this.value.arrayValue,r))}}class nN{constructor(e,t=null,r=[],s=[],u=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=f,this.ue=null}}function qu(n,e=null,t=[],r=[],s=null,u=null,d=null){return new nN(n,e,t,r,s,u,d)}function Na(n){const e=Qt(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>IS(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(u=r).field.canonicalString()+u.dir;var u}).join(","),pm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rd(r)).join(",")),e.ue=t}return e.ue}function Dm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!XP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!k0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!N0(n.startAt,e.startAt)&&N0(n.endAt,e.endAt)}function L0(n){return Gt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class ru{constructor(e,t=null,r=[],s=[],u=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null}}function Lh(n){return new ru(n)}function Tm(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function L_(n){return null!==n.collectionGroup}function Vh(n){const e=Qt(n);if(null===e.ce){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Mr(wr.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(D=>{D.isInequality()&&(f=f.add(D.field))})}),f})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new Fh(u,r))}),t.has(wr.keyField().canonicalString())||e.ce.push(new Fh(wr.keyField(),r))}return e.ce}function po(n){const e=Qt(n);return e.le||(e.le=function V0(n,e){if("F"===n.limitType)return qu(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>new Fh(s.field,"desc"===s.dir?"asc":"desc"));const t=n.endAt?new nu(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new nu(n.startAt.position,n.startAt.inclusive):null;return qu(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,Vh(n))),e.le}function TS(n,e){const t=n.filters.concat([e]);return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function V_(n,e,t){return new ru(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bh(n,e){return Dm(po(n),po(e))&&n.limitType===e.limitType}function B_(n){return`${Na(po(n))}|lt:${n.limitType}`}function jh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>JP(s)).join(", ")}]`),pm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>{return`${(d=s).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>rd(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>rd(s)).join(",")),`Target(${r})`}(po(n))}; limitType=${n.limitType})`}function Sm(n,e){return e.isFoundDocument()&&function(r,s){const u=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Gt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(n,e)&&function(r,s){for(const u of Vh(r))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(n,e)&&function(r,s){for(const u of r.filters)if(!u.matches(s))return!1;return!0}(n,e)&&(s=e,!((r=n).startAt&&!function(d,f,g){const D=P0(d,f,g);return d.inclusive?D<=0:D<0}(r.startAt,Vh(r),s)||r.endAt&&!function(d,f,g){const D=P0(d,f,g);return d.inclusive?D>=0:D>0}(r.endAt,Vh(r),s)));var r,s}function SS(n){return(e,t)=>{let r=!1;for(const s of Vh(n)){const u=oN(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function oN(n,e,t){const r=n.field.isKeyField()?Gt.comparator(e.key,t.key):function(u,d,f){const g=d.data.field(u),D=f.data.field(u);return null!==g&&null!==D?Wu(g,D):Jt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Jt()}}class iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ku(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return mS(this.inner)}size(){return this.innerSize}}const sN=new $r(Gt.comparator);function gs(){return sN}const AS=new $r(Gt.comparator);function xm(...n){let e=AS;for(const t of n)e=e.insert(t.key,t);return e}function B0(n){let e=AS;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ka(){return j_()}function xS(){return j_()}function j_(){return new iu(n=>n.toString(),(n,e)=>n.isEqual(e))}const RS=new $r(Gt.comparator),MS=new Mr(Gt.comparator);function Rn(...n){let e=MS;for(const t of n)e=e.add(t);return e}const OS=new Mr(Pn);function aN(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mm(e)?"-0":e}}function U_(n){return{integerValue:""+n}}function $_(n,e){return function b0(n){return"number"==typeof n&&Number.isInteger(n)&&!mm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?U_(e):aN(n,e)}class H_{constructor(){this._=void 0}}function PS(n,e,t){return n instanceof Rm?function(s,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&P_(u)&&(u=N_(u)),u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):n instanceof vc?kS(n,e):n instanceof od?z_(n,e):function(s,u){const d=NS(s,u),f=Fa(d)+Fa(s.Pe);return k_(d)&&k_(s.Pe)?U_(f):aN(s.serializer,f)}(n,e)}function U0(n,e,t){return n instanceof vc?kS(n,e):n instanceof od?z_(n,e):t}function NS(n,e){return n instanceof Uh?k_(r=e)||(u=r)&&"doubleValue"in u?e:{integerValue:0}:null;var r,u}class Rm extends H_{}class vc extends H_{constructor(e){super(),this.elements=e}}function kS(n,e){const t=$h(e);for(const r of n.elements)t.some(s=>gc(s,r))||t.push(r);return{arrayValue:{values:t}}}class od extends H_{constructor(e){super(),this.elements=e}}function z_(n,e){let t=$h(e);for(const r of n.elements)t=t.filter(s=>!gc(s,r));return{arrayValue:{values:t}}}class Uh extends H_{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Fa(n){return ni(n.integerValue||n.doubleValue)}function $h(n){return kh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Wr{constructor(e,t){this.field=e,this.transform=t}}class K_{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ou(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class W_{}function Hh(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new _c(n.key,rr.none()):new Kh(n.key,n.data,rr.none());{const t=n.data,r=Qi.empty();let s=new Mr(wr.comparator);for(let u of e.fields)if(!s.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),s=s.add(u)}return new Ar(n.key,r,new Xo(s.toArray()),rr.none())}}function $0(n,e,t){n instanceof Kh?function(s,u,d){const f=s.value.clone(),g=VS(s.fieldTransforms,u,d.transformResults);f.setAll(g),u.convertToFoundDocument(d.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Ar?function(s,u,d){if(!ou(s.precondition,u))return void u.convertToUnknownDocument(d.version);const f=VS(s.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(H0(s)),g.setAll(f),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function zh(n,e,t,r){return n instanceof Kh?function(u,d,f,g){if(!ou(u.precondition,d))return f;const D=u.value.clone(),S=di(u.fieldTransforms,g,d);return D.setAll(S),d.convertToFoundDocument(d.version,D).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ar?function(u,d,f,g){if(!ou(u.precondition,d))return f;const D=di(u.fieldTransforms,g,d),S=d.data;return S.setAll(H0(u)),S.setAll(D),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),null===f?null:f.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(P=>P.field))}(n,e,t,r):(f=t,ou(n.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f);var d,f}function FS(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=NS(r.transform,s||null);null!=u&&(null===t&&(t=Qi.empty()),t.set(r.field,u))}return t||null}function LS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===s||r&&s&&Jc(r,s,(u,d)=>function sd(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(r=n.transform)instanceof vc&&s instanceof vc||r instanceof od&&s instanceof od?Jc(r.elements,s.elements,gc):r instanceof Uh&&s instanceof Uh?gc(r.Pe,s.Pe):r instanceof Rm&&s instanceof Rm);var r,s}(u,d))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,s}class Kh extends W_{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ar extends W_{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function H0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function VS(n,e,t){const r=new Map;dn(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,f=e.data.field(u.field);r.set(u.field,U0(d,f,t[s]))}return r}function di(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,PS(u,d,e))}return r}class _c extends W_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qu extends W_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Wh{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&$0(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=zh(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=zh(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=xS();return this.mutations.forEach(s=>{const u=e.get(s.key),d=u.overlayedDocument;let f=this.applyToLocalView(d,u.mutatedFields);f=t.has(s.key)?null:f;const g=Hh(d,f);null!==g&&r.set(s.key,g),d.isValidDocument()||d.convertToNoDocument(fn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Rn())}isEqual(e){return this.batchId===e.batchId&&Jc(this.mutations,e.mutations,(t,r)=>LS(t,r))&&Jc(this.baseMutations,e.baseMutations,(t,r)=>LS(t,r))}}class ad{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){dn(e.mutations.length===r.length);let s=function(){return RS}();const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new ad(e,t,r,s)}}class Gh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class BS{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ei,Xn;function G_(n){switch(n){default:return Jt();case gt.CANCELLED:case gt.UNKNOWN:case gt.DEADLINE_EXCEEDED:case gt.RESOURCE_EXHAUSTED:case gt.INTERNAL:case gt.UNAVAILABLE:case gt.UNAUTHENTICATED:return!1;case gt.INVALID_ARGUMENT:case gt.NOT_FOUND:case gt.ALREADY_EXISTS:case gt.PERMISSION_DENIED:case gt.FAILED_PRECONDITION:case gt.ABORTED:case gt.OUT_OF_RANGE:case gt.UNIMPLEMENTED:case gt.DATA_LOSS:return!0}}function K0(n){if(void 0===n)return yi("GRPC error has no .code"),gt.UNKNOWN;switch(n){case Ei.OK:return gt.OK;case Ei.CANCELLED:return gt.CANCELLED;case Ei.UNKNOWN:return gt.UNKNOWN;case Ei.DEADLINE_EXCEEDED:return gt.DEADLINE_EXCEEDED;case Ei.RESOURCE_EXHAUSTED:return gt.RESOURCE_EXHAUSTED;case Ei.INTERNAL:return gt.INTERNAL;case Ei.UNAVAILABLE:return gt.UNAVAILABLE;case Ei.UNAUTHENTICATED:return gt.UNAUTHENTICATED;case Ei.INVALID_ARGUMENT:return gt.INVALID_ARGUMENT;case Ei.NOT_FOUND:return gt.NOT_FOUND;case Ei.ALREADY_EXISTS:return gt.ALREADY_EXISTS;case Ei.PERMISSION_DENIED:return gt.PERMISSION_DENIED;case Ei.FAILED_PRECONDITION:return gt.FAILED_PRECONDITION;case Ei.ABORTED:return gt.ABORTED;case Ei.OUT_OF_RANGE:return gt.OUT_OF_RANGE;case Ei.UNIMPLEMENTED:return gt.UNIMPLEMENTED;case Ei.DATA_LOSS:return gt.DATA_LOSS;default:return Jt()}}(Xn=Ei||(Ei={}))[Xn.OK=0]="OK",Xn[Xn.CANCELLED=1]="CANCELLED",Xn[Xn.UNKNOWN=2]="UNKNOWN",Xn[Xn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xn[Xn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xn[Xn.NOT_FOUND=5]="NOT_FOUND",Xn[Xn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xn[Xn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xn[Xn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xn[Xn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xn[Xn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xn[Xn.ABORTED=10]="ABORTED",Xn[Xn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xn[Xn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xn[Xn.INTERNAL=13]="INTERNAL",Xn[Xn.UNAVAILABLE=14]="UNAVAILABLE",Xn[Xn.DATA_LOSS=15]="DATA_LOSS";const cN=new Ma([4294967295,4294967295],0);function vs(n){const e=function Xu(){return new TextEncoder}().encode(n),t=new f0;return t.update(e),new Uint8Array(t.digest())}function jS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Ma([t,r],0),new Ma([s,u],0)]}class W0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ud(`Invalid padding: ${t}`);if(r<0)throw new ud(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new ud(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new ud(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Ma.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(Ma.fromNumber(r)));return 1===s.compare(cN)&&(s=new Ma([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=vs(e),[r,s]=jS(t);for(let u=0;u<this.hashCount;u++){const d=this.Ee(r,s,u);if(!this.de(d))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new W0(u,s,t);return r.forEach(f=>d.insert(f)),d}insert(e){if(0===this.Ie)return;const t=vs(e),[r,s]=jS(t);for(let u=0;u<this.hashCount;u++){const d=this.Ee(r,s,u);this.Ae(d)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class ud extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class qh{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Qh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qh(fn.min(),s,new $r(Pn),gs(),Rn())}}class Qh{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Qh(r,t,Rn(),Rn(),Rn())}}class q_{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class uN{constructor(e,t){this.targetId=e,this.me=t}}class US{constructor(e,t,r=Bi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Mm{constructor(){this.fe=0,this.ge=ld(),this.pe=Bi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Rn(),t=Rn(),r=Rn();return this.ge.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Jt()}}),new Qh(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=ld()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,dn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class G0{constructor(e){this.Le=e,this.Be=new Map,this.ke=gs(),this.qe=Q_(),this.Qe=new $r(Pn)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Jt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.ze(s)&&t(s)})}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const u=s.target;if(L0(u))if(0===r){const d=new Gt(u.path);this.Ue(t,d,Vr.newNoDocument(d,fn.min()))}else dn(1===r);else{const d=this.Ye(t);if(d!==r){const f=this.Ze(e),g=f?this.Xe(f,e,d):1;0!==g&&(this.je(t),this.Qe=this.Qe.insert(t,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:u=0}=t;let d,f;try{d=pc(r).toUint8Array()}catch(g){if(g instanceof O_)return Fs("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new W0(d,s,u)}catch(g){return Fs(g instanceof ud?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return 0===f.Ie?null:f}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(u=>{const d=this.Le.tt(),f=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,u,null),s++)}),s}rt(e){const t=new Map;this.Be.forEach((u,d)=>{const f=this.Je(d);if(f){if(u.current&&L0(f.target)){const g=new Gt(f.target.path);null!==this.ke.get(g)||this.it(d,g)||this.Ue(d,g,Vr.newNoDocument(g,e))}u.be&&(t.set(d,u.Ce()),u.ve())}});let r=Rn();this.qe.forEach((u,d)=>{let f=!0;d.forEachWhile(g=>{const D=this.Je(g);return!D||"TargetPurposeLimboResolution"===D.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.ke.forEach((u,d)=>d.setReadTime(e));const s=new qh(e,t,this.Qe,this.ke,r);return this.ke=gs(),this.qe=Q_(),this.Qe=new $r(Pn),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Mm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Mr(Pn),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ot("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Q_(){return new $r(Gt.comparator)}function ld(){return new $r(Gt.comparator)}const $S={asc:"ASCENDING",desc:"DESCENDING"},HS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xh={and:"AND",or:"OR"};class q0{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Om(n,e){return n.useProto3Json||pm(e)?e:{value:e}}function dd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Q0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function zS(n,e){return dd(n,e.toTimestamp())}function wi(n){return dn(!!n),fn.fromTimestamp(function(t){const r=Pa(t);return new Yr(r.seconds,r.nanos)}(n))}function X0(n,e){return Yu(n,e).canonicalString()}function Yu(n,e){const t=(s=n,new Zn(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===e?t:t.child(e)}function Y0(n){const e=Zn.fromString(n);return dn(nw(e)),e}function Pm(n,e){return X0(n.databaseId,e.path)}function yc(n,e){const t=Y0(e);if(t.get(1)!==n.databaseId.projectId)throw new xt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xt(gt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Gt(WS(t))}function KS(n,e){return X0(n.databaseId,e)}function X_(n){return new Zn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function WS(n){return dn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function lN(n,e,t){return{name:Pm(n,e),fields:t.value.mapValue.fields}}function Nm(n,e){let t;if(e instanceof Kh)t={update:lN(n,e.key,e.value)};else if(e instanceof _c)t={delete:Pm(n,e.key)};else if(e instanceof Ar)t={update:lN(n,e.key,e.data),updateMask:gN(e.fieldMask)};else{if(!(e instanceof Qu))return Jt();t={verify:Pm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(u,d){const f=d.transform;if(f instanceof Rm)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof vc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof od)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Uh)return{fieldPath:d.field.canonicalString(),increment:f.Pe};throw Jt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:zS(n,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Jt()),t;var u}function qS(n,e){return{documents:[KS(n,e.path)]}}function Y_(n,e){const t={structuredQuery:{}},r=e.path;let s;null!==e.collectionGroup?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=KS(n,s);const u=function(D){if(0!==D.length)return ZS(Or.create(D,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const d=function(D){if(0!==D.length)return D.map(S=>{return{field:Zu((j=S).field),direction:fN(j.dir)};var j})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=Om(n,e.limit);return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt=function(D){return{before:!D.inclusive,values:D.position}}(e.endAt)),{_t:t,parent:s};var D}function XS(n){let e=function Z0(n){const e=Y0(n);return 4===e.length?Zn.emptyPath():WS(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){dn(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(P){const j=YS(P);return j instanceof Or&&wS(j)?j.getFilters():[j]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(j=>{return new Fh(Yh((ye=j).field),function(we){switch(we){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ye.direction));var ye}));let f=null;t.limit&&(f=function(P){let j;return j="object"==typeof P?P.value:P,pm(j)?null:j}(t.limit));let g=null;var P;t.startAt&&(g=new nu((P=t.startAt).values||[],!!P.before));let D=null;return t.endAt&&(D=function(P){return new nu(P.values||[],!P.before)}(t.endAt)),function CS(n,e,t,r,s,u,d,f){return new ru(n,e,t,r,s,u,d,f)}(e,s,d,u,f,"F",g,D)}function YS(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Yh(t.unaryFilter.field);return nr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Yh(t.unaryFilter.field);return nr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Yh(t.unaryFilter.field);return nr.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Yh(t.unaryFilter.field);return nr.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Jt()}}(n):void 0!==n.fieldFilter?nr.create(Yh((t=n).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Or.create(t.compositeFilter.filters.map(r=>YS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Jt()}}(t.compositeFilter.op))}(n):Jt();var t}function fN(n){return $S[n]}function pN(n){return HS[n]}function mN(n){return Xh[n]}function Zu(n){return{fieldPath:n.canonicalString()}}function Yh(n){return wr.fromServerFormat(n.fieldPath)}function ZS(n){return n instanceof nr?function(t){if("=="===t.op){if(x0(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NAN"}};if(yS(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(x0(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NOT_NAN"}};if(yS(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zu(t.field),op:pN(t.op),value:t.value}}}(n):n instanceof Or?function(t){const r=t.getFilters().map(s=>ZS(s));return 1===r.length?r[0]:{compositeFilter:{op:mN(t.op),filters:r}}}(n):Jt()}function gN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function nw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class bc{constructor(e,t,r,s,u=fn.min(),d=fn.min(),f=Bi.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new bc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class su{constructor(e){this.ct=e}}function tl(n){const e=XS({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?V_(e,e.limit,"L"):e}class ca{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(ni(e.integerValue));else if("doubleValue"in e){const r=ni(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),mm(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=Pa(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(pc(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?R0(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Jt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const s of Object.keys(r))this.Rt(s,t),this.It(r[s],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const s of r)this.It(s,t)}gt(e,t){this.Et(t,37),Gt.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}ca.bt=new ca;class vN{constructor(){this._n=new Lm}addToCollectionParentIndex(e,t){return this._n.add(t),et.resolve()}getCollectionParents(e,t){return et.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return et.resolve()}deleteFieldIndex(e,t){return et.resolve()}deleteAllFieldIndexes(e){return et.resolve()}createTargetIndexes(e,t){return et.resolve()}getDocumentsMatchingTarget(e,t){return et.resolve(null)}getIndexType(e,t){return et.resolve(0)}getFieldIndexes(e,t){return et.resolve([])}getNextCollectionGroupToUpdate(e){return et.resolve(null)}getMinOffset(e,t){return et.resolve(Go.min())}getMinOffsetFromCollectionGroup(e,t){return et.resolve(Go.min())}updateCollectionGroup(e,t,r){return et.resolve()}updateIndexEntries(e,t){return et.resolve()}}class Lm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Mr(Zn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Mr(Zn.comparator)).toArray()}}new Uint8Array(0);class Mo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Mo(e,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Mo.DEFAULT_COLLECTION_PERCENTILE=10,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mo.DEFAULT=new Mo(41943040,Mo.DEFAULT_COLLECTION_PERCENTILE,Mo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mo.DISABLED=new Mo(-1,0,0);class vd{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new vd(0)}static Ln(){return new vd(-1)}}class Ba{constructor(){this.changes=new iu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?et.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class lf{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&zh(r.mutation,s,Xo.empty(),Yr.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Rn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Rn()){const s=ka();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let d=xm();return u.forEach((f,g)=>{d=d.insert(f,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=ka();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Rn()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((d,f)=>{t.set(d,f)})})}computeViews(e,t,r,s){let u=gs();const d=j_(),f=j_();return t.forEach((g,D)=>{const S=r.get(D.key);s.has(D.key)&&(void 0===S||S.mutation instanceof Ar)?u=u.insert(D.key,D):void 0!==S?(d.set(D.key,S.mutation.getFieldMask()),zh(S.mutation,D,S.mutation.getFieldMask(),Yr.now())):d.set(D.key,Xo.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((D,S)=>d.set(D,S)),t.forEach((D,S)=>{var P;return f.set(D,new gw(S,null!==(P=d.get(D))&&void 0!==P?P:null))}),f))}recalculateAndSaveOverlays(e,t){const r=j_();let s=new $r((d,f)=>d-f),u=Rn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const f of d)f.keys().forEach(g=>{const D=t.get(g);if(null===D)return;let S=r.get(g)||Xo.empty();S=f.applyToLocalView(D,S),r.set(g,S);const P=(s.get(f.batchId)||Rn()).add(g);s=s.insert(f.batchId,P)})}).next(()=>{const d=[],f=s.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),D=g.key,S=g.value,P=xS();S.forEach(j=>{if(!u.has(j)){const Q=Hh(t.get(j),r.get(j));null!==Q&&P.set(j,Q),u=u.add(j)}}),d.push(this.documentOverlayCache.saveOverlays(e,D,P))}return et.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return Gt.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):L_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s);var d}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const d=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):et.resolve(ka());let f=-1,g=u;return d.next(D=>et.forEach(D,(S,P)=>(f<P.largestBatchId&&(f=P.largestBatchId),u.get(S)?et.resolve():this.remoteDocumentCache.getEntry(e,S).next(j=>{g=g.insert(S,j)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,g,D,Rn())).next(S=>({batchId:f,changes:B0(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Gt(t)).next(r=>{let s=xm();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const u=t.collectionGroup;let d=xm();return this.indexManager.getCollectionParents(e,u).next(f=>et.forEach(f,g=>{const D=(P=t,j=g.child(u),new ru(j,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt));var P,j;return this.getDocumentsMatchingCollectionQuery(e,D,r,s).next(S=>{S.forEach((P,j)=>{d=d.insert(P,j)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,r,s){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,s))).next(d=>{u.forEach((g,D)=>{const S=D.getKey();null===d.get(S)&&(d=d.insert(S,Vr.newInvalidDocument(S)))});let f=xm();return d.forEach((g,D)=>{const S=u.get(g);void 0!==S&&zh(S.mutation,D,Xo.empty(),Yr.now()),Sm(t,D)&&(f=f.insert(g,D))}),f})}}class yN{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return et.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(s=t).id,version:s.version,createTime:wi(s.createTime)}),et.resolve();var s}getNamedQuery(e,t){return et.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(s=t).name,query:tl(s.bundledQuery),readTime:wi(s.readTime)}),et.resolve();var s}}class dA{constructor(){this.overlays=new $r(Gt.comparator),this.hr=new Map}getOverlay(e,t){return et.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ka();return et.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ht(e,t,u)}),et.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.hr.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.hr.delete(r)),et.resolve()}getOverlaysForCollection(e,t,r){const s=ka(),u=t.length+1,d=new Gt(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,D=g.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&g.largestBatchId>r&&s.set(g.getKey(),g)}return et.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new $r((D,S)=>D-S);const d=this.overlays.getIterator();for(;d.hasNext();){const D=d.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let S=u.get(D.largestBatchId);null===S&&(S=ka(),u=u.insert(D.largestBatchId,S)),S.set(D.getKey(),D)}}const f=ka(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((D,S)=>f.set(D,S)),!(f.size()>=s)););return et.resolve(f)}ht(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Gh(t,r));let u=this.hr.get(t);void 0===u&&(u=Rn(),this.hr.set(t,u)),this.hr.set(t,u.add(r.key))}}class vw{constructor(){this.Pr=new Mr(Xi.Ir),this.Tr=new Mr(Xi.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Xi(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Xi(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Gt(new Zn([])),r=new Xi(t,e),s=new Xi(t,e+1),u=[];return this.Tr.forEachInRange([r,s],d=>{this.Ar(d),u.push(d.key)}),u}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Gt(new Zn([])),r=new Xi(t,e),s=new Xi(t,e+1);let u=Rn();return this.Tr.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Xi(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Xi{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Gt.comparator(e.key,t.key)||Pn(e.pr,t.pr)}static Er(e,t){return Pn(e.pr,t.pr)||Gt.comparator(e.key,t.key)}}class hA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Mr(Xi.Ir)}checkEmpty(e){return et.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.yr;this.yr++;const d=new Wh(u,t,r,s);this.mutationQueue.push(d);for(const f of s)this.wr=this.wr.add(new Xi(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return et.resolve(d)}lookupMutationBatch(e,t){return et.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.br(t+1),u=s<0?0:s;return et.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return et.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return et.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Xi(t,0),s=new Xi(t,Number.POSITIVE_INFINITY),u=[];return this.wr.forEachInRange([r,s],d=>{const f=this.Sr(d.pr);u.push(f)}),et.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Mr(Pn);return t.forEach(s=>{const u=new Xi(s,0),d=new Xi(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([u,d],f=>{r=r.add(f.pr)})}),et.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Gt.isDocumentKey(u)||(u=u.child(""));const d=new Xi(new Gt(u),0);let f=new Mr(Pn);return this.wr.forEachWhile(g=>{const D=g.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(f=f.add(g.pr)),!0)},d),et.resolve(this.Dr(f))}Dr(e){const t=[];return e.forEach(r=>{const s=this.Sr(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){dn(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return et.forEach(t.mutations,s=>{const u=new Xi(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Xi(t,0),s=this.wr.firstAfterOrEqual(r);return et.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return et.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fA{constructor(e){this.vr=e,this.docs=new $r(Gt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return et.resolve(r?r.document.mutableCopy():Vr.newInvalidDocument(t))}getEntries(e,t){let r=gs();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Vr.newInvalidDocument(s))}),et.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=gs();const d=t.path,f=new Gt(d.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:D,value:{document:S}}=g.getNext();if(!d.isPrefixOf(D.path))break;D.path.length>d.length+1||v0(new Go((n=S).readTime,n.key,-1),r)<=0||(s.has(S.key)||Sm(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}var n;return et.resolve(u)}getAllFromCollectionGroup(e,t,r,s){Jt()}Fr(e,t){return et.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ry(this)}getSize(e){return et.resolve(this.size)}}class ry extends Ba{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),et.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class bN{constructor(e){this.persistence=e,this.Mr=new iu(t=>Na(t),Dm),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new vw,this.targetCount=0,this.Lr=vd.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,s)=>t(s)),et.resolve()}getLastRemoteSnapshotVersion(e){return et.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return et.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),et.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),et.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new vd(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,et.resolve()}updateTargetData(e,t){return this.qn(t),et.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,et.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Mr.forEach((d,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Mr.delete(d),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)}),et.waitFor(u).next(()=>s)}getTargetCount(e){return et.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return et.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),et.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),et.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),et.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return et.resolve(r)}containsKey(e,t){return et.resolve(this.Nr.containsKey(t))}}class iy{constructor(e,t){this.Br={},this.overlays={},this.kr=new qo(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new bN(this),this.indexManager=new vN,this.remoteDocumentCache=new fA(r=>this.referenceDelegate.Kr(r)),this.serializer=new su(t),this.$r=new yN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new hA(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ot("MemoryPersistence","Starting transaction:",e);const s=new EN(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(u=>this.referenceDelegate.Wr(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gr(e,t){return et.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class EN extends iS{constructor(e){super(),this.currentSequenceNumber=e}}class oy{constructor(e){this.persistence=e,this.zr=new vw,this.jr=null}static Hr(e){return new oy(e)}get Jr(){if(this.jr)return this.jr;throw Jt()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),et.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),et.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),et.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Jr.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return et.forEach(this.Jr,r=>{const s=Gt.fromPath(r);return this.Yr(e,s).next(u=>{u||t.removeEntry(s,fn.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return et.or([()=>et.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Ew{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=s}static Ki(e,t){let r=Rn(),s=Rn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new Ew(e,t.fromCache,r,s)}}class ww{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class IN{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function hT(){return!function HO(){var n;const e=null===(n=Up())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function _0(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}(function dc(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,s){const u={result:null};return this.ji(e,t).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.Hi(e,t,s,r).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new ww;return this.Ji(e,t,d).next(f=>{if(u.result=f,this.Ui)return this.Yi(e,t,d,f.size)})}).next(()=>u.result)}Yi(e,t,r,s){return r.documentReadCount<this.Wi?(Rh()<=tr.DEBUG&&Ot("QueryEngine","SDK will not create cache indexes for query:",jh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),et.resolve()):(Rh()<=tr.DEBUG&&Ot("QueryEngine","Query:",jh(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(Rh()<=tr.DEBUG&&Ot("QueryEngine","The SDK decides to create cache indexes for query:",jh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,po(t))):et.resolve())}ji(e,t){if(Tm(t))return et.resolve(null);let r=po(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=V_(t,null,"F"),r=po(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Rn(...u);return this.zi.getDocuments(e,d).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const D=this.Zi(t,f);return this.Xi(t,D,d,g.readTime)?this.ji(e,V_(t,null,"F")):this.es(e,D,t,g)}))})))}Hi(e,t,r,s){return Tm(t)||s.isEqual(fn.min())?et.resolve(null):this.zi.getDocuments(e,r).next(u=>{const d=this.Zi(t,u);return this.Xi(t,d,r,s)?et.resolve(null):(Rh()<=tr.DEBUG&&Ot("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),jh(t)),this.es(e,d,t,function nS(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=fn.fromTimestamp(1e9===r?new Yr(t+1,0):new Yr(t,r));return new Go(s,Gt.empty(),e)}(s,-1)).next(f=>f))})}Zi(e,t){let r=new Mr(SS(e));return t.forEach((s,u)=>{Sm(e,u)&&(r=r.add(u))}),r}Xi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Ji(e,t,r){return Rh()<=tr.DEBUG&&Ot("QueryEngine","Using full collection scan to execute query:",jh(t)),this.zi.getDocumentsMatchingQuery(e,t,Go.min(),r)}es(e,t,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class DN{constructor(e,t,r,s){this.persistence=e,this.ts=t,this.serializer=s,this.ns=new $r(Pn),this.rs=new iu(u=>Na(u),Dm),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lf(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function Iw(n,e){return uy.apply(this,arguments)}function uy(){return(uy=(0,rt.A)(function*(n,e){const t=Qt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],f=[];let g=Rn();for(const D of s){d.push(D.batchId);for(const S of D.mutations)g=g.add(S.key)}for(const D of u){f.push(D.batchId);for(const S of D.mutations)g=g.add(S.key)}return t.localDocuments.getDocuments(r,g).next(D=>({us:D,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function Dw(n){const e=Qt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function TN(n,e){const t=Qt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function bd(n,e,t){return vA.apply(this,arguments)}function vA(){return(vA=(0,rt.A)(function*(n,e,t){const r=Qt(n),s=r.ns.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!$u(d))throw d;Ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)})).apply(this,arguments)}function Cw(n,e,t){const r=Qt(n);let s=fn.min(),u=Rn();return r.persistence.runTransaction("Execute query","readwrite",d=>function(g,D,S){const P=Qt(g),j=P.rs.get(S);return void 0!==j?et.resolve(P.ns.get(j)):P.Qr.getTargetData(D,S)}(r,d,po(e)).next(f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(d,f.targetId).next(g=>{u=g})}).next(()=>r.ts.getDocumentsMatchingQuery(d,e,t?s:fn.min(),t?u:Rn())).next(f=>(function $m(n,e,t){let r=n.ss.get(e)||fn.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ss.set(e,r)}(r,function Am(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),f),{documents:f,hs:u})))}class qm{constructor(){this.activeTargetIds=function j0(){return OS}()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mw{constructor(){this.no=new qm,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new qm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class yA{io(e){}shutdown(){}}class bA{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let dy=null;function hy(){return null===dy?dy=268435456+Math.round(2147483648*Math.random()):dy++,"0x"+dy.toString(16)}const EA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wA{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const hi="WebChannelConnection";class AN extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${s}/databases/${u}`,this.bo="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${u}`}get Do(){return!1}Co(t,r,s,u,d){const f=hy(),g=this.vo(t,r.toUriEncodedString());Ot("RestConnection",`Sending RPC '${t}' ${f}:`,g,s);const D={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(D,u,d),this.Mo(t,g,D,s).then(S=>(Ot("RestConnection",`Received RPC '${t}' ${f}: `,S),S),S=>{throw Fs("RestConnection",`RPC '${t}' ${f} failed with error: `,S,"url: ",g,"request:",s),S})}xo(t,r,s,u,d,f){return this.Co(t,r,s,u,d)}Fo(t,r,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+Xl,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((u,d)=>t[d]=u),s&&s.headers.forEach((u,d)=>t[d]=u)}vo(t,r){return`${this.wo}/v1/${r}:${EA[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,s){const u=hy();return new Promise((d,f)=>{const g=new xh;g.setWithCredentials(!0),g.listenOnce(WT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case am.NO_ERROR:const S=g.getResponseJson();Ot(hi,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),d(S);break;case am.TIMEOUT:Ot(hi,`RPC '${e}' ${u} timed out`),f(new xt(gt.DEADLINE_EXCEEDED,"Request time out"));break;case am.HTTP_ERROR:const P=g.getStatus();if(Ot(hi,`RPC '${e}' ${u} failed with status:`,P,"response text:",g.getResponseText()),P>0){let j=g.getResponseJson();Array.isArray(j)&&(j=j[0]);const Q=j?.error;if(Q&&Q.status&&Q.message){const ye=function(we){const mt=we.toLowerCase().replace(/_/g,"-");return Object.values(gt).indexOf(mt)>=0?mt:gt.UNKNOWN}(Q.status);f(new xt(ye,Q.message))}else f(new xt(gt.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new xt(gt.UNAVAILABLE,"Connection failed."));break;default:Jt()}}finally{Ot(hi,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(s);Ot(hi,`RPC '${e}' ${u} sending request:`,s),g.send(t,"POST",D,r,15)})}Oo(e,t,r){const s=hy(),u=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=qT(),f=p0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(g.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(g.xmlHttpFactory=new sm({})),this.Fo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const S=u.join("");Ot(hi,`Creating RPC '${e}' stream ${s}: ${S}`,g);const P=d.createWebChannel(S,g);let j=!1,Q=!1;const ye=new wA({lo:we=>{Q?Ot(hi,`Not sending because RPC '${e}' stream ${s} is closed:`,we):(j||(Ot(hi,`Opening RPC '${e}' stream ${s} transport.`),P.open(),j=!0),Ot(hi,`RPC '${e}' stream ${s} sending:`,we),P.send(we))},ho:()=>P.close()}),Ee=(we,mt,Et)=>{we.listen(mt,Dt=>{try{Et(Dt)}catch(Ht){setTimeout(()=>{throw Ht},0)}})};return Ee(P,D_.EventType.OPEN,()=>{Q||(Ot(hi,`RPC '${e}' stream ${s} transport opened.`),ye.mo())}),Ee(P,D_.EventType.CLOSE,()=>{Q||(Q=!0,Ot(hi,`RPC '${e}' stream ${s} transport closed`),ye.po())}),Ee(P,D_.EventType.ERROR,we=>{Q||(Q=!0,Fs(hi,`RPC '${e}' stream ${s} transport errored:`,we),ye.po(new xt(gt.UNAVAILABLE,"The operation could not be completed")))}),Ee(P,D_.EventType.MESSAGE,we=>{var mt;if(!Q){const Et=we.data[0];dn(!!Et);const Ht=Et.error||(null===(mt=Et[0])||void 0===mt?void 0:mt.error);if(Ht){Ot(hi,`RPC '${e}' stream ${s} received error:`,Ht);const En=Ht.status;let un=function(Ce){const Le=Ei[Ce];if(void 0!==Le)return K0(Le)}(En),Fe=Ht.message;void 0===un&&(un=gt.INTERNAL,Fe="Unknown error status: "+En+" with message "+Ht.message),Q=!0,ye.po(new xt(un,Fe)),P.close()}else Ot(hi,`RPC '${e}' stream ${s} received:`,Et),ye.yo(Et)}}),Ee(f,GT.STAT_EVENT,we=>{we.stat===cm.PROXY?Ot(hi,`RPC '${e}' stream ${s} detected buffering proxy`):we.stat===cm.NOPROXY&&Ot(hi,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{ye.fo()},0),ye}}function du(){return typeof document<"u"?document:null}function fy(n){return new q0(n,!0)}class Xm{constructor(e,t,r=1e3,s=1.5,u=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=s,this.Bo=u,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),s=Math.max(0,t-r);s>0&&Ot("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class xN{constructor(e,t,r,s,u,d,f,g){this.oi=e,this.Go=r,this.zo=s,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Xm(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,rt.A)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,rt.A)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,rt.A)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===gt.RESOURCE_EXHAUSTED?(yi(t.toString()),yi("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===gt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.jo===t&&this.u_(r,s)},r=>{e(()=>{const s=new xt(gt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(s)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{r(()=>this.c_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}e_(){var e=this;this.state=5,this.Yo.$o((0,rt.A)(function*(){e.state=0,e.start()}))}c_(e){return Ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DA extends xN{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.serializer=u}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function ew(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(D=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:Jt(),s=e.targetChange.targetIds||[],u=function(D,S){return D.useProto3Json?(dn(void 0===S||"string"==typeof S),Bi.fromBase64String(S||"")):(dn(void 0===S||S instanceof Buffer||S instanceof Uint8Array),Bi.fromUint8Array(S||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&function(D){const S=void 0===D.code?gt.UNKNOWN:K0(D.code);return new xt(S,D.message||"")}(d);t=new US(r,s,u,f||null)}else if("documentChange"in e){const r=e.documentChange,s=yc(n,r.document.name),u=wi(r.document.updateTime),d=r.document.createTime?wi(r.document.createTime):fn.min(),f=new Qi({mapValue:{fields:r.document.fields}}),g=Vr.newFoundDocument(s,u,d,f);t=new q_(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,s=yc(n,r.document),u=r.readTime?wi(r.readTime):fn.min(),d=Vr.newNoDocument(s,u);t=new q_([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=yc(n,r.document);t=new q_([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Jt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,d=new BS(s,u);t=new uN(r.targetId,d)}}var D;return t}(this.serializer,e),r=function(u){if(!("targetChange"in u))return fn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?fn.min():d.readTime?wi(d.readTime):fn.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=X_(this.serializer),t.addTarget=function(u,d){let f;const g=d.target;if(f=L0(g)?{documents:qS(u,g)}:{query:Y_(u,g)._t},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=Q0(u,d.resumeToken);const D=Om(u,d.expectedCount);null!==D&&(f.expectedCount=D)}else if(d.snapshotVersion.compareTo(fn.min())>0){f.readTime=dd(u,d.snapshotVersion.toTimestamp());const D=Om(u,d.expectedCount);null!==D&&(f.expectedCount=D)}return f}(this.serializer,e);const r=function hN(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=X_(this.serializer),t.removeTarget=e,this.i_(t)}}class CA extends xN{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.serializer=u,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(dn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function dN(n,e){return n&&n.length>0?(dn(void 0!==e),n.map(t=>function(s,u){let d=wi(s.updateTime?s.updateTime:u);return d.isEqual(fn.min())&&(d=wi(u)),new K_(d,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.A_(r,t)}return dn(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=X_(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Nm(this.serializer,r))};this.i_(t)}}class NL extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new xt(gt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Co(e,Yu(t,r),s,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xt(gt.UNKNOWN,u.toString())})}xo(e,t,r,s,u){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,f])=>this.connection.xo(e,Yu(t,r),s,d,f,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===gt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new xt(gt.UNKNOWN,d.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class hf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(yi(t),this.y_=!1):Ot("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class RN{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=u,this.O_.io(f=>{r.enqueueAndForget((0,rt.A)(function*(){var g;la(d)&&(Ot("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,rt.A)(function*(S){const P=Qt(S);P.M_.add(4),yield Ua(P),P.N_.set("Unknown"),P.M_.delete(4),yield Ym(P)}),function D(S){return g.apply(this,arguments)})(d))}))}),this.N_=new hf(r,s)}}function Ym(n){return Ow.apply(this,arguments)}function Ow(){return(Ow=(0,rt.A)(function*(n){if(la(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function Ua(n){return Pw.apply(this,arguments)}function Pw(){return(Pw=(0,rt.A)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function Ed(n,e){const t=Qt(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),kw(t)?py(t):Cd(t).Xo()&&Oo(t,e))}function hu(n,e){const t=Qt(n),r=Cd(t);t.F_.delete(e),r.Xo()&&Nw(t,e),0===t.F_.size&&(r.Xo()?r.n_():la(t)&&t.N_.set("Unknown"))}function Oo(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Cd(n).P_(e)}function Nw(n,e){n.L_.xe(e),Cd(n).I_(e)}function py(n){n.L_=new G0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Cd(n).start(),n.N_.w_()}function kw(n){return la(n)&&!Cd(n).Zo()&&n.F_.size>0}function la(n){return 0===Qt(n).M_.size}function ff(n){n.L_=void 0}function MN(n){return Fw.apply(this,arguments)}function Fw(){return(Fw=(0,rt.A)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function TA(n){return wd.apply(this,arguments)}function wd(){return(wd=(0,rt.A)(function*(n){n.F_.forEach((e,t)=>{Oo(n,e)})})).apply(this,arguments)}function ON(n,e){return Lw.apply(this,arguments)}function Lw(){return(Lw=(0,rt.A)(function*(n,e){ff(n),kw(n)?(n.N_.D_(e),py(n)):n.N_.set("Unknown")})).apply(this,arguments)}function PN(n,e,t){return my.apply(this,arguments)}function my(){return my=(0,rt.A)(function*(n,e,t){if(n.N_.set("Online"),e instanceof US&&2===e.state&&e.cause)try{yield(r=(0,rt.A)(function*(u,d){const f=d.cause;for(const g of d.targetIds)u.F_.has(g)&&(yield u.remoteSyncer.rejectListen(g,f),u.F_.delete(g),u.L_.removeTarget(g))}),function s(u,d){return r.apply(this,arguments)})(n,e)}catch(r){Ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Zm(n,r)}else if(e instanceof q_?n.L_.Ke(e):e instanceof uN?n.L_.He(e):n.L_.We(e),!t.isEqual(fn.min()))try{const r=yield Dw(n.localStore);t.compareTo(r)>=0&&(yield function(u,d){const f=u.L_.rt(d);return f.targetChanges.forEach((g,D)=>{if(g.resumeToken.approximateByteSize()>0){const S=u.F_.get(D);S&&u.F_.set(D,S.withResumeToken(g.resumeToken,d))}}),f.targetMismatches.forEach((g,D)=>{const S=u.F_.get(g);if(!S)return;u.F_.set(g,S.withResumeToken(Bi.EMPTY_BYTE_STRING,S.snapshotVersion)),Nw(u,g);const P=new bc(S.target,g,D,S.sequenceNumber);Oo(u,P)}),u.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(r){Ot("RemoteStore","Failed to raise snapshot:",r),yield Zm(n,r)}var r}),my.apply(this,arguments)}function Zm(n,e,t){return gy.apply(this,arguments)}function gy(){return(gy=(0,rt.A)(function*(n,e,t){if(!$u(e))throw e;n.M_.add(1),yield Ua(n),n.N_.set("Offline"),t||(t=()=>Dw(n.localStore)),n.asyncQueue.enqueueRetryable((0,rt.A)(function*(){Ot("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Ym(n)}))})).apply(this,arguments)}function SA(n,e){return e().catch(t=>Zm(n,t,e))}function Id(n){return Vw.apply(this,arguments)}function Vw(){return(Vw=(0,rt.A)(function*(n){const e=Qt(n),t=il(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;kL(e);)try{const s=yield TN(e.localStore,r);if(null===s){0===e.v_.length&&t.n_();break}r=s.batchId,FL(e,s)}catch(s){yield Zm(e,s)}NN(e)&&kN(e)})).apply(this,arguments)}function kL(n){return la(n)&&n.v_.length<10}function FL(n,e){n.v_.push(e);const t=il(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function NN(n){return la(n)&&!il(n).Zo()&&n.v_.length>0}function kN(n){il(n).start()}function AA(n){return pf.apply(this,arguments)}function pf(){return(pf=(0,rt.A)(function*(n){il(n).V_()})).apply(this,arguments)}function FN(n){return Bw.apply(this,arguments)}function Bw(){return(Bw=(0,rt.A)(function*(n){const e=il(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function xA(n,e,t){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,rt.A)(function*(n,e,t){const r=n.v_.shift(),s=ad.from(r,e,t);yield SA(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Id(n)})).apply(this,arguments)}function LN(n,e){return jw.apply(this,arguments)}function jw(){return jw=(0,rt.A)(function*(n,e){var t;e&&il(n).E_&&(yield(t=(0,rt.A)(function*(s,u){if(G_(f=u.code)&&f!==gt.ABORTED){const d=s.v_.shift();il(s).t_(),yield SA(s,()=>s.remoteSyncer.rejectFailedWrite(d.batchId,u)),yield Id(s)}var f}),function r(s,u){return t.apply(this,arguments)})(n,e)),NN(n)&&kN(n)}),jw.apply(this,arguments)}function RA(n,e){return Uw.apply(this,arguments)}function Uw(){return(Uw=(0,rt.A)(function*(n,e){const t=Qt(n);t.asyncQueue.verifyOperationInProgress(),Ot("RemoteStore","RemoteStore received new credentials");const r=la(t);t.M_.add(3),yield Ua(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Ym(t)})).apply(this,arguments)}function MA(n,e){return $w.apply(this,arguments)}function $w(){return($w=(0,rt.A)(function*(n,e){const t=Qt(n);e?(t.M_.delete(2),yield Ym(t)):e||(t.M_.add(2),yield Ua(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Cd(n){return n.B_||(n.B_=function(t,r,s){const u=Qt(t);return u.f_(),new DA(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{Po:MN.bind(null,n),To:TA.bind(null,n),Ao:ON.bind(null,n),h_:PN.bind(null,n)}),n.x_.push(function(){var e=(0,rt.A)(function*(t){t?(n.B_.t_(),kw(n)?py(n):n.N_.set("Unknown")):(yield n.B_.stop(),ff(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function il(n){return n.k_||(n.k_=function(t,r,s){const u=Qt(t);return u.f_(),new CA(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:AA.bind(null,n),Ao:LN.bind(null,n),R_:FN.bind(null,n),A_:xA.bind(null,n)}),n.x_.push(function(){var e=(0,rt.A)(function*(t){t?(n.k_.t_(),yield Id(n)):(yield n.k_.stop(),n.v_.length>0&&(Ot("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class Hw{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new bi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,f=new Hw(e,t,d,s,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xt(gt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ic(n,e){if(yi("AsyncQueue",`${e}: ${n}`),$u(n))return new xt(gt.UNAVAILABLE,`${e}: ${n}`);throw n}class mf{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Gt.comparator(t.key,r.key):(t,r)=>Gt.comparator(t.key,r.key),this.keyedMap=xm(),this.sortedSet=new $r(this.comparator)}static emptySet(e){return new mf(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mf)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new mf;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class zw{constructor(){this.q_=new $r(Gt.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Jt():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Td{constructor(e,t,r,s,u,d,f,g,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,u){const d=[];return t.forEach(f=>{d.push({type:0,doc:f})}),new Td(e,t,mf.emptySet(t),d,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class VN{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class OA{constructor(){this.queries=new iu(e=>B_(e),Bh),this.onlineState="Unknown",this.z_=new Set}}function Kw(n,e){return Jm.apply(this,arguments)}function Jm(){return(Jm=(0,rt.A)(function*(n,e){const t=Qt(n);let r=3;const s=e.query;let u=t.queries.get(s);u?!u.W_()&&e.G_()&&(r=2):(u=new VN,r=e.G_()?0:1);try{switch(r){case 0:u.K_=yield t.onListen(s,!0);break;case 1:u.K_=yield t.onListen(s,!1);break;case 2:yield t.onFirstRemoteStoreListen(s)}}catch(d){const f=Ic(d,`Initialization of query '${jh(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,u),u.U_.push(e),e.j_(t.onlineState),u.K_&&e.H_(u.K_)&&Gw(t)})).apply(this,arguments)}function Ww(n,e){return vy.apply(this,arguments)}function vy(){return(vy=(0,rt.A)(function*(n,e){const t=Qt(n),r=e.query;let s=3;const u=t.queries.get(r);if(u){const d=u.U_.indexOf(e);d>=0&&(u.U_.splice(d,1),0===u.U_.length?s=e.G_()?0:1:!u.W_()&&e.G_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function PA(n,e){const t=Qt(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const f of d.U_)f.H_(s)&&(r=!0);d.K_=s}}r&&Gw(t)}function BN(n,e,t){const r=Qt(n),s=r.queries.get(e);if(s)for(const u of s.U_)u.onError(t);r.queries.delete(e)}function Gw(n){n.z_.forEach(e=>{e.next()})}var qw,_y;(_y=qw||(qw={})).J_="default",_y.Cache="cache";class Qw{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Td(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Td.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==qw.Cache}}class LA{constructor(e){this.key=e}}class VA{constructor(e){this.key=e}}class BA{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Rn(),this.mutatedKeys=Rn(),this.Ia=SS(e),this.Ta=new mf(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new zw,s=t?t.Ta:this.Ta;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,f=!1;const g="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,P)=>{const j=s.get(S),Q=Sm(this.query,P)?P:null,ye=!!j&&this.mutatedKeys.has(j.key),Ee=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let we=!1;j&&Q?j.data.isEqual(Q.data)?ye!==Ee&&(r.track({type:3,doc:Q}),we=!0):this.Ra(j,Q)||(r.track({type:2,doc:Q}),we=!0,(g&&this.Ia(Q,g)>0||D&&this.Ia(Q,D)<0)&&(f=!0)):!j&&Q?(r.track({type:0,doc:Q}),we=!0):j&&!Q&&(r.track({type:1,doc:j}),we=!0,(g||D)&&(f=!0)),we&&(Q?(d=d.add(Q),u=Ee?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Ta:d,Aa:r,Xi:f,mutatedKeys:u}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const u=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const d=e.Aa.Q_();d.sort((S,P)=>function(Q,ye){const Ee=we=>{switch(we){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jt()}};return Ee(Q)-Ee(ye)}(S.type,P.type)||this.Ia(S.doc,P.doc)),this.Va(r),s=null!=s&&s;const f=t&&!s?this.ma():[],g=0===this.Pa.size&&this.current&&!s?1:0,D=g!==this.ha;return this.ha=g,0!==d.length||D?{snapshot:new Td(this.query,e.Ta,u,d,e.mutatedKeys,0===g,D,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:f}:{fa:f}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new zw,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Rn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new VA(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new LA(r))}),t}pa(e){this.la=e.hs,this.Pa=Rn();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Td.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class UN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class $N{constructor(e){this.key=e,this.wa=!1}}class jA{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Sa={},this.ba=new iu(f=>B_(f),Bh),this.Da=new Map,this.Ca=new Set,this.va=new $r(Gt.comparator),this.Fa=new Map,this.Ma=new vw,this.xa={},this.Oa=new Map,this.Na=vd.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function UA(n,e){return Xw.apply(this,arguments)}function Xw(){return(Xw=(0,rt.A)(function*(n,e,t=!0){const r=ng(n);let s;const u=r.ba.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),s=u.view.ya()):s=yield $A(r,e,t,!0),s})).apply(this,arguments)}function HN(n,e){return yy.apply(this,arguments)}function yy(){return(yy=(0,rt.A)(function*(n,e){const t=ng(n);yield $A(t,e,!0,!1)})).apply(this,arguments)}function $A(n,e,t,r){return Yw.apply(this,arguments)}function Yw(){return(Yw=(0,rt.A)(function*(n,e,t,r){const s=yield function df(n,e){const t=Qt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Qr.getTargetData(r,e).next(u=>u?(s=u,et.resolve(s)):t.Qr.allocateTargetId(r).next(d=>(s=new bc(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ns.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}(n.localStore,po(e)),u=s.targetId,d=t?n.sharedClientState.addLocalQueryTarget(u):"not-current";let f;return r&&(f=yield function by(n,e,t,r,s){return eg.apply(this,arguments)}(n,e,u,"current"===d,s.resumeToken)),n.isPrimaryClient&&t&&Ed(n.remoteStore,s),f})).apply(this,arguments)}function eg(){return eg=(0,rt.A)(function*(n,e,t,r,s){n.Ba=(P,j,Q)=>{return(ye=(0,rt.A)(function*(we,mt,Et,Dt){let Ht=mt.view.da(Et);Ht.Xi&&(Ht=yield Cw(we.localStore,mt.query,!1).then(({documents:ue})=>mt.view.da(ue,Ht)));const En=Dt&&Dt.targetChanges.get(mt.targetId),un=Dt&&null!=Dt.targetMismatches.get(mt.targetId),Fe=mt.view.applyChanges(Ht,we.isPrimaryClient,En,un);return Ry(we,mt.targetId,Fe.fa),Fe.snapshot}),function Ee(we,mt,Et,Dt){return ye.apply(this,arguments)})(n,P,j,Q);var ye};const u=yield Cw(n.localStore,e,!0),d=new BA(e,u.hs),f=d.da(u.documents),g=Qh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=d.applyChanges(f,n.isPrimaryClient,g);Ry(n,t,D.fa);const S=new UN(e,t,d);return n.ba.set(e,S),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),D.snapshot}),eg.apply(this,arguments)}function Zw(n,e,t){return Ey.apply(this,arguments)}function Ey(){return(Ey=(0,rt.A)(function*(n,e,t){const r=Qt(n),s=r.ba.get(e),u=r.Da.get(s.targetId);if(u.length>1)return r.Da.set(s.targetId,u.filter(d=>!Bh(d,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield bd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&hu(r.remoteStore,s.targetId),Sd(r,s.targetId)}).catch(ed))):(Sd(r,s.targetId),yield bd(r.localStore,s.targetId,!0))})).apply(this,arguments)}function zN(n,e){return tg.apply(this,arguments)}function tg(){return(tg=(0,rt.A)(function*(n,e){const t=Qt(n),r=t.ba.get(e),s=t.Da.get(r.targetId);t.isPrimaryClient&&1===s.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),hu(t.remoteStore,r.targetId))})).apply(this,arguments)}function wy(){return(wy=(0,rt.A)(function*(n,e,t){const r=function Fy(n){const e=Qt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jw.bind(null,e),e}(n);try{const s=yield function(d,f){const g=Qt(d),D=Yr.now(),S=f.reduce((Q,ye)=>Q.add(ye.key),Rn());let P,j;return g.persistence.runTransaction("Locally write mutations","readwrite",Q=>{let ye=gs(),Ee=Rn();return g.os.getEntries(Q,S).next(we=>{ye=we,ye.forEach((mt,Et)=>{Et.isValidDocument()||(Ee=Ee.add(mt))})}).next(()=>g.localDocuments.getOverlayedDocuments(Q,ye)).next(we=>{P=we;const mt=[];for(const Et of f){const Dt=FS(Et,P.get(Et.key).overlayedDocument);null!=Dt&&mt.push(new Ar(Et.key,Dt,O0(Dt.value.mapValue),rr.exists(!0)))}return g.mutationQueue.addMutationBatch(Q,D,mt,f)}).next(we=>{j=we;const mt=we.applyToLocalDocumentSet(P,Ee);return g.documentOverlayCache.saveOverlays(Q,we.batchId,mt)})}).then(()=>({batchId:j.batchId,changes:B0(P)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(d,f,g){let D=d.xa[d.currentUser.toKey()];D||(D=new $r(Pn)),D=D.insert(f,g),d.xa[d.currentUser.toKey()]=D}(r,s.batchId,t),yield Dc(r,s.changes),yield Id(r.remoteStore)}catch(s){const u=Ic(s,"Failed to persist write");t.reject(u)}})).apply(this,arguments)}function KN(n,e){return Iy.apply(this,arguments)}function Iy(){return(Iy=(0,rt.A)(function*(n,e){const t=Qt(n);try{const r=yield function CN(n,e){const t=Qt(n),r=e.snapshotVersion;let s=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.os.newChangeBuffer({trackRemovals:!0});s=t.ns;const f=[];e.targetChanges.forEach((S,P)=>{const j=s.get(P);if(!j)return;f.push(t.Qr.removeMatchingKeys(u,S.removedDocuments,P).next(()=>t.Qr.addMatchingKeys(u,S.addedDocuments,P)));let Q=j.withSequenceNumber(u.currentSequenceNumber);var Ee,we,mt;null!==e.targetMismatches.get(P)?Q=Q.withResumeToken(Bi.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):S.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(S.resumeToken,r)),s=s.insert(P,Q),we=Q,mt=S,(0===(Ee=j).resumeToken.approximateByteSize()||we.snapshotVersion.toMicroseconds()-Ee.snapshotVersion.toMicroseconds()>=3e8||mt.addedDocuments.size+mt.modifiedDocuments.size+mt.removedDocuments.size>0)&&f.push(t.Qr.updateTargetData(u,Q))});let g=gs(),D=Rn();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),f.push(function gA(n,e,t){let r=Rn(),s=Rn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=gs();return t.forEach((f,g)=>{const D=u.get(f);g.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(f)),g.isNoDocument()&&g.version.isEqual(fn.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!D.isValidDocument()||g.version.compareTo(D.version)>0||0===g.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):Ot("LocalStore","Ignoring outdated watch update for ",f,". Current version:",D.version," Watch version:",g.version)}),{cs:d,ls:s}})}(u,d,e.documentUpdates).next(S=>{g=S.cs,D=S.ls})),!r.isEqual(fn.min())){const S=t.Qr.getLastRemoteSnapshotVersion(u).next(P=>t.Qr.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(S)}return et.waitFor(f).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,g,D)).next(()=>g)}).then(u=>(t.ns=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.Fa.get(u);d&&(dn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.wa=!0:s.modifiedDocuments.size>0?dn(d.wa):s.removedDocuments.size>0&&(dn(d.wa),d.wa=!1))}),yield Dc(t,r,e)}catch(r){yield ed(r)}})).apply(this,arguments)}function zA(n,e,t){const r=Qt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ba.forEach((u,d)=>{const f=d.view.j_(e);f.snapshot&&s.push(f.snapshot)}),function(d,f){const g=Qt(d);g.onlineState=f;let D=!1;g.queries.forEach((S,P)=>{for(const j of P.U_)j.j_(f)&&(D=!0)}),D&&Gw(g)}(r.eventManager,e),s.length&&r.Sa.h_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function KA(n,e,t){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,rt.A)(function*(n,e,t){const r=Qt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Fa.get(e),u=s&&s.key;if(u){let d=new $r(Gt.comparator);d=d.insert(u,Vr.newNoDocument(u,fn.min()));const f=Rn().add(u),g=new qh(fn.min(),new Map,new $r(Pn),d,f);yield KN(r,g),r.va=r.va.remove(u),r.Fa.delete(e),My(r)}else yield bd(r.localStore,e,!1).then(()=>Sd(r,e,t)).catch(ed)})).apply(this,arguments)}function WN(n,e){return Cy.apply(this,arguments)}function Cy(){return(Cy=(0,rt.A)(function*(n,e){const t=Qt(n),r=e.batch.batchId;try{const s=yield function mA(n,e){const t=Qt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.os.newChangeBuffer({trackRemovals:!0});return function(f,g,D,S){const P=D.batch,j=P.keys();let Q=et.resolve();return j.forEach(ye=>{Q=Q.next(()=>S.getEntry(g,ye)).next(Ee=>{const we=D.docVersions.get(ye);dn(null!==we),Ee.version.compareTo(we)<0&&(P.applyToRemoteDocument(Ee,D),Ee.isValidDocument()&&(Ee.setReadTime(D.commitVersion),S.addEntry(Ee)))})}),Q.next(()=>f.mutationQueue.removeMutationBatch(g,P))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(f){let g=Rn();for(let D=0;D<f.mutationResults.length;++D)f.mutationResults[D].transformResults.length>0&&(g=g.add(f.batch.mutations[D].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);xy(t,r,null),Ay(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Dc(t,s)}catch(s){yield ed(s)}})).apply(this,arguments)}function Jw(n,e,t){return Ty.apply(this,arguments)}function Ty(){return(Ty=(0,rt.A)(function*(n,e,t){const r=Qt(n);try{const s=yield function(d,f){const g=Qt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let S;return g.mutationQueue.lookupMutationBatch(D,f).next(P=>(dn(null!==P),S=P.keys(),g.mutationQueue.removeMutationBatch(D,P))).next(()=>g.mutationQueue.performConsistencyCheck(D)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(D,S,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(D,S)).next(()=>g.localDocuments.getDocuments(D,S))})}(r.localStore,e);xy(r,e,t),Ay(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Dc(r,s)}catch(s){yield ed(s)}})).apply(this,arguments)}function Sy(){return(Sy=(0,rt.A)(function*(n,e){const t=Qt(n);la(t.remoteStore)||Ot("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(d){const f=Qt(d);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>f.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Oa.get(r)||[];s.push(e),t.Oa.set(r,s)}catch(r){const s=Ic(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}})).apply(this,arguments)}function Ay(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function xy(n,e,t){const r=Qt(n);let s=r.xa[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.xa[r.currentUser.toKey()]=s}}function Sd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||eI(n,r)})}function eI(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(hu(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),My(n))}function Ry(n,e,t){for(const r of t)r instanceof LA?(n.Ma.addReference(r.key,e),GA(n,r)):r instanceof VA?(Ot("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||eI(n,r.key)):Jt()}function GA(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Ot("SyncEngine","New document in limbo: "+t),n.Ca.add(r),My(n))}function My(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Gt(Zn.fromString(e)),r=n.Na.next();n.Fa.set(r,new $N(t)),n.va=n.va.insert(t,r),Ed(n.remoteStore,new bc(po(Lh(t.path)),r,"TargetPurposeLimboResolution",qo.oe))}}function Dc(n,e,t){return Oy.apply(this,arguments)}function Oy(){return Oy=(0,rt.A)(function*(n,e,t){const r=Qt(n),s=[],u=[],d=[];var f;r.ba.isEmpty()||(r.ba.forEach((f,g)=>{d.push(r.Ba(g,e,t).then(D=>{var S;if((D||t)&&r.isPrimaryClient){const P=D?!D.fromCache:null===(S=t?.targetChanges.get(g.targetId))||void 0===S?void 0:S.current;r.sharedClientState.updateQueryState(g.targetId,P?"current":"not-current")}if(D){s.push(D);const P=Ew.Ki(g.targetId,D);u.push(P)}}))}),yield Promise.all(d),r.Sa.h_(s),yield(f=(0,rt.A)(function*(D,S){const P=Qt(D);try{yield P.persistence.runTransaction("notifyLocalViewChanges","readwrite",j=>et.forEach(S,Q=>et.forEach(Q.qi,ye=>P.persistence.referenceDelegate.addReference(j,Q.targetId,ye)).next(()=>et.forEach(Q.Qi,ye=>P.persistence.referenceDelegate.removeReference(j,Q.targetId,ye)))))}catch(j){if(!$u(j))throw j;Ot("LocalStore","Failed to update sequence numbers: "+j)}for(const j of S){const Q=j.targetId;if(!j.fromCache){const ye=P.ns.get(Q),we=ye.withLastLimboFreeSnapshotVersion(ye.snapshotVersion);P.ns=P.ns.insert(Q,we)}}}),function g(D,S){return f.apply(this,arguments)})(r.localStore,u))}),Oy.apply(this,arguments)}function GN(n,e){return tI.apply(this,arguments)}function tI(){return(tI=(0,rt.A)(function*(n,e){const t=Qt(n);if(!t.currentUser.isEqual(e)){Ot("SyncEngine","User change. New user:",e.toKey());const r=yield Iw(t.localStore,e);t.currentUser=e,(u=t).Oa.forEach(f=>{f.forEach(g=>{g.reject(new xt(gt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Dc(t,r.us)}var u})).apply(this,arguments)}function qN(n,e){const t=Qt(n),r=t.Fa.get(e);if(r&&r.wa)return Rn().add(r.key);{let s=Rn();const u=t.Da.get(e);if(!u)return s;for(const d of u){const f=t.ba.get(d);s=s.unionWith(f.view.Ea)}return s}}function ng(n){const e=Qt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=KN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KA.bind(null,e),e.Sa.h_=PA.bind(null,e.eventManager),e.Sa.ka=BN.bind(null,e.eventManager),e}class Ad{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,rt.A)(function*(){t.serializer=fy(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function cy(n,e,t,r){return new DN(n,e,t,r)}(this.persistence,new IN,e.initialUser,this.serializer)}createPersistence(e){return new iy(oy.Hr,this.serializer)}createSharedClientState(e){return new Mw}terminate(){var e=this;return(0,rt.A)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class gf{initialize(e,t){var r=this;return(0,rt.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>zA(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=GN.bind(null,r.syncEngine),yield MA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new OA}createDatastore(e){const t=fy(e.databaseInfo.databaseId),r=new AN(e.databaseInfo);return new NL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,s=this.datastore,u=e.asyncQueue,d=t=>zA(this.syncEngine,t,0),f=bA.D()?new bA:new yA,new RN(r,s,u,d,f);var r,s,u,d,f}createSyncEngine(e,t){return function(s,u,d,f,g,D,S){const P=new jA(s,u,d,f,g,D);return S&&(P.La=!0),P}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,rt.A)(function*(){var t,r;yield(r=(0,rt.A)(function*(u){const d=Qt(u);Ot("RemoteStore","RemoteStore shutting down."),d.M_.add(5),yield Ua(d),d.O_.shutdown(),d.N_.set("Unknown")}),function s(u){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}class vf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):yi("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nx{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,rt.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new xt(gt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(s=(0,rt.A)(function*(d,f){const g=Qt(d),D={documents:f.map(Q=>Pm(g.serializer,Q))},S=yield g.xo("BatchGetDocuments",g.serializer.databaseId,Zn.emptyPath(),D,f.length),P=new Map;S.forEach(Q=>{const ye=function J0(n,e){return"found"in e?function(r,s){dn(!!s.found);const u=yc(r,s.found.name),d=wi(s.found.updateTime),f=s.found.createTime?wi(s.found.createTime):fn.min(),g=new Qi({mapValue:{fields:s.found.fields}});return Vr.newFoundDocument(u,d,f,g)}(n,e):"missing"in e?function(r,s){dn(!!s.missing),dn(!!s.readTime);const u=yc(r,s.missing),d=wi(s.readTime);return Vr.newNoDocument(u,d)}(n,e):Jt()}(g.serializer,Q);P.set(ye.key.toString(),ye)});const j=[];return f.forEach(Q=>{const ye=P.get(Q.toString());dn(!!ye),j.push(ye)}),j}),function u(d,f){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new _c(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,rt.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Gt.fromPath(s);e.mutations.push(new Qu(u,e.precondition(u)))}),yield(r=(0,rt.A)(function*(u,d){const f=Qt(u),g={writes:d.map(D=>Nm(f.serializer,D))};yield f.Co("Commit",f.serializer.databaseId,Zn.emptyPath(),g)}),function s(u,d){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Jt();t=fn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xt(gt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fn.min())?rr.exists(!1):rr.updateTime(t):rr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fn.min()))throw new xt(gt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return rr.updateTime(t)}return rr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rx{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Za=r.maxAttempts,this.Yo=new Xm(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,rt.A)(function*(){const t=new nx(e.datastore),r=e.tu(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.nu(u)}))}).catch(s=>{e.nu(s)})}))}tu(e){try{const t=this.updateFunction(e);return!pm(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!G_(t)}return!1}}class ix{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=Vi.UNAUTHENTICATED,this.clientId=ZT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,rt.A)(function*(f){Ot("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ot("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xt(gt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new bi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,rt.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Ic(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function rg(n,e){return Vy.apply(this,arguments)}function Vy(){return Vy=(0,rt.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ot("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,rt.A)(function*(u){r.isEqual(u)||(yield Iw(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Vy.apply(this,arguments)}function By(n,e){return jy.apply(this,arguments)}function jy(){return(jy=(0,rt.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function lI(n){return Uy.apply(this,arguments)}(n);Ot("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>RA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>RA(e.remoteStore,s)),n._onlineComponents=e})).apply(this,arguments)}function Uy(){return(Uy=(0,rt.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ot("FirestoreClient","Using user provided OfflineComponentProvider");try{yield rg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function uI(n){return"FirebaseError"===n.name?n.code===gt.FAILED_PRECONDITION||n.code===gt.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;Fs("Error using user provided cache. Falling back to memory cache: "+t),yield rg(n,new Ad)}}else Ot("FirestoreClient","Using default OfflineComponentProvider"),yield rg(n,new Ad);return n._offlineComponents})).apply(this,arguments)}function ig(n){return $y.apply(this,arguments)}function $y(){return($y=(0,rt.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ot("FirestoreClient","Using user provided OnlineComponentProvider"),yield By(n,n._uninitializedComponentsProvider._online)):(Ot("FirestoreClient","Using default OnlineComponentProvider"),yield By(n,new gf))),n._onlineComponents})).apply(this,arguments)}function og(n){return ig(n).then(e=>e.syncEngine)}function xd(n){return sg.apply(this,arguments)}function sg(){return(sg=(0,rt.A)(function*(n){const e=yield ig(n),t=e.eventManager;return t.onListen=UA.bind(null,e.syncEngine),t.onUnlisten=Zw.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=HN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zN.bind(null,e.syncEngine),t})).apply(this,arguments)}function hx(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const hI=new Map;function fI(n,e,t){if(!t)throw new xt(gt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function fx(n){if(!Gt.isDocumentKey(n))throw new xt(gt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function px(n){if(Gt.isDocumentKey(n))throw new xt(gt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Wy(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Jt()}function qn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xt(gt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wy(n);throw new xt(gt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class gx{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new xt(gt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xt(gt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function nk(n,e,t,r){if(!0===e&&!0===r)throw new xt(gt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=hx(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(u){if(void 0!==u.timeoutSeconds){if(isNaN(u.timeoutSeconds))throw new xt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new xt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new xt(gt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ag{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xt(gt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xt(gt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gx(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new BP;switch(r.type){case"firstParty":return new UP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xt(gt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=hI.get(t);r&&(Ot("ComponentProvider","Removing Datastore"),hI.delete(t),r.terminate())}(this),Promise.resolve()}}class Ii{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ii(this.firestore,e,this._query)}}class fi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $a(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fi(this.firestore,e,this._key)}}class $a extends Ii{constructor(e,t,r){super(e,t,Lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new fi(this.firestore,null,new Gt(e))}withConverter(e){return new $a(this.firestore,e,this._path)}}class VL{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Xm(this,"async_queue_retry"),this.hu=()=>{const t=du();t&&Ot("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=du();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=du();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new bi;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,rt.A)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!$u(t))throw t;Ot("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,yi("INTERNAL UNHANDLED ERROR: ",function(d){let f=d.message||"";return d.stack&&(f=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),f}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const s=Hw.createAndSchedule(this,e,t,r,u=>this.Eu(u));return this._u.push(s),s}Pu(){this.au&&Jt()}verifyOperationInProgress(){}du(){var e=this;return(0,rt.A)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function yx(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const s=t;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(n)}class Pr extends ag{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new VL,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ex(this),this._firestoreClient.terminate()}}function sk(n,e){const t="object"==typeof n?n:function jT(n=f_){const e=Yc.get(n);if(!e&&n===f_&&JE())return l0();if(!e)throw ms.create("no-app",{appName:n});return e}(),r="string"==typeof n?n:e||"(default)",s=function SP(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const u=(n=>{const e=(n=>{var e,t;return null===(t=null===(e=Up())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})("firestore");u&&function rk(n,e,t,r={}){var s;const u=(n=qn(n,ag))._getSettings(),d=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==d&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:d,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=Vi.MOCK_USER;else{f=function s_(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",s=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},n);return[bh(JSON.stringify({alg:"none",type:"JWT"})),bh(JSON.stringify(d)),""].join(".")}(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new xt(gt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Vi(D)}n._authCredentials=new Mh(new C_(f,g))}}(s,...u)}return s}function Br(n){return n._firestoreClient||Ex(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ex(n){var e,t,r;const s=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new A0(n._databaseId,g,n._persistenceKey,(S=s).host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,hx(S.experimentalLongPollingOptions),S.useFetchStreams));var g,S;n._firestoreClient=new ix(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function mI(n){return function(t){const r=new bi;return t.asyncQueue.enqueueAndForget((0,rt.A)(function*(){return function WA(n,e){return Sy.apply(this,arguments)}(yield og(t),r)})),r.promise}(Br(n=qn(n,Pr)))}class Rd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rd(Bi.fromBase64String(e))}catch(t){throw new xt(gt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rd(Bi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Md{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xt(gt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class fu{constructor(e){this._methodName=e}}class Qy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xt(gt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xt(gt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pn(this._lat,e._lat)||Pn(this._long,e._long)}}const ck=/^__.*__$/;class Xy{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ar(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kh(e,this.data,t,this.fieldTransforms)}}class Yy{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ar(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jt()}}class lg{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.mu(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new lg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.gu({path:r,yu:!1});return s.wu(e),s}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.gu({path:r,yu:!1});return s.mu(),s}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return pg(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(uk(this.fu)&&ck.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class lk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||fy(e)}Fu(e,t,r,s=!1){return new lg({fu:e,methodName:t,vu:r,path:wr.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ol(n){const e=n._freezeSettings(),t=fy(n._databaseId);return new lk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function pu(n,e,t,r,s,u={}){const d=n.Fu(u.merge||u.mergeFields?2:0,e,t,s);II("Data must be an object, but it was:",d,r);const f=EI(r,d);let g,D;if(u.merge)g=new Xo(d.fieldMask),D=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const P of u.mergeFields){const j=fg(e,P,t);if(!d.contains(j))throw new xt(gt.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);DI(S,j)||S.push(j)}g=new Xo(S),D=d.fieldTransforms.filter(P=>g.covers(P.field))}else g=null,D=d.fieldTransforms;return new Xy(new Qi(f),g,D)}class dg extends fu{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dg}}class hg extends fu{_toFieldTransform(e){return new Wr(e.path,new Rm)}isEqual(e){return e instanceof hg}}function yI(n,e,t,r){const s=n.Fu(1,e,t);II("Data must be an object, but it was:",s,r);const u=[],d=Qi.empty();Ku(r,(g,D)=>{const S=Jy(e,g,t);D=fs(D);const P=s.Su(S);if(D instanceof dg)u.push(S);else{const j=Od(D,P);null!=j&&(u.push(S),d.set(S,j))}});const f=new Xo(u);return new Yy(d,f,s.fieldTransforms)}function Zy(n,e,t,r,s,u){const d=n.Fu(1,e,t),f=[fg(e,r,t)],g=[s];if(u.length%2!=0)throw new xt(gt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)f.push(fg(e,u[j])),g.push(u[j+1]);const D=[],S=Qi.empty();for(let j=f.length-1;j>=0;--j)if(!DI(D,f[j])){const Q=f[j];let ye=g[j];ye=fs(ye);const Ee=d.Su(Q);if(ye instanceof dg)D.push(Q);else{const we=Od(ye,Ee);null!=we&&(D.push(Q),S.set(Q,we))}}const P=new Xo(D);return new Yy(S,P,d.fieldTransforms)}function Od(n,e){if(wI(n=fs(n)))return II("Unsupported field value:",e,n),EI(n,e);if(n instanceof fu)return function(r,s){if(!uk(s.fu))throw s.Du(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,s){const u=[];let d=0;for(const f of r){let g=Od(f,s.bu(d));null==g&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}}(n,e)}return function(r,s){if(null===(r=fs(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return $_(s.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const u=Yr.fromDate(r);return{timestampValue:dd(s.serializer,u)}}if(r instanceof Yr){const u=new Yr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dd(s.serializer,u)}}if(r instanceof Qy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rd)return{bytesValue:Q0(s.serializer,r._byteString)};if(r instanceof fi){const u=s.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw s.Du(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:X0(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Du(`Unsupported field value: ${Wy(r)}`)}(n,e)}function EI(n,e){const t={};return mS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ku(n,(r,s)=>{const u=Od(s,e.pu(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function wI(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Yr||n instanceof Qy||n instanceof Rd||n instanceof fi||n instanceof fu)}function II(n,e,t){if(!wI(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const r=Wy(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var s}function fg(n,e,t){if((e=fs(e))instanceof Md)return e._internalPath;if("string"==typeof e)return Jy(n,e);throw pg("Field path arguments must be of type string or ",n,!1,void 0,t)}const Dx=new RegExp("[~\\*/\\[\\]]");function Jy(n,e,t){if(e.search(Dx)>=0)throw pg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Md(...e.split("."))._internalPath}catch{throw pg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pg(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${r}`),d&&(g+=` in document ${s}`),g+=")"),new xt(gt.INVALID_ARGUMENT,f+n+g)}function DI(n,e){return n.some(t=>t.isEqual(e))}class yf{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new fi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Cx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(eb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Cx extends yf{data(){return super.data()}}function eb(n,e){return"string"==typeof e?Jy(n,e):e instanceof Md?e._internalPath:e._delegate._internalPath}function Tx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xt(gt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sx{}class bf extends Sx{}function mg(n,e,...t){let r=[];e instanceof Sx&&r.push(e),r=r.concat(t),function(u){const d=u.filter(g=>g instanceof gg).length,f=u.filter(g=>g instanceof tb).length;if(d>1||d>0&&f>0)throw new xt(gt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class tb extends bf{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new tb(e,t,r)}_apply(e){const t=this._parse(e);return Ox(e._query,t),new Ii(e.firestore,e.converter,TS(e._query,t))}_parse(e){const t=ol(e.firestore);return function(u,d,f,g,D,S,P){let j;if(D.isKeyField()){if("array-contains"===S||"array-contains-any"===S)throw new xt(gt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if("in"===S||"not-in"===S){Mx(P,S);const Q=[];for(const ye of P)Q.push(Rx(g,u,ye));j={arrayValue:{values:Q}}}else j=Rx(g,u,P)}else"in"!==S&&"not-in"!==S&&"array-contains-any"!==S||Mx(P,S),j=function bI(n,e,t,r=!1){return Od(t,n.Fu(r?4:3,e))}(f,"where",P,"in"===S||"not-in"===S);return nr.create(D,S,j)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function CI(n,e,t){const r=e,s=eb("where",n);return tb._create(s,r,t)}class gg extends Sx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new gg(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Or.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let d=s;const f=u.getFlattenedFilters();for(const g of f)Ox(d,g),d=TS(d,g)}(e._query,t),new Ii(e.firestore,e.converter,TS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ax extends bf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ax(e,t)}_apply(e){const t=function(s,u,d){if(null!==s.startAt)throw new xt(gt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new xt(gt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Fh(u,d)}(e._query,this._field,this._direction);return new Ii(e.firestore,e.converter,function(s,u){const d=s.explicitOrderBy.concat([u]);return new ru(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function TI(n,e="asc"){const t=e,r=eb("orderBy",n);return Ax._create(r,t)}class vg extends bf{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new vg(e,t,r)}_apply(e){return new Ii(e.firestore,e.converter,V_(e._query,this._limit,this._limitType))}}function SI(n){return function mx(n,e){if(e<=0)throw new xt(gt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),vg._create("limit",n,"F")}function Rx(n,e,t){if("string"==typeof(t=fs(t))){if(""===t)throw new xt(gt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L_(e)&&-1!==t.indexOf("/"))throw new xt(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Zn.fromString(t));if(!Gt.isDocumentKey(r))throw new xt(gt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gu(n,new Gt(r))}if(t instanceof fi)return Gu(n,t._key);throw new xt(gt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wy(t)}.`)}function Mx(n,e){if(!Array.isArray(n)||0===n.length)throw new xt(gt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ox(n,e){const t=function(s,u){for(const d of s)for(const f of d.getFlattenedFilters())if(u.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xt(gt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class AI{convertValue(e,t="none"){switch(mc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ni(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Jt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ku(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Qy(ni(e.latitude),ni(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=N_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(bm(e));default:return null}}convertTimestamp(e){const t=Pa(e);return new Yr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Zn.fromString(e);dn(nw(r));const s=new eu(r.get(1),r.get(3)),u=new Gt(r.popFirst(5));return s.isEqual(t)||yi(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function rb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class dk extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,t)}}class Nd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ef extends yf{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ib(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(eb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ib extends Ef{data(e={}){return super.data(e)}}class wf{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Nd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ib(this._firestore,this._userDataWriter,r.key,r,new Nd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xt(gt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new ib(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Nd(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>u||3!==f.type).map(f=>{const g=new ib(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Nd(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let D=-1,S=-1;return 0!==f.type&&(D=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),1!==f.type&&(d=d.add(f.doc),S=d.indexOf(f.doc.key)),{type:fk(f.type),doc:g,oldIndex:D,newIndex:S}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fk(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jt()}}class Cc extends AI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new fi(this.firestore,null,t)}}function ob(n){n=qn(n,Ii);const e=qn(n.firestore,Pr),t=Br(e),r=new Cc(e);return Tx(n._query),function ux(n,e,t={}){const r=new bi;return n.asyncQueue.enqueueAndForget((0,rt.A)(function*(){return function(u,d,f,g,D){const S=new vf({next:j=>{d.enqueueAndForget(()=>Ww(u,P)),j.fromCache&&"server"===g.source?D.reject(new xt(gt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(j)},error:j=>D.reject(j)}),P=new Qw(f,S,{includeMetadataChanges:!0,ra:!0});return Kw(u,P)}(yield xd(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(s=>new wf(e,r,n,s))}const ab={maxAttempts:5};class Bx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ol(e)}set(e,t,r){this._verifyNotCommitted();const s=sl(e,this._firestore),u=rb(s.converter,t,r),d=pu(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,rr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=sl(e,this._firestore);let d;return d="string"==typeof(t=fs(t))||t instanceof Md?Zy(this._dataReader,"WriteBatch.update",u._key,t,r,s):yI(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,rr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=sl(e,this._firestore);return this._mutations=this._mutations.concat(new _c(t._key,rr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xt(gt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function sl(n,e){if((n=fs(n)).firestore!==e)throw new xt(gt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Ek extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ol(t)}get(t){const r=sl(t,this._firestore),s=new dk(this._firestore);return this._transaction.lookup([r._key]).then(u=>{if(!u||1!==u.length)return Jt();const d=u[0];if(d.isFoundDocument())return new yf(this._firestore,s,d.key,d,r.converter);if(d.isNoDocument())return new yf(this._firestore,s,r._key,null,r.converter);throw Jt()})}set(t,r,s){const u=sl(t,this._firestore),d=rb(u.converter,r,s),f=pu(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,s);return this._transaction.set(u._key,f),this}update(t,r,s,...u){const d=sl(t,this._firestore);let f;return f="string"==typeof(r=fs(r))||r instanceof Md?Zy(this._dataReader,"Transaction.update",d._key,r,s,u):yI(this._dataReader,"Transaction.update",d._key,r),this._transaction.update(d._key,f),this}delete(t){const r=sl(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=sl(e,this._firestore),r=new Cc(this._firestore);return super.get(e).then(s=>new Ef(this._firestore,r,t._key,s._document,new Nd(!1,!1),t.converter))}}function jx(n,e,t){n=qn(n,Pr);const r=Object.assign(Object.assign({},ab),t);return function(u){if(u.maxAttempts<1)throw new xt(gt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(u,d,f){const g=new bi;return u.asyncQueue.enqueueAndForget((0,rt.A)(function*(){const D=yield function Hy(n){return ig(n).then(e=>e.datastore)}(u);new rx(u.asyncQueue,D,f,d,g).Xa()})),g.promise}(Br(n),s=>e(new Ek(n,s)),r)}!function(e,t=!0){Xl="10.12.4",g_(new Wp("firestore",(r,{instanceIdentifier:s,options:u})=>{const d=r.getProvider("app").getImmediate(),f=new Pr(new QT(r.getProvider("auth-internal")),new $P(r.getProvider("app-check-internal")),function(D,S){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new xt(gt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new eu(D.options.projectId,S)}(d,s),d);return u=Object.assign({useFetchStreams:t},u),f._setSettings(u),f},"PUBLIC").setMultipleInstances(!0)),Uu(m0,"4.6.4",e),Uu(m0,"4.6.4","esm2017")}();var fV=M(6719),Kx=M(203),al="[object process]"===Object.prototype.toString.call(typeof process<"u"?process:0)?function OI(n){process.on("exit",function(){return n()}),process.on("beforeExit",function(){return n().then(function(){return process.exit()})}),process.on("SIGINT",function(){return n().then(function(){return process.exit()})}),process.on("uncaughtException",function(e){return n().then(function(){console.trace(e),process.exit(101)})})}:function Tk(n){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var e=self.close.bind(self);self.close=function(){return n(),e()}}else{if("function"!=typeof window.addEventListener)return;window.addEventListener("beforeunload",function(){n()},!0),window.addEventListener("unload",function(){n()},!0)}},cl=new Set,Gx=!1;function Sk(){var n=[];return cl.forEach(function(e){n.push(e()),cl.delete(e)}),Promise.all(n)}function kd(n,e){return n.broadcastChannel.postInternal({context:"leader",action:e,token:n.token})}function PI(n){n.isLeader=!0,n._hasLeader=!0;var e=function Qx(n){if(function qx(){Gx||(Gx=!0,al(Sk))}(),"function"!=typeof n)throw new Error("Listener is no function");return cl.add(n),{remove:function(){return cl.delete(n)},run:function(){return cl.delete(n),n()}}}(function(){return n.die()});n._unl.push(e);var t=function(s){"leader"===s.context&&"apply"===s.action&&kd(n,"tell"),"leader"===s.context&&"tell"===s.action&&!n._dpLC&&(n._dpLC=!0,n._dpL(),kd(n,"tell"))};return n.broadcastChannel.addEventListener("internal",t),n._lstns.push(t),kd(n,"tell")}var Ak=function(e,t){var r=this;this.broadcastChannel=e,e._befC.push(function(){return r.die()}),this._options=t,this.isLeader=!1,this.isDead=!1,this.token=_h(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name};Ak.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then(function(t){var r=t.held?t.held.filter(function(s){return s.name===e.lN}):[];return!!(r&&r.length>0)})},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var t=new Promise(function(r,s){e._wKMC.res=r,e._wKMC.rej=s});this._wLMP=new Promise(function(r){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},function(){return e._wKMC.c=void 0,PI(e),r(),t}).catch(function(){})})}return this._wLMP},set onduplicate(n){},die:function(){var e=this;return this._lstns.forEach(function(t){return e.broadcastChannel.removeEventListener("internal",t)}),this._lstns=[],this._unl.forEach(function(t){return t.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),kd(this,"death")}};var xk=function(e,t){var r=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=_h(),this._aplQ=xa,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var s=function(d){"leader"===d.context&&("death"===d.action&&(r._hasLeader=!1),"tell"===d.action&&(r._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",s),this._lstns.push(s)};xk.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var t=this;return this.isLeader?Fu(0,!0):this.isDead?Fu(0,!1):this._aplQC>1?this._aplQ:(this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return function(){if(t.isLeader)return qv;var d,u=!1,f=new Promise(function(S){d=function(){u=!0,S()}}),g=function(P){"leader"===P.context&&P.token!=t.token&&("apply"===P.action&&P.token>t.token&&d(),"tell"===P.action&&(d(),t._hasLeader=!0))};t.broadcastChannel.addEventListener("internal",g);var D=e?4*t._options.responseTime:t._options.responseTime;return kd(t,"apply").then(function(){return Promise.race([Fu(D),f.then(function(){return Promise.reject(new Error)})])}).then(function(){return kd(t,"apply")}).then(function(){return Promise.race([Fu(D),f.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return t.broadcastChannel.removeEventListener("internal",g),!u&&PI(t).then(function(){return!0})})}()}).then(function(){t._aplQC=t._aplQC-1}),this._aplQ.then(function(){return t.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=function pV(n){return n.isLeader?xa:new Promise(function(e){var t=!1;function r(){t||(t=!0,n.broadcastChannel.removeEventListener("internal",u),e(!0))}n.applyOnce().then(function(){n.isLeader&&r()}),function d(){return Fu(n._options.fallbackInterval).then(function(){if(!n.isDead&&!t){if(!n.isLeader)return n.applyOnce(!0).then(function(){n.isLeader?r():d()});r()}})}();var u=function(f){"leader"===f.context&&"death"===f.action&&(n._hasLeader=!1,n.applyOnce().then(function(){n.isLeader&&r()}))};n.broadcastChannel.addEventListener("internal",u),n._lstns.push(u)})}(this)),this._aLP},set onduplicate(n){this._dpL=n},die:function(){var e=this;return this._lstns.forEach(function(t){return e.broadcastChannel.removeEventListener("internal",t)}),this._lstns=[],this._unl.forEach(function(t){return t.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,kd(this,"death")}};var da=M(5520),Mk=new WeakMap,Yx=new WeakMap;function NI(n){return(0,xE.q)(Yx,n,()=>function mV(n,e){if(n._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");e=function Rk(n,e){return n||(n={}),(n=JSON.parse(JSON.stringify(n))).fallbackInterval||(n.fallbackInterval=3e3),n.responseTime||(n.responseTime=e.method.averageResponseTime(e.options)),n}(e,n);var t=function Rp(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&"function"==typeof navigator.locks.request}()?new Ak(n,e):new xk(n,e);return n._befC.push(function(){return t.die()}),n._leaderElector=t,t}(n))}function Ok(){var n=xO(this.storage.name,this.token,this.name,this),e=this.destroy.bind(this);this.destroy=function(){return tT(this.token,this),e()};var t=NI(n);return t||(t=NI(n),Mk.set(this,t)),this.leaderElector=()=>t,t}function Pk(){return!this.multiInstance||this.leaderElector().isLeader}function gV(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):da.Ms}var bV={name:"leader-election",rxdb:!0,prototypes:{RxDatabase:n=>{n.leaderElector=Ok,n.isLeader=Pk,n.waitForLeadership=gV}},hooks:{preDestroyRxDatabase:{after:function vV(n){var e=Mk.get(n);e&&e.die()}}}},Df=M(2060),Tc=M(6568);function kI(n,e){return n.input.metaInstance.findDocumentsById(e.map(t=>(0,Ns.U)(n.input.metaInstance.schema,{itemId:t,isCheckpoint:"0"})),!0).then(t=>{var r={};return Object.values(t).forEach(s=>{r[s.itemId]={docData:s.docData,metaDocument:s}}),r})}function Sc(n,e,t,r){return lb.apply(this,arguments)}function lb(){return(lb=(0,rt.A)(function*(n,e,t,r){var s=e[n.primaryPath],u=t?(0,xo.C9)(t):{id:"",isCheckpoint:"0",itemId:s,docData:e,_attachments:{},_deleted:!1,_rev:(0,Df.Fq)(),_meta:{lwt:0}};return u.docData=e,r&&(u.isResolvedConflict=r),u._meta.lwt=(0,ku.t)(),u.id=(0,Ns.U)(n.input.metaInstance.schema,u),u._rev=(0,Tc.CM)(yield n.checkpointKey,t),{previous:t,document:u}})).apply(this,arguments)}var Cf=M(4843);function Tf(n,e){return FI.apply(this,arguments)}function FI(){return(FI=(0,rt.A)(function*(n,e){var t=(0,Ns.U)(n.input.metaInstance.schema,{isCheckpoint:"1",itemId:e}),s=(yield n.input.metaInstance.findDocumentsById([t],!1))[0];if(n.lastCheckpointDoc[e]=s,s)return s.checkpointData})).apply(this,arguments)}function Sf(n,e,t){return Eg.apply(this,arguments)}function Eg(){return(Eg=(0,rt.A)(function*(n,e,t){n.checkpointQueue=n.checkpointQueue.then((0,rt.A)(function*(){var r=n.lastCheckpointDoc[e];if(t&&!n.events.canceled.getValue()&&(!r||JSON.stringify(r.checkpointData)!==JSON.stringify(t))){var s={id:"",isCheckpoint:"1",itemId:e,_deleted:!1,_attachments:{},checkpointData:t,_meta:(0,Df.o4)(),_rev:(0,Df.Fq)()};for(s.id=(0,Ns.U)(n.input.metaInstance.schema,s);!n.events.canceled.getValue();){if(r&&(s.checkpointData=(0,xo.Mu)([r.checkpointData,s.checkpointData])),s._meta.lwt=(0,ku.t)(),s._rev=(0,Tc.CM)(yield n.checkpointKey,r),n.events.canceled.getValue())return;var u=[{previous:r,document:s}],d=yield n.input.metaInstance.bulkWrite(u,"replication-set-checkpoint"),f=(0,xo.YN)(n.primaryPath,u,d)[0];if(f)return void(n.lastCheckpointDoc[e]=f);var g=d.error[0];if(409!==g.status)throw g;r=(0,Lr.ZN)(g.documentInDb),s._rev=(0,Tc.CM)(yield n.checkpointKey,r)}}})),yield n.checkpointQueue})).apply(this,arguments)}function Zx(){return(Zx=(0,rt.A)(function*(n){return"rx_storage_replication_"+(yield n.hashFunction([n.identifier,n.forkInstance.databaseName,n.forkInstance.collectionName].join("||")))})).apply(this,arguments)}function Fk(n,e,t){var r=(0,li.FD)(n);return e||delete r._attachments,t||(delete r._meta,delete r._rev),r}function hb(n,e){return n.hasAttachments?e.map(t=>{var r=(0,li.o8)(t.document);return r.docData=(0,xo.on)(r.docData),{document:r,previous:t.previous}}):e}function Jx(n){for(;;){if(!n.underlyingPersistentStorage)return n;n=n.underlyingPersistentStorage}}function LI(){return LI=(0,rt.A)(function*(n){n.input.initialCheckpoint&&n.input.initialCheckpoint.downstream&&((yield Tf(n,"down"))||(yield Sf(n,"down",n.input.initialCheckpoint.downstream)));var t=yield n.input.hashFunction(n.input.identifier),r=n.input.replicationHandler,s=0,u=[];function d(Ee){n.stats.down.addNewTask=n.stats.down.addNewTask+1;var we={time:s++,task:Ee};u.push(we),n.streamQueue.down=n.streamQueue.down.then(()=>{for(var mt=[];u.length>0;){n.events.active.down.next(!0);var Et=(0,Lr.ZN)(u.shift());if(!(Et.time<g)){if("RESYNC"===Et.task){if(0===mt.length){mt.push(Et.task);break}break}mt.push(Et.task)}}if(0!==mt.length)return"RESYNC"===mt[0]?function D(){return S.apply(this,arguments)}():function P(Ee){n.stats.down.downstreamProcessChanges=n.stats.down.downstreamProcessChanges+1;var we=[],mt=null;return Ee.forEach(Et=>{if("RESYNC"===Et)throw new Error("SNH");(0,Ps.Hb)(we,Et.documents),mt=(0,xo.Mu)([mt,Et.checkpoint])}),ye(we,(0,Lr.ZN)(mt))}(mt)}).then(()=>{n.events.active.down.next(!1),!n.firstSyncDone.down.getValue()&&!n.events.canceled.getValue()&&n.firstSyncDone.down.next(!0)})}if(d("RESYNC"),!n.events.canceled.getValue()){var f=r.masterChangeStream$.pipe((0,_i.Z)(function(){var Ee=(0,rt.A)(function*(we){return yield(0,Cf._)(n.events.active.up.pipe((0,Er.p)(mt=>!mt))),we});return function(we){return Ee.apply(this,arguments)}}())).subscribe(Ee=>{n.stats.down.masterChangeStreamEmit=n.stats.down.masterChangeStreamEmit+1,d(Ee)});(0,Cf._)(n.events.canceled.pipe((0,Er.p)(Ee=>!!Ee))).then(()=>f.unsubscribe())}var g=-1;function S(){return(S=(0,rt.A)(function*(){if(n.stats.down.downstreamResyncOnce=n.stats.down.downstreamResyncOnce+1,!n.events.canceled.getValue()){n.checkpointQueue=n.checkpointQueue.then(()=>Tf(n,"down"));for(var Ee=yield n.checkpointQueue,we=[];!n.events.canceled.getValue();){g=s++;var mt=yield r.masterChangesSince(Ee,n.input.pullBatchSize);if(0===mt.documents.length||(Ee=(0,xo.Mu)([Ee,mt.checkpoint]),we.push(ye(mt.documents,Ee)),mt.documents.length<n.input.pullBatchSize))break}yield Promise.all(we)}})).apply(this,arguments)}var j=da.em,Q={docs:{}};function ye(Ee,we){var mt=n.primaryPath;return n.stats.down.persistFromMaster=n.stats.down.persistFromMaster+1,Ee.forEach(Et=>{Q.docs[Et[mt]]=Et}),Q.checkpoint=we,j=j.then(()=>{var Et=Q.docs;Q.docs={};var Dt=Q.checkpoint,Ht=Object.keys(Et);if(n.events.canceled.getValue()||0===Ht.length)return da.em;var En=[],un={},Fe={},ue=[];return Promise.all([n.input.forkInstance.findDocumentsById(Ht,!0),kI(n,Ht)]).then(([Ce,Le])=>{var ze=new Map;return Ce.forEach(ot=>ze.set(ot[mt],ot)),Promise.all(Ht.map(function(){var ot=(0,rt.A)(function*(De){var fr=ze.get(De),_s=fr?Fk(fr,n.hasAttachments,!1):void 0,Yo=Et[De],ji=Le[De];ji&&fr&&ji.metaDocument.isResolvedConflict===fr._rev&&(yield n.streamQueue.up);var Zr=!(!ji||!_s)&&(yield n.input.conflictHandler({realMasterState:ji.docData,newDocumentState:_s},"downstream-check-if-equal-0").then(Jr=>Jr.isEqual));if(!Zr&&ji&&ji.docData._rev&&fr&&fr._meta[n.input.identifier]&&(0,Tc.Wg)(fr._rev)===fr._meta[n.input.identifier]&&(Zr=!0),fr&&ji&&!1===Zr||fr&&!ji)return da.em;var Mi=!!_s&&(yield n.input.conflictHandler({realMasterState:Yo,newDocumentState:_s},"downstream-check-if-equal-1").then(Jr=>Jr.isEqual));if(_s&&Mi)return(!ji||!1===Zr)&&ue.push(yield Sc(n,_s,ji?ji.metaDocument:void 0)),da.em;var No=Object.assign({},Yo,fr?{_meta:(0,li.FD)(fr._meta),_attachments:n.hasAttachments&&Yo._attachments?Yo._attachments:{},_rev:(0,Df.Fq)()}:{_meta:{lwt:(0,ku.t)()},_rev:(0,Df.Fq)(),_attachments:n.hasAttachments&&Yo._attachments?Yo._attachments:{}});if(Yo._rev){var Bs=fr?(0,Tc.Wg)(fr._rev)+1:1;No._meta[n.input.identifier]=Bs,n.input.keepMeta&&(No._rev=Yo._rev)}n.input.keepMeta&&Yo._meta&&(No._meta=Yo._meta);var dr={previous:fr,document:No};dr.document._rev=dr.document._rev?dr.document._rev:(0,Tc.CM)(t,dr.previous),En.push(dr),un[De]=dr,Fe[De]=yield Sc(n,Yo,ji?ji.metaDocument:void 0)});return function(De){return ot.apply(this,arguments)}}()))}).then((0,rt.A)(function*(){if(En.length>0)return n.input.forkInstance.bulkWrite(En,yield n.downstreamBulkWriteFlag).then(Ce=>{(0,xo.YN)(n.primaryPath,En,Ce).forEach(ze=>{var ot=ze[mt];n.events.processed.down.next(un[ot]),ue.push(Fe[ot])}),Ce.error.forEach(ze=>{409!==ze.status&&n.events.error.next((0,lc.Br)("RC_PULL",{writeError:ze}))})})})).then(()=>{if(ue.length>0)return n.input.metaInstance.bulkWrite(hb(n,ue),"replication-down-write-meta").then(Ce=>{Ce.error.forEach(Le=>{n.events.error.next((0,lc.Br)("RC_PULL",{id:Le.documentId,writeError:Le}))})})}).then(()=>{Sf(n,"down",Dt)})}).catch(Et=>n.events.error.next(Et)),j}}),LI.apply(this,arguments)}var Vk=M(327);function VI(){return VI=(0,rt.A)(function*(n,e,t,r){if(!t._attachments||r&&!r._attachments)throw new Error("_attachments missing");var s=t[n],u=new Set(r&&r._attachments?Object.keys(r._attachments):[]);return yield Promise.all(Object.entries(t._attachments).map(function(){var d=(0,rt.A)(function*([f,g]){if((!u.has(f)||r&&(0,Lr.ZN)(r._attachments)[f].digest!==g.digest)&&!g.data){var D=yield e.getAttachmentData(s,f,g.digest);g.data=D}});return function(f){return d.apply(this,arguments)}}())),t}),VI.apply(this,arguments)}function fb(){return fb=(0,rt.A)(function*(n){n.input.initialCheckpoint&&n.input.initialCheckpoint.upstream&&((yield Tf(n,"up"))||(yield Sf(n,"up",n.input.initialCheckpoint.upstream)));var t=n.input.replicationHandler;n.streamQueue.up=n.streamQueue.up.then(()=>D().then(()=>{P()}));var r=0,s=-1,u=[],d=da.Dr,f={docs:{}},g=n.input.forkInstance.changeStream().subscribe(function(){var Q=(0,rt.A)(function*(ye){if(ye.context!==(yield n.downstreamBulkWriteFlag))return n.stats.up.forkChangeStreamEmit=n.stats.up.forkChangeStreamEmit+1,u.push({task:ye,time:r++}),n.events.active.up.getValue()||n.events.active.up.next(!0),n.input.waitBeforePersist?n.input.waitBeforePersist().then(()=>P()):P()});return function(ye){return Q.apply(this,arguments)}}());function D(){return S.apply(this,arguments)}function S(){return S=(0,rt.A)(function*(){if(n.stats.up.upstreamInitialSync=n.stats.up.upstreamInitialSync+1,!n.events.canceled.getValue()){n.checkpointQueue=n.checkpointQueue.then(()=>Tf(n,"up"));for(var Q=yield n.checkpointQueue,ye=new Set,Ee=function(){var Et=(0,rt.A)(function*(){s=r++,ye.size>3&&(yield Promise.race(Array.from(ye)));var Dt=yield(0,xo.p0)(n.input.forkInstance,n.input.pushBatchSize,Q);if(0===Dt.documents.length)return 1;Q=(0,xo.Mu)([Q,Dt.checkpoint]);var Ht=j(Dt.documents,(0,Lr.ZN)(Q));ye.add(Ht),Ht.catch().then(()=>ye.delete(Ht))});return function(){return Et.apply(this,arguments)}}();!n.events.canceled.getValue()&&!(yield Ee()););(yield Promise.all(ye)).find(Et=>!!Et)?yield D():!n.firstSyncDone.up.getValue()&&!n.events.canceled.getValue()&&n.firstSyncDone.up.next(!0)}}),S.apply(this,arguments)}function P(){n.events.canceled.getValue()||0===u.length?n.events.active.up.next(!1):(n.stats.up.processTasks=n.stats.up.processTasks+1,n.events.active.up.next(!0),n.streamQueue.up=n.streamQueue.up.then(()=>{for(var Q=[],ye={};u.length>0;){var Ee=(0,Lr.ZN)(u.shift());Ee.time<s||((0,Ps.Hb)(Q,Ee.task.events.map(mt=>mt.documentData)),ye=(0,xo.Mu)([ye,Ee.task.checkpoint]))}return(0===Q.length?da.Dr:j(Q,ye)).then(()=>{0===u.length?n.events.active.up.next(!1):P()})}))}function j(Q,ye){return n.stats.up.persistToMaster=n.stats.up.persistToMaster+1,Q.forEach(Ee=>{f.docs[Ee[n.primaryPath]]=Ee}),f.checkpoint=ye,d=d.then((0,rt.A)(function*(){if(n.events.canceled.getValue())return!1;var Ee=f.docs;f.docs={};var we=f.checkpoint,mt=Object.keys(Ee);if(0===mt.length)return!1;var Et=yield kI(n,mt),Dt={},Ht=[],En={},un={};if(yield Promise.all(mt.map(function(){var Zr=(0,rt.A)(function*(Mi){var No=Ee[Mi];un[Mi]=No;var Bs=Fk(No,n.hasAttachments,!!n.input.keepMeta),dr=Et[Mi];dr&&dr.metaDocument.isResolvedConflict!==No._rev&&(yield n.input.conflictHandler({realMasterState:dr.docData,newDocumentState:Bs},"upstream-check-if-equal")).isEqual||dr&&dr.docData._rev&&(0,Tc.Wg)(No._rev)===No._meta[n.input.identifier]||(Ht.push(Mi),Dt[Mi]={assumedMasterState:dr?dr.docData:void 0,newDocumentState:Bs},En[Mi]=yield Sc(n,Bs,dr?dr.metaDocument:void 0))});return function(Mi){return Zr.apply(this,arguments)}}())),0===Ht.length)return!1;var Fe=Object.values(Dt),ue=new Set,Ce={},Le=(0,Ps.Aj)(Fe,n.input.pushBatchSize);yield Promise.all(Le.map(function(){var Zr=(0,rt.A)(function*(Mi){n.hasAttachments&&(yield Promise.all(Mi.map(function(){var Bs=(0,rt.A)(function*(dr){dr.newDocumentState=yield function eR(n,e,t,r){return VI.apply(this,arguments)}(n.primaryPath,n.input.forkInstance,(0,li.o8)(dr.newDocumentState),dr.assumedMasterState)});return function(dr){return Bs.apply(this,arguments)}}()))),(yield t.masterWrite(Mi)).forEach(Bs=>{var dr=Bs[n.primaryPath];ue.add(dr),Ce[dr]=Bs})});return function(Mi){return Zr.apply(this,arguments)}}()));var ze=[];if(Ht.forEach(Zr=>{ue.has(Zr)||(n.events.processed.up.next(Dt[Zr]),ze.push(En[Zr]))}),n.events.canceled.getValue())return!1;ze.length>0&&(yield n.input.metaInstance.bulkWrite(hb(n,ze),"replication-up-write-meta"));var ot=!1;if(ue.size>0){n.stats.up.persistToMasterHadConflicts=n.stats.up.persistToMasterHadConflicts+1;var De=[],fr={};if(yield Promise.all(Object.entries(Ce).map(([Zr,Mi])=>{var No=Dt[Zr],Bs={newDocumentState:No.newDocumentState,assumedMasterState:No.assumedMasterState,realMasterState:Mi};return(0,Vk.r)(n,Bs,un[Zr]).then(function(){var dr=(0,rt.A)(function*(Jr){if(Jr){n.events.resolvedConflicts.next({input:Bs,output:Jr.output}),De.push({previous:un[Zr],document:Jr.resolvedDoc});var jR=Et[Zr];fr[Zr]=yield Sc(n,(0,Lr.ZN)(Mi),jR?jR.metaDocument:void 0,Jr.resolvedDoc._rev)}});return function(Jr){return dr.apply(this,arguments)}}())})),De.length>0){ot=!0,n.stats.up.persistToMasterConflictWrites=n.stats.up.persistToMasterConflictWrites+1;var _s=yield n.input.forkInstance.bulkWrite(De,"replication-up-write-conflict"),Yo=[];(0,xo.YN)(n.primaryPath,De,_s).forEach(Zr=>{Yo.push(fr[Zr[n.primaryPath]])}),Yo.length>0&&(yield n.input.metaInstance.bulkWrite(hb(n,Yo),"replication-up-write-conflict-meta"))}}return Sf(n,"up",we),ot})).catch(Ee=>(n.events.error.next(Ee),!1)),d}(0,Cf._)(n.events.canceled.pipe((0,Er.p)(Q=>!!Q))).then(()=>g.unsubscribe())}),fb.apply(this,arguments)}function jI(n){return(0,Cf._)(xu([n.firstSyncDone.down.pipe((0,Er.p)(e=>!!e)),n.firstSyncDone.up.pipe((0,Er.p)(e=>!!e))])).then(()=>{})}function UI(n){return Promise.all([n.streamQueue.up,n.streamQueue.down,n.checkpointQueue])}function nR(){return(nR=(0,rt.A)(function*(n){n.events.canceled.next(!0),n.events.active.up.complete(),n.events.active.down.complete(),n.events.processed.up.complete(),n.events.processed.down.complete(),n.events.resolvedConflicts.complete(),n.events.canceled.complete(),yield n.checkpointQueue})).apply(this,arguments)}var rR=n=>Promise.resolve(n);function iR(n,e){return"_deleted"===n||((e=(0,li.FD)(e))[n]=!!e._deleted,delete e._deleted),e}function oR(n,e,t){return t.map(r=>{var s=(0,li.FD)(r);return"_deleted"!==e?(s._deleted=!!s[e],delete s[e]):s._deleted=!!s._deleted,s[n.schema.primaryPath]=(0,Ns.U)(n.schema.jsonSchema,s),s})}function Ri(n,e){if(typeof window>"u"||"object"!=typeof window||typeof window.addEventListener>"u"||navigator.onLine)return n.promiseWait(e);var t,r=new Promise(s=>{t=()=>{window.removeEventListener("online",t),s()},window.addEventListener("online",t)});return Promise.race([r,n.promiseWait(e)]).then(()=>{window.removeEventListener("online",t)})}var Af=M(2104),pb=new WeakMap;function zk(n,e){var t=(0,li.FD)(e);return delete t[n],t}function DV(n,e){return e[n].toDate().toISOString()}function zI(n,e){return delete(e=(0,li.FD)(e))[n],e}var aR=function(n){function e(t,r,s,u,d,f=!0,g=5e3,D=!0){var S;return(S=n.call(this,r,s,"_deleted",u,d,f,g,D)||this).firestore=t,S.replicationIdentifierHash=r,S.collection=s,S.pull=u,S.push=d,S.live=f,S.retryTime=g,S.autoStart=D,S}return(0,fV.A)(e,n),e}(function(){function n(t,r,s,u,d,f,g,D){var S=this;this.subs=[],this.subjects={received:new Vn.B,sent:new Vn.B,error:new Vn.B,canceled:new Ti.t(!1),active:new Ti.t(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new Vn.B,this.replicationIdentifier=t,this.collection=r,this.deletedField=s,this.pull=u,this.push=d,this.live=f,this.retryTime=g,this.autoStart=D,this.metaInfoPromise=(0,rt.A)(function*(){var Q="rx-replication-meta-"+(yield r.database.hashFunction([S.collection.name,S.replicationIdentifier].join("-"))),ye=function kk(n,e){var t=(0,Ns.Hq)(n),r={title:"RxReplicationProtocolMetaData",primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:n.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:t+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:t>4?t:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:n.properties},isResolvedConflict:{type:"string"}},keyCompression:n.keyCompression,required:["id","isCheckpoint","itemId"]};return e&&(r.encrypted=["docData"]),(0,Ns.Ud)(r)}(S.collection.schema.jsonSchema,(0,xo.ME)(S.collection.schema.jsonSchema));return{collectionName:Q,schema:ye}})(),(0,xE.q)(pb,r,()=>[]).push(this),this.collection.onDestroy.push(()=>this.cancel()),Object.keys(this.subjects).forEach(Q=>{Object.defineProperty(this,Q+"$",{get:function(){return this.subjects[Q].asObservable()}})});var j=new Promise(Q=>{this.callOnStart=Q});this.startPromise=j}var e=n.prototype;return e.start=function(){var t=(0,rt.A)(function*(){var S,s=this;if(!this.isStopped()){var u=this.pull&&this.pull.modifier?this.pull.modifier:rR,d=this.push&&this.push.modifier?this.push.modifier:rR,f=this.collection.database,g=yield this.metaInfoPromise,[D]=yield Promise.all([this.collection.database.storage.createStorageInstance({databaseName:f.name,collectionName:g.collectionName,databaseInstanceToken:f.token,multiInstance:f.multiInstance,options:{},schema:g.schema,password:f.password,devMode:FO.h.isDevMode()}),(0,Af.vV)(this.collection,g.collectionName,g.schema)]);this.metaInstance=D,this.internalReplicationState=function BI(n){(n=(0,li.FD)(n)).forkInstance=Jx(n.forkInstance),n.metaInstance=Jx(n.metaInstance);var e=function db(n){return Zx.apply(this,arguments)}(n),t={primaryPath:(0,Ns.xQ)(n.forkInstance.schema.primaryKey),hasAttachments:!!n.forkInstance.schema.attachments,input:n,checkpointKey:e,downstreamBulkWriteFlag:e.then(r=>"replication-downstream-"+r),events:{canceled:new Ti.t(!1),active:{down:new Ti.t(!0),up:new Ti.t(!0)},processed:{down:new Vn.B,up:new Vn.B},resolvedConflicts:new Vn.B,error:new Vn.B},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new Ti.t(!1),up:new Ti.t(!1)},streamQueue:{down:da.em,up:da.em},checkpointQueue:da.em,lastCheckpointDoc:{}};return function Lk(n){LI.apply(this,arguments)}(t),function Uk(n){fb.apply(this,arguments)}(t),t}({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:f.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe((0,Er.p)(S=>!!this.pull),(0,_i.Z)(function(){var S=(0,rt.A)(function*(P){if("RESYNC"===P)return P;var j=(0,li.FD)(P);return j.documents=oR(s.collection,s.deletedField,j.documents),j.documents=yield Promise.all(j.documents.map(Q=>u(Q))),j});return function(P){return S.apply(this,arguments)}}())),masterChangesSince:(S=(0,rt.A)(function*(P,j){if(!s.pull)return{checkpoint:null,documents:[]};for(var Q=!1,ye={};!Q&&!s.isStopped();)try{ye=yield s.pull.handler(P,j),Q=!0}catch(mt){var Ee=(0,lc.Br)("RC_PULL",{checkpoint:P,errors:(0,Ps.$r)(mt).map(Et=>(0,Kx.S)(Et)),direction:"pull"});s.subjects.error.next(Ee),yield Ri(s.collection,(0,Lr.ZN)(s.retryTime))}if(s.isStopped())return{checkpoint:null,documents:[]};var we=(0,li.FD)(ye);return we.documents=oR(s.collection,s.deletedField,we.documents),we.documents=yield Promise.all(we.documents.map(mt=>u(mt))),we}),function(j,Q){return S.apply(this,arguments)}),masterWrite:function(){var S=(0,rt.A)(function*(P){if(!s.push)return[];var j=!1;yield(0,e_.FX)("preReplicationMasterWrite",{rows:P,collection:s.collection});var Q=yield Promise.all(P.map(function(){var Et=(0,rt.A)(function*(Dt){return Dt.newDocumentState=yield d(Dt.newDocumentState),null===Dt.newDocumentState?null:(Dt.assumedMasterState&&(Dt.assumedMasterState=yield d(Dt.assumedMasterState)),"_deleted"!==s.deletedField&&(Dt.newDocumentState=iR(s.deletedField,Dt.newDocumentState),Dt.assumedMasterState&&(Dt.assumedMasterState=iR(s.deletedField,Dt.assumedMasterState))),Dt)});return function(Dt){return Et.apply(this,arguments)}}())),ye=Q.filter(Ps.S7),Ee=null;for(0===ye.length&&(j=!0,Ee=[]);!j&&!s.isStopped();)try{if(Ee=yield s.push.handler(ye),!Array.isArray(Ee))throw(0,lc.Br)("RC_PUSH_NO_AR",{pushRows:P,direction:"push",args:{result:Ee}});j=!0}catch(Et){var we=Et.rxdb?Et:(0,lc.Br)("RC_PUSH",{pushRows:P,errors:(0,Ps.$r)(Et).map(Dt=>(0,Kx.S)(Dt)),direction:"push"});s.subjects.error.next(we),yield Ri(s.collection,(0,Lr.ZN)(s.retryTime))}return s.isStopped()?[]:(yield(0,e_.FX)("preReplicationMasterWriteDocumentsHandle",{result:Ee,collection:s.collection}),oR(s.collection,s.deletedField,(0,Lr.ZN)(Ee)))});return function(j){return S.apply(this,arguments)}}()}}),this.subs.push(this.internalReplicationState.events.error.subscribe(S=>{this.subjects.error.next(S)}),this.internalReplicationState.events.processed.down.subscribe(S=>this.subjects.received.next(S.document)),this.internalReplicationState.events.processed.up.subscribe(S=>{this.subjects.sent.next(S.newDocumentState)}),xu([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([S,P])=>{this.subjects.active.next(S||P)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:S=>{this.remoteEvents$.next(S)},error:S=>{this.subjects.error.next(S)}})),this.live||(yield jI(this.internalReplicationState),yield UI(this.internalReplicationState),yield this.cancel()),this.callOnStart()}});return function r(){return t.apply(this,arguments)}}(),e.isStopped=function(){return!!this.subjects.canceled.getValue()},e.awaitInitialReplication=function(){var t=(0,rt.A)(function*(){return yield this.startPromise,jI((0,Lr.ZN)(this.internalReplicationState))});return function r(){return t.apply(this,arguments)}}(),e.awaitInSync=function(){var t=(0,rt.A)(function*(){yield this.startPromise,yield jI((0,Lr.ZN)(this.internalReplicationState));for(var s=2;s>0;)s--,yield this.collection.database.requestIdlePromise(),yield UI((0,Lr.ZN)(this.internalReplicationState));return!0});return function r(){return t.apply(this,arguments)}}(),e.reSync=function(){this.remoteEvents$.next("RESYNC")},e.emitEvent=function(r){this.remoteEvents$.next(r)},e.cancel=function(){var t=(0,rt.A)(function*(){if(this.isStopped())return da.Dr;var s=this.onCancel.map(u=>(0,da.hq)(u()));return this.internalReplicationState&&(yield function wV(n){return nR.apply(this,arguments)}(this.internalReplicationState)),this.metaInstance&&s.push((0,Lr.ZN)(this.internalReplicationState).checkpointQueue.then(()=>(0,Lr.ZN)(this.metaInstance).close())),this.subs.forEach(u=>u.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(s)});return function r(){return t.apply(this,arguments)}}(),e.remove=function(){var t=(0,rt.A)(function*(){yield(0,Lr.ZN)(this.metaInstance).remove();var s=yield this.metaInfoPromise;yield this.cancel(),yield(0,Af.bD)(this.collection,s.collectionName,s.schema)});return function r(){return t.apply(this,arguments)}}(),n}());function cR(n){var e=n.collection;Vp(bV);var r,t=new Vn.B;n.live=typeof n.live>"u"||n.live,n.waitForLeadership=typeof n.waitForLeadership>"u"||n.waitForLeadership;var s=typeof n.serverTimestampField>"u"?"serverTimestamp":n.serverTimestampField;n.serverTimestampField=s;var u=e.schema.primaryPath;if((0,Ns.nT)(e.schema.jsonSchema,s)||s.includes("."))throw(0,lc.Br)("RC6",{field:s,schema:e.schema.jsonSchema});var D,f=void 0!==n.pull?.filter?(0,Ps.$r)(n.pull.filter):[],g=mg(n.firestore.collection,...f);if(n.pull&&(r={handler:(ye,Ee)=>(0,rt.A)(function*(){var we,mt;if(ye){var Et=function HI(n){var e=new Date(n);return Yr.fromDate(e)}(ye.serverTimestamp);we=mg(g,CI(s,">",Et),TI(s,"asc"),SI(Ee)),mt=mg(g,CI(s,"==",Et),CI(u,">",ye.id),TI(u,"asc"),SI(Ee))}else we=mg(g,TI(s,"asc"),SI(Ee));for(var Dt=!0,Ht=[];Dt;)yield mI(n.firestore.database),yield jx(n.firestore.database,function(){var Ce=(0,rt.A)(function*(Le){Ht=[];var[ze,ot]=yield Promise.all([ob(we),mt?ob(mt):void 0]);if(!(ze.metadata.hasPendingWrites||mt&&(0,Lr.ZN)(ot).metadata.hasPendingWrites)){Dt=!1,mt&&(Ht=(0,Lr.ZN)(ot).docs);var De=Ee-Ht.length;if(De>0){var fr=ze.docs.slice(0,De).filter(_s=>!!_s);(0,Ps.Hb)(Ht,fr)}}});return function(Le){return Ce.apply(this,arguments)}}());if(0===Ht.length)return{checkpoint:ye??null,documents:[]};var En=(0,Lr.ZN)((0,Ps.dG)(Ht)),un=Ht.map(Ce=>function Kk(n,e,t){var r=zk(n,t.data());return r[e]=t.id,r}(s,u,Ce));return{documents:un,checkpoint:{id:En.id,serverTimestamp:DV(s,En.data())}}})(),batchSize:(0,Lr.ZN)(n.pull).batchSize,modifier:(0,Lr.ZN)(n.pull).modifier,stream$:t.asObservable()}),n.push){var S=n.push?.filter;D={handler:ye=>(0,rt.A)(function*(){void 0!==S&&(ye=yield(0,Ps.j7)(ye,Et=>S(Et.newDocumentState)));var Ee={},we=ye.map(Et=>{var Dt=Et.newDocumentState[u];return Ee[Dt]=Et,Dt});yield mI(n.firestore.database);var mt=[];return yield jx(n.firestore.database,function(){var Et=(0,rt.A)(function*(Dt){mt=[];var En=yield function sR(n,e){for(var t=[];n.length;){var r=n.splice(0,10);t.push(e(r))}return Promise.all(t).then(s=>s.map(u=>u.docs).flat())}(we,Ce=>ob(mg(n.firestore.collection,CI(function ak(){return new Md("__name__")}(),"in",Ce)))),un={};En.forEach(Ce=>{var Le=zk(s,Ce.data()),ze=Ce.id;Le[u]=ze,un[ze]=Le});var Fe=function Ik(n){return Br(n=qn(n,Pr)),new Bx(n,e=>function yg(n,e){return function(r,s){const u=new bi;return r.asyncQueue.enqueueAndForget((0,rt.A)(function*(){return function HA(n,e,t){return wy.apply(this,arguments)}(yield og(r),s,u)})),u.promise}(Br(n),e)}(n,e))}(n.firestore.database),ue=!1;yield Promise.all(Object.entries(Ee).map(function(){var Ce=(0,rt.A)(function*([Le,ze]){var ot=un[Le];if(!ot||ze.assumedMasterState&&!1!==(yield e.conflictHandler({newDocumentState:ot,realMasterState:ze.assumedMasterState},"replication-firestore-push")).isEqual){ue=!0;var De=function pI(n,e,...t){if(n=fs(n),1===arguments.length&&(e=ZT.newId()),fI("doc","path",e),n instanceof ag){const r=Zn.fromString(e,...t);return fx(r),new fi(n,null,new Gt(r))}{if(!(n instanceof fi||n instanceof $a))throw new xt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zn.fromString(e,...t));return fx(r),new fi(n.firestore,n instanceof $a?n.converter:null,new Gt(r))}}(n.firestore.collection,Le),fr=(0,li.FD)(ze.newDocumentState);fr[s]=function aV(){return new hg("serverTimestamp")}(),ot?Fe.update(De,zI(u,fr)):Fe.set(De,zI(u,fr))}else mt.push(ot)});return function(Le){return Ce.apply(this,arguments)}}())),ue&&(yield Fe.commit())});return function(Dt){return Et.apply(this,arguments)}}()),yield mI(n.firestore.database),mt})(),batchSize:n.push.batchSize,modifier:n.push.modifier}}var P=new aR(n.firestore,n.replicationIdentifier,e,r,D,n.live,n.retryTime,n.autoStart);if(n.live&&n.pull){var j=P.start.bind(P),Q=P.cancel.bind(P);P.start=()=>{var Ee=function _k(n,...e){var t,r,s;n=fs(n);let u={includeMetadataChanges:!1,source:"default"},d=0;"object"!=typeof e[d]||yx(e[d])||(u=e[d],d++);const f={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(yx(e[d])){const P=e[d];e[d]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[d+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[d+2]=null===(s=P.complete)||void 0===s?void 0:s.bind(P)}let g,D,S;if(n instanceof fi)D=qn(n.firestore,Pr),S=Lh(n._key.path),g={next:P=>{e[d]&&e[d](function bg(n,e,t){const r=t.docs.get(e._key),s=new Cc(n);return new Ef(n,s,e._key,r,new Nd(t.hasPendingWrites,t.fromCache),e.converter)}(D,n,P))},error:e[d+1],complete:e[d+2]};else{const P=qn(n,Ii);D=qn(P.firestore,Pr),S=P._query;const j=new Cc(D);g={next:Q=>{e[d]&&e[d](new wf(D,j,P,Q))},error:e[d+1],complete:e[d+2]},Tx(n._query)}return function(j,Q,ye,Ee){const we=new vf(Ee),mt=new Qw(Q,we,ye);return j.asyncQueue.enqueueAndForget((0,rt.A)(function*(){return Kw(yield xd(j),mt)})),()=>{we.$a(),j.asyncQueue.enqueueAndForget((0,rt.A)(function*(){return Ww(yield xd(j),mt)}))}}(Br(D),S,f,g)}(mg(g,TI(s,"desc"),SI(1)),we=>{P.reSync()},we=>{P.subjects.error.next((0,lc.Br)("RC_STREAM",{error:(0,Kx.S)(we)}))});return P.cancel=()=>(Ee(),Q()),j()}}return function Hk(n,e){return(n&&e.collection.database.multiInstance?e.collection.database.waitForLeadership():da.Ms).then(()=>{e.isStopped()||e.autoStart&&e.start()})}(n.waitForLeadership,P),P}var Fd=function(n){return n.USER_STATE="user_state",n.STORIES="stories",n}(Fd||{});const lR={user_state:{schema:{version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"}},required:["id","name"]}},stories:{schema:{version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},is_premium:{type:"boolean"},languages:{type:"array"}}}}},Ig={apiKey:"AIzaSyBnagIv1jnnkGEMASLY3bJIrc5Iuz-Syks",authDomain:"empathy-7224d.firebaseapp.com",projectId:"empathy-7224d",storageBucket:"empathy-7224d.appspot.com",messagingSenderId:"957387697152",appId:"1:957387697152:web:a2fd71b0ac7fc060703ce5",measurementId:"G-WBFW0YBS26"};let mb,Cg=(()=>{class n{constructor(){this.localDb=this.setupLocalDb("local_db",lR),this.firebaseApp=l0(Ig)}setupLocalDb(t,r){return(0,rt.A)(function*(){(0,p.naY)()&&(yield M.e(486).then(M.bind(M,6486)).then(u=>Vp(u.RxDBDevModePlugin)));const s=yield(0,kO.uh)({name:t,storage:NO(),eventReduce:!0});return yield s.addCollections(r),s})()}addDocument(t,r,s){return this.localDb.then(u=>{const d={...r,id:s||JF()};return u[t].insert(d)}).catch(u=>{throw console.log(`LOL: Error on adding document into ${t}: ${u}`),new Error(`LOL: Error on adding document into ${t}: ${u}`)})}getDocumentsByIds(t,r){return this.localDb.then(s=>s[t].findByIds(r).$).catch(s=>{throw console.log(`LOL: Error on getting document from ${t}: ${s}`),new Error(`LOL: Error on getting document from ${t}: ${s}`)})}getDocumentById(t,r){var s=this;return(0,rt.A)(function*(){return(yield s.getDocumentsByIds(t,[r])).pipe((0,Mn.T)(d=>d.get(r)))})()}getAllCollectionDocs(t){return this.localDb.then(r=>r[t].find().$).catch(r=>{throw console.log(`LOL: Error on getting document from ${t}: ${r}`),new Error(`LOL: Error on getting document from ${t}: ${r}`)})}getStories(){var t=this;return(0,rt.A)(function*(){return yield t.getAllCollectionDocs(Fd.STORIES)})()}getStoryById(t){var r=this;return(0,rt.A)(function*(){const s=yield r.getDocumentById(Fd.STORIES,t);return console.log(`Story: ${JSON.stringify(s)}`),s})()}addStory(t,r){return this.addDocument(Fd.STORIES,t,r)}replicateCollection(t=Fd.STORIES){var r=this;return(0,rt.A)(function*(){const s=sk(r.firebaseApp),u=function vx(n,e,...t){if(n=fs(n),fI("collection","path",e),n instanceof ag){const r=Zn.fromString(e,...t);return px(r),new $a(n,null,r)}{if(!(n instanceof fi||n instanceof $a))throw new xt(gt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Zn.fromString(e,...t));return px(r),new $a(n.firestore,null,r)}}(s,Fd.STORIES),f=cR({collection:(yield r.localDb).collections[t],firestore:{projectId:Ig.projectId,database:s,collection:u},pull:{},push:{},live:!0,replicationIdentifier:"Empathy-to-firebase"});return console.log(`LOL: REPLICATION for COLEECTION: ${t}: ${f.replicationIdentifier}`),f})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),dR=(()=>{class n{constructor(t){this.dbService=t}getStories(){this.dbService.getStories()}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(Cg))};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["app-game"]],standalone:!0,features:[p.aNF],decls:4,vars:0,template:function(r,s){1&r&&(p.j41(0,"p"),p.EFF(1,"game works!"),p.k0s(),p.j41(2,"h3"),p.EFF(3,"Stories"),p.k0s())},dependencies:[kc]})}return n})();try{mb=typeof Intl<"u"&&Intl.v8BreakIterator}catch{mb=!1}let gb,Rf,KI,ha=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?zt(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!mb)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(p.Agw))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function xf(n){return function fR(){if(null==gb&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>gb=!0}))}finally{gb=gb||!1}return gb}()?n:!!n.capture}function TV(){if(null==Rf){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Rf=!1,Rf;if("scrollBehavior"in document.documentElement.style)Rf=!0;else{const n=Element.prototype.scrollTo;Rf=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Rf}function mu(n){return n.composedPath?n.composedPath()[0]:n.target}function pR(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function s2(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}class mU extends Ni.yU{constructor(e,t){super()}schedule(e,t=0){return this}}const wR={setInterval(n,e,...t){const{delegate:r}=wR;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=wR;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var gU=M(7908);class h1 extends mU{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,u=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(u,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,t),this}requestAsyncId(e,t,r=0){return wR.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&wR.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(u){r=!0,s=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,gU.o)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}var vU=M(6129);class qI{constructor(e,t=qI.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}qI.now=vU.U.now;class f1 extends qI{constructor(e,t=qI.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const IR=new f1(h1),_U=IR;function a2(n,e=IR){return(0,ki.N)((t,r)=>{let s=null,u=null,d=null;const f=()=>{if(s){s.unsubscribe(),s=null;const D=u;u=null,r.next(D)}};function g(){const D=d+n,S=e.now();if(S<D)return s=this.schedule(void 0,D-S),void r.add(s);f()}t.subscribe((0,ai._)(r,D=>{u=D,d=e.now(),s||(s=e.schedule(g,n),r.add(s))},()=>{f(),r.complete()},void 0,()=>{u=s=null}))})}function c2(n){return(0,Er.p)((e,t)=>n<=t)}var yU=M(3294);function DR(n){return Array.isArray(n)?n:[n]}function Zi(n){return null==n?"":"string"==typeof n?n:`${n}px`}function bb(n){return n instanceof p.aKT?n.nativeElement:n}const u2=new Set;let xg,EU=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):IU}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function wU(n,e){if(!u2.has(n))try{xg||(xg=document.createElement("style"),e&&xg.setAttribute("nonce",e),xg.setAttribute("type","text/css"),document.head.appendChild(xg)),xg.sheet&&(xg.sheet.insertRule(`@media ${n} {body{ }}`,0),u2.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(ha),p.KVO(p.BIS,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function IU(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let DU=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Vn.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return l2(DR(t)).some(s=>this._registerQuery(s).mql.matches)}observe(t){let u=xu(l2(DR(t)).map(d=>this._registerQuery(d).observable));return u=(0,th.x)(u.pipe(Xr(1)),u.pipe(c2(1),a2(0))),u.pipe((0,Mn.T)(d=>{const f={matches:!1,breakpoints:{}};return d.forEach(({matches:g,query:D})=>{f.matches=f.matches||g,f.breakpoints[D]=g}),f}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),u={observable:new so.c(d=>{const f=g=>this._zone.run(()=>d.next(g));return r.addListener(f),()=>{r.removeListener(f)}}).pipe((0,El.Z)(r),(0,Mn.T)(({matches:d})=>({query:t,matches:d})),ve(this._destroySubject)),mql:r};return this._queries.set(t,u),u}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(EU),p.KVO(p.SKi))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function l2(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class SU{constructor(e,t){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Vn.B,this._typeaheadSubscription=Ni.yU.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=r=>r.disabled,this._pressedLetters=[],this.tabOut=new Vn.B,this.change=new Vn.B,e instanceof p.rOR?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):(0,p.Hps)(e)&&(this._effectRef=(0,p.QZP)(()=>this._itemsChanged(e()),{injector:t}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(On(t=>this._pressedLetters.push(t)),a2(e),(0,Er.p)(()=>this._pressedLetters.length>0),(0,Mn.T)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let s=1;s<r.length+1;s++){const u=(this._activeItemIndex+s)%r.length,d=r[u];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(u);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(u=>!e[u]||this._allowedModifierKeys.indexOf(u)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&s){const u=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(u>0?u:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&s){const u=this._activeItemIndex+this._pageUpAndDown.delta,d=this._getItemsArray().length;this._setActiveItemByIndex(u<d?u:d-1,-1);break}return;default:return void((s||s2(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem=t[r]??null,this._activeItemIndex=r}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const s=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return(0,p.Hps)(this._items)?this._items():this._items instanceof p.rOR?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){const t=e.indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}}}class AU extends SU{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function p1(n){return 0===n.buttons||0===n.detail}function m1(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const kU=new p.nKC("cdk-input-modality-detector-options"),FU={ignoreKeys:[18,17,224,91,16]},Eb=xf({passive:!0,capture:!0});let LU=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,s,u){this._platform=t,this._mostRecentTarget=null,this._modality=new Ti.t(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(f=>f===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=mu(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(p1(d)?"keyboard":"mouse"),this._mostRecentTarget=mu(d))},this._onTouchstart=d=>{m1(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=mu(d))},this._options={...FU,...u},this.modalityDetected=this._modality.pipe(c2(1)),this.modalityChanged=this.modalityDetected.pipe((0,yU.F)()),t.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Eb),s.addEventListener("mousedown",this._onMousedown,Eb),s.addEventListener("touchstart",this._onTouchstart,Eb)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Eb),document.removeEventListener("mousedown",this._onMousedown,Eb),document.removeEventListener("touchstart",this._onTouchstart,Eb))}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(ha),p.KVO(p.SKi),p.KVO(de),p.KVO(kU,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var CR=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(CR||{});const BU=new p.nKC("cdk-focus-monitor-default-options"),TR=xf({passive:!0,capture:!0});let g1=(()=>{class n{constructor(t,r,s,u,d){this._ngZone=t,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Vn.B,this._rootNodeFocusAndBlurListener=f=>{for(let D=mu(f);D;D=D.parentElement)"focus"===f.type?this._onFocus(f,D):this._onBlur(f,D)},this._document=u,this._detectionMode=d?.detectionMode||CR.IMMEDIATE}monitor(t,r=!1){const s=bb(t);if(!this._platform.isBrowser||1!==s.nodeType)return cn();const u=function AV(n){if(function SV(){if(null==KI){const n=typeof document<"u"?document.head:null;KI=!(!n||!n.createShadowRoot&&!n.attachShadow)}return KI}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(s)||this._getDocument(),d=this._elementInfo.get(s);if(d)return r&&(d.checkChildren=!0),d.subject;const f={checkChildren:r,subject:new Vn.B,rootNode:u};return this._elementInfo.set(s,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const r=bb(t),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(t,r,s){const u=bb(t);u===this._getDocument().activeElement?this._getClosestElementsInfo(u).forEach(([f,g])=>this._originChanged(f,r,g)):(this._setOrigin(r),"function"==typeof u.focus&&u.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===CR.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===CR.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const s=this._elementInfo.get(r),u=mu(t);!s||!s.checkChildren&&r!==u||this._originChanged(r,this._getFocusOrigin(u),s)}_onBlur(t,r){const s=this._elementInfo.get(r);!s||s.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,TR),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,TR)}),this._rootNodeFocusListenerCount.set(r,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ve(this._stopInputModalityDetector)).subscribe(u=>{this._setOrigin(u,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,TR),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,TR),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,s){this._setClasses(t,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((s,u)=>{(u===t||s.checkChildren&&u.contains(t))&&r.push([u,s])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const u=t.labels;if(u)for(let d=0;d<u.length;d++)if(u[d].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(p.SKi),p.KVO(ha),p.KVO(LU),p.KVO(de,8),p.KVO(BU,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Rg=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(Rg||{});const m2="cdk-high-contrast-black-on-white",g2="cdk-high-contrast-white-on-black",v1="cdk-high-contrast-active";let jU=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,p.WQX)(DU).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Rg.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(t):null,u=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),u){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Rg.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Rg.BLACK_ON_WHITE}return Rg.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(v1,m2,g2),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===Rg.BLACK_ON_WHITE?t.add(v1,m2):r===Rg.WHITE_ON_BLACK&&t.add(v1,g2)}}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(ha),p.KVO(de))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const UU=new p.nKC("cdk-dir-doc",{providedIn:"root",factory:function $U(){return(0,p.WQX)(de)}}),HU=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let v2=(()=>{class n{constructor(t){this.value="ltr",this.change=new p.bkB,t&&(this.value=function zU(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?HU.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(UU,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),QI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({})}return n})();const WU=new p.nKC("mat-sanity-checks",{providedIn:"root",factory:function KU(){return!0}});let Ac=(()=>{class n{constructor(t,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!pR()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(jU),p.KVO(WU,8),p.KVO(de))};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({imports:[QI,QI]})}return n})();var xc=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(xc||{});class JU{constructor(e,t,r,s=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=s,this.state=xc.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const b2=xf({passive:!0,capture:!0});class e${constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=mu(e);t&&this._events.get(e.type)?.forEach((r,s)=>{(s===t||s.contains(t))&&r.forEach(u=>u.handleEvent(e))})}}addHandler(e,t,r,s){const u=this._events.get(t);if(u){const d=u.get(r);d?d.add(s):u.set(r,new Set([s]))}else this._events.set(t,new Map([[r,new Set([s])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,b2)})}removeHandler(e,t,r){const s=this._events.get(e);if(!s)return;const u=s.get(t);u&&(u.delete(r),0===u.size&&s.delete(t),0===s.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,b2)))}}const E2={enterDuration:225,exitDuration:150},w2=xf({passive:!0,capture:!0}),I2=["mousedown","touchstart"],D2=["mouseup","mouseleave","touchend","touchcancel"];class SR{static#e=this._eventManager=new e$;constructor(e,t,r,s){this._target=e,this._ngZone=t,this._platform=s,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=bb(r))}fadeInRipple(e,t,r={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),u={...E2,...r.animation};r.centered&&(e=s.left+s.width/2,t=s.top+s.height/2);const d=r.radius||function n$(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),s=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+s*s)}(e,t,s),f=e-s.left,g=t-s.top,D=u.enterDuration,S=document.createElement("div");S.classList.add("mat-ripple-element"),S.style.left=f-d+"px",S.style.top=g-d+"px",S.style.height=2*d+"px",S.style.width=2*d+"px",null!=r.color&&(S.style.backgroundColor=r.color),S.style.transitionDuration=`${D}ms`,this._containerElement.appendChild(S);const P=window.getComputedStyle(S),Q=P.transitionDuration,ye="none"===P.transitionProperty||"0s"===Q||"0s, 0s"===Q||0===s.width&&0===s.height,Ee=new JU(this,S,r,ye);S.style.transform="scale3d(1, 1, 1)",Ee.state=xc.FADING_IN,r.persistent||(this._mostRecentTransientRipple=Ee);let we=null;return!ye&&(D||u.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const mt=()=>{we&&(we.fallbackTimer=null),clearTimeout(Dt),this._finishRippleTransition(Ee)},Et=()=>this._destroyRipple(Ee),Dt=setTimeout(Et,D+100);S.addEventListener("transitionend",mt),S.addEventListener("transitioncancel",Et),we={onTransitionEnd:mt,onTransitionCancel:Et,fallbackTimer:Dt}}),this._activeRipples.set(Ee,we),(ye||!D)&&this._finishRippleTransition(Ee),Ee}fadeOutRipple(e){if(e.state===xc.FADING_OUT||e.state===xc.HIDDEN)return;const t=e.element,r={...E2,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=xc.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=bb(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,I2.forEach(r=>{SR._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{D2.forEach(t=>{this._triggerElement.addEventListener(t,this,w2)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===xc.FADING_IN?this._startFadeOutTransition(e):e.state===xc.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=xc.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=xc.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){const t=p1(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!m1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===xc.VISIBLE||e.config.terminateOnPointerUp&&e.state===xc.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(I2.forEach(t=>SR._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(D2.forEach(t=>e.removeEventListener(t,this,w2)),this._pointerUpEventsRegistered=!1))}}const C2=new p.nKC("mat-ripple-global-options");let T2=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,s,u,d){this._elementRef=t,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=u||{},this._rippleRenderer=new SR(this,r,t,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,s){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...s}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(ha),p.rXU(C2,8),p.rXU(p.bc$,8))};static#t=this.\u0275dir=p.FsC({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){2&r&&p.AVh("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),S2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({imports:[Ac,Ac]})}return n})();const A2={capture:!0},x2=["focus","mousedown","mouseenter","touchstart"],_1="mat-ripple-loader-uninitialized",y1="mat-ripple-loader-class-name",R2="mat-ripple-loader-centered",AR="mat-ripple-loader-disabled";let r$=(()=>{class n{constructor(){this._document=(0,p.WQX)(de,{optional:!0}),this._animationMode=(0,p.WQX)(p.bc$,{optional:!0}),this._globalRippleOptions=(0,p.WQX)(C2,{optional:!0}),this._platform=(0,p.WQX)(ha),this._ngZone=(0,p.WQX)(p.SKi),this._hosts=new Map,this._onInteraction=t=>{const r=mu(t);if(r instanceof HTMLElement){const s=r.closest(`[${_1}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(const t of x2)this._document?.addEventListener(t,this._onInteraction,A2)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of x2)this._document?.removeEventListener(r,this._onInteraction,A2)}configureRipple(t,r){t.setAttribute(_1,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(y1))&&t.setAttribute(y1,r.className||""),r.centered&&t.setAttribute(R2,""),r.disabled&&t.setAttribute(AR,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,r){const s=this._hosts.get(t);s?s.disabled=r:r?t.setAttribute(AR,""):t.removeAttribute(AR)}_createRipple(t){if(!this._document)return;const r=this._hosts.get(t);if(r)return r;t.querySelector(".mat-ripple")?.remove();const s=this._document.createElement("span");s.classList.add("mat-ripple",t.getAttribute(y1)),t.append(s);const u=new T2(new p.aKT(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return u._isInitialized=!0,u.trigger=t,u.centered=t.hasAttribute(R2),u.disabled=t.hasAttribute(AR),this.attachRipple(t,u),u}attachRipple(t,r){t.removeAttribute(_1),this._hosts.set(t,r)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.ngOnDestroy(),this._hosts.delete(t))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const i$=["*"],u$=new p.nKC("MAT_CARD_CONFIG");let M2=(()=>{class n{constructor(t){this.appearance=t?.appearance||"raised"}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(u$,8))};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(r,s){2&r&&p.AVh("mat-mdc-card-outlined","outlined"===s.appearance)("mdc-card--outlined","outlined"===s.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[p.aNF],ngContentSelectors:i$,decls:1,vars:0,template:function(r,s){1&r&&(p.NAR(),p.SdG(0))},styles:['.mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mdc-elevated-card-container-color);border-color:var(--mdc-elevated-card-container-color);border-radius:var(--mdc-elevated-card-container-shape);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:"";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{background-color:var(--mdc-outlined-card-container-color);border-radius:var(--mdc-outlined-card-container-shape);border-width:var(--mdc-outlined-card-outline-width);border-color:var(--mdc-outlined-card-outline-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined::after{border:none}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}return n})(),O2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=p.FsC({type:n,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}return n})(),h$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({imports:[Ac,kc,Ac]})}return n})();const f$=(n,e)=>e.id;function p$(n,e){if(1&n&&(p.j41(0,"mat-card",1)(1,"mat-card-content"),p.EFF(2),p.k0s()()),2&n){const t=e.$implicit,r=e.$index;p.R7$(2),p.Lme("Item #",r,": ",t.name,"")}}const m$=[{path:"game",component:dR},{path:"editor",component:(()=>{class n{constructor(t){this.dbService=t,this.stories$=this.getStories()}addStory(){return this.dbService.addStory({name:"NewStory",is_premium:!1,languages:["en"]}).then(r=>(console.log(`LOL insert result: ${JSON.stringify(r)}`),r))}getStories(){return this.dbService.getStories()}replicate(){this.dbService.replicateCollection(Fd.STORIES)}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(Cg))};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["editor"]],standalone:!0,features:[p.aNF],decls:10,vars:4,consts:[[3,"click"],["appearance","outlined"]],template:function(r,s){1&r&&(p.j41(0,"h3"),p.EFF(1,"Stories"),p.k0s(),p.j41(2,"p",0),p.bIt("click",function(){return s.addStory()}),p.EFF(3,"Add story"),p.k0s(),p.Z7z(4,p$,3,2,"mat-card",1,f$),p.nI1(6,"async"),p.nI1(7,"async"),p.j41(8,"p",0),p.bIt("click",function(){return s.replicate()}),p.EFF(9,"Replicate!"),p.k0s()),2&r&&(p.R7$(4),p.Dyx(p.bMT(7,2,p.bMT(6,0,s.stories$))))},dependencies:[kc,U,h$,M2,O2]})}return n})()}];let g$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({imports:[IC.forRoot(m$),IC]})}return n})();var v$=M(7441);const _$=["addListener","removeListener"],y$=["addEventListener","removeEventListener"],b$=["on","off"];function YI(n,e,t,r){if((0,ao.T)(t)&&(r=t,t=void 0),r)return YI(n,e,t).pipe(Uo(r));const[s,u]=function I$(n){return(0,ao.T)(n.addEventListener)&&(0,ao.T)(n.removeEventListener)}(n)?y$.map(d=>f=>n[d](e,f,t)):function E$(n){return(0,ao.T)(n.addListener)&&(0,ao.T)(n.removeListener)}(n)?_$.map(P2(n,e)):function w$(n){return(0,ao.T)(n.on)&&(0,ao.T)(n.off)}(n)?b$.map(P2(n,e)):[];if(!s&&(0,v$.X)(n))return(0,_i.Z)(d=>YI(d,e,t))((0,Da.Tg)(n));if(!s)throw new TypeError("Invalid event target");return new so.c(d=>{const f=(...g)=>d.next(1<g.length?g:g[0]);return s(f),()=>u(f)})}function P2(n,e){return t=>r=>n[t](e,r)}const wb=new so.c(Z.l);var Ib=M(7786);const C$={connector:()=>new Vn.B};function N2(n,e=C$){const{connector:t}=e;return(0,ki.N)((r,s)=>{const u=t();(0,Da.Tg)(n(function D$(n){return new so.c(e=>n.subscribe(e))}(u))).subscribe(s),s.add(r.subscribe(u))})}function k2(n,e){return e?t=>(0,th.x)(e.pipe(Xr(1),function A$(){return(0,ki.N)((n,e)=>{n.subscribe((0,ai._)(e,Z.l))})}()),t.pipe(k2(n))):(0,_i.Z)((t,r)=>(0,Da.Tg)(n(t,r)).pipe(Xr(1),B(t)))}var x$=M(9470);function F2(n=0,e,t=_U){let r=-1;return null!=e&&((0,x$.m)(e)?t=e:r=e),new so.c(s=>{let u=function R$(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let d=0;return t.schedule(function(){s.closed||(s.next(d++),0<=r?this.schedule(void 0,r):s.complete())},u)})}function b1(n,e=IR){const t=F2(n,e);return k2(()=>t)}const ZI="Service workers are disabled or not supported by this browser";class xR{constructor(e){if(this.serviceWorker=e,e){const r=YI(e,"controllerchange").pipe((0,Mn.T)(()=>e.controller)),s=Ru(()=>cn(e.controller)),u=(0,th.x)(s,r);this.worker=u.pipe((0,Er.p)(S=>!!S)),this.registration=this.worker.pipe(Wi(()=>e.getRegistration()));const D=YI(e,"message").pipe((0,Mn.T)(S=>S.data)).pipe((0,Er.p)(S=>S&&S.type)).pipe(function S$(n){return n?e=>N2(n)(e):e=>function T$(n,e){const t=(0,ao.T)(n)?n:()=>n;return(0,ao.T)(e)?N2(e,{connector:t}):r=>new ci(r,t)}(new Vn.B)(e)}());D.connect(),this.events=D}else this.worker=this.events=this.registration=function M$(n){return Ru(()=>$c(new Error(n)))}(ZI)}postMessage(e,t){return this.worker.pipe(Xr(1),On(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const s=this.waitForOperationCompleted(r),u=this.postMessage(e,t);return Promise.all([u,s]).then(([,d])=>d)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe((0,Er.p)(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Xr(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,Er.p)(t=>t.nonce===e),Xr(1),(0,Mn.T)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let L2=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new Vn.B,!t.isEnabled)return this.messages=wb,this.notificationClicks=wb,void(this.subscription=wb);this.messages=this.sw.eventsOfType("PUSH").pipe((0,Mn.T)(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,Mn.T)(s=>s.data)),this.pushManager=this.sw.registration.pipe((0,Mn.T)(s=>s.pushManager));const r=this.pushManager.pipe(Wi(s=>s.getSubscription()));this.subscription=(0,Ib.h)(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(ZI));const r={userVisibleOnly:!0};let s=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),u=new Uint8Array(new ArrayBuffer(s.length));for(let d=0;d<s.length;d++)u[d]=s.charCodeAt(d);return r.applicationServerKey=u,this.pushManager.pipe(Wi(d=>d.subscribe(r)),Xr(1)).toPromise().then(d=>(this.subscriptionChanges.next(d),d))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Xr(1),Wi(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(ZI))}decodeBase64(t){return atob(t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(xR))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})(),V2=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=wb,void(this.unrecoverable=wb);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ZI));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(ZI));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(xR))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();const B2=new p.nKC("");function O$(n,e,t,r){return()=>{if(!zt(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;const s=n.get(p.SKi),u=n.get(p.o8S);let d;if(s.runOutsideAngular(()=>{const f=navigator.serviceWorker,g=()=>f.controller?.postMessage({action:"INITIALIZE"});f.addEventListener("controllerchange",g),u.onDestroy(()=>{f.removeEventListener("controllerchange",g)})}),"function"==typeof t.registrationStrategy)d=t.registrationStrategy();else{const[f,...g]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(f){case"registerImmediately":d=cn(null);break;case"registerWithDelay":d=j2(+g[0]||0);break;case"registerWhenStable":d=g[0]?(0,Ib.h)(U2(n),j2(+g[0])):U2(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}s.runOutsideAngular(()=>d.pipe(Xr(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(f=>console.error("Service worker registration failed with:",f))))}}function j2(n){return cn(null).pipe(b1(n))}function U2(n){return n.get(p.o8S).isStable.pipe((0,Er.p)(t=>t))}function P$(n,e){return new xR(zt(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}class E1{}function N$(n,e={}){return(0,p.EmA)([L2,V2,{provide:B2,useValue:n},{provide:E1,useValue:e},{provide:xR,useFactory:P$,deps:[E1,p.Agw]},{provide:p.hnV,useFactory:O$,deps:[p.zZn,B2,E1,p.Agw],multi:!0}])}let k$=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[N$(t,r)]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({providers:[L2,V2]})}return n})(),L$=(()=>{class n{constructor(t,r,s,u,d){this.doc=t,this.delegate=r,this.zone=s,this.animationType=u,this.moduleImpl=d,this._rendererFactoryPromise=null,this.scheduler=(0,p.WQX)(p.An2,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??M.e(8).then(M.bind(M,8008)).then(r=>r)).catch(r=>{throw new p.wOt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);const u=new s(this.delegate,this._engine,this.zone);return this.delegate=u,u})}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(0===s.\u0275type)return s;"boolean"==typeof s.throwOnSyntheticProps&&(s.throwOnSyntheticProps=!1);const u=new V$(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{const f=d.createRenderer(t,r);u.use(f),this.scheduler?.notify(9)}).catch(d=>{u.use(s)}),u}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static#e=this.\u0275fac=function(r){p.QTQ()};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();class V${constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,null!==this.replay){for(const t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,s){this.delegate.insertBefore(e,t,r,s)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(s=>s.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(s=>s.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return null!==this.replay&&e.startsWith("@")}}function B$(n="animations"){return(0,p.ngT)("NgAsyncAnimations"),(0,p.EmA)([{provide:p._9s,useFactory:(e,t,r)=>new L$(e,t,r,n),deps:[de,Yf,p.SKi]},{provide:p.bc$,useValue:"noop"===n?"NoopAnimations":"BrowserAnimations"}])}var Mg=M(7707);!function j$(n){n.__load_patch("rxjs",(e,t,r)=>{const s=t.__symbol__,g=Object.defineProperties;r.patchMethod(so.c.prototype,"lift",j=>(Q,ye)=>{const Ee=j.apply(Q,ye);return Ee.operator&&(Ee.operator._zone=t.current,r.patchMethod(Ee.operator,"call",we=>(mt,Et)=>mt._zone&&mt._zone!==t.current?mt._zone.run(we,mt,Et):we.apply(mt,Et))),Ee}),function(){const j=so.c.prototype,ye=j[s("_subscribe")]=j._subscribe;g(so.c.prototype,{_zone:{value:null,writable:!0,configurable:!0},_zoneSource:{value:null,writable:!0,configurable:!0},_zoneSubscribe:{value:null,writable:!0,configurable:!0},source:{configurable:!0,get:function(){return this._zoneSource},set:function(Ee){this._zone=t.current,this._zoneSource=Ee}},_subscribe:{configurable:!0,get:function(){if(this._zoneSubscribe)return this._zoneSubscribe;if(this.constructor===so.c)return ye;const Ee=Object.getPrototypeOf(this);return Ee&&Ee._subscribe},set:function(Ee){this._zone=t.current,this._zoneSubscribe=Ee?function(){if(this._zone&&this._zone!==t.current){const we=this._zone.run(Ee,this,arguments);if("function"==typeof we){const mt=this._zone;return function(){return mt!==t.current?mt.run(we,this,arguments):we.apply(this,arguments)}}return we}return Ee.apply(this,arguments)}:Ee}},subjectFactory:{get:function(){return this._zoneSubjectFactory},set:function(Ee){const we=this._zone;this._zoneSubjectFactory=function(){return we&&we!==t.current?we.run(Ee,this,arguments):Ee.apply(this,arguments)}}}})}(),g(Ni.yU.prototype,{_zone:{value:null,writable:!0,configurable:!0},_zoneUnsubscribe:{value:null,writable:!0,configurable:!0},_unsubscribe:{get:function(){if(this._zoneUnsubscribe||this._zoneUnsubscribeCleared)return this._zoneUnsubscribe;const j=Object.getPrototypeOf(this);return j&&j._unsubscribe},set:function(j){this._zone=t.current,j?(this._zoneUnsubscribeCleared=!1,this._zoneUnsubscribe=function(){return this._zone&&this._zone!==t.current?this._zone.run(j,this,arguments):j.apply(this,arguments)}):(this._zoneUnsubscribe=j,this._zoneUnsubscribeCleared=!0)}}}),function(){const j=Mg.vU.prototype.next,Q=Mg.vU.prototype.error,ye=Mg.vU.prototype.complete;Object.defineProperty(Mg.vU.prototype,"destination",{configurable:!0,get:function(){return this._zoneDestination},set:function(Ee){this._zone=t.current,this._zoneDestination=Ee}}),Mg.vU.prototype.next=function(){const we=this._zone;return we&&we!==t.current?we.run(j,this,arguments,"rxjs.Subscriber.next"):j.apply(this,arguments)},Mg.vU.prototype.error=function(){const we=this._zone;return we&&we!==t.current?we.run(Q,this,arguments,"rxjs.Subscriber.error"):Q.apply(this,arguments)},Mg.vU.prototype.complete=function(){const we=this._zone;return we&&we!==t.current?we.run(ye,this,arguments,"rxjs.Subscriber.complete"):ye.call(this)}}()})}(Zone);const U$=["*",[["mat-toolbar-row"]]],$$=["*","mat-toolbar-row"];let H$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=p.FsC({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return n})(),z$=(()=>{class n{constructor(t,r,s){this._elementRef=t,this._platform=r,this._document=s}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(p.aKT),p.rXU(ha),p.rXU(de))};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,s,u){if(1&r&&p.wni(u,H$,5),2&r){let d;p.mGM(d=p.lsd())&&(s._toolbarRows=d)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,s){2&r&&(p.HbH(s.color?"mat-"+s.color:""),p.AVh("mat-toolbar-multiple-rows",s._toolbarRows.length>0)("mat-toolbar-single-row",0===s._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[p.aNF],ngContentSelectors:$$,decls:2,vars:0,template:function(r,s){1&r&&(p.NAR(U$),p.SdG(0),p.SdG(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return n})(),K$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({imports:[Ac,Ac]})}return n})();var G$=M(7647);class w1{}class Vd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Vd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Vd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Vd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(f=>-1===u.indexOf(f)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(u=>u.toString()),s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class q${encodeKey(e){return $2(e)}encodeValue(e){return $2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const X$=/%(\d[a-f0-9])/gi,Y$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $2(n){return encodeURIComponent(n).replace(X$,(e,t)=>Y$[t]??e)}function RR(n){return`${n}`}class Mf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new q$,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Q$(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[d,f]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],g=t.get(d)||[];g.push(f),t.set(d,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(RR):[RR(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Mf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(RR(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(RR(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Z${constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function H2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function z2(n){return typeof Blob<"u"&&n instanceof Blob}function K2(n){return typeof FormData<"u"&&n instanceof FormData}class JI{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function J$(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params),this.transferCache=u.transferCache),this.headers??=new Vd,this.context??=new Z$,this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+d}}else this.params=new Mf,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||H2(this.body)||z2(this.body)||K2(this.body)||function eH(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Mf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||K2(this.body)?null:z2(this.body)?this.body.type||null:H2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Mf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=e.transferCache??this.transferCache,d=void 0!==e.body?e.body:this.body,f=e.withCredentials??this.withCredentials,g=e.reportProgress??this.reportProgress;let D=e.headers||this.headers,S=e.params||this.params;const P=e.context??this.context;return void 0!==e.setHeaders&&(D=Object.keys(e.setHeaders).reduce((j,Q)=>j.set(Q,e.setHeaders[Q]),D)),e.setParams&&(S=Object.keys(e.setParams).reduce((j,Q)=>j.set(Q,e.setParams[Q]),S)),new JI(t,r,d,{params:S,headers:D,context:P,reportProgress:g,responseType:s,withCredentials:f,transferCache:u})}}var D1=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(D1||{});class C1{constructor(e,t=200,r="OK"){this.headers=e.headers||new Vd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class eD extends C1{constructor(e={}){super(e),this.type=D1.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new eD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function T1(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let S1=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof JI)u=t;else{let g,D;g=s.headers instanceof Vd?s.headers:new Vd(s.headers),s.params&&(D=s.params instanceof Mf?s.params:new Mf({fromObject:s.params})),u=new JI(t,r,void 0!==s.body?s.body:null,{headers:g,context:s.context,params:D,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}const d=cn(u).pipe(Ta(g=>this.handler.handle(g)));if(t instanceof JI||"events"===s.observe)return d;const f=d.pipe((0,Er.p)(g=>g instanceof eD));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return f.pipe((0,Mn.T)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,Mn.T)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,Mn.T)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,Mn.T)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Mf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,T1(s,r))}post(t,r,s={}){return this.request("POST",t,T1(s,r))}put(t,r,s={}){return this.request("PUT",t,T1(s,r))}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(w1))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac})}return n})();const TH=["*"];let PR;function tD(n){return function SH(){if(void 0===PR&&(PR=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(PR=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return PR}()?.createHTML(n)||n}function aB(n){return Error(`Unable to find icon with the name "${n}"`)}function cB(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function uB(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class Pg{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let NR=(()=>{class n{constructor(t,r,s,u){this._httpClient=t,this._sanitizer=r,this._errorHandler=u,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(t,r,s){return this.addSvgIconInNamespace("",t,r,s)}addSvgIconLiteral(t,r,s){return this.addSvgIconLiteralInNamespace("",t,r,s)}addSvgIconInNamespace(t,r,s,u){return this._addSvgIconConfig(t,r,new Pg(s,null,u))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,s,u){const d=this._sanitizer.sanitize(p.WPN.HTML,s);if(!d)throw uB(s);const f=tD(d);return this._addSvgIconConfig(t,r,new Pg("",f,u))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,s){return this._addSvgIconSetConfig(t,new Pg(r,null,s))}addSvgIconSetLiteralInNamespace(t,r,s){const u=this._sanitizer.sanitize(p.WPN.HTML,r);if(!u)throw uB(r);const d=tD(u);return this._addSvgIconSetConfig(t,new Pg("",d,s))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(p.WPN.RESOURCE_URL,t);if(!r)throw cB(t);const s=this._cachedIconsByUrl.get(r);return s?cn(kR(s)):this._loadSvgIconFromConfig(new Pg(t,null)).pipe(On(u=>this._cachedIconsByUrl.set(r,u)),(0,Mn.T)(u=>kR(u)))}getNamedSvgIcon(t,r=""){const s=lB(r,t);let u=this._svgIconConfigs.get(s);if(u)return this._getSvgFromConfig(u);if(u=this._getIconConfigFromResolvers(r,t),u)return this._svgIconConfigs.set(s,u),this._getSvgFromConfig(u);const d=this._iconSetConfigs.get(r);return d?this._getSvgFromIconSetConfigs(t,d):$c(aB(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?cn(kR(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Mn.T)(r=>kR(r)))}_getSvgFromIconSetConfigs(t,r){const s=this._extractIconWithNameFromAnySet(t,r);return s?cn(s):function W$(...n){const e=(0,Zd.ms)(n),{args:t,keys:r}=Zb(n),s=new so.c(u=>{const{length:d}=t;if(!d)return void u.complete();const f=new Array(d);let g=d,D=d;for(let S=0;S<d;S++){let P=!1;(0,Da.Tg)(t[S]).subscribe((0,ai._)(u,j=>{P||(P=!0,D--),f[S]=j},()=>g--,void 0,()=>{(!g||!P)&&(D||u.next(r?Au(r,f):f),u.complete())}))}});return e?s.pipe(Uo(e)):s}(r.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(y(f=>{const D=`Loading icon set URL: ${this._sanitizer.sanitize(p.WPN.RESOURCE_URL,d.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(D)),cn(null)})))).pipe((0,Mn.T)(()=>{const d=this._extractIconWithNameFromAnySet(t,r);if(!d)throw aB(t);return d}))}_extractIconWithNameFromAnySet(t,r){for(let s=r.length-1;s>=0;s--){const u=r[s];if(u.svgText&&u.svgText.toString().indexOf(t)>-1){const d=this._svgElementFromConfig(u),f=this._extractSvgIconFromSet(d,t,u.options);if(f)return f}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(On(r=>t.svgText=r),(0,Mn.T)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?cn(null):this._fetchIcon(t).pipe(On(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,s){const u=t.querySelector(`[id="${r}"]`);if(!u)return null;const d=u.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,s);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),s);const f=this._svgElementFromString(tD("<svg></svg>"));return f.appendChild(d),this._setSvgAttributes(f,s)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(t){const r=this._svgElementFromString(tD("<svg></svg>")),s=t.attributes;for(let u=0;u<s.length;u++){const{name:d,value:f}=s[u];"id"!==d&&r.setAttribute(d,f)}for(let u=0;u<t.childNodes.length;u++)t.childNodes[u].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[u].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:s}=t,u=s?.withCredentials??!1;if(!this._httpClient)throw function AH(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(p.WPN.RESOURCE_URL,r);if(!d)throw cB(r);const f=this._inProgressUrlFetches.get(d);if(f)return f;const g=this._httpClient.get(d,{responseType:"text",withCredentials:u}).pipe((0,Mn.T)(D=>tD(D)),Y(()=>this._inProgressUrlFetches.delete(d)),(0,G$.u)());return this._inProgressUrlFetches.set(d,g),g}_addSvgIconConfig(t,r,s){return this._svgIconConfigs.set(lB(t,r),s),this}_addSvgIconSetConfig(t,r){const s=this._iconSetConfigs.get(t);return s?s.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let s=0;s<this._resolvers.length;s++){const u=this._resolvers[s](r,t);if(u)return RH(u)?new Pg(u.url,null,u.options):new Pg(u,null)}}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(S1,8),p.KVO(Yd),p.KVO(de,8),p.KVO(p.zcH))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function kR(n){return n.cloneNode(!0)}function lB(n,e){return n+":"+e}function RH(n){return!(!n.url||!n.options)}const MH=new p.nKC("MAT_ICON_DEFAULT_OPTIONS"),OH=new p.nKC("mat-icon-location",{providedIn:"root",factory:function PH(){const n=(0,p.WQX)(de),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),dB=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],NH=dB.map(n=>`[${n}]`).join(", "),kH=/^url\(['"]?#(.*?)['"]?\)$/;let FH=(()=>{class n{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,s,u,d,f){this._elementRef=t,this._iconRegistry=r,this._location=u,this._errorHandler=d,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Ni.yU.EMPTY,f&&(f.color&&(this.color=this._defaultColor=f.color),f.fontSet&&(this.fontSet=f.fontSet)),s||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const s=t.childNodes[r];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>t.classList.remove(s)),r.forEach(s=>t.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((s,u)=>{s.forEach(d=>{u.setAttribute(d.name,`url('${t}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(NH),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let u=0;u<r.length;u++)dB.forEach(d=>{const f=r[u],g=f.getAttribute(d),D=g?g.match(kH):null;if(D){let S=s.get(f);S||(S=[],s.set(f,S)),S.push({name:d,value:D[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,s]=this._splitIconName(t);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(Xr(1)).subscribe(u=>this._setSvgElement(u),u=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${s}! ${u.message}`))})}}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(p.aKT),p.rXU(NR),p.kS0("aria-hidden"),p.rXU(OH),p.rXU(p.zcH),p.rXU(MH,8))};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,s){2&r&&(p.BMQ("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),p.HbH(s.color?"mat-"+s.color:""),p.AVh("mat-icon-inline",s.inline)("mat-icon-no-color","primary"!==s.color&&"accent"!==s.color&&"warn"!==s.color))},inputs:{color:"color",inline:[2,"inline","inline",p.L39],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[p.GFd,p.aNF],ngContentSelectors:TH,decls:1,vars:0,template:function(r,s){1&r&&(p.NAR(),p.SdG(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),LH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({imports:[Ac,Ac]})}return n})();const BH=["mat-icon-button",""],jH=["*"],UH=new p.nKC("MAT_BUTTON_CONFIG"),$H=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let R1,HH=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,r,s,u){this._elementRef=t,this._platform=r,this._ngZone=s,this._animationMode=u,this._focusMonitor=(0,p.WQX)(g1),this._rippleLoader=(0,p.WQX)(r$),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;const d=(0,p.WQX)(UH,{optional:!0}),f=t.nativeElement,g=f.classList;this.disabledInteractive=d?.disabledInteractive??!1,this.color=d?.color??null,this._rippleLoader?.configureRipple(f,{className:"mat-mdc-button-ripple"});for(const{attribute:D,mdcClasses:S}of $H)f.hasAttribute(D)&&g.add(...S)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(r){p.QTQ()};static#t=this.\u0275dir=p.FsC({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",p.L39],disabled:[2,"disabled","disabled",p.L39],ariaDisabled:[2,"aria-disabled","ariaDisabled",p.L39],disabledInteractive:[2,"disabledInteractive","disabledInteractive",p.L39]},features:[p.GFd]})}return n})(),KH=(()=>{class n extends HH{constructor(t,r,s,u){super(t,r,s,u),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(p.aKT),p.rXU(ha),p.rXU(p.SKi),p.rXU(p.bc$,8))};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,s){2&r&&(p.BMQ("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),p.HbH(s.color?"mat-"+s.color:""),p.AVh("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[p.Vt3,p.aNF],attrs:BH,ngContentSelectors:jH,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){1&r&&(p.NAR(),p.nrm(0,"span",0),p.SdG(1),p.nrm(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),WH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({imports:[Ac,S2,Ac]})}return n})(),GH=1;const FR={};function hB(n){return n in FR&&(delete FR[n],!0)}const qH={setImmediate(n){const e=GH++;return FR[e]=!0,R1||(R1=Promise.resolve()),R1.then(()=>hB(e)&&n()),e},clearImmediate(n){hB(n)}},{setImmediate:QH,clearImmediate:XH}=qH,LR={setImmediate(...n){const{delegate:e}=LR;return(e?.setImmediate||QH)(...n)},clearImmediate(n){const{delegate:e}=LR;return(e?.clearImmediate||XH)(n)},delegate:void 0},M1=new class ZH extends f1{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class YH extends h1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=LR.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:u}=e;null!=t&&(null===(s=u[u.length-1])||void 0===s?void 0:s.id)!==t&&(LR.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});class O1{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class JH extends O1{constructor(e,t,r,s,u){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=s,this.projectableNodes=u}}class fB extends O1{constructor(e,t,r,s){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=s}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class e4 extends O1{constructor(e){super(),this.element=e instanceof p.aKT?e.nativeElement:e}}class t4{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof JH?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof fB?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof e4?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class n4 extends t4{constructor(e,t,r,s,u){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=s,this.attachDomPortal=d=>{const f=d.element,g=this._document.createComment("dom-portal");f.parentNode.insertBefore(g,f),this.outletElement.appendChild(f),this._attachedPortal=d,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(f,g)})},this._document=u}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let s;return e.viewContainerRef?(s=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>s.destroy())):(s=r.create(e.injector||this._defaultInjector||p.zZn.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=e,s}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(s=>this.outletElement.appendChild(s)),r.detectChanges(),this.setDisposeFn(()=>{let s=t.indexOf(r);-1!==s&&t.remove(s)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let r4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({})}return n})();var Vs=M(9969);const nD={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=nD;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const s=e(u=>{t=void 0,n(u)});return new Ni.yU(()=>t?.(s))},requestAnimationFrame(...n){const{delegate:e}=nD;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=nD;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class o4 extends f1{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class i4 extends h1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=nD.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:u}=e;null!=t&&(null===(s=u[u.length-1])||void 0===s?void 0:s.id)!==t&&(nD.cancelAnimationFrame(t),e._scheduled=void 0)}});function pB(n,e=IR){return function a4(n){return(0,ki.N)((e,t)=>{let r=!1,s=null,u=null,d=!1;const f=()=>{if(u?.unsubscribe(),u=null,r){r=!1;const D=s;s=null,t.next(D)}d&&t.complete()},g=()=>{u=null,d&&t.complete()};e.subscribe((0,ai._)(t,D=>{r=!0,s=D,u||(0,Da.Tg)(n(D)).subscribe(u=(0,ai._)(t,f,g))},()=>{d=!0,(!r||!u||u.closed)&&t.complete()}))})}(()=>F2(n,e))}let u4=(()=>{class n{constructor(t,r,s){this._ngZone=t,this._platform=r,this._scrolled=new Vn.B,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new so.c(r=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(pB(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):cn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const s=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe((0,Er.p)(u=>!u||s.indexOf(u)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((s,u)=>{this._scrollableContainsElement(u,t)&&r.push(u)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let s=bb(r),u=t.getElementRef().nativeElement;do{if(s==u)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>YI(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(p.SKi),p.KVO(ha),p.KVO(de,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),mB=(()=>{class n{constructor(t,r,s){this._platform=t,this._change=new Vn.B,this._changeListener=u=>{this._change.next(u)},this._document=s,r.runOutsideAngular(()=>{if(t.isBrowser){const u=this._getWindow();u.addEventListener("resize",this._changeListener),u.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),s=t.documentElement,u=s.getBoundingClientRect();return{top:-u.top||t.body.scrollTop||r.scrollY||s.scrollTop||0,left:-u.left||t.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(pB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(ha),p.KVO(p.SKi),p.KVO(de,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),P1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({})}return n})(),gB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({imports:[QI,P1,QI,P1]})}return n})();const vB=TV();class d4{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=Zi(-this._previousScrollPosition.left),e.style.top=Zi(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,s=this._document.body.style,u=r.scrollBehavior||"",d=s.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),vB&&(r.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),vB&&(r.scrollBehavior=u,s.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class h4{constructor(e,t,r,s){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe((0,Er.p)(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class _B{enable(){}disable(){}attach(){}}function N1(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function yB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class f4{constructor(e,t,r,s){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=s,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:s}=this._viewportRuler.getViewportSize();N1(t,[{width:r,height:s,bottom:s,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let p4=(()=>{class n{constructor(t,r,s,u){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new _B,this.close=d=>new h4(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new d4(this._viewportRuler,this._document),this.reposition=d=>new f4(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=u}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(u4),p.KVO(mB),p.KVO(p.SKi),p.KVO(de))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class bB{constructor(e){if(this.scrollStrategy=new _B,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class m4{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let EB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),g4=(()=>{class n extends EB{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=s=>{const u=this._attachedOverlays;for(let d=u.length-1;d>-1;d--)if(u[d]._keydownEvents.observers.length>0){const f=u[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de),p.KVO(p.SKi,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),v4=(()=>{class n extends EB{constructor(t,r,s){super(t),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=u=>{this._pointerDownEventTarget=mu(u)},this._clickListener=u=>{const d=mu(u),f="click"===u.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;const g=this._attachedOverlays.slice();for(let D=g.length-1;D>-1;D--){const S=g[D];if(S._outsidePointerEvents.observers.length<1||!S.hasAttached())continue;if(wB(S.overlayElement,d)||wB(S.overlayElement,f))break;const P=S._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>P.next(u)):P.next(u)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de),p.KVO(ha),p.KVO(p.SKi,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function wB(n,e){const t=typeof ShadowRoot<"u"&&ShadowRoot;let r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}let IB=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||pR()){const s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let u=0;u<s.length;u++)s[u].remove()}const r=this._document.createElement("div");r.classList.add(t),pR()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(de),p.KVO(ha))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class _4{constructor(e,t,r,s,u,d,f,g,D,S=!1,P){this._portalOutlet=e,this._host=t,this._pane=r,this._config=s,this._ngZone=u,this._keyboardDispatcher=d,this._document=f,this._location=g,this._outsideClickDispatcher=D,this._animationsDisabled=S,this._injector=P,this._backdropElement=null,this._backdropClick=new Vn.B,this._attachments=new Vn.B,this._detachments=new Vn.B,this._locationChanges=Ni.yU.EMPTY,this._backdropClickHandler=j=>this._backdropClick.next(j),this._backdropTransitionendHandler=j=>{this._disposeBackdrop(j.target)},this._keydownEvents=new Vn.B,this._outsidePointerEvents=new Vn.B,this._renders=new Vn.B,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy,this._afterRenderRef=(0,p.O8t)(()=>(0,p.Tzd)(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),(0,p.mal)(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=Zi(this._config.width),e.height=Zi(this._config.height),e.minWidth=Zi(this._config.minWidth),e.minHeight=Zi(this._config.minHeight),e.maxWidth=Zi(this._config.maxWidth),e.maxHeight=Zi(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const s=DR(t||[]).filter(u=>!!u);s.length&&(r?e.classList.add(...s):e.classList.remove(...s))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const e=this._renders.pipe(ve((0,Ib.h)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const DB="cdk-overlay-connected-position-bounding-box",y4=/([A-Za-z%]+)$/;class b4{get positions(){return this._preferredPositions}constructor(e,t,r,s,u){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=u,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Vn.B,this._resizeSubscription=Ni.yU.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(DB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,s=this._containerRect,u=[];let d;for(let f of this._preferredPositions){let g=this._getOriginPoint(e,s,f),D=this._getOverlayPoint(g,t,f),S=this._getOverlayFit(D,t,r,f);if(S.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(f,g);this._canFitWithFlexibleDimensions(S,D,r)?u.push({position:f,origin:g,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(g,f)}):(!d||d.overlayFit.visibleArea<S.visibleArea)&&(d={overlayFit:S,overlayPoint:D,originPoint:g,position:f,overlayRect:t})}if(u.length){let f=null,g=-1;for(const D of u){const S=D.boundingBoxRect.width*D.boundingBoxRect.height*(D.position.weight||1);S>g&&(g=S,f=D)}return this._isPushed=!1,void this._applyPosition(f.position,f.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ng(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(DB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let s,u;if("center"==r.originX)s=e.left+e.width/2;else{const d=this._isRtl()?e.right:e.left,f=this._isRtl()?e.left:e.right;s="start"==r.originX?d:f}return t.left<0&&(s-=t.left),u="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(u-=t.top),{x:s,y:u}}_getOverlayPoint(e,t,r){let s,u;return s="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,u="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+s,y:e.y+u}}_getOverlayFit(e,t,r,s){const u=TB(t);let{x:d,y:f}=e,g=this._getOffset(s,"x"),D=this._getOffset(s,"y");g&&(d+=g),D&&(f+=D);let j=0-f,Q=f+u.height-r.height,ye=this._subtractOverflows(u.width,0-d,d+u.width-r.width),Ee=this._subtractOverflows(u.height,j,Q),we=ye*Ee;return{visibleArea:we,isCompletelyWithinViewport:u.width*u.height===we,fitsInViewportVertically:Ee===u.height,fitsInViewportHorizontally:ye==u.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const s=r.bottom-t.y,u=r.right-t.x,d=CB(this._overlayRef.getConfig().minHeight),f=CB(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=d&&d<=s)&&(e.fitsInViewportHorizontally||null!=f&&f<=u)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const s=TB(t),u=this._viewportRect,d=Math.max(e.x+s.width-u.width,0),f=Math.max(e.y+s.height-u.height,0),g=Math.max(u.top-r.top-e.y,0),D=Math.max(u.left-r.left-e.x,0);let S=0,P=0;return S=s.width<=u.width?D||-d:e.x<this._viewportMargin?u.left-r.left-e.x:0,P=s.height<=u.height?g||-f:e.y<this._viewportMargin?u.top-r.top-e.y:0,this._previousPushAmount={x:S,y:P},{x:e.x+S,y:e.y+P}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function E4(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,r)){const s=new m4(e,r);this._positionChanges.next(s)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,s=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let u=0;u<t.length;u++)t[u].style.transformOrigin=`${r} ${s}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,s=this._isRtl();let u,d,f,S,P,j;if("top"===t.overlayY)d=e.y,u=r.height-d+this._viewportMargin;else if("bottom"===t.overlayY)f=r.height-e.y+2*this._viewportMargin,u=r.height-f+this._viewportMargin;else{const Q=Math.min(r.bottom-e.y+r.top,e.y),ye=this._lastBoundingBoxSize.height;u=2*Q,d=e.y-Q,u>ye&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.y-ye/2)}if("end"===t.overlayX&&!s||"start"===t.overlayX&&s)j=r.width-e.x+2*this._viewportMargin,S=e.x-this._viewportMargin;else if("start"===t.overlayX&&!s||"end"===t.overlayX&&s)P=e.x,S=r.right-e.x;else{const Q=Math.min(r.right-e.x+r.left,e.x),ye=this._lastBoundingBoxSize.width;S=2*Q,P=e.x-Q,S>ye&&!this._isInitialRender&&!this._growAfterOpen&&(P=e.x-ye/2)}return{top:d,left:P,bottom:f,right:j,width:S,height:u}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const u=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;s.height=Zi(r.height),s.top=Zi(r.top),s.bottom=Zi(r.bottom),s.width=Zi(r.width),s.left=Zi(r.left),s.right=Zi(r.right),s.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",s.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",u&&(s.maxHeight=Zi(u)),d&&(s.maxWidth=Zi(d))}this._lastBoundingBoxSize=r,Ng(this._boundingBox.style,s)}_resetBoundingBoxStyles(){Ng(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ng(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},s=this._hasExactPosition(),u=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(s){const S=this._viewportRuler.getViewportScrollPosition();Ng(r,this._getExactOverlayY(t,e,S)),Ng(r,this._getExactOverlayX(t,e,S))}else r.position="static";let f="",g=this._getOffset(t,"x"),D=this._getOffset(t,"y");g&&(f+=`translateX(${g}px) `),D&&(f+=`translateY(${D}px)`),r.transform=f.trim(),d.maxHeight&&(s?r.maxHeight=Zi(d.maxHeight):u&&(r.maxHeight="")),d.maxWidth&&(s?r.maxWidth=Zi(d.maxWidth):u&&(r.maxWidth="")),Ng(this._pane.style,r)}_getExactOverlayY(e,t,r){let s={top:"",bottom:""},u=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r)),"bottom"===e.overlayY?s.bottom=this._document.documentElement.clientHeight-(u.y+this._overlayRect.height)+"px":s.top=Zi(u.y),s}_getExactOverlayX(e,t,r){let d,s={left:"",right:""},u=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r)),d=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===d?s.right=this._document.documentElement.clientWidth-(u.x+this._overlayRect.width)+"px":s.left=Zi(u.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:yB(e,r),isOriginOutsideView:N1(e,r),isOverlayClipped:yB(t,r),isOverlayOutsideView:N1(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,s)=>r-Math.max(s,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&DR(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof p.aKT)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function Ng(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function CB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(y4);return t&&"px"!==t?null:parseFloat(e)}return n||null}function TB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const SB="cdk-global-overlay-wrapper";class w4{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(SB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:s,height:u,maxWidth:d,maxHeight:f}=r,g=!("100%"!==s&&"100vw"!==s||d&&"100%"!==d&&"100vw"!==d),D=!("100%"!==u&&"100vh"!==u||f&&"100%"!==f&&"100vh"!==f),S=this._xPosition,P=this._xOffset,j="rtl"===this._overlayRef.getConfig().direction;let Q="",ye="",Ee="";g?Ee="flex-start":"center"===S?(Ee="center",j?ye=P:Q=P):j?"left"===S||"end"===S?(Ee="flex-end",Q=P):("right"===S||"start"===S)&&(Ee="flex-start",ye=P):"left"===S||"start"===S?(Ee="flex-start",Q=P):("right"===S||"end"===S)&&(Ee="flex-end",ye=P),e.position=this._cssPosition,e.marginLeft=g?"0":Q,e.marginTop=D?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=g?"0":ye,t.justifyContent=Ee,t.alignItems=D?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(SB),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let I4=(()=>{class n{constructor(t,r,s,u){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=u}global(){return new w4}flexibleConnectedTo(t){return new b4(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(mB),p.KVO(de),p.KVO(ha),p.KVO(IB))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),D4=0,Db=(()=>{class n{constructor(t,r,s,u,d,f,g,D,S,P,j,Q){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=u,this._keyboardDispatcher=d,this._injector=f,this._ngZone=g,this._document=D,this._directionality=S,this._location=P,this._outsideClickDispatcher=j,this._animationsModuleType=Q}create(t){const r=this._createHostElement(),s=this._createPaneElement(r),u=this._createPortalOutlet(s),d=new bB(t);return d.direction=d.direction||this._directionality.value,new _4(u,r,s,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(p.uvJ))}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+D4++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(p.o8S)),new n4(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(p.KVO(p4),p.KVO(IB),p.KVO(p.OM3),p.KVO(I4),p.KVO(g4),p.KVO(p.zZn),p.KVO(p.SKi),p.KVO(de),p.KVO(v2),p.KVO(pe),p.KVO(v4),p.KVO(p.bc$,8))};static#t=this.\u0275prov=p.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const S4={provide:new p.nKC("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=(0,p.WQX)(Db);return()=>n.scrollStrategies.reposition()}}),deps:[Db],useFactory:function T4(n){return()=>n.scrollStrategies.reposition()}};let A4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({providers:[Db,S4],imports:[QI,r4,gB,gB]})}return n})();const x4=["mat-menu-item",""],R4=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],M4=["mat-icon, [matMenuItemIcon]","*"];function O4(n,e){1&n&&(p.qSk(),p.j41(0,"svg",2),p.nrm(1,"polygon",3),p.k0s())}const P4=["*"];function N4(n,e){if(1&n){const t=p.RV6();p.j41(0,"div",0),p.bIt("keydown",function(s){p.eBV(t);const u=p.XpG();return p.Njj(u._handleKeydown(s))})("click",function(){p.eBV(t);const s=p.XpG();return p.Njj(s.closed.emit("click"))})("@transformMenu.start",function(s){p.eBV(t);const u=p.XpG();return p.Njj(u._onAnimationStart(s))})("@transformMenu.done",function(s){p.eBV(t);const u=p.XpG();return p.Njj(u._onAnimationDone(s))}),p.j41(1,"div",1),p.SdG(2),p.k0s()()}if(2&n){const t=p.XpG();p.HbH(t._classList),p.Y8G("id",t.panelId)("@transformMenu",t._panelAnimationState),p.BMQ("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const k1=new p.nKC("MAT_MENU_PANEL");let VR=(()=>{class n{constructor(t,r,s,u,d){this._elementRef=t,this._document=r,this._focusMonitor=s,this._parentMenu=u,this._changeDetectorRef=d,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new Vn.B,this._focused=new Vn.B,this._highlighted=!1,this._triggersSubmenu=!1,u?.addItem?.(this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),r=t.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<r.length;s++)r[s].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(p.aKT),p.rXU(de),p.rXU(g1),p.rXU(k1,8),p.rXU(p.gRc))};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(r,s){1&r&&p.bIt("click",function(d){return s._checkDisabled(d)})("mouseenter",function(){return s._handleMouseEnter()}),2&r&&(p.BMQ("role",s.role)("tabindex",s._getTabIndex())("aria-disabled",s.disabled)("disabled",s.disabled||null),p.AVh("mat-mdc-menu-item-highlighted",s._highlighted)("mat-mdc-menu-item-submenu-trigger",s._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",p.L39],disableRipple:[2,"disableRipple","disableRipple",p.L39]},exportAs:["matMenuItem"],standalone:!0,features:[p.GFd,p.aNF],attrs:x4,ngContentSelectors:M4,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,s){1&r&&(p.NAR(R4),p.SdG(0),p.j41(1,"span",0),p.SdG(2,1),p.k0s(),p.nrm(3,"div",1),p.DNE(4,O4,2,0,":svg:svg",2)),2&r&&(p.R7$(3),p.Y8G("matRippleDisabled",s.disableRipple||s.disabled)("matRippleTrigger",s._getHostElement()),p.R7$(),p.vxM(s._triggersSubmenu?4:-1))},dependencies:[T2],encapsulation:2,changeDetection:0})}return n})();const k4=new p.nKC("MatMenuContent"),BR={transformMenu:(0,Vs.hZ)("transformMenu",[(0,Vs.wk)("void",(0,Vs.iF)({opacity:0,transform:"scale(0.8)"})),(0,Vs.kY)("void => enter",(0,Vs.i0)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Vs.iF)({opacity:1,transform:"scale(1)"}))),(0,Vs.kY)("* => void",(0,Vs.i0)("100ms 25ms linear",(0,Vs.iF)({opacity:0})))]),fadeInItems:(0,Vs.hZ)("fadeInItems",[(0,Vs.wk)("showing",(0,Vs.iF)({opacity:1})),(0,Vs.kY)("void => *",[(0,Vs.iF)({opacity:0}),(0,Vs.i0)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let F4=0;const L4=new p.nKC("mat-menu-default-options",{providedIn:"root",factory:function V4(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let rD=(()=>{class n{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}set panelClass(t){const r=this._previousPanelClass,s={...this._classList};r&&r.length&&r.split(" ").forEach(u=>{s[u]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(u=>{s[u]=!0}),this._elementRef.nativeElement.className=""),this._classList=s}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,r,s,u){this._elementRef=t,this._changeDetectorRef=u,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new p.rOR,this._classList={},this._panelAnimationState="void",this._animationDone=new Vn.B,this.closed=new p.bkB,this.close=this.closed,this.panelId="mat-menu-panel-"+F4++,this._injector=(0,p.WQX)(p.zZn),this.overlayPanelClass=s.overlayPanelClass||"",this._xPosition=s.xPosition,this._yPosition=s.yPosition,this.backdropClass=s.backdropClass,this.overlapTrigger=s.overlapTrigger,this.hasBackdrop=s.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new AU(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,El.Z)(this._directDescendantItems),Wi(t=>(0,Ib.h)(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const r=this._keyManager;if("enter"===this._panelAnimationState&&r.activeItem?._hasFocus()){const s=t.toArray(),u=Math.max(0,Math.min(s.length-1,r.activeItemIndex||0));s[u]&&!s[u].disabled?r.setActiveItem(u):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe((0,El.Z)(this._directDescendantItems),Wi(r=>(0,Ib.h)(...r.map(s=>s._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,s=this._keyManager;switch(r){case 27:s2(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&s.setFocusOrigin("keyboard"),void s.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=(0,p.mal)(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const s=this._keyManager;s.setFocusOrigin(t).setFirstItemActive(),!s.activeItem&&r&&r.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){if(null===this._baseElevation){const f=("function"==typeof getComputedStyle?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(f)}const r=Math.min(this._baseElevation+t,24),s=`${this._elevationPrefix}${r}`,u=Object.keys(this._classList).find(d=>d.startsWith(this._elevationPrefix));if(!u||u===this._previousElevation){const d={...this._classList};this._previousElevation&&(d[this._previousElevation]=!1),d[s]=!0,this._previousElevation=s,this._classList=d}}setPositionClasses(t=this.xPosition,r=this.yPosition){this._classList={...this._classList,"mat-menu-before":"before"===t,"mat-menu-after":"after"===t,"mat-menu-above":"above"===r,"mat-menu-below":"below"===r},this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,El.Z)(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(p.aKT),p.rXU(p.SKi),p.rXU(L4),p.rXU(p.gRc))};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["mat-menu"]],contentQueries:function(r,s,u){if(1&r&&(p.wni(u,k4,5),p.wni(u,VR,5),p.wni(u,VR,4)),2&r){let d;p.mGM(d=p.lsd())&&(s.lazyContent=d.first),p.mGM(d=p.lsd())&&(s._allItems=d),p.mGM(d=p.lsd())&&(s.items=d)}},viewQuery:function(r,s){if(1&r&&p.GBs(p.C4Q,5),2&r){let u;p.mGM(u=p.lsd())&&(s.templateRef=u.first)}},hostVars:3,hostBindings:function(r,s){2&r&&p.BMQ("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",p.L39],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>null==t?null:(0,p.L39)(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[p.Jv_([{provide:k1,useExisting:n}]),p.GFd,p.aNF],ngContentSelectors:P4,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(r,s){1&r&&(p.NAR(),p.DNE(0,N4,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font);line-height:var(--mat-menu-item-label-text-line-height);font-size:var(--mat-menu-item-label-text-size);letter-spacing:var(--mat-menu-item-label-text-tracking);font-weight:var(--mat-menu-item-label-text-weight)}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape);background-color:var(--mat-menu-container-color);will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color);margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color)}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color)}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[BR.transformMenu,BR.fadeInItems]},changeDetection:0})}return n})();const AB=new p.nKC("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{const n=(0,p.WQX)(Db);return()=>n.scrollStrategies.reposition()}}),j4={provide:AB,deps:[Db],useFactory:function B4(n){return()=>n.scrollStrategies.reposition()}},xB=xf({passive:!0});let U4=(()=>{class n{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,r,s,u,d,f,g,D,S){this._overlay=t,this._element=r,this._viewContainerRef=s,this._menuItemInstance=f,this._dir=g,this._focusMonitor=D,this._ngZone=S,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Ni.yU.EMPTY,this._hoverSubscription=Ni.yU.EMPTY,this._menuCloseSubscription=Ni.yU.EMPTY,this._changeDetectorRef=(0,p.WQX)(p.gRc),this._handleTouchStart=P=>{m1(P)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new p.bkB,this.onMenuOpen=this.menuOpened,this.menuClosed=new p.bkB,this.onMenuClose=this.menuClosed,this._scrollStrategy=u,this._parentMaterialMenu=d instanceof rD?d:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,xB)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,xB),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const r=this._createOverlay(t),s=r.getConfig(),u=s.positionStrategy;this._setPosition(t,u),s.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,r.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof rD&&(t._startAnimation(),t._directDescendantItems.changes.pipe(ve(t.close)).subscribe(()=>{u.withLockedPosition(!1).reapplyLastPosition(),u.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof rD?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe((0,Er.p)(s=>"void"===s.toState),Xr(1),ve(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let r=0,s=t.parentMenu;for(;s;)r++,s=s.parentMenu;t.setElevation(r)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const r=this._getOverlayConfig(t);this._subscribeToPositions(t,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new bB({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,r){t.setPositionClasses&&r.positionChanges.subscribe(s=>{const u="start"===s.connectionPair.overlayX?"after":"before",d="top"===s.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(u,d)):t.setPositionClasses(u,d)})}_setPosition(t,r){let[s,u]="before"===t.xPosition?["end","start"]:["start","end"],[d,f]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[g,D]=[d,f],[S,P]=[s,u],j=0;if(this.triggersSubmenu()){if(P=s="before"===t.xPosition?"start":"end",u=S="end"===s?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const Q=this._parentMaterialMenu.items.first;this._parentInnerPadding=Q?Q._getHostElement().offsetTop:0}j="bottom"===d?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(g="top"===d?"bottom":"top",D="top"===f?"bottom":"top");r.withPositions([{originX:s,originY:g,overlayX:S,overlayY:d,offsetY:j},{originX:u,originY:g,overlayX:P,overlayY:d,offsetY:j},{originX:s,originY:D,overlayX:S,overlayY:f,offsetY:-j},{originX:u,originY:D,overlayX:P,overlayY:f,offsetY:-j}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments(),s=this._parentMaterialMenu?this._parentMaterialMenu.closed:cn(),u=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,Er.p)(d=>d!==this._menuItemInstance),(0,Er.p)(()=>this._menuOpen)):cn();return(0,Ib.h)(t,s,u,r)}_handleMousedown(t){p1(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,Er.p)(t=>t===this._menuItemInstance&&!t.disabled),b1(0,M1)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof rD&&this.menu._isAnimating?this.menu._animationDone.pipe(Xr(1),b1(0,M1),ve(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new fB(t.templateRef,this._viewContainerRef)),this._portal}static#e=this.\u0275fac=function(r){return new(r||n)(p.rXU(Db),p.rXU(p.aKT),p.rXU(p.c1b),p.rXU(AB),p.rXU(k1,8),p.rXU(VR,10),p.rXU(v2,8),p.rXU(g1),p.rXU(p.SKi))};static#t=this.\u0275dir=p.FsC({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(r,s){1&r&&p.bIt("click",function(d){return s._handleClick(d)})("mousedown",function(d){return s._handleMousedown(d)})("keydown",function(d){return s._handleKeydown(d)}),2&r&&p.BMQ("aria-haspopup",s.menu?"menu":null)("aria-expanded",s.menuOpen)("aria-controls",s.menuOpen?s.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}return n})(),$4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n});static#n=this.\u0275inj=p.G2t({providers:[j4],imports:[kc,S2,Ac,A4,P1,Ac]})}return n})(),RB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["main-bar"]],standalone:!0,features:[p.aNF],decls:17,vars:1,consts:[["menu","matMenu"],[1,"spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item",""],["routerLink","/game"],["data-test-id","game-entry"],["routerLink","/editor"],["data-test-id","editor-entry"]],template:function(r,s){if(1&r&&(p.j41(0,"mat-toolbar")(1,"span"),p.EFF(2,"Empathy"),p.k0s(),p.nrm(3,"span",1),p.j41(4,"button",2)(5,"mat-icon"),p.EFF(6,"menu"),p.k0s()(),p.j41(7,"mat-menu",null,0)(9,"button",3)(10,"a",4)(11,"span",5),p.EFF(12,"Game"),p.k0s()()(),p.j41(13,"button",3)(14,"a",6)(15,"span",7),p.EFF(16,"Editor"),p.k0s()()()()()),2&r){const u=p.sdS(8);p.R7$(4),p.Y8G("matMenuTriggerFor",u)}},dependencies:[Ip,K$,z$,LH,FH,WH,KH,$4,rD,VR,U4],styles:[".spacer[_ngcontent-%COMP%]{flex:1 1 auto}.mat-toolbar[_ngcontent-%COMP%]{background:var(--sys-background)}"]})}return n})(),H4=(()=>{class n{constructor(){this.title="Empathy"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=p.VBU({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"container"]],template:function(r,s){1&r&&(p.nrm(0,"main-bar"),p.j41(1,"div",0),p.nrm(2,"router-outlet"),p.k0s())},dependencies:[dp,RB],styles:[".container[_ngcontent-%COMP%] {margin:auto;width:85%}"]})}return n})(),z4=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=p.$C({type:n,bootstrap:[H4]});static#n=this.\u0275inj=p.G2t({providers:[B$()],imports:[ED,g$,k$.register("ngsw-worker.js",{enabled:!(0,p.naY)(),registrationStrategy:"registerWhenStable:3000"}),RB]})}return n})();zb().bootstrapModule(z4).catch(n=>console.error(n))},5505:function(Bt){Bt.exports=function(){"use strict";var nt=function(_,I){return(nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,N){A.__proto__=N}||function(A,N){for(var L in N)Object.prototype.hasOwnProperty.call(N,L)&&(A[L]=N[L])})(_,I)},M=function(){return(M=Object.assign||function(_){for(var I,A=1,N=arguments.length;A<N;A++)for(var L in I=arguments[A])Object.prototype.hasOwnProperty.call(I,L)&&(_[L]=I[L]);return _}).apply(this,arguments)};function p(_,I,A){if(A||2===arguments.length)for(var N,L=0,$=I.length;L<$;L++)!N&&L in I||((N=N||Array.prototype.slice.call(I,0,L))[L]=I[L]);return _.concat(N||Array.prototype.slice.call(I))}var ie=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fe=Object.keys,se=Array.isArray;function te(_,I){return"object"!=typeof I||fe(I).forEach(function(A){_[A]=I[A]}),_}typeof Promise>"u"||ie.Promise||(ie.Promise=Promise);var ae=Object.getPrototypeOf,de={}.hasOwnProperty;function lt(_,I){return de.call(_,I)}function qe(_,I){"function"==typeof I&&(I=I(ae(_))),(typeof Reflect>"u"?fe:Reflect.ownKeys)(I).forEach(function(A){he(_,A,I[A])})}var $e=Object.defineProperty;function he(_,I,A,N){$e(_,I,te(A&&lt(A,"get")&&"function"==typeof A.get?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},N))}function Ve(_){return{from:function(I){return _.prototype=Object.create(I.prototype),he(_.prototype,"constructor",_),{extend:qe.bind(null,_.prototype)}}}}var Me=Object.getOwnPropertyDescriptor,ee=[].slice;function Ue(_,I,A){return ee.call(_,I,A)}function Ae(_,I){return I(_)}function Oe(_){if(!_)throw new Error("Assertion Failed")}function pe(_){ie.setImmediate?setImmediate(_):setTimeout(_,0)}function Be(_,I){if("string"==typeof I&&lt(_,I))return _[I];if(!I)return _;if("string"!=typeof I){for(var A=[],N=0,L=I.length;N<L;++N){var $=Be(_,I[N]);A.push($)}return A}var J=I.indexOf(".");if(-1!==J){var ge=_[I.substr(0,J)];return null==ge?void 0:Be(ge,I.substr(J+1))}}function dt(_,I,A){if(_&&void 0!==I&&(!("isFrozen"in Object)||!Object.isFrozen(_)))if("string"!=typeof I&&"length"in I){Oe("string"!=typeof A&&"length"in A);for(var N=0,L=I.length;N<L;++N)dt(_,I[N],A[N])}else{var $,J,ge=I.indexOf(".");-1!==ge?($=I.substr(0,ge),""===(J=I.substr(ge+1))?void 0===A?se(_)&&!isNaN(parseInt($))?_.splice($,1):delete _[$]:_[$]=A:dt(ge=(ge=_[$])&&lt(_,$)?ge:_[$]={},J,A)):void 0===A?se(_)&&!isNaN(parseInt(I))?_.splice(I,1):delete _[I]:_[I]=A}}function Te(_){var I,A={};for(I in _)lt(_,I)&&(A[I]=_[I]);return A}var He=[].concat;function Ie(_){return He.apply([],_)}var ko="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Ie([8,16,32,64].map(function(_){return["Int","Uint","Float"].map(function(I){return I+_+"Array"})}))).filter(function(_){return ie[_]}),ct=new Set(ko.map(function(_){return ie[_]})),st=null;function ce(_){return st=new WeakMap,_=function I(A){if(!A||"object"!=typeof A)return A;var N=st.get(A);if(N)return N;if(se(A)){st.set(A,N=[]);for(var L=0,$=A.length;L<$;++L)N.push(I(A[L]))}else if(ct.has(A.constructor))N=A;else{var J,ge=ae(A);for(J in N=ge===Object.prototype?{}:Object.create(ge),st.set(A,N),A)lt(A,J)&&(N[J]=I(A[J]))}return N}(_),st=null,_}var ne={}.toString;function W(_){return ne.call(_).slice(8,-1)}var ft=typeof Symbol<"u"?Symbol.iterator:"@@iterator",At="symbol"==typeof ft?function(_){var I;return null!=_&&(I=_[ft])&&I.apply(_)}:function(){return null};function Rt(_,I){return 0<=(I=_.indexOf(I))&&_.splice(I,1),0<=I}var yn={};function rn(_){var I,A,N,L;if(1===arguments.length){if(se(_))return _.slice();if(this===yn&&"string"==typeof _)return[_];if(L=At(_)){for(A=[];!(N=L.next()).done;)A.push(N.value);return A}if(null==_)return[_];if("number"!=typeof(I=_.length))return[_];for(A=new Array(I);I--;)A[I]=_[I];return A}for(I=arguments.length,A=new Array(I);I--;)A[I]=arguments[I];return A}var pn=typeof Symbol<"u"?function(_){return"AsyncFunction"===_[Symbol.toStringTag]}:function(){return!1},ro=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(wn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),Un={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ge(_,I){this.name=_,this.message=I}function me(_,I){return _+". Errors: "+Object.keys(I).map(function(A){return I[A].toString()}).filter(function(A,N,L){return L.indexOf(A)===N}).join("\n")}function be(_,I,A,N){this.failures=I,this.failedKeys=N,this.successCount=A,this.message=me(_,I)}function K(_,I){this.name="BulkError",this.failures=Object.keys(I).map(function(A){return I[A]}),this.failuresByPos=I,this.message=me(_,this.failures)}Ve(Ge).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Ve(be).from(Ge),Ve(K).from(Ge);var H=ro.reduce(function(_,I){return _[I]=I+"Error",_},{}),V=Ge,q=ro.reduce(function(_,I){var A=I+"Error";function N(L,$){this.name=A,L?"string"==typeof L?(this.message="".concat(L).concat($?"\n "+$:""),this.inner=$||null):"object"==typeof L&&(this.message="".concat(L.name," ").concat(L.message),this.inner=L):(this.message=Un[I]||A,this.inner=null)}return Ve(N).from(V),_[I]=N,_},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var X=wn.reduce(function(_,I){return _[I+"Error"]=q[I],_},{}),re=ro.reduce(function(_,I){return-1===["Syntax","Type","Range"].indexOf(I)&&(_[I+"Error"]=q[I]),_},{});function oe(){}function Je(_){return _}function Ct(_,I){return null==_||_===Je?I:function(A){return I(_(A))}}function Ft(_,I){return function(){_.apply(this,arguments),I.apply(this,arguments)}}function Mt(_,I){return _===oe?I:function(){var A=_.apply(this,arguments);void 0!==A&&(arguments[0]=A);var N=this.onsuccess,L=this.onerror;this.onsuccess=null,this.onerror=null;var $=I.apply(this,arguments);return N&&(this.onsuccess=this.onsuccess?Ft(N,this.onsuccess):N),L&&(this.onerror=this.onerror?Ft(L,this.onerror):L),void 0!==$?$:A}}function jt(_,I){return _===oe?I:function(){_.apply(this,arguments);var A=this.onsuccess,N=this.onerror;this.onsuccess=this.onerror=null,I.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?Ft(A,this.onsuccess):A),N&&(this.onerror=this.onerror?Ft(N,this.onerror):N)}}function on(_,I){return _===oe?I:function(A){var N=_.apply(this,arguments);te(A,N);var L=this.onsuccess,$=this.onerror;return this.onsuccess=null,this.onerror=null,A=I.apply(this,arguments),L&&(this.onsuccess=this.onsuccess?Ft(L,this.onsuccess):L),$&&(this.onerror=this.onerror?Ft($,this.onerror):$),void 0===N?void 0===A?void 0:A:te(N,A)}}function en(_,I){return _===oe?I:function(){return!1!==I.apply(this,arguments)&&_.apply(this,arguments)}}function ln(_,I){return _===oe?I:function(){var A=_.apply(this,arguments);if(A&&"function"==typeof A.then){for(var N=this,L=arguments.length,$=new Array(L);L--;)$[L]=arguments[L];return A.then(function(){return I.apply(N,$)})}return I.apply(this,arguments)}}re.ModifyError=be,re.DexieError=Ge,re.BulkError=K;var $t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function hn(_){$t=_}var wn,tn={},Wn=100,Ui=(ro=(ro=(ko=typeof Promise>"u"?[]:function(){var _=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[_,ae(_),_];var I=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[I,ae(I),_]}())[1])&&ro.then,(wn=ko[0])&&wn.constructor),Hr=!!(ko=ko[2]),_n=function(_,I){ir.push([_,I]),Nr&&(queueMicrotask(ei),Nr=!1)},St=!0,Nr=!0,Dr=[],Cr=[],mo=Je,pr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oe,pgp:!1,env:{},finalize:oe},Zt=pr,ir=[],go=0,Qn=[];function Pt(_){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var I=this._PSD=Zt;if("function"!=typeof _){if(_!==tn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&vo(this,this._value))}this._state=null,this._value=null,++I.ref,function A(N,L){try{L(function($){if(null===N._state){if($===N)throw new TypeError("A promise cannot be resolved with itself.");var J=N._lib&&pi();$&&"function"==typeof $.then?A(N,function(ge,ke){$ instanceof Pt?$._then(ge,ke):$.then(ge,ke)}):(N._state=!0,N._value=$,fa(N)),J&&Di()}},vo.bind(null,N))}catch($){vo(N,$)}}(this,_)}var $i={get:function(){var _=Zt,I=ws;function A(N,L){var $=this,J=!_.global&&(_!==Zt||I!==ws),ge=J&&!Ci(),ke=new Pt(function(Pe,tt){_o($,new $s(Mc(N,_,J,ge),Mc(L,_,J,ge),Pe,tt,_))});return this._consoleTask&&(ke._consoleTask=this._consoleTask),ke}return A.prototype=tn,A},set:function(_){he(this,"then",_&&_.prototype===tn?$i:{get:function(){return _},set:$i.set})}};function $s(_,I,A,N,L){this.onFulfilled="function"==typeof _?_:null,this.onRejected="function"==typeof I?I:null,this.resolve=A,this.reject=N,this.psd=L}function vo(_,I){var A,N;Cr.push(I),null===_._state&&(A=_._lib&&pi(),I=mo(I),_._state=!1,_._value=I,N=_,Dr.some(function(L){return L._value===N._value})||Dr.push(N),fa(_),A&&Di())}function fa(_){var I=_._listeners;_._listeners=[];for(var A=0,N=I.length;A<N;++A)_o(_,I[A]);var L=_._PSD;--L.ref||L.finalize(),0===go&&(++go,_n(function(){0==--go&&Hi()},[]))}function _o(_,I){if(null!==_._state){var A=_._state?I.onFulfilled:I.onRejected;if(null===A)return(_._state?I.resolve:I.reject)(_._value);++I.psd.ref,++go,_n(zr,[A,_,I])}else _._listeners.push(I)}function zr(_,I,A){try{var N,L=I._value;!I._state&&Cr.length&&(Cr=[]),N=$t&&I._consoleTask?I._consoleTask.run(function(){return _(L)}):_(L),I._state||-1!==Cr.indexOf(L)||function($){for(var J=Dr.length;J;)if(Dr[--J]._value===$._value)return Dr.splice(J,1)}(I),A.resolve(N)}catch($){A.reject($)}finally{0==--go&&Hi(),--A.psd.ref||A.psd.finalize()}}function ei(){ii(pr,function(){pi()&&Di()})}function pi(){var _=St;return Nr=St=!1,_}function Di(){var _,I,A;do{for(;0<ir.length;)for(_=ir,ir=[],A=_.length,I=0;I<A;++I){var N=_[I];N[0].apply(null,N[1])}}while(0<ir.length);Nr=St=!0}function Hi(){var _=Dr;Dr=[],_.forEach(function(N){N._PSD.onunhandled.call(null,N._value,N)});for(var I=Qn.slice(0),A=I.length;A;)I[--A]()}function pa(_){return new Pt(tn,!1,_)}function gn(_,I){var A=Zt;return function(){var N=pi(),L=Zt;try{return es(A,!0),_.apply(this,arguments)}catch($){I&&I($)}finally{es(L,!1),N&&Di()}}}qe(Pt.prototype,{then:$i,_then:function(_,I){_o(this,new $s(null,null,_,I,Zt))},catch:function(_){if(1===arguments.length)return this.then(null,_);var I=_,A=arguments[1];return this.then(null,"function"==typeof I?function(N){return(N instanceof I?A:pa)(N)}:function(N){return(N&&N.name===I?A:pa)(N)})},finally:function(_){return this.then(function(I){return Pt.resolve(_()).then(function(){return I})},function(I){return Pt.resolve(_()).then(function(){return pa(I)})})},timeout:function(_,I){var A=this;return _<1/0?new Pt(function(N,L){var $=setTimeout(function(){return L(new q.Timeout(I))},_);A.then(N,L).finally(clearTimeout.bind(null,$))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&he(Pt.prototype,Symbol.toStringTag,"Dexie.Promise"),pr.env=Ts(),qe(Pt,{all:function(){var _=rn.apply(null,arguments).map(Cs);return new Pt(function(I,A){0===_.length&&I([]);var N=_.length;_.forEach(function(L,$){return Pt.resolve(L).then(function(J){_[$]=J,--N||I(_)},A)})})},resolve:function(_){return _ instanceof Pt?_:_&&"function"==typeof _.then?new Pt(function(I,A){_.then(I,A)}):new Pt(tn,!0,_)},reject:pa,race:function(){var _=rn.apply(null,arguments).map(Cs);return new Pt(function(I,A){_.map(function(N){return Pt.resolve(N).then(I,A)})})},PSD:{get:function(){return Zt},set:function(_){return Zt=_}},totalEchoes:{get:function(){return ws}},newPSD:gr,usePSD:ii,scheduler:{get:function(){return _n},set:function(_){_n=_}},rejectionMapper:{get:function(){return mo},set:function(_){mo=_}},follow:function(_,I){return new Pt(function(A,N){return gr(function(L,$){var J=Zt;J.unhandleds=[],J.onunhandled=$,J.finalize=Ft(function(){var ge,ke=this;ge=function(){0===ke.unhandleds.length?L():$(ke.unhandleds[0])},Qn.push(function Pe(){ge(),Qn.splice(Qn.indexOf(Pe),1)}),++go,_n(function(){0==--go&&Hi()},[])},J.finalize),_()},I,A,N)})}}),Ui&&(Ui.allSettled&&he(Pt,"allSettled",function(){var _=rn.apply(null,arguments).map(Cs);return new Pt(function(I){0===_.length&&I([]);var A=_.length,N=new Array(A);_.forEach(function(L,$){return Pt.resolve(L).then(function(J){return N[$]={status:"fulfilled",value:J}},function(J){return N[$]={status:"rejected",reason:J}}).then(function(){return--A||I(N)})})})}),Ui.any&&typeof AggregateError<"u"&&he(Pt,"any",function(){var _=rn.apply(null,arguments).map(Cs);return new Pt(function(I,A){0===_.length&&A(new AggregateError([]));var N=_.length,L=new Array(N);_.forEach(function($,J){return Pt.resolve($).then(function(ge){return I(ge)},function(ge){L[J]=ge,--N||A(new AggregateError(L))})})})}));var mr={awaits:0,echoes:0,id:0},Jo=0,Hs=[],yo=0,ws=0,Is=0;function gr(_,I,A,N){var L=Zt,$=Object.create(L);return $.parent=L,$.ref=0,$.global=!1,$.id=++Is,$.env=Hr?{Promise:Pt,PromiseProp:{value:Pt,configurable:!0,writable:!0},all:Pt.all,race:Pt.race,allSettled:Pt.allSettled,any:Pt.any,resolve:Pt.resolve,reject:Pt.reject}:{},I&&te($,I),++L.ref,$.finalize=function(){--this.parent.ref||this.parent.finalize()},N=ii($,_,A,N),0===$.ref&&$.finalize(),N}function Ds(){return mr.id||(mr.id=++Jo),++mr.awaits,mr.echoes+=Wn,mr.id}function Ci(){return!!mr.awaits&&(0==--mr.awaits&&(mr.id=0),mr.echoes=mr.awaits*Wn,!0)}function Cs(_){return mr.echoes&&_&&_.constructor===Ui?(Ds(),_.then(function(I){return Ci(),I},function(I){return Ci(),yr(I)})):_}function Rc(){var _=Hs[Hs.length-1];Hs.pop(),es(_,!1)}function es(_,I){var A,N=Zt;(I?!mr.echoes||yo++&&_===Zt:!yo||--yo&&_===Zt)||queueMicrotask(I?function(L){++ws,mr.echoes&&0!=--mr.echoes||(mr.echoes=mr.awaits=mr.id=0),Hs.push(Zt),es(L,!0)}.bind(null,_):Rc),_!==Zt&&(Zt=_,N===pr&&(pr.env=Ts()),Hr&&(A=pr.env.Promise,I=_.env,(N.global||_.global)&&(Object.defineProperty(ie,"Promise",I.PromiseProp),A.all=I.all,A.race=I.race,A.resolve=I.resolve,A.reject=I.reject,I.allSettled&&(A.allSettled=I.allSettled),I.any&&(A.any=I.any))))}function Ts(){var _=ie.Promise;return Hr?{Promise:_,PromiseProp:Object.getOwnPropertyDescriptor(ie,"Promise"),all:_.all,race:_.race,allSettled:_.allSettled,any:_.any,resolve:_.resolve,reject:_.reject}:{}}function ii(_,I,A,N,L){var $=Zt;try{return es(_,!0),I(A,N,L)}finally{es($,!1)}}function Mc(_,I,A,N){return"function"!=typeof _?_:function(){var L=Zt;A&&Ds(),es(I,!0);try{return _.apply(this,arguments)}finally{es(L,!1),N&&queueMicrotask(Ci)}}}function Ss(_){Promise===Ui&&0===mr.echoes?0===yo?_():enqueueNativeMicroTask(_):setTimeout(_,0)}-1===(""+ro).indexOf("[native code]")&&(Ds=Ci=oe);var yr=Pt.reject,Pi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ud="String expected.",zs=[],As="__dbnames",ma="readonly",ul="readwrite";function ga(_,I){return _?I?function(){return _.apply(this,arguments)&&I.apply(this,arguments)}:_:I}var Ff={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ks(_){return"string"!=typeof _||/\./.test(_)?function(I){return I}:function(I){return void 0===I[_]&&_ in I&&delete(I=ce(I))[_],I}}function ns(){throw q.Type()}function Kn(_,I){try{var A=Ka(_),N=Ka(I);if(A!==N)return"Array"===A?1:"Array"===N?-1:"binary"===A?1:"binary"===N?-1:"string"===A?1:"string"===N?-1:"Date"===A?1:"Date"!==N?NaN:-1;switch(A){case"number":case"Date":case"string":return I<_?1:_<I?-1:0;case"binary":return function(L,$){for(var J=L.length,ge=$.length,ke=J<ge?J:ge,Pe=0;Pe<ke;++Pe)if(L[Pe]!==$[Pe])return L[Pe]<$[Pe]?-1:1;return J===ge?0:J<ge?-1:1}(Oc(_),Oc(I));case"Array":return function(L,$){for(var J=L.length,ge=$.length,ke=J<ge?J:ge,Pe=0;Pe<ke;++Pe){var tt=Kn(L[Pe],$[Pe]);if(0!==tt)return tt}return J===ge?0:J<ge?-1:1}(_,I)}}catch{}return NaN}function Ka(_){var I=typeof _;return"object"!=I?I:ArrayBuffer.isView(_)||"ArrayBuffer"===(_=W(_))?"binary":_}function Oc(_){return _ instanceof Uint8Array?_:ArrayBuffer.isView(_)?new Uint8Array(_.buffer,_.byteOffset,_.byteLength):new Uint8Array(_)}var zi=(vr.prototype._trans=function(_,I,A){var N=this._tx||Zt.trans,L=this.name,$=$t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===_?"read":"write"," ").concat(this.name));function J(Pe,tt,Se){if(!Se.schema[L])throw new q.NotFound("Table "+L+" not part of transaction");return I(Se.idbtrans,Se)}var ge=pi();try{var ke=N&&N.db._novip===this.db._novip?N===Zt.trans?N._promise(_,J,A):gr(function(){return N._promise(_,J,A)},{trans:N,transless:Zt.transless||Zt}):function Pe(tt,Se,Qe,Ne){if(tt.idbdb&&(tt._state.openComplete||Zt.letThrough||tt._vip)){var Ke=tt._createTransaction(Se,Qe,tt._dbSchema);try{Ke.create(),tt._state.PR1398_maxLoop=3}catch(Xe){return Xe.name===H.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Pe(tt,Se,Qe,Ne)})):yr(Xe)}return Ke._promise(Se,function(Xe,je){return gr(function(){return Zt.trans=Ke,Ne(Xe,je,Ke)})}).then(function(Xe){if("readwrite"===Se)try{Ke.idbtrans.commit()}catch{}return"readonly"===Se?Xe:Ke._completion.then(function(){return Xe})})}if(tt._state.openComplete)return yr(new q.DatabaseClosed(tt._state.dbOpenError));if(!tt._state.isBeingOpened){if(!tt._state.autoOpen)return yr(new q.DatabaseClosed);tt.open().catch(oe)}return tt._state.dbReadyPromise.then(function(){return Pe(tt,Se,Qe,Ne)})}(this.db,_,[this.name],J);return $&&(ke._consoleTask=$,ke=ke.catch(function(Pe){return console.trace(Pe),yr(Pe)})),ke}finally{ge&&Di()}},vr.prototype.get=function(_,I){var A=this;return _&&_.constructor===Object?this.where(_).first(I):null==_?yr(new q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(N){return A.core.get({trans:N,key:_}).then(function(L){return A.hook.reading.fire(L)})}).then(I)},vr.prototype.where=function(_){if("string"==typeof _)return new this.db.WhereClause(this,_);if(se(_))return new this.db.WhereClause(this,"[".concat(_.join("+"),"]"));var I=fe(_);if(1===I.length)return this.where(I[0]).equals(_[I[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(ke){if(ke.compound&&I.every(function(tt){return 0<=ke.keyPath.indexOf(tt)})){for(var Pe=0;Pe<I.length;++Pe)if(-1===I.indexOf(ke.keyPath[Pe]))return!1;return!0}return!1}).sort(function(ke,Pe){return ke.keyPath.length-Pe.keyPath.length})[0];if(A&&"\uffff"!==this.db._maxKey){var J=A.keyPath.slice(0,I.length);return this.where(J).equals(J.map(function(Pe){return _[Pe]}))}!A&&$t&&console.warn("The query ".concat(JSON.stringify(_)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(I.join("+"),"]"));var N=this.schema.idxByName,L=this.db._deps.indexedDB;function $(ke,Pe){return 0===L.cmp(ke,Pe)}J=(ge=I.reduce(function(Qe,Pe){var tt=Qe[0],Se=Qe[1],Ne=(Qe=N[Pe],_[Pe]);return[tt||Qe,tt||!Qe?ga(Se,Qe&&Qe.multi?function(Ke){return Ke=Be(Ke,Pe),se(Ke)&&Ke.some(function(Xe){return $(Ne,Xe)})}:function(Ke){return $(Ne,Be(Ke,Pe))}):Se]},[null,null]))[0];var ge=ge[1];return J?this.where(J.name).equals(_[J.keyPath]).filter(ge):A?this.filter(ge):this.where(I).equals("")},vr.prototype.filter=function(_){return this.toCollection().and(_)},vr.prototype.count=function(_){return this.toCollection().count(_)},vr.prototype.offset=function(_){return this.toCollection().offset(_)},vr.prototype.limit=function(_){return this.toCollection().limit(_)},vr.prototype.each=function(_){return this.toCollection().each(_)},vr.prototype.toArray=function(_){return this.toCollection().toArray(_)},vr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},vr.prototype.orderBy=function(_){return new this.db.Collection(new this.db.WhereClause(this,se(_)?"[".concat(_.join("+"),"]"):_))},vr.prototype.reverse=function(){return this.toCollection().reverse()},vr.prototype.mapToClass=function(_){var I,A=this.db,N=this.name;function L(){return null!==I&&I.apply(this,arguments)||this}(this.schema.mappedClass=_).prototype instanceof ns&&(function(ke,Pe){if("function"!=typeof Pe&&null!==Pe)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function tt(){this.constructor=ke}nt(ke,Pe),ke.prototype=null===Pe?Object.create(Pe):(tt.prototype=Pe.prototype,new tt)}(L,I=_),Object.defineProperty(L.prototype,"db",{get:function(){return A},enumerable:!1,configurable:!0}),L.prototype.table=function(){return N},_=L);for(var $=new Set,J=_.prototype;J;J=ae(J))Object.getOwnPropertyNames(J).forEach(function(ke){return $.add(ke)});function ge(ke){if(!ke)return ke;var Pe,tt=Object.create(_.prototype);for(Pe in ke)if(!$.has(Pe))try{tt[Pe]=ke[Pe]}catch{}return tt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ge,this.hook("reading",ge),_},vr.prototype.defineClass=function(){return this.mapToClass(function(_){te(this,_)})},vr.prototype.add=function(_,I){var A=this,N=this.schema.primKey,$=N.keyPath,J=_;return $&&N.auto&&(J=Ks($)(_)),this._trans("readwrite",function(ge){return A.core.mutate({trans:ge,type:"add",keys:null!=I?[I]:null,values:[J]})}).then(function(ge){return ge.numFailures?Pt.reject(ge.failures[0]):ge.lastResult}).then(function(ge){if($)try{dt(_,$,ge)}catch{}return ge})},vr.prototype.update=function(_,I){return"object"!=typeof _||se(_)?this.where(":id").equals(_).modify(I):void 0===(_=Be(_,this.schema.primKey.keyPath))?yr(new q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(_).modify(I)},vr.prototype.put=function(_,I){var A=this,N=this.schema.primKey,$=N.keyPath,J=_;return $&&N.auto&&(J=Ks($)(_)),this._trans("readwrite",function(ge){return A.core.mutate({trans:ge,type:"put",values:[J],keys:null!=I?[I]:null})}).then(function(ge){return ge.numFailures?Pt.reject(ge.failures[0]):ge.lastResult}).then(function(ge){if($)try{dt(_,$,ge)}catch{}return ge})},vr.prototype.delete=function(_){var I=this;return this._trans("readwrite",function(A){return I.core.mutate({trans:A,type:"delete",keys:[_]})}).then(function(A){return A.numFailures?Pt.reject(A.failures[0]):void 0})},vr.prototype.clear=function(){var _=this;return this._trans("readwrite",function(I){return _.core.mutate({trans:I,type:"deleteRange",range:Ff})}).then(function(I){return I.numFailures?Pt.reject(I.failures[0]):void 0})},vr.prototype.bulkGet=function(_){var I=this;return this._trans("readonly",function(A){return I.core.getMany({keys:_,trans:A}).then(function(N){return N.map(function(L){return I.hook.reading.fire(L)})})})},vr.prototype.bulkAdd=function(_,I,A){var N=this,L=Array.isArray(I)?I:void 0,$=(A=A||(L?void 0:I))?A.allKeys:void 0;return this._trans("readwrite",function(J){var ge=(Pe=N.schema.primKey).auto;if((Pe=Pe.keyPath)&&L)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(L&&L.length!==_.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var ke=_.length,Pe=Pe&&ge?_.map(Ks(Pe)):_;return N.core.mutate({trans:J,type:"add",keys:L,values:Pe,wantResults:$}).then(function(Ke){var Se=Ke.numFailures,Qe=Ke.results,Ne=Ke.lastResult;if(Ke=Ke.failures,0===Se)return $?Qe:Ne;throw new K("".concat(N.name,".bulkAdd(): ").concat(Se," of ").concat(ke," operations failed"),Ke)})})},vr.prototype.bulkPut=function(_,I,A){var N=this,L=Array.isArray(I)?I:void 0,$=(A=A||(L?void 0:I))?A.allKeys:void 0;return this._trans("readwrite",function(J){var ge=(Pe=N.schema.primKey).auto;if((Pe=Pe.keyPath)&&L)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(L&&L.length!==_.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var ke=_.length,Pe=Pe&&ge?_.map(Ks(Pe)):_;return N.core.mutate({trans:J,type:"put",keys:L,values:Pe,wantResults:$}).then(function(Ke){var Se=Ke.numFailures,Qe=Ke.results,Ne=Ke.lastResult;if(Ke=Ke.failures,0===Se)return $?Qe:Ne;throw new K("".concat(N.name,".bulkPut(): ").concat(Se," of ").concat(ke," operations failed"),Ke)})})},vr.prototype.bulkUpdate=function(_){var I=this,A=this.core,N=_.map(function(J){return J.key}),L=_.map(function(J){return J.changes}),$=[];return this._trans("readwrite",function(J){return A.getMany({trans:J,keys:N,cache:"clone"}).then(function(ge){var ke=[],Pe=[];_.forEach(function(Se,Qe){var Ne=Se.key,Ke=Se.changes,Xe=ge[Qe];if(Xe){for(var je=0,pt=Object.keys(Ke);je<pt.length;je++){var We=pt[je],it=Ke[We];if(We===I.schema.primKey.keyPath){if(0!==Kn(it,Ne))throw new q.Constraint("Cannot update primary key in bulkUpdate()")}else dt(Xe,We,it)}$.push(Qe),ke.push(Ne),Pe.push(Xe)}});var tt=ke.length;return A.mutate({trans:J,type:"put",keys:ke,values:Pe,updates:{keys:N,changeSpecs:L}}).then(function(Se){var Qe=Se.numFailures,Ne=Se.failures;if(0===Qe)return tt;for(var Ke=0,Xe=Object.keys(Ne);Ke<Xe.length;Ke++){var je,pt=Xe[Ke],We=$[Number(pt)];null!=We&&(je=Ne[pt],delete Ne[pt],Ne[We]=je)}throw new K("".concat(I.name,".bulkUpdate(): ").concat(Qe," of ").concat(tt," operations failed"),Ne)})})})},vr.prototype.bulkDelete=function(_){var I=this,A=_.length;return this._trans("readwrite",function(N){return I.core.mutate({trans:N,type:"delete",keys:_})}).then(function(J){var L=J.numFailures,$=J.lastResult;if(J=J.failures,0===L)return $;throw new K("".concat(I.name,".bulkDelete(): ").concat(L," of ").concat(A," operations failed"),J)})},vr);function vr(){}function Ws(_){function I(J,ge){if(ge){for(var ke=arguments.length,Pe=new Array(ke-1);--ke;)Pe[ke-1]=arguments[ke];return A[J].subscribe.apply(null,Pe),_}if("string"==typeof J)return A[J]}var A={};I.addEventType=$;for(var N=1,L=arguments.length;N<L;++N)$(arguments[N]);return I;function $(J,ge,ke){if("object"!=typeof J){var Pe;ge=ge||en;var tt={subscribers:[],fire:ke=ke||oe,subscribe:function(Se){-1===tt.subscribers.indexOf(Se)&&(tt.subscribers.push(Se),tt.fire=ge(tt.fire,Se))},unsubscribe:function(Se){tt.subscribers=tt.subscribers.filter(function(Qe){return Qe!==Se}),tt.fire=tt.subscribers.reduce(ge,ke)}};return A[J]=I[J]=tt}fe(Pe=J).forEach(function(Se){var Qe=Pe[Se];if(se(Qe))$(Se,Pe[Se][0],Pe[Se][1]);else{if("asap"!==Qe)throw new q.InvalidArgument("Invalid event config");var Ne=$(Se,Je,function(){for(var Ke=arguments.length,Xe=new Array(Ke);Ke--;)Xe[Ke]=arguments[Ke];Ne.subscribers.forEach(function(je){pe(function(){je.apply(null,Xe)})})})}})}}function Pc(_,I){return Ve(I).from({prototype:_}),I}function va(_,I){return!(_.filter||_.algorithm||_.or)&&(I?_.justLimit:!_.replayFilter)}function vu(_,I){_.filter=ga(_.filter,I)}function Gs(_,I,A){var N=_.replayFilter;_.replayFilter=N?function(){return ga(N(),I())}:I,_.justLimit=A&&!N}function xs(_,I){if(_.isPrimKey)return I.primaryKey;var A=I.getIndexByKeyPath(_.index);if(!A)throw new q.Schema("KeyPath "+_.index+" on object store "+I.name+" is not indexed");return A}function _a(_,I,A){var N=xs(_,I.schema);return I.openCursor({trans:A,values:!_.keysOnly,reverse:"prev"===_.dir,unique:!!_.unique,query:{index:N,range:_.range}})}function _u(_,I,A,N){var L=_.replayFilter?ga(_.filter,_.replayFilter()):_.filter;if(_.or){var $={},J=function(ge,ke,Pe){var tt,Se;L&&!L(ke,Pe,function(Qe){return ke.stop(Qe)},function(Qe){return ke.fail(Qe)})||("[object ArrayBuffer]"==(Se=""+(tt=ke.primaryKey))&&(Se=""+new Uint8Array(tt)),lt($,Se)||($[Se]=!0,I(ge,ke,Pe)))};return Promise.all([_.or._iterate(J,A),Wa(_a(_,N,A),_.algorithm,J,!_.keysOnly&&_.valueMapper)])}return Wa(_a(_,N,A),ga(_.algorithm,L),I,!_.keysOnly&&_.valueMapper)}function Wa(_,I,A,N){var L=gn(N?function($,J,ge){return A(N($),J,ge)}:A);return _.then(function($){if($)return $.start(function(){var J=function(){return $.continue()};I&&!I($,function(ge){return J=ge},function(ge){$.stop(ge),J=oe},function(ge){$.fail(ge),J=oe})||L($.value,$,function(ge){return J=ge}),J()})})}ko=Symbol();var Ga=(ll.prototype.execute=function(_){if(void 0!==this.add){var I=this.add;if(se(I))return p(p([],se(_)?_:[],!0),I,!0).sort();if("number"==typeof I)return(Number(_)||0)+I;if("bigint"==typeof I)try{return BigInt(_)+I}catch{return BigInt(0)+I}throw new TypeError("Invalid term ".concat(I))}if(void 0!==this.remove){var A=this.remove;if(se(A))return se(_)?_.filter(function(N){return!A.includes(N)}).sort():[];if("number"==typeof A)return Number(_)-A;if("bigint"==typeof A)try{return BigInt(_)-A}catch{return BigInt(0)-A}throw new TypeError("Invalid subtrahend ".concat(A))}return(I=null===(I=this.replacePrefix)||void 0===I?void 0:I[0])&&"string"==typeof _&&_.startsWith(I)?this.replacePrefix[1]+_.substring(I.length):_},ll);function ll(_){Object.assign(this,_)}var Bg=(Gn.prototype._read=function(_,I){var A=this._ctx;return A.error?A.table._trans(null,yr.bind(null,A.error)):A.table._trans("readonly",_).then(I)},Gn.prototype._write=function(_){var I=this._ctx;return I.error?I.table._trans(null,yr.bind(null,I.error)):I.table._trans("readwrite",_,"locked")},Gn.prototype._addAlgorithm=function(_){var I=this._ctx;I.algorithm=ga(I.algorithm,_)},Gn.prototype._iterate=function(_,I){return _u(this._ctx,_,I,this._ctx.table.core)},Gn.prototype.clone=function(_){var I=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return _&&te(A,_),I._ctx=A,I},Gn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Gn.prototype.each=function(_){var I=this._ctx;return this._read(function(A){return _u(I,_,A,I.table.core)})},Gn.prototype.count=function(_){var I=this;return this._read(function(A){var N=I._ctx,L=N.table.core;if(va(N,!0))return L.count({trans:A,query:{index:xs(N,L.schema),range:N.range}}).then(function(J){return Math.min(J,N.limit)});var $=0;return _u(N,function(){return++$,!1},A,L).then(function(){return $})}).then(_)},Gn.prototype.sortBy=function(_,I){var A=_.split(".").reverse(),N=A[0],L=A.length-1;function $(ke,Pe){return Pe?$(ke[A[Pe]],Pe-1):ke[N]}var J="next"===this._ctx.dir?1:-1;function ge(ke,Pe){return(ke=$(ke,L))<(Pe=$(Pe,L))?-J:Pe<ke?J:0}return this.toArray(function(ke){return ke.sort(ge)}).then(I)},Gn.prototype.toArray=function(_){var I=this;return this._read(function(A){var N=I._ctx;if("next"===N.dir&&va(N,!0)&&0<N.limit){var L=N.valueMapper,$=xs(N,N.table.core.schema);return N.table.core.query({trans:A,limit:N.limit,values:!0,query:{index:$,range:N.range}}).then(function(ge){return ge=ge.result,L?ge.map(L):ge})}var J=[];return _u(N,function(ge){return J.push(ge)},A,N.table.core).then(function(){return J})},_)},Gn.prototype.offset=function(_){var I=this._ctx;return _<=0||(I.offset+=_,va(I)?Gs(I,function(){var A=_;return function(N,L){return 0===A||(1===A?--A:L(function(){N.advance(A),A=0}),!1)}}):Gs(I,function(){var A=_;return function(){return--A<0}})),this},Gn.prototype.limit=function(_){return this._ctx.limit=Math.min(this._ctx.limit,_),Gs(this._ctx,function(){var I=_;return function(A,N,L){return--I<=0&&N(L),0<=I}},!0),this},Gn.prototype.until=function(_,I){return vu(this._ctx,function(A,N,L){return!_(A.value)||(N(L),I)}),this},Gn.prototype.first=function(_){return this.limit(1).toArray(function(I){return I[0]}).then(_)},Gn.prototype.last=function(_){return this.reverse().first(_)},Gn.prototype.filter=function(_){var I;return vu(this._ctx,function(A){return _(A.value)}),(I=this._ctx).isMatch=ga(I.isMatch,_),this},Gn.prototype.and=function(_){return this.filter(_)},Gn.prototype.or=function(_){return new this.db.WhereClause(this._ctx.table,_,this)},Gn.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Gn.prototype.desc=function(){return this.reverse()},Gn.prototype.eachKey=function(_){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(A,N){_(N.key,N)})},Gn.prototype.eachUniqueKey=function(_){return this._ctx.unique="unique",this.eachKey(_)},Gn.prototype.eachPrimaryKey=function(_){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(A,N){_(N.primaryKey,N)})},Gn.prototype.keys=function(_){var I=this._ctx;I.keysOnly=!I.isMatch;var A=[];return this.each(function(N,L){A.push(L.key)}).then(function(){return A}).then(_)},Gn.prototype.primaryKeys=function(_){var I=this._ctx;if("next"===I.dir&&va(I,!0)&&0<I.limit)return this._read(function(N){var L=xs(I,I.table.core.schema);return I.table.core.query({trans:N,values:!1,limit:I.limit,query:{index:L,range:I.range}})}).then(function(N){return N.result}).then(_);I.keysOnly=!I.isMatch;var A=[];return this.each(function(N,L){A.push(L.primaryKey)}).then(function(){return A}).then(_)},Gn.prototype.uniqueKeys=function(_){return this._ctx.unique="unique",this.keys(_)},Gn.prototype.firstKey=function(_){return this.limit(1).keys(function(I){return I[0]}).then(_)},Gn.prototype.lastKey=function(_){return this.reverse().firstKey(_)},Gn.prototype.distinct=function(){var _;if(!(_=(_=this._ctx).index&&_.table.schema.idxByName[_.index])||!_.multi)return this;var I={};return vu(this._ctx,function(L){var N=L.primaryKey.toString();return L=lt(I,N),I[N]=!0,!L}),this},Gn.prototype.modify=function(_){var I=this,A=this._ctx;return this._write(function(N){var L,$,J;function ge(je,it){var We=it.failures;Ke+=je-(it=it.numFailures);for(var It=0,Lt=fe(We);It<Lt.length;It++)Ne.push(We[Lt[It]])}J="function"==typeof _?_:(L=fe(_),$=L.length,function(je){for(var pt=!1,We=0;We<$;++We){var it=L[We],It=_[it],Lt=Be(je,it);It instanceof Ga?(dt(je,it,It.execute(Lt)),pt=!0):Lt!==It&&(dt(je,it,It),pt=!0)}return pt});var ke=A.table.core,Pe=ke.schema.primaryKey,tt=Pe.outbound,Se=Pe.extractKey,Qe=I.db._options.modifyChunkSize||200,Ne=[],Ke=0,Xe=[];return I.clone().primaryKeys().then(function(je){var We=va(A)&&A.limit===1/0&&("function"!=typeof _||_===Nc)&&{index:A.index,range:A.range};return function pt(it){var It=Math.min(Qe,je.length-it);return ke.getMany({trans:N,keys:je.slice(it,it+It),cache:"immutable"}).then(function(Lt){for(var qt=[],Vt=[],Kt=tt?[]:null,Wt=[],yt=0;yt<It;++yt){var An=Lt[yt],Nn={value:ce(An),primKey:je[it+yt]};!1!==J.call(Nn,Nn.value,Nn)&&(null==Nn.value?Wt.push(je[it+yt]):tt||0===Kn(Se(An),Se(Nn.value))?(Vt.push(Nn.value),tt&&Kt.push(je[it+yt])):(Wt.push(je[it+yt]),qt.push(Nn.value)))}return Promise.resolve(0<qt.length&&ke.mutate({trans:N,type:"add",values:qt}).then(function(Dn){for(var Ln in Dn.failures)Wt.splice(parseInt(Ln),1);ge(qt.length,Dn)})).then(function(){return(0<Vt.length||We&&"object"==typeof _)&&ke.mutate({trans:N,type:"put",keys:Kt,values:Vt,criteria:We,changeSpec:"function"!=typeof _&&_,isAdditionalChunk:0<it}).then(function(Dn){return ge(Vt.length,Dn)})}).then(function(){return(0<Wt.length||We&&_===Nc)&&ke.mutate({trans:N,type:"delete",keys:Wt,criteria:We,isAdditionalChunk:0<it}).then(function(Dn){return ge(Wt.length,Dn)})}).then(function(){return je.length>it+It&&pt(it+Qe)})})}(0).then(function(){if(0<Ne.length)throw new be("Error modifying one or more objects",Ne,Ke,Xe);return je.length})})})},Gn.prototype.delete=function(){var _=this._ctx,I=_.range;return va(_)&&(_.isPrimKey||3===I.type)?this._write(function(A){var L=I;return _.table.core.count({trans:A,query:{index:_.table.core.schema.primaryKey,range:L}}).then(function($){return _.table.core.mutate({trans:A,type:"deleteRange",range:L}).then(function(J){var ge=J.failures;if(J=J.numFailures)throw new be("Could not delete some values",Object.keys(ge).map(function(ke){return ge[ke]}),$-J);return $-J})})}):this.modify(Nc)},Gn);function Gn(){}var Nc=function(_,I){return I.value=null};function Lf(_,I){return _<I?-1:_===I?0:1}function bo(_,I){return I<_?-1:_===I?0:1}function Ji(_,I,A){return(_=_ instanceof Re?new _.Collection(_):_)._ctx.error=new(A||TypeError)(I),_}function Eo(_){return new _.Collection(_,function(){return U("")}).limit(0)}function qa(_,I,A,N){var L,$,J,ge,ke,Pe,tt,Se=A.length;if(!A.every(function(Ke){return"string"==typeof Ke}))return Ji(_,Ud);function Qe(Ke){L="next"===Ke?function(je){return je.toUpperCase()}:function(je){return je.toLowerCase()},$="next"===Ke?function(je){return je.toLowerCase()}:function(je){return je.toUpperCase()},J="next"===Ke?Lf:bo;var Xe=A.map(function(je){return{lower:$(je),upper:L(je)}}).sort(function(je,pt){return J(je.lower,pt.lower)});ge=Xe.map(function(je){return je.upper}),ke=Xe.map(function(je){return je.lower}),tt="next"===(Pe=Ke)?"":N}Qe("next"),(_=new _.Collection(_,function(){return rs(ge[0],ke[Se-1]+N)}))._ondirectionchange=function(Ke){Qe(Ke)};var Ne=0;return _._addAlgorithm(function(Ke,Xe,je){var pt=Ke.key;if("string"!=typeof pt)return!1;var We=$(pt);if(I(We,ke,Ne))return!0;for(var it=null,It=Ne;It<Se;++It){var Lt=function(qt,Vt,Kt,Wt,yt,An){for(var Nn=Math.min(qt.length,Wt.length),Dn=-1,Ln=0;Ln<Nn;++Ln){var Zs=Vt[Ln];if(Zs!==Wt[Ln])return yt(qt[Ln],Kt[Ln])<0?qt.substr(0,Ln)+Kt[Ln]+Kt.substr(Ln+1):yt(qt[Ln],Wt[Ln])<0?qt.substr(0,Ln)+Wt[Ln]+Kt.substr(Ln+1):0<=Dn?qt.substr(0,Dn)+Vt[Dn]+Kt.substr(Dn+1):null;yt(qt[Ln],Zs)<0&&(Dn=Ln)}return Nn<Wt.length&&"next"===An?qt+Kt.substr(qt.length):Nn<qt.length&&"prev"===An?qt.substr(0,Kt.length):Dn<0?null:qt.substr(0,Dn)+Wt[Dn]+Kt.substr(Dn+1)}(pt,We,ge[It],ke[It],J,Pe);null===Lt&&null===it?Ne=It+1:(null===it||0<J(it,Lt))&&(it=Lt)}return Xe(null!==it?function(){Ke.continue(it+tt)}:je),!1}),_}function rs(_,I,A,N){return{type:2,lower:_,upper:I,lowerOpen:A,upperOpen:N}}function U(_){return{type:1,lower:_,upper:_}}var Re=(Object.defineProperty(Ye.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ye.prototype.between=function(_,I,A,N){A=!1!==A,N=!0===N;try{return 0<this._cmp(_,I)||0===this._cmp(_,I)&&(A||N)&&(!A||!N)?Eo(this):new this.Collection(this,function(){return rs(_,I,!A,!N)})}catch{return Ji(this,Pi)}},Ye.prototype.equals=function(_){return null==_?Ji(this,Pi):new this.Collection(this,function(){return U(_)})},Ye.prototype.above=function(_){return null==_?Ji(this,Pi):new this.Collection(this,function(){return rs(_,void 0,!0)})},Ye.prototype.aboveOrEqual=function(_){return null==_?Ji(this,Pi):new this.Collection(this,function(){return rs(_,void 0,!1)})},Ye.prototype.below=function(_){return null==_?Ji(this,Pi):new this.Collection(this,function(){return rs(void 0,_,!1,!0)})},Ye.prototype.belowOrEqual=function(_){return null==_?Ji(this,Pi):new this.Collection(this,function(){return rs(void 0,_)})},Ye.prototype.startsWith=function(_){return"string"!=typeof _?Ji(this,Ud):this.between(_,_+"\uffff",!0,!0)},Ye.prototype.startsWithIgnoreCase=function(_){return""===_?this.startsWith(_):qa(this,function(I,A){return 0===I.indexOf(A[0])},[_],"\uffff")},Ye.prototype.equalsIgnoreCase=function(_){return qa(this,function(I,A){return I===A[0]},[_],"")},Ye.prototype.anyOfIgnoreCase=function(){var _=rn.apply(yn,arguments);return 0===_.length?Eo(this):qa(this,function(I,A){return-1!==A.indexOf(I)},_,"")},Ye.prototype.startsWithAnyOfIgnoreCase=function(){var _=rn.apply(yn,arguments);return 0===_.length?Eo(this):qa(this,function(I,A){return A.some(function(N){return 0===I.indexOf(N)})},_,"\uffff")},Ye.prototype.anyOf=function(){var _=this,I=rn.apply(yn,arguments),A=this._cmp;try{I.sort(A)}catch{return Ji(this,Pi)}if(0===I.length)return Eo(this);var N=new this.Collection(this,function(){return rs(I[0],I[I.length-1])});N._ondirectionchange=function($){I.sort(A="next"===$?_._ascending:_._descending)};var L=0;return N._addAlgorithm(function($,J,ge){for(var ke=$.key;0<A(ke,I[L]);)if(++L===I.length)return J(ge),!1;return 0===A(ke,I[L])||(J(function(){$.continue(I[L])}),!1)}),N},Ye.prototype.notEqual=function(_){return this.inAnyRange([[-1/0,_],[_,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ye.prototype.noneOf=function(){var _=rn.apply(yn,arguments);if(0===_.length)return new this.Collection(this);try{_.sort(this._ascending)}catch{return Ji(this,Pi)}var I=_.reduce(function(A,N){return A?A.concat([[A[A.length-1][1],N]]):[[-1/0,N]]},null);return I.push([_[_.length-1],this.db._maxKey]),this.inAnyRange(I,{includeLowers:!1,includeUppers:!1})},Ye.prototype.inAnyRange=function(pt,I){var A=this,N=this._cmp,L=this._ascending,$=this._descending,J=this._min,ge=this._max;if(0===pt.length)return Eo(this);if(!pt.every(function(We){return void 0!==We[0]&&void 0!==We[1]&&L(We[0],We[1])<=0}))return Ji(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);var tt,ke=!I||!1!==I.includeLowers,Pe=I&&!0===I.includeUppers,Se=L;function Qe(We,it){return Se(We[0],it[0])}try{(tt=pt.reduce(function(We,it){for(var It=0,Lt=We.length;It<Lt;++It){var qt=We[It];if(N(it[0],qt[1])<0&&0<N(it[1],qt[0])){qt[0]=J(qt[0],it[0]),qt[1]=ge(qt[1],it[1]);break}}return It===Lt&&We.push(it),We},[])).sort(Qe)}catch{return Ji(this,Pi)}var Ne=0,Ke=Pe?function(We){return 0<L(We,tt[Ne][1])}:function(We){return 0<=L(We,tt[Ne][1])},Xe=ke?function(We){return 0<$(We,tt[Ne][0])}:function(We){return 0<=$(We,tt[Ne][0])},je=Ke;return(pt=new this.Collection(this,function(){return rs(tt[0][0],tt[tt.length-1][1],!ke,!Pe)}))._ondirectionchange=function(We){Se="next"===We?(je=Ke,L):(je=Xe,$),tt.sort(Qe)},pt._addAlgorithm(function(We,it,It){for(var Lt,qt=We.key;je(qt);)if(++Ne===tt.length)return it(It),!1;return!Ke(Lt=qt)&&!Xe(Lt)||(0===A._cmp(qt,tt[Ne][1])||0===A._cmp(qt,tt[Ne][0])||it(function(){We.continue(Se===L?tt[Ne][0]:tt[Ne][1])}),!1)}),pt},Ye.prototype.startsWithAnyOf=function(){var _=rn.apply(yn,arguments);return _.every(function(I){return"string"==typeof I})?0===_.length?Eo(this):this.inAnyRange(_.map(function(I){return[I,I+"\uffff"]})):Ji(this,"startsWithAnyOf() only works with strings")},Ye);function Ye(){}function ht(_){return gn(function(I){return kt(I),_(I.target.error),!1})}function kt(_){_.stopPropagation&&_.stopPropagation(),_.preventDefault&&_.preventDefault()}var Sn="storagemutated",Bn="x-storagemutated-1",Yn=Ws(null,Sn),_r=(kr.prototype._lock=function(){return Oe(!Zt.global),++this._reculock,1!==this._reculock||Zt.global||(Zt.lockOwnerFor=this),this},kr.prototype._unlock=function(){if(Oe(!Zt.global),0==--this._reculock)for(Zt.global||(Zt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var _=this._blockedFuncs.shift();try{ii(_[1],_[0])}catch{}}return this},kr.prototype._locked=function(){return this._reculock&&Zt.lockOwnerFor!==this},kr.prototype.create=function(_){var I=this;if(!this.mode)return this;var A=this.db.idbdb,N=this.db._state.dbOpenError;if(Oe(!this.idbtrans),!_&&!A)switch(N&&N.name){case"DatabaseClosedError":throw new q.DatabaseClosed(N);case"MissingAPIError":throw new q.MissingAPI(N.message,N);default:throw new q.OpenFailed(N)}if(!this.active)throw new q.TransactionInactive;return Oe(null===this._completion._state),(_=this.idbtrans=_||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=gn(function(L){kt(L),I._reject(_.error)}),_.onabort=gn(function(L){kt(L),I.active&&I._reject(new q.Abort(_.error)),I.active=!1,I.on("abort").fire(L)}),_.oncomplete=gn(function(){I.active=!1,I._resolve(),"mutatedParts"in _&&Yn.storagemutated.fire(_.mutatedParts)}),this},kr.prototype._promise=function(_,I,A){var N=this;if("readwrite"===_&&"readwrite"!==this.mode)return yr(new q.ReadOnly("Transaction is readonly"));if(!this.active)return yr(new q.TransactionInactive);if(this._locked())return new Pt(function($,J){N._blockedFuncs.push([function(){N._promise(_,I,A).then($,J)},Zt])});if(A)return gr(function(){var $=new Pt(function(J,ge){N._lock();var ke=I(J,ge,N);ke&&ke.then&&ke.then(J,ge)});return $.finally(function(){return N._unlock()}),$._lib=!0,$});var L=new Pt(function($,J){var ge=I($,J,N);ge&&ge.then&&ge.then($,J)});return L._lib=!0,L},kr.prototype._root=function(){return this.parent?this.parent._root():this},kr.prototype.waitFor=function(_){var I,A=this._root(),N=Pt.resolve(_);A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return N}):(A._waitingFor=N,A._waitingQueue=[],I=A.idbtrans.objectStore(A.storeNames[0]),function $(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(I.get(-1/0).onsuccess=$)}());var L=A._waitingFor;return new Pt(function($,J){N.then(function(ge){return A._waitingQueue.push(gn($.bind(null,ge)))},function(ge){return A._waitingQueue.push(gn(J.bind(null,ge)))}).finally(function(){A._waitingFor===L&&(A._waitingFor=null)})})},kr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))},kr.prototype.table=function(_){var I=this._memoizedTables||(this._memoizedTables={});if(lt(I,_))return I[_];var A=this.schema[_];if(!A)throw new q.NotFound("Table "+_+" not part of transaction");return(A=new this.db.Table(_,A,this)).core=this.db.core.table(_),I[_]=A},kr);function kr(){}function qr(_,I,A,N,L,$,J){return{name:_,keyPath:I,unique:A,multi:N,auto:L,compound:$,src:(A&&!J?"&":"")+(N?"*":"")+(L?"++":"")+oi(I)}}function oi(_){return"string"==typeof _?_:_?"["+[].join.call(_,"+")+"]":""}function Fo(_,I,A){return{name:_,primKey:I,indexes:A,mappedClass:null,idxByName:(N=function(L){return[L.name,L]},A.reduce(function(L,$,J){return(J=N($))&&(L[J[0]]=J[1]),L},{}))};var N}var qs=function(_){try{return _.only([[]]),qs=function(){return[[]]},[[]]}catch{return qs=function(){return"\uffff"},"\uffff"}};function eo(_){return null==_?function(){}:"string"==typeof _?1===(I=_).split(".").length?function(A){return A[I]}:function(A){return Be(A,I)}:function(A){return Be(A,_)};var I}function wo(_){return[].slice.call(_)}var Qs=0;function Xs(_){return null==_?":id":"string"==typeof _?_:"[".concat(_.join("+"),"]")}function Io(_,I,ke){function N(je){if(3===je.type)return null;if(4===je.type)throw new Error("Cannot convert never type to IDBKeyRange");var Ne=je.lower,Ke=je.upper,Xe=je.lowerOpen;return je=je.upperOpen,void 0===Ne?void 0===Ke?null:I.upperBound(Ke,!!je):void 0===Ke?I.lowerBound(Ne,!!Xe):I.bound(Ne,Ke,!!Xe,!!je)}var $,J,ge,Pe=(J=ke,ge=wo(($=_).objectStoreNames),tt={schema:{name:$.name,tables:ge.map(function(Qe){return J.objectStore(Qe)}).map(function(Qe){var Ne=Qe.keyPath,je=Qe.autoIncrement,Ke=se(Ne),Xe={};return je={name:Qe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==Ne,compound:Ke,keyPath:Ne,autoIncrement:je,unique:!0,extractKey:eo(Ne)},indexes:wo(Qe.indexNames).map(function(pt){return Qe.index(pt)}).map(function(It){var it=It.unique,Lt=It.multiEntry;return Lt={name:It.name,compound:se(It=It.keyPath),keyPath:It,unique:it,multiEntry:Lt,extractKey:eo(It)},Xe[Xs(It)]=Lt}),getIndexByKeyPath:function(pt){return Xe[Xs(pt)]}},Xe[":id"]=je.primaryKey,null!=Ne&&(Xe[Xs(Ne)]=je.primaryKey),je})},hasGetAll:0<ge.length&&"getAll"in J.objectStore(ge[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).hasGetAll,tt=(ke=tt.schema).tables.map(function L(Qe){var Ne,Ke=Qe.name;return{name:Ke,schema:Qe,mutate:function(Xe){var je=Xe.trans,pt=Xe.type,We=Xe.keys,it=Xe.values,It=Xe.range;return new Promise(function(Lt,qt){Lt=gn(Lt);var Vt=je.objectStore(Ke),Kt=null==Vt.keyPath,Wt="put"===pt||"add"===pt;if(!Wt&&"delete"!==pt&&"deleteRange"!==pt)throw new Error("Invalid operation type: "+pt);var yt,An=(We||it||{length:1}).length;if(We&&it&&We.length!==it.length)throw new Error("Given keys array must have same length as given values array.");if(0===An)return Lt({numFailures:0,failures:{},results:[],lastResult:void 0});function Nn(Ki){++Zs,kt(Ki)}var Dn=[],Ln=[],Zs=0;if("deleteRange"===pt){if(4===It.type)return Lt({numFailures:Zs,failures:Ln,results:[],lastResult:void 0});Dn.push(yt=3===It.type?Vt.clear():Vt.delete(N(It)))}else{var $n=(Kt=Wt?Kt?[it,We]:[it,null]:[We,null])[0],si=Kt[1];if(Wt)for(var mi=0;mi<An;++mi)Dn.push(yt=si&&void 0!==si[mi]?Vt[pt]($n[mi],si[mi]):Vt[pt]($n[mi])),yt.onerror=Nn;else for(mi=0;mi<An;++mi)Dn.push(yt=Vt[pt]($n[mi])),yt.onerror=Nn}function Ya(Ki){Ki=Ki.target.result,Dn.forEach(function(Za,Wf){return null!=Za.error&&(Ln[Wf]=Za.error)}),Lt({numFailures:Zs,failures:Ln,results:"delete"===pt?We:Dn.map(function(Za){return Za.result}),lastResult:Ki})}yt.onerror=function(Ki){Nn(Ki),Ya(Ki)},yt.onsuccess=Ya})},getMany:function(Xe){var je=Xe.trans,pt=Xe.keys;return new Promise(function(We,it){We=gn(We);for(var It,Lt=je.objectStore(Ke),qt=pt.length,Vt=new Array(qt),Kt=0,Wt=0,yt=function(Dn){Vt[(Dn=Dn.target)._pos]=Dn.result,++Wt===Kt&&We(Vt)},An=ht(it),Nn=0;Nn<qt;++Nn)null!=pt[Nn]&&((It=Lt.get(pt[Nn]))._pos=Nn,It.onsuccess=yt,It.onerror=An,++Kt);0===Kt&&We(Vt)})},get:function(Xe){var je=Xe.trans,pt=Xe.key;return new Promise(function(We,it){We=gn(We);var It=je.objectStore(Ke).get(pt);It.onsuccess=function(Lt){return We(Lt.target.result)},It.onerror=ht(it)})},query:(Ne=Pe,function(Xe){return new Promise(function(je,pt){je=gn(je);var We,it,It,Lt=Xe.values,qt=Xe.limit,Vt=qt===1/0?void 0:qt,Wt=(yt=Xe.query).index,yt=yt.range,Kt=(Kt=Xe.trans).objectStore(Ke);if(Wt=Wt.isPrimaryKey?Kt:Kt.index(Wt.name),yt=N(yt),0===qt)return je({result:[]});Ne?((Vt=Lt?Wt.getAll(yt,Vt):Wt.getAllKeys(yt,Vt)).onsuccess=function(An){return je({result:An.target.result})},Vt.onerror=ht(pt)):(We=0,it=!Lt&&"openKeyCursor"in Wt?Wt.openKeyCursor(yt):Wt.openCursor(yt),It=[],it.onsuccess=function(An){var Nn=it.result;return Nn?(It.push(Lt?Nn.value:Nn.primaryKey),++We===qt?je({result:It}):void Nn.continue()):je({result:It})},it.onerror=ht(pt))})}),openCursor:function(Xe){var je=Xe.trans,pt=Xe.values,We=Xe.query,it=Xe.reverse,It=Xe.unique;return new Promise(function(Lt,qt){Lt=gn(Lt);var Wt=We.index,Vt=We.range,Kt=je.objectStore(Ke),yt=(Kt=Wt.isPrimaryKey?Kt:Kt.index(Wt.name),Wt=it?It?"prevunique":"prev":It?"nextunique":"next",!pt&&"openKeyCursor"in Kt?Kt.openKeyCursor(N(Vt),Wt):Kt.openCursor(N(Vt),Wt));yt.onerror=ht(qt),yt.onsuccess=gn(function(An){var Nn,Dn,Ln,Zs,$n=yt.result;$n?($n.___id=++Qs,$n.done=!1,Nn=$n.continue.bind($n),Dn=(Dn=$n.continuePrimaryKey)&&Dn.bind($n),Ln=$n.advance.bind($n),Zs=function(){throw new Error("Cursor not stopped")},$n.trans=je,$n.stop=$n.continue=$n.continuePrimaryKey=$n.advance=function(){throw new Error("Cursor not started")},$n.fail=gn(qt),$n.next=function(){var si=this,mi=1;return this.start(function(){return mi--?si.continue():si.stop()}).then(function(){return si})},$n.start=function(si){function mi(){if(yt.result)try{si()}catch(Ki){$n.fail(Ki)}else $n.done=!0,$n.start=function(){throw new Error("Cursor behind last entry")},$n.stop()}var Ya=new Promise(function(Ki,Za){Ki=gn(Ki),yt.onerror=ht(Za),$n.fail=Za,$n.stop=function(Wf){$n.stop=$n.continue=$n.continuePrimaryKey=$n.advance=Zs,Ki(Wf)}});return yt.onsuccess=gn(function(Ki){yt.onsuccess=mi,mi()}),$n.continue=Nn,$n.continuePrimaryKey=Dn,$n.advance=Ln,mi(),Ya},Lt($n)):Lt(null)},qt)})},count:function(Xe){var je=Xe.query,pt=Xe.trans,We=je.index,it=je.range;return new Promise(function(It,Lt){var qt=pt.objectStore(Ke),Vt=We.isPrimaryKey?qt:qt.index(We.name);(Vt=(qt=N(it))?Vt.count(qt):Vt.count()).onsuccess=gn(function(Kt){return It(Kt.target.result)}),Vt.onerror=ht(Lt)})}}}),Se={};return tt.forEach(function(Qe){return Se[Qe.name]=Qe}),{stack:"dbcore",transaction:_.transaction.bind(_),table:function(Qe){if(!Se[Qe])throw new Error("Table '".concat(Qe,"' not found"));return Se[Qe]},MIN_KEY:-1/0,MAX_KEY:qs(I),schema:ke}}function ya(_,N){N=function Rs(_,I,A,N){return{dbcore:(N=Io(I,A.IDBKeyRange,N),_.dbcore.reduce(function($,J){return J=J.create,M(M({},$),J($))},N))}}(_._middlewares,N.db,_._deps,N),_.core=N.dbcore,_.tables.forEach(function(L){var $=L.name;_.core.schema.tables.some(function(J){return J.name===$})&&(L.core=_.core.table($),_[$]instanceof _.Table&&(_[$].core=L.core))})}function dl(_,I,A,N){A.forEach(function(L){var $=N[L];I.forEach(function(J){var ge=function ke(Pe,tt){return Me(Pe,tt)||(Pe=ae(Pe))&&ke(Pe,tt)}(J,L);(!ge||"value"in ge&&void 0===ge.value)&&(J===_.Transaction.prototype||J instanceof _.Transaction?he(J,L,{get:function(){return this.table(L)},set:function(ke){$e(this,L,{value:ke,writable:!0,configurable:!0,enumerable:!0})}}):J[L]=new _.Table(L,$))})})}function hl(_,I){I.forEach(function(A){for(var N in A)A[N]instanceof _.Table&&delete A[N]})}function kc(_,I){return _._cfg.version-I._cfg.version}function zt(_,I){var A,N={del:[],add:[],change:[]};for(A in _)I[A]||N.del.push(A);for(A in I){var L=_[A],$=I[A];if(L){var J={name:A,def:$,recreate:!1,del:[],add:[],change:[]};if(""+(L.primKey.keyPath||"")!=""+($.primKey.keyPath||"")||L.primKey.auto!==$.primKey.auto)J.recreate=!0,N.change.push(J);else{var ge=L.idxByName,ke=$.idxByName,Pe=void 0;for(Pe in ge)ke[Pe]||J.del.push(Pe);for(Pe in ke){var tt=ge[Pe],Se=ke[Pe];tt?tt.src!==Se.src&&J.change.push(Se):J.add.push(Se)}(0<J.del.length||0<J.add.length||0<J.change.length)&&N.change.push(J)}}else N.add.push([A,$])}return N}function is(_,I,A,N){var L=_.db.createObjectStore(I,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});return N.forEach(function($){return yu(L,$)}),L}function ba(_,I){fe(_).forEach(function(A){I.db.objectStoreNames.contains(A)||($t&&console.debug("Dexie: Creating missing table",A),is(I,A,_[A].primKey,_[A].indexes))})}function yu(_,I){_.createIndex(I.name,I.keyPath,{unique:I.unique,multiEntry:I.multi})}function fl(_,I,A){var N={};return Ue(I.objectStoreNames,0).forEach(function(L){for(var $=A.objectStore(L),J=qr(oi(Pe=$.keyPath),Pe||"",!0,!1,!!$.autoIncrement,Pe&&"string"!=typeof Pe,!0),ge=[],ke=0;ke<$.indexNames.length;++ke){var Pe=(tt=$.index($.indexNames[ke])).keyPath,tt=qr(tt.name,Pe,!!tt.unique,!!tt.multiEntry,!1,Pe&&"string"!=typeof Pe,!1);ge.push(tt)}N[L]=Fo(L,J,ge)}),N}function pl(_,I,A){for(var N=A.db.objectStoreNames,L=0;L<N.length;++L){var $=N[L],J=A.objectStore($);_._hasGetAll="getAll"in J;for(var ge=0;ge<J.indexNames.length;++ge){var ke=J.indexNames[ge],Pe=J.index(ke).keyPath,tt="string"==typeof Pe?Pe:"["+Ue(Pe).join("+")+"]";!I[$]||(Pe=I[$].idxByName[tt])&&(Pe.name=ke,delete I[$].idxByName[tt],I[$].idxByName[ke]=Pe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ie.WorkerGlobalScope&&ie instanceof ie.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(_._hasGetAll=!1)}function ml(_){return _.split(",").map(function(I,A){var N=(I=I.trim()).replace(/([&*]|\+\+)/g,""),L=/^\[/.test(N)?N.match(/^\[(.*)\]$/)[1].split("+"):N;return qr(N,L||null,/\&/.test(I),/\*/.test(I),/\+\+/.test(I),se(L),0===A)})}var os=(Do.prototype._parseStoresSpec=function(_,I){fe(_).forEach(function(A){if(null!==_[A]){var N=ml(_[A]),L=N.shift();if(L.unique=!0,L.multi)throw new q.Schema("Primary key cannot be multi-valued");N.forEach(function($){if($.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!$.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),I[A]=Fo(A,L,N)}})},Do.prototype.stores=function(A){var I=this.db;this._cfg.storesSource=this._cfg.storesSource?te(this._cfg.storesSource,A):A;var N={},L={};return(A=I._versions).forEach(function($){te(N,$._cfg.storesSource),L=$._cfg.dbschema={},$._parseStoresSpec(N,L)}),I._dbSchema=L,hl(I,[I._allTables,I,I.Transaction.prototype]),dl(I,[I._allTables,I,I.Transaction.prototype,this._cfg.tables],fe(L),L),I._storeNames=fe(L),this},Do.prototype.upgrade=function(_){return this._cfg.contentUpgrade=ln(this._cfg.contentUpgrade||oe,_),this},Do);function Do(){}function Qa(_,I){var A=_._dbNamesDB;return A||(A=_._dbNamesDB=new Ys(As,{addons:[],indexedDB:_,IDBKeyRange:I})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function Lo(_){return _&&"function"==typeof _.databases}function Hd(_){return gr(function(){return Zt.letThrough=!0,_()})}function Fc(_){return!("from"in _)}var ti=function(_,I){if(!this){var A=new ti;return _&&"d"in _&&te(A,_),A}te(this,arguments.length?{d:1,from:_,to:1<arguments.length?I:_}:{d:0})};function gl(_,I,A){var N=Kn(I,A);if(!isNaN(N)){if(0<N)throw RangeError();if(Fc(_))return te(_,{from:I,to:A,d:1});var L=_.l;if(N=_.r,Kn(A,_.from)<0)return L?gl(L,I,A):_.l={from:I,to:A,d:1,l:null,r:null},cr(_);if(0<Kn(I,_.to))return N?gl(N,I,A):_.r={from:I,to:A,d:1,l:null,r:null},cr(_);Kn(I,_.from)<0&&(_.from=I,_.l=null,_.d=N?N.d+1:1),0<Kn(A,_.to)&&(_.to=A,_.r=null,_.d=_.l?_.l.d+1:1),A=!_.r,L&&!_.l&&hr(_,L),N&&A&&hr(_,N)}}function hr(_,I){Fc(I)||function A(N,ke){var $=ke.from,J=ke.to,ge=ke.l;ke=ke.r,gl(N,$,J),ge&&A(N,ge),ke&&A(N,ke)}(_,I)}function Vf(_,I){var A=Bf(I),N=A.next();if(N.done)return!1;for(var L=N.value,$=Bf(_),J=$.next(L.from),ge=J.value;!N.done&&!J.done;){if(Kn(ge.from,L.to)<=0&&0<=Kn(ge.to,L.from))return!0;Kn(L.from,ge.from)<0?L=(N=A.next(ge.from)).value:ge=(J=$.next(L.from)).value}return!1}function Bf(_){var I=Fc(_)?null:{s:0,n:_};return{next:function(A){for(var N=0<arguments.length;I;)switch(I.s){case 0:if(I.s=1,N)for(;I.n.l&&Kn(A,I.n.from)<0;)I={up:I,n:I.n.l,s:1};else for(;I.n.l;)I={up:I,n:I.n.l,s:1};case 1:if(I.s=2,!N||Kn(A,I.n.to)<=0)return{value:I.n,done:!1};case 2:if(I.n.r){I.s=3,I={up:I,n:I.n.r,s:0};continue}case 3:I=I.up}return{done:!0}}}}function cr(_){var I,A,N=((null===(I=_.r)||void 0===I?void 0:I.d)||0)-((null===(A=_.l)||void 0===A?void 0:A.d)||0),L=1<N?"r":N<-1?"l":"";L&&(I="r"==L?"l":"r",A=M({},_),_.from=(N=_[L]).from,_.to=N.to,_[L]=N[L],A[L]=N[I],(_[I]=A).d=jf(A)),_.d=jf(_)}function jf(A){var I=A.r;return A=A.l,(I?A?Math.max(I.d,A.d):I.d:A?A.d:0)+1}function Qr(_,I){return fe(I).forEach(function(A){_[A]?hr(_[A],I[A]):_[A]=function N(L){var $,J,ge={};for($ in L)lt(L,$)&&(ge[$]=!(J=L[$])||"object"!=typeof J||ct.has(J.constructor)?J:N(J));return ge}(I[A])}),_}function vl(_,I){return _.all||I.all||Object.keys(_).some(function(A){return I[A]&&Vf(I[A],_[A])})}qe(ti.prototype,((ro={add:function(_){return hr(this,_),this},addKey:function(_){return gl(this,_,_),this},addKeys:function(_){var I=this;return _.forEach(function(A){return gl(I,A,A)}),this},hasKey:function(_){var I=Bf(this).next(_).value;return I&&Kn(I.from,_)<=0&&0<=Kn(I.to,_)}})[ft]=function(){return Bf(this)},ro));var Lc={},zd={},bu=!1;function bn(_){Qr(zd,_),bu||(bu=!0,setTimeout(function(){bu=!1,Eu(zd,!(zd={}))},0))}function Eu(_,I){void 0===I&&(I=!1);var A=new Set;if(_.all)for(var N=0,L=Object.values(Lc);N<L.length;N++)to(J=L[N],_,A,I);else for(var $ in _){var J,ge=/^idb\:\/\/(.*)\/(.*)\//.exec($);ge&&($=ge[1],ge=ge[2],(J=Lc["idb://".concat($,"/").concat(ge)])&&to(J,_,A,I))}A.forEach(function(ke){return ke()})}function to(_,I,A,N){for(var L=[],$=0,J=Object.entries(_.queries.query);$<J.length;$++){for(var ge=J[$],ke=ge[0],Pe=[],tt=0,Se=ge[1];tt<Se.length;tt++){var Qe=Se[tt];vl(I,Qe.obsSet)?Qe.subscribers.forEach(function(je){return A.add(je)}):N&&Pe.push(Qe)}N&&L.push([ke,Pe])}if(N)for(var Ne=0,Ke=L;Ne<Ke.length;Ne++){var Xe=Ke[Ne];_.queries.query[ke=Xe[0]]=Pe=Xe[1]}}function xb(_){var I=_._state,A=_._deps.indexedDB;if(I.isBeingOpened||_.idbdb)return I.dbReadyPromise.then(function(){return I.dbOpenError?yr(I.dbOpenError):_});I.isBeingOpened=!0,I.dbOpenError=null,I.openComplete=!1;var N=I.openCanceller,L=Math.round(10*_.verno),$=!1;function J(){if(I.openCanceller!==N)throw new q.DatabaseClosed("db.open() was cancelled")}var ke,Pe=I.dbReadyResolve,tt=null,Se=!1;return Pt.race([N,(typeof navigator>"u"?Pt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Qe){function Ne(){return indexedDB.databases().finally(Qe)}ke=setInterval(Ne,100),Ne()}).finally(function(){return clearInterval(ke)}):Promise.resolve()).then(function ge(){return new Pt(function(Qe,Ne){if(J(),!A)throw new q.MissingAPI;var Ke=_.name,Xe=I.autoSchema||!L?A.open(Ke):A.open(Ke,L);if(!Xe)throw new q.MissingAPI;Xe.onerror=ht(Ne),Xe.onblocked=gn(_._fireOnBlocked),Xe.onupgradeneeded=gn(function(je){var pt;tt=Xe.transaction,I.autoSchema&&!_._options.allowEmptyDB?(Xe.onerror=kt,tt.abort(),Xe.result.close(),(pt=A.deleteDatabase(Ke)).onsuccess=pt.onerror=gn(function(){Ne(new q.NoSuchDatabase("Database ".concat(Ke," doesnt exist")))})):(tt.onerror=ht(Ne),je=je.oldVersion>Math.pow(2,62)?0:je.oldVersion,Se=je<1,_.idbdb=Xe.result,$&&function $d(_,I){ba(_._dbSchema,I),I.db.version%10!=0||I.objectStoreNames.contains("$meta")||I.db.createObjectStore("$meta").add(Math.ceil(I.db.version/10-1),"version");var A=fl(0,_.idbdb,I);pl(_,_._dbSchema,I);for(var N=0,L=zt(A,_._dbSchema).change;N<L.length;N++){var $=function(J){if(J.change.length||J.recreate)return console.warn("Unable to patch indexes of table ".concat(J.name," because it has changes on the type of index or primary key.")),{value:void 0};var ge=I.objectStore(J.name);J.add.forEach(function(ke){$t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(J.name,".").concat(ke.src)),yu(ge,ke)})}(L[N]);if("object"==typeof $)return $.value}}(_,tt),function jg(_,I,A,N){var L=_._dbSchema;A.objectStoreNames.contains("$meta")&&!L.$meta&&(L.$meta=Fo("$meta",ml("")[0],[]),_._storeNames.push("$meta"));var $=_._createTransaction("readwrite",_._storeNames,L);$.create(A),$._completion.catch(N);var J=$._reject.bind($),ge=Zt.transless||Zt;gr(function(){return Zt.trans=$,Zt.transless=ge,0!==I?(ya(_,A),Pe=I,((ke=$).storeNames.includes("$meta")?ke.table("$meta").get("version").then(function(tt){return tt??Pe}):Pt.resolve(Pe)).then(function(tt){return Qe=tt,Ne=$,Xe=[],tt=(Se=_)._versions,je=Se._dbSchema=fl(0,Se.idbdb,Ke=A),0!==(tt=tt.filter(function(pt){return pt._cfg.version>=Qe})).length?(tt.forEach(function(pt){Xe.push(function(){var We=je,it=pt._cfg.dbschema;pl(Se,We,Ke),pl(Se,it,Ke),je=Se._dbSchema=it;var It=zt(We,it);It.add.forEach(function(Wt){is(Ke,Wt[0],Wt[1].primKey,Wt[1].indexes)}),It.change.forEach(function(Wt){if(Wt.recreate)throw new q.Upgrade("Not yet support for changing primary key");var yt=Ke.objectStore(Wt.name);Wt.add.forEach(function(An){return yu(yt,An)}),Wt.change.forEach(function(An){yt.deleteIndex(An.name),yu(yt,An)}),Wt.del.forEach(function(An){return yt.deleteIndex(An)})});var Lt=pt._cfg.contentUpgrade;if(Lt&&pt._cfg.version>Qe){ya(Se,Ke),Ne._memoizedTables={};var qt=Te(it);It.del.forEach(function(Wt){qt[Wt]=We[Wt]}),hl(Se,[Se.Transaction.prototype]),dl(Se,[Se.Transaction.prototype],fe(qt),qt),Ne.schema=qt;var Vt,Kt=pn(Lt);return Kt&&Ds(),It=Pt.follow(function(){var Wt;(Vt=Lt(Ne))&&Kt&&(Wt=Ci.bind(null,null),Vt.then(Wt,Wt))}),Vt&&"function"==typeof Vt.then?Pt.resolve(Vt):It.then(function(){return Vt})}}),Xe.push(function(We){var it,It;it=pt._cfg.dbschema,[].slice.call((It=We).db.objectStoreNames).forEach(function(qt){return null==it[qt]&&It.db.deleteObjectStore(qt)}),hl(Se,[Se.Transaction.prototype]),dl(Se,[Se.Transaction.prototype],Se._storeNames,Se._dbSchema),Ne.schema=Se._dbSchema}),Xe.push(function(We){Se.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Se.idbdb.version/10)===pt._cfg.version?(Se.idbdb.deleteObjectStore("$meta"),delete Se._dbSchema.$meta,Se._storeNames=Se._storeNames.filter(function(it){return"$meta"!==it})):We.objectStore("$meta").put(pt._cfg.version,"version"))})}),function pt(){return Xe.length?Pt.resolve(Xe.shift()(Ne.idbtrans)).then(pt):Pt.resolve()}().then(function(){ba(je,Ke)})):Pt.resolve();var Se,Qe,Ne,Ke,Xe,je}).catch(J)):(fe(L).forEach(function(tt){is(A,tt,L[tt].primKey,L[tt].indexes)}),ya(_,A),void Pt.follow(function(){return _.on.populate.fire($)}).catch(J));var ke,Pe})}(_,je/10,tt,Ne))},Ne),Xe.onsuccess=gn(function(){tt=null;var je,pt,We,it,It,Lt=_.idbdb=Xe.result,qt=Ue(Lt.objectStoreNames);if(0<qt.length)try{var Vt=Lt.transaction(1===(it=qt).length?it[0]:it,"readonly");if(I.autoSchema)We=Vt,(je=_).verno=(pt=Lt).version/10,We=je._dbSchema=fl(0,pt,We),je._storeNames=Ue(pt.objectStoreNames,0),dl(je,[je._allTables],fe(We),We);else if(pl(_,_._dbSchema,Vt),((It=zt(fl(0,(It=_).idbdb,Vt),It._dbSchema)).add.length||It.change.some(function(Kt){return Kt.add.length||Kt.change.length}))&&!$)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Lt.close(),L=Lt.version+1,$=!0,Qe(ge());ya(_,Vt)}catch{}zs.push(_),Lt.onversionchange=gn(function(Kt){I.vcFired=!0,_.on("versionchange").fire(Kt)}),Lt.onclose=gn(function(Kt){_.on("close").fire(Kt)}),Se&&(Vt=Ke,Lt=(It=_._deps).indexedDB,It=It.IDBKeyRange,Lo(Lt)||Vt===As||Qa(Lt,It).put({name:Vt}).catch(oe)),Qe()},Ne)}).catch(function(Qe){switch(Qe?.name){case"UnknownError":if(0<I.PR1398_maxLoop)return I.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ge();break;case"VersionError":if(0<L)return L=0,ge()}return Pt.reject(Qe)})})]).then(function(){return J(),I.onReadyBeingFired=[],Pt.resolve(Hd(function(){return _.on.ready.fire(_.vip)})).then(function Qe(){if(0<I.onReadyBeingFired.length){var Ne=I.onReadyBeingFired.reduce(ln,oe);return I.onReadyBeingFired=[],Pt.resolve(Hd(function(){return Ne(_.vip)})).then(Qe)}})}).finally(function(){I.openCanceller===N&&(I.onReadyBeingFired=null,I.isBeingOpened=!1)}).catch(function(Qe){I.dbOpenError=Qe;try{tt&&tt.abort()}catch{}return N===I.openCanceller&&_._close(),yr(Qe)}).finally(function(){I.openComplete=!0,Pe()}).then(function(){var Qe;return Se&&(Qe={},_.tables.forEach(function(Ne){Ne.schema.indexes.forEach(function(Ke){Ke.name&&(Qe["idb://".concat(_.name,"/").concat(Ne.name,"/").concat(Ke.name)]=new ti(-1/0,[[[]]]))}),Qe["idb://".concat(_.name,"/").concat(Ne.name,"/")]=Qe["idb://".concat(_.name,"/").concat(Ne.name,"/:dels")]=new ti(-1/0,[[[]]])}),Yn(Sn).fire(Qe),Eu(Qe,!0)),_})}function Kd(_){function I($){return _.next($)}var A=L(I),N=L(function($){return _.throw($)});function L($){return function(ke){var ge=$(ke);return ke=ge.value,ge.done?ke:ke&&"function"==typeof ke.then?ke.then(A,N):se(ke)?Promise.all(ke).then(A,N):A(ke)}}return L(I)()}function Uf(_,I,A){for(var N=se(_)?_.slice():[_],L=0;L<A;++L)N.push(I);return N}var Xa={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(_){return M(M({},_),{table:function(I){var A=_.table(I),N=A.schema,L={},$=[];function J(Se,Qe,Ne){var Ke=Xs(Se),Xe=L[Ke]=L[Ke]||[],je=null==Se?0:"string"==typeof Se?1:Se.length,pt=0<Qe;return pt=M(M({},Ne),{name:pt?"".concat(Ke,"(virtual-from:").concat(Ne.name,")"):Ne.name,lowLevelIndex:Ne,isVirtual:pt,keyTail:Qe,keyLength:je,extractKey:eo(Se),unique:!pt&&Ne.unique}),Xe.push(pt),pt.isPrimaryKey||$.push(pt),1<je&&J(2===je?Se[0]:Se.slice(0,je-1),Qe+1,Ne),Xe.sort(function(We,it){return We.keyTail-it.keyTail}),pt}I=J(N.primaryKey.keyPath,0,N.primaryKey),L[":id"]=[I];for(var ge=0,ke=N.indexes;ge<ke.length;ge++){var Pe=ke[ge];J(Pe.keyPath,0,Pe)}function tt(Se){var Qe,Ne=Se.query.index;return Ne.isVirtual?M(M({},Se),{query:{index:Ne.lowLevelIndex,range:(Qe=Se.query.range,Ne=Ne.keyTail,{type:1===Qe.type?2:Qe.type,lower:Uf(Qe.lower,Qe.lowerOpen?_.MAX_KEY:_.MIN_KEY,Ne),lowerOpen:!0,upper:Uf(Qe.upper,Qe.upperOpen?_.MIN_KEY:_.MAX_KEY,Ne),upperOpen:!0})}}):Se}return M(M({},A),{schema:M(M({},N),{primaryKey:I,indexes:$,getIndexByKeyPath:function(Se){return(Se=L[Xs(Se)])&&Se[0]}}),count:function(Se){return A.count(tt(Se))},query:function(Se){return A.query(tt(Se))},openCursor:function(Se){var Qe=Se.query.index,Ne=Qe.keyTail,Xe=Qe.keyLength;return Qe.isVirtual?A.openCursor(tt(Se)).then(function(pt){return pt&&function je(pt){return Object.create(pt,{continue:{value:function(We){null!=We?pt.continue(Uf(We,Se.reverse?_.MAX_KEY:_.MIN_KEY,Ne)):Se.unique?pt.continue(pt.key.slice(0,Xe).concat(Se.reverse?_.MIN_KEY:_.MAX_KEY,Ne)):pt.continue()}},continuePrimaryKey:{value:function(We,it){pt.continuePrimaryKey(Uf(We,_.MAX_KEY,Ne),it)}},primaryKey:{get:function(){return pt.primaryKey}},key:{get:function(){var We=pt.key;return 1===Xe?We[0]:We.slice(0,Xe)}},value:{get:function(){return pt.value}}})}(pt)}):A.openCursor(Se)}})}})}};function $f(_,I,A,N){return A=A||{},N=N||"",fe(_).forEach(function(L){var $,J,ge;lt(I,L)?(J=I[L],"object"==typeof($=_[L])&&"object"==typeof J&&$&&J?(ge=W($))!==W(J)?A[N+L]=I[L]:"Object"===ge?$f($,J,A,N+L+"."):$!==J&&(A[N+L]=I[L]):$!==J&&(A[N+L]=I[L])):A[N+L]=void 0}),fe(I).forEach(function(L){lt(_,L)||(A[N+L]=I[L])}),A}function Hf(_,I){return"delete"===I.type?I.keys:I.keys||I.values.map(_.extractKey)}var Rb={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(_){return M(M({},_),{table:function(I){var A=_.table(I),N=A.schema.primaryKey;return M(M({},A),{mutate:function(L){var $=Zt.trans,J=$.table(I).hook,ge=J.deleting,ke=J.creating,Pe=J.updating;switch(L.type){case"add":if(ke.fire===oe)break;return $._promise("readwrite",function(){return tt(L)},!0);case"put":if(ke.fire===oe&&Pe.fire===oe)break;return $._promise("readwrite",function(){return tt(L)},!0);case"delete":if(ge.fire===oe)break;return $._promise("readwrite",function(){return tt(L)},!0);case"deleteRange":if(ge.fire===oe)break;return $._promise("readwrite",function(){return function Se(Qe,Ne,Ke){return A.query({trans:Qe,values:!1,query:{index:N,range:Ne},limit:Ke}).then(function(Xe){var je=Xe.result;return tt({type:"delete",keys:je,trans:Qe}).then(function(pt){return 0<pt.numFailures?Promise.reject(pt.failures[0]):je.length<Ke?{failures:[],numFailures:0,lastResult:void 0}:Se(Qe,M(M({},Ne),{lower:je[je.length-1],lowerOpen:!0}),Ke)})})}(L.trans,L.range,1e4)},!0)}return A.mutate(L);function tt(Se){var Qe,Ne,Ke,Xe=Zt.trans,je=Se.keys||Hf(N,Se);if(!je)throw new Error("Keys missing");return"delete"!==(Se="add"===Se.type||"put"===Se.type?M(M({},Se),{keys:je}):M({},Se)).type&&(Se.values=p([],Se.values,!0)),Se.keys&&(Se.keys=p([],Se.keys,!0)),Qe=A,Ke=je,("add"===(Ne=Se).type?Promise.resolve([]):Qe.getMany({trans:Ne.trans,keys:Ke,cache:"immutable"})).then(function(pt){var We=je.map(function(it,It){var Lt,qt,Vt,Kt=pt[It],Wt={onerror:null,onsuccess:null};return"delete"===Se.type?ge.fire.call(Wt,it,Kt,Xe):"add"===Se.type||void 0===Kt?(Lt=ke.fire.call(Wt,it,Se.values[It],Xe),null==it&&null!=Lt&&(Se.keys[It]=it=Lt,N.outbound||dt(Se.values[It],N.keyPath,it))):(Lt=$f(Kt,Se.values[It]),(qt=Pe.fire.call(Wt,Lt,it,Kt,Xe))&&(Vt=Se.values[It],Object.keys(qt).forEach(function(yt){lt(Vt,yt)?Vt[yt]=qt[yt]:dt(Vt,yt,qt[yt])}))),Wt});return A.mutate(Se).then(function(it){for(var It=it.failures,Lt=it.results,qt=it.numFailures,Vt=(it=it.lastResult,0);Vt<je.length;++Vt){var Kt=(Lt||je)[Vt],Wt=We[Vt];null==Kt?Wt.onerror&&Wt.onerror(It[Vt]):Wt.onsuccess&&Wt.onsuccess("put"===Se.type&&pt[Vt]?Se.values[Vt]:Kt)}return{failures:It,results:Lt,numFailures:qt,lastResult:it}}).catch(function(it){return We.forEach(function(It){return It.onerror&&It.onerror(it)}),Promise.reject(it)})})}}})}})}};function Mb(_,I,A){try{if(!I||I.keys.length<_.length)return null;for(var N=[],L=0,$=0;L<I.keys.length&&$<_.length;++L)0===Kn(I.keys[L],_[$])&&(N.push(A?ce(I.values[L]):I.values[L]),++$);return N.length===_.length?N:null}catch{return null}}var Ob={stack:"dbcore",level:-1,create:function(_){return{table:function(I){var A=_.table(I);return M(M({},A),{getMany:function(N){if(!N.cache)return A.getMany(N);var L=Mb(N.keys,N.trans._cache,"clone"===N.cache);return L?Pt.resolve(L):A.getMany(N).then(function($){return N.trans._cache={keys:N.keys,values:"clone"===N.cache?ce($):$},$})},mutate:function(N){return"add"!==N.type&&(N.trans._cache=null),A.mutate(N)}})}}}};function Ug(_,I){return"readonly"===_.trans.mode&&!!_.subscr&&!_.trans.explicit&&"disabled"!==_.trans.db._options.cache&&!I.schema.primaryKey.outbound}function zf(_,I){switch(_){case"query":return I.values&&!I.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Pb={stack:"dbcore",level:0,name:"Observability",create:function(_){var I=_.schema.name,A=new ti(_.MIN_KEY,_.MAX_KEY);return M(M({},_),{transaction:function(N,L,$){if(Zt.subscr&&"readonly"!==L)throw new q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Zt.querier));return _.transaction(N,L,$)},table:function(N){var L=_.table(N),$=L.schema,J=$.primaryKey,Se=$.indexes,ge=J.extractKey,ke=J.outbound,Pe=J.autoIncrement&&Se.filter(function(Ne){return Ne.compound&&Ne.keyPath.includes(J.keyPath)}),tt=M(M({},L),{mutate:function(Ne){function Ke(yt){return yt="idb://".concat(I,"/").concat(N,"/").concat(yt),it[yt]||(it[yt]=new ti)}var Xe,je,pt,We=Ne.trans,it=Ne.mutatedParts||(Ne.mutatedParts={}),It=Ke(""),Lt=Ke(":dels"),qt=Ne.type,Vt=(Wt="deleteRange"===Ne.type?[Ne.range]:"delete"===Ne.type?[Ne.keys]:Ne.values.length<50?[Hf(J,Ne).filter(function(yt){return yt}),Ne.values]:[])[0],Kt=Wt[1],Wt=Ne.trans._cache;return se(Vt)?(It.addKeys(Vt),(Wt="delete"===qt||Vt.length===Kt.length?Mb(Vt,Wt):null)||Lt.addKeys(Vt),(Wt||Kt)&&(Xe=Ke,je=Wt,pt=Kt,$.indexes.forEach(function(yt){var An=Xe(yt.name||"");function Nn(Ln){return null!=Ln?yt.extractKey(Ln):null}function Dn(Ln){return yt.multiEntry&&se(Ln)?Ln.forEach(function(Zs){return An.addKey(Zs)}):An.addKey(Ln)}(je||pt).forEach(function(Ln,si){var $n=je&&Nn(je[si]);0!==Kn($n,si=pt&&Nn(pt[si]))&&(null!=$n&&Dn($n),null!=si&&Dn(si))})}))):Vt?(Lt.add(Kt={from:Vt.lower,to:Vt.upper}),It.add(Kt)):(It.add(A),Lt.add(A),$.indexes.forEach(function(yt){return Ke(yt.name).add(A)})),L.mutate(Ne).then(function(yt){return!Vt||"add"!==Ne.type&&"put"!==Ne.type||(It.addKeys(yt.results),Pe&&Pe.forEach(function(An){var Nn=Ne.values.map(function(Ln){return An.extractKey(Ln)}),Dn=An.keyPath.findIndex(function(Ln){return Ln===J.keyPath});yt.results.forEach(function(Ln){return Nn[Dn]=Ln}),Ke(An.name).addKeys(Nn)})),We.mutatedParts=Qr(We.mutatedParts||{},it),yt})}}),Qe={get:function(Ne){return[J,new ti(Ne.key)]},getMany:function(Ne){return[J,(new ti).addKeys(Ne.keys)]},count:Se=function(Ke){var Xe;return[Ke=(Xe=Ke.query).index,new ti(null!==(Ke=(Xe=Xe.range).lower)&&void 0!==Ke?Ke:_.MIN_KEY,null!==(Xe=Xe.upper)&&void 0!==Xe?Xe:_.MAX_KEY)]},query:Se,openCursor:Se};return fe(Qe).forEach(function(Ne){tt[Ne]=function(Ke){var je=!!(Xe=Zt.subscr),pt=Ug(Zt,L)&&zf(Ne,Ke)?Ke.obsSet={}:Xe;if(je){var We=function(Kt){return Kt="idb://".concat(I,"/").concat(N,"/").concat(Kt),pt[Kt]||(pt[Kt]=new ti)},it=We(""),It=We(":dels"),Xe=(je=(Xe=Qe[Ne](Ke))[0],Xe[1]);if(("query"===Ne&&je.isPrimaryKey&&!Ke.values?It:We(je.name||"")).add(Xe),!je.isPrimaryKey){if("count"!==Ne){var Lt="query"===Ne&&ke&&Ke.values&&L.query(M(M({},Ke),{values:!1}));return L[Ne].apply(this,arguments).then(function(Kt){if("query"===Ne){if(ke&&Ke.values)return Lt.then(function(Nn){return it.addKeys(Nn=Nn.result),Kt});var Wt=Ke.values?Kt.result.map(ge):Kt.result;(Ke.values?it:It).addKeys(Wt)}else if("openCursor"===Ne){var yt=Kt,An=Ke.values;return yt&&Object.create(yt,{key:{get:function(){return It.addKey(yt.primaryKey),yt.key}},primaryKey:{get:function(){var Nn=yt.primaryKey;return It.addKey(Nn),Nn}},value:{get:function(){return An&&it.addKey(yt.primaryKey),yt.value}}})}return Kt})}It.add(A)}}return L[Ne].apply(this,arguments)}}),tt}})}};function Co(_,I,A){return 0===A.numFailures?I:"deleteRange"===I.type||A.numFailures===(I.keys?I.keys.length:"values"in I&&I.values?I.values.length:1)?null:(I=M({},I),se(I.keys)&&(I.keys=I.keys.filter(function(L,$){return!($ in A.failures)})),"values"in I&&se(I.values)&&(I.values=I.values.filter(function(L,$){return!($ in A.failures)})),I)}function vn(_,I){return A=_,(void 0===(N=I).lower||(N.lowerOpen?0<Kn(A,N.lower):0<=Kn(A,N.lower)))&&(void 0===I.upper||(I.upperOpen?Kn(_,I.upper)<0:Kn(_,I.upper)<=0));var A,N}function $g(_,I,Qe,N,L,$){if(!Qe||0===Qe.length)return _;var J=I.query.index,ge=J.multiEntry,ke=I.query.range,Pe=N.schema.primaryKey.extractKey,tt=J.extractKey,Se=(J.lowLevelIndex||J).extractKey;return(Qe=Qe.reduce(function(Ne,Ke){var Xe=Ne,je=[];if("add"===Ke.type||"put"===Ke.type)for(var pt=new ti,We=Ke.values.length-1;0<=We;--We){var it,It=Ke.values[We],Lt=Pe(It);pt.hasKey(Lt)||(it=tt(It),(ge&&se(it)?it.some(function(Wt){return vn(Wt,ke)}):vn(it,ke))&&(pt.addKey(Lt),je.push(It)))}switch(Ke.type){case"add":Xe=Ne.concat(I.values?je:je.map(function(yt){return Pe(yt)}));break;case"put":var qt=(new ti).addKeys(Ke.values.map(function(yt){return Pe(yt)}));Xe=Ne.filter(function(yt){return!qt.hasKey(I.values?Pe(yt):yt)}).concat(I.values?je:je.map(function(yt){return Pe(yt)}));break;case"delete":var Vt=(new ti).addKeys(Ke.keys);Xe=Ne.filter(function(yt){return!Vt.hasKey(I.values?Pe(yt):yt)});break;case"deleteRange":var Kt=Ke.range;Xe=Ne.filter(function(yt){return!vn(Pe(yt),Kt)})}return Xe},_))===_?_:(Qe.sort(function(Ne,Ke){return Kn(Se(Ne),Se(Ke))||Kn(Pe(Ne),Pe(Ke))}),I.limit&&I.limit<1/0&&(Qe.length>I.limit?Qe.length=I.limit:_.length===I.limit&&Qe.length<I.limit&&(L.dirty=!0)),$?Object.freeze(Qe):Qe)}function br(_,I){return 0===Kn(_.lower,I.lower)&&0===Kn(_.upper,I.upper)&&!!_.lowerOpen==!!I.lowerOpen&&!!_.upperOpen==!!I.upperOpen}var Kf={stack:"dbcore",level:0,name:"Cache",create:function(_){var I=_.schema.name;return M(M({},_),{transaction:function(A,N,L){var $,J,ge=_.transaction(A,N,L);return"readwrite"===N&&(J=($=new AbortController).signal,ge.addEventListener("abort",(L=function(ke){return function(){if($.abort(),"readwrite"===N){for(var Pe=new Set,tt=0,Se=A;tt<Se.length;tt++){var Qe=Se[tt],Ne=Lc["idb://".concat(I,"/").concat(Qe)];if(Ne){var Ke=_.table(Qe),Xe=Ne.optimisticOps.filter(function(An){return An.trans===ge});if(ge._explicit&&ke&&ge.mutatedParts)for(var je=0,pt=Object.values(Ne.queries.query);je<pt.length;je++)for(var We=0,it=(qt=pt[je]).slice();We<it.length;We++)vl((Vt=it[We]).obsSet,ge.mutatedParts)&&(Rt(qt,Vt),Vt.subscribers.forEach(function(An){return Pe.add(An)}));else if(0<Xe.length){Ne.optimisticOps=Ne.optimisticOps.filter(function(An){return An.trans!==ge});for(var It=0,Lt=Object.values(Ne.queries.query);It<Lt.length;It++)for(var qt,Vt,Kt,Wt=0,yt=(qt=Lt[It]).slice();Wt<yt.length;Wt++)null!=(Vt=yt[Wt]).res&&ge.mutatedParts&&(ke&&!Vt.dirty?(Kt=Object.isFrozen(Vt.res),Kt=$g(Vt.res,Vt.req,Xe,Ke,Vt,Kt),Vt.dirty?(Rt(qt,Vt),Vt.subscribers.forEach(function(An){return Pe.add(An)})):Kt!==Vt.res&&(Vt.res=Kt,Vt.promise=Pt.resolve({result:Kt}))):(Vt.dirty&&Rt(qt,Vt),Vt.subscribers.forEach(function(An){return Pe.add(An)})))}}}Pe.forEach(function(An){return An()})}}})(!1),{signal:J}),ge.addEventListener("error",L(!1),{signal:J}),ge.addEventListener("complete",L(!0),{signal:J})),ge},table:function(A){var N=_.table(A),L=N.schema.primaryKey;return M(M({},N),{mutate:function($){var J=Zt.trans;if(L.outbound||"disabled"===J.db._options.cache||J.explicit)return N.mutate($);var ge=Lc["idb://".concat(I,"/").concat(A)];return ge?(J=N.mutate($),"add"!==$.type&&"put"!==$.type||!(50<=$.values.length||Hf(L,$).some(function(ke){return null==ke}))?(ge.optimisticOps.push($),$.mutatedParts&&bn($.mutatedParts),J.then(function(ke){0<ke.numFailures&&(Rt(ge.optimisticOps,$),(ke=Co(0,$,ke))&&ge.optimisticOps.push(ke),$.mutatedParts&&bn($.mutatedParts))}),J.catch(function(){Rt(ge.optimisticOps,$),$.mutatedParts&&bn($.mutatedParts)})):J.then(function(ke){var Pe=Co(0,M(M({},$),{values:$.values.map(function(Ne,Se){var Qe;return dt(Ne=null!==(Qe=L.keyPath)&&void 0!==Qe&&Qe.includes(".")?ce(Ne):M({},Ne),L.keyPath,ke.results[Se]),Ne})}),ke);ge.optimisticOps.push(Pe),queueMicrotask(function(){return $.mutatedParts&&bn($.mutatedParts)})}),J):N.mutate($)},query:function($){if(!Ug(Zt,N)||!zf("query",$))return N.query($);var J="immutable"===(null===(Pe=Zt.trans)||void 0===Pe?void 0:Pe.db._options.cache),ge=(Se=Zt).requery,ke=Se.signal,Pe=function(Ke,Xe,je,pt){var We=Lc["idb://".concat(Ke,"/").concat(Xe)];if(!We)return[];if(!(Xe=We.queries.query))return[null,!1,We,null];var it=Xe[(pt.query?pt.query.index.name:null)||""];if(!it)return[null,!1,We,null];var It=it.find(function(Lt){return Lt.req.limit===pt.limit&&Lt.req.values===pt.values&&br(Lt.req.query.range,pt.query.range)});return It?[It,!0,We,it]:[it.find(function(Lt){return("limit"in Lt.req?Lt.req.limit:1/0)>=pt.limit&&(!pt.values||Lt.req.values)&&function no(_,I){return function(A,N,L,$){if(void 0===A)return void 0!==N?-1:0;if(void 0===N)return 1;if(0===(N=Kn(A,N))){if(L&&$)return 0;if(L)return 1;if($)return-1}return N}(_.lower,I.lower,_.lowerOpen,I.lowerOpen)<=0&&0<=function(A,N,L,$){if(void 0===A)return void 0!==N?1:0;if(void 0===N)return-1;if(0===(N=Kn(A,N))){if(L&&$)return 0;if(L)return-1;if($)return 1}return N}(_.upper,I.upper,_.upperOpen,I.upperOpen)}(Lt.req.query.range,pt.query.range)}),!1,We,it]}(I,A,0,$),tt=Pe[0],Se=Pe[1],Qe=Pe[2],Ne=Pe[3];return tt&&Se?tt.obsSet=$.obsSet:(Se=N.query($).then(function(Ke){var Xe=Ke.result;if(tt&&(tt.res=Xe),J){for(var je=0,pt=Xe.length;je<pt;++je)Object.freeze(Xe[je]);Object.freeze(Xe)}else Ke.result=ce(Xe);return Ke}).catch(function(Ke){return Ne&&tt&&Rt(Ne,tt),Promise.reject(Ke)}),tt={obsSet:$.obsSet,promise:Se,subscribers:new Set,type:"query",req:$,dirty:!1},Ne?Ne.push(tt):(Ne=[tt],(Qe=Qe||(Lc["idb://".concat(I,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[$.query.index.name||""]=Ne)),function Vc(_,I,A,N){_.subscribers.add(A),N.addEventListener("abort",function(){var L,$;_.subscribers.delete(A),0===_.subscribers.size&&(L=_,$=I,setTimeout(function(){0===L.subscribers.size&&Rt($,L)},3e3))})}(tt,Ne,ge,ke),tt.promise.then(function(Ke){return{result:$g(Ke.result,$,Qe?.optimisticOps,N,tt,J)}})}})}})}};function or(_,I){return new Proxy(_,{get:function(A,N,L){return"db"===N?I:Reflect.get(A,N,L)}})}var Ys=(xr.prototype.version=function(_){if(isNaN(_)||_<.1)throw new q.Type("Given version is not a positive number");if(_=Math.round(10*_)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,_);var I=this._versions,A=I.filter(function(N){return N._cfg.version===_})[0];return A||(A=new this.Version(_),I.push(A),I.sort(kc),A.stores({}),this._state.autoSchema=!1,A)},xr.prototype._whenReady=function(_){var I=this;return this.idbdb&&(this._state.openComplete||Zt.letThrough||this._vip)?_():new Pt(function(A,N){if(I._state.openComplete)return N(new q.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return void N(new q.DatabaseClosed);I.open().catch(oe)}I._state.dbReadyPromise.then(A,N)}).then(_)},xr.prototype.use=function(_){var I=_.stack,A=_.create,N=_.level,L=_.name;return L&&this.unuse({stack:I,name:L}),(_=this._middlewares[I]||(this._middlewares[I]=[])).push({stack:I,create:A,level:N??10,name:L}),_.sort(function($,J){return $.level-J.level}),this},xr.prototype.unuse=function(_){var I=_.stack,A=_.name,N=_.create;return I&&this._middlewares[I]&&(this._middlewares[I]=this._middlewares[I].filter(function(L){return N?L.create!==N:!!A&&L.name!==A})),this},xr.prototype.open=function(){var _=this;return ii(pr,function(){return xb(_)})},xr.prototype._close=function(){var _=this._state,I=zs.indexOf(this);if(0<=I&&zs.splice(I,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}_.isBeingOpened||(_.dbReadyPromise=new Pt(function(A){_.dbReadyResolve=A}),_.openCanceller=new Pt(function(A,N){_.cancelOpen=N}))},xr.prototype.close=function(A){var I=(void 0===A?{disableAutoOpen:!0}:A).disableAutoOpen;A=this._state,I?(A.isBeingOpened&&A.cancelOpen(new q.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new q.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},xr.prototype.delete=function(_){var I=this;void 0===_&&(_={disableAutoOpen:!0});var A=0<arguments.length&&"object"!=typeof arguments[0],N=this._state;return new Pt(function(L,$){function J(){I.close(_);var ge=I._deps.indexedDB.deleteDatabase(I.name);ge.onsuccess=gn(function(){var ke,Pe,tt;Pe=I.name,tt=(ke=I._deps).indexedDB,ke=ke.IDBKeyRange,Lo(tt)||Pe===As||Qa(tt,ke).delete(Pe).catch(oe),L()}),ge.onerror=ht($),ge.onblocked=I._fireOnBlocked}if(A)throw new q.InvalidArgument("Invalid closeOptions argument to db.delete()");N.isBeingOpened?N.dbReadyPromise.then(J):J()})},xr.prototype.backendDB=function(){return this.idbdb},xr.prototype.isOpen=function(){return null!==this.idbdb},xr.prototype.hasBeenClosed=function(){var _=this._state.dbOpenError;return _&&"DatabaseClosed"===_.name},xr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},xr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(xr.prototype,"tables",{get:function(){var _=this;return fe(this._allTables).map(function(I){return _._allTables[I]})},enumerable:!1,configurable:!0}),xr.prototype.transaction=function(){var _=function(I,A,N){var L=arguments.length;if(L<2)throw new q.InvalidArgument("Too few arguments");for(var $=new Array(L-1);--L;)$[L-1]=arguments[L];return N=$.pop(),[I,Ie($),N]}.apply(this,arguments);return this._transaction.apply(this,_)},xr.prototype._transaction=function(_,I,A){var N=this,L=Zt.trans;L&&L.db===this&&-1===_.indexOf("!")||(L=null);var $,J,ge=-1!==_.indexOf("?");_=_.replace("!","").replace("?","");try{if(J=I.map(function(Pe){if("string"!=typeof(Pe=Pe instanceof N.Table?Pe.name:Pe))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Pe}),"r"==_||_===ma)$=ma;else{if("rw"!=_&&_!=ul)throw new q.InvalidArgument("Invalid transaction mode: "+_);$=ul}if(L){if(L.mode===ma&&$===ul){if(!ge)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");L=null}L&&J.forEach(function(Pe){if(L&&-1===L.storeNames.indexOf(Pe)){if(!ge)throw new q.SubTransaction("Table "+Pe+" not included in parent transaction.");L=null}}),ge&&L&&!L.active&&(L=null)}}catch(Pe){return L?L._promise(null,function(tt,Se){Se(Pe)}):yr(Pe)}var ke=function Pe(tt,Se,Qe,Ne,Ke){return Pt.resolve().then(function(){var Xe=Zt.transless||Zt,je=tt._createTransaction(Se,Qe,tt._dbSchema,Ne);if(je.explicit=!0,Xe={trans:je,transless:Xe},Ne)je.idbtrans=Ne.idbtrans;else try{je.create(),je.idbtrans._explicit=!0,tt._state.PR1398_maxLoop=3}catch(it){return it.name===H.InvalidState&&tt.isOpen()&&0<--tt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),tt.close({disableAutoOpen:!1}),tt.open().then(function(){return Pe(tt,Se,Qe,null,Ke)})):yr(it)}var pt,We=pn(Ke);return We&&Ds(),Xe=Pt.follow(function(){var it;(pt=Ke.call(je,je))&&(We?(it=Ci.bind(null,null),pt.then(it,it)):"function"==typeof pt.next&&"function"==typeof pt.throw&&(pt=Kd(pt)))},Xe),(pt&&"function"==typeof pt.then?Pt.resolve(pt).then(function(it){return je.active?it:yr(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Xe.then(function(){return pt})).then(function(it){return Ne&&je._resolve(),je._completion.then(function(){return it})}).catch(function(it){return je._reject(it),yr(it)})})}.bind(null,this,$,J,L,A);return L?L._promise($,ke,"lock"):Zt.trans?ii(Zt.transless,function(){return N._whenReady(ke)}):this._whenReady(ke)},xr.prototype.table=function(_){if(!lt(this._allTables,_))throw new q.InvalidTable("Table ".concat(_," does not exist"));return this._allTables[_]},xr);function xr(_,I){var A=this;this._middlewares={},this.verno=0;var N=xr.dependencies;this._options=I=M({addons:xr.addons,autoOpen:!0,indexedDB:N.indexedDB,IDBKeyRange:N.IDBKeyRange,cache:"cloned"},I),this._deps={indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange},N=I.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var L,$,J,ge,ke,Pe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:oe,dbReadyPromise:null,cancelOpen:oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:I.autoOpen};Pe.dbReadyPromise=new Pt(function(Se){Pe.dbReadyResolve=Se}),Pe.openCanceller=new Pt(function(Se,Qe){Pe.cancelOpen=Qe}),this._state=Pe,this.name=_,this.on=Ws(this,"populate","blocked","versionchange","close",{ready:[ln,oe]}),this.on.ready.subscribe=Ae(this.on.ready.subscribe,function(Se){return function(Qe,Ne){xr.vip(function(){var Ke,Xe=A._state;Xe.openComplete?(Xe.dbOpenError||Pt.resolve().then(Qe),Ne&&Se(Qe)):Xe.onReadyBeingFired?(Xe.onReadyBeingFired.push(Qe),Ne&&Se(Qe)):(Se(Qe),Ke=A,Ne||Se(function je(){Ke.on.ready.unsubscribe(Qe),Ke.on.ready.unsubscribe(je)}))})}}),this.Collection=(L=this,Pc(Bg.prototype,function(pt,je){this.db=L;var Ne=Ff,Ke=null;if(je)try{Ne=je()}catch(We){Ke=We}var Xe=pt._ctx;this._ctx={table:je=Xe.table,index:Xe.index,isPrimKey:!Xe.index||je.schema.primKey.keyPath&&Xe.index===je.schema.primKey.name,range:Ne,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Ke,or:Xe.or,valueMapper:(pt=je.hook.reading.fire)!==Je?pt:null}})),this.Table=($=this,Pc(zi.prototype,function(Se,Qe,Ne){this.db=$,this._tx=Ne,this.name=Se,this.schema=Qe,this.hook=$._allTables[Se]?$._allTables[Se].hook:Ws(null,{creating:[Mt,oe],reading:[Ct,Je],updating:[on,oe],deleting:[jt,oe]})})),this.Transaction=(J=this,Pc(_r.prototype,function(Se,Qe,Ne,Ke,Xe){var je=this;this.db=J,this.mode=Se,this.storeNames=Qe,this.schema=Ne,this.chromeTransactionDurability=Ke,this.idbtrans=null,this.on=Ws(this,"complete","error","abort"),this.parent=Xe||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pt(function(pt,We){je._resolve=pt,je._reject=We}),this._completion.then(function(){je.active=!1,je.on.complete.fire()},function(pt){var We=je.active;return je.active=!1,je.on.error.fire(pt),je.parent?je.parent._reject(pt):We&&je.idbtrans&&je.idbtrans.abort(),yr(pt)})})),this.Version=(ge=this,Pc(os.prototype,function(Se){this.db=ge,this._cfg={version:Se,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ke=this,Pc(Re.prototype,function(Se,Qe,Ne){if(this.db=ke,this._ctx={table:Se,index:":id"===Qe?null:Qe,or:Ne},this._cmp=this._ascending=Kn,this._descending=function(Ke,Xe){return Kn(Xe,Ke)},this._max=function(Ke,Xe){return 0<Kn(Ke,Xe)?Ke:Xe},this._min=function(Ke,Xe){return Kn(Ke,Xe)<0?Ke:Xe},this._IDBKeyRange=ke._deps.IDBKeyRange,!this._IDBKeyRange)throw new q.MissingAPI})),this.on("versionchange",function(Se){0<Se.newVersion?console.warn("Another connection wants to upgrade database '".concat(A.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(A.name,"'. Closing db now to resume the delete request.")),A.close({disableAutoOpen:!1})}),this.on("blocked",function(Se){!Se.newVersion||Se.newVersion<Se.oldVersion?console.warn("Dexie.delete('".concat(A.name,"') was blocked")):console.warn("Upgrade '".concat(A.name,"' blocked by other connection holding version ").concat(Se.oldVersion/10))}),this._maxKey=qs(I.IDBKeyRange),this._createTransaction=function(Se,Qe,Ne,Ke){return new A.Transaction(Se,Qe,Ne,A._options.chromeTransactionDurability,Ke)},this._fireOnBlocked=function(Se){A.on("blocked").fire(Se),zs.filter(function(Qe){return Qe.name===A.name&&Qe!==A&&!Qe._state.vcFired}).map(function(Qe){return Qe.on("versionchange").fire(Se)})},this.use(Ob),this.use(Kf),this.use(Pb),this.use(Xa),this.use(Rb);var tt=new Proxy(this,{get:function(Se,Qe,Ne){if("_vip"===Qe)return!0;if("table"===Qe)return function(Xe){return or(A.table(Xe),tt)};var Ke=Reflect.get(Se,Qe,Ne);return Ke instanceof zi?or(Ke,tt):"tables"===Qe?Ke.map(function(Xe){return or(Xe,tt)}):"_createTransaction"===Qe?function(){return or(Ke.apply(this,arguments),tt)}:Ke}});this.vip=tt,N.forEach(function(Se){return Se(A)})}ro=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";var Ea,Wd=(_l.prototype.subscribe=function(_,I,A){return this._subscribe(_&&"function"!=typeof _?_:{next:_,error:I,complete:A})},_l.prototype[ro]=function(){return this},_l);function _l(_){this._subscribe=_}try{Ea={indexedDB:ie.indexedDB||ie.mozIndexedDB||ie.webkitIndexedDB||ie.msIndexedDB,IDBKeyRange:ie.IDBKeyRange||ie.webkitIDBKeyRange}}catch{Ea={indexedDB:null,IDBKeyRange:null}}function wu(_){var I,A=!1,N=new Wd(function(L){var J,$=pn(_),ge=!1,ke={},Pe={},tt={get closed(){return ge},unsubscribe:function(){ge||(ge=!0,J&&J.abort(),Se&&Yn.storagemutated.unsubscribe(Ne))}};L.start&&L.start(tt);var Se=!1,Qe=function(){return Ss(Ke)},Ne=function(Xe){Qr(ke,Xe),vl(Pe,ke)&&Qe()},Ke=function(){var Xe,je,pt;!ge&&Ea.indexedDB&&(ke={},Xe={},J&&J.abort(),J=new AbortController,pt=function(We){var it=pi();try{$&&Ds();var It=gr(_,We);return It=$?It.finally(Ci):It}finally{it&&Di()}}(je={subscr:Xe,signal:J.signal,requery:Qe,querier:_,trans:null}),Promise.resolve(pt).then(function(We){A=!0,I=We,ge||je.signal.aborted||(ke={},function(it){for(var It in it)if(lt(it,It))return;return 1}(Pe=Xe)||Se||(Yn(Sn,Ne),Se=!0),Ss(function(){return!ge&&L.next&&L.next(We)}))},function(We){A=!1,["DatabaseClosedError","AbortError"].includes(We?.name)||ge||Ss(function(){ge||L.error&&L.error(We)})}))};return setTimeout(Qe,0),tt});return N.hasValue=function(){return A},N.getValue=function(){return I},N}var Vo=Ys;function Bc(_){var I=ss;try{ss=!0,Yn.storagemutated.fire(_),Eu(_,!0)}finally{ss=I}}qe(Vo,M(M({},re),{delete:function(_){return new Vo(_,{addons:[]}).delete()},exists:function(_){return new Vo(_,{addons:[]}).open().then(function(I){return I.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(_){try{return A=(I=Vo.dependencies).indexedDB,I=I.IDBKeyRange,(Lo(A)?Promise.resolve(A.databases()).then(function(N){return N.map(function(L){return L.name}).filter(function(L){return L!==As})}):Qa(A,I).toCollection().primaryKeys()).then(_)}catch{return yr(new q.MissingAPI)}var I,A},defineClass:function(){return function(_){te(this,_)}},ignoreTransaction:function(_){return Zt.trans?ii(Zt.transless,_):_()},vip:Hd,async:function(_){return function(){try{var I=Kd(_.apply(this,arguments));return I&&"function"==typeof I.then?I:Pt.resolve(I)}catch(A){return yr(A)}}},spawn:function(_,I,A){try{var N=Kd(_.apply(A,I||[]));return N&&"function"==typeof N.then?N:Pt.resolve(N)}catch(L){return yr(L)}},currentTransaction:{get:function(){return Zt.trans||null}},waitFor:function(_,I){return I=Pt.resolve("function"==typeof _?Vo.ignoreTransaction(_):_).timeout(I||6e4),Zt.trans?Zt.trans.waitFor(I):I},Promise:Pt,debug:{get:function(){return $t},set:function(_){hn(_)}},derive:Ve,extend:te,props:qe,override:Ae,Events:Ws,on:Yn,liveQuery:wu,extendObservabilitySet:Qr,getByKeyPath:Be,setByKeyPath:dt,delByKeyPath:function(_,I){"string"==typeof I?dt(_,I,void 0):"length"in I&&[].map.call(I,function(A){dt(_,A,void 0)})},shallowClone:Te,deepClone:ce,getObjectDiff:$f,cmp:Kn,asap:pe,minKey:-1/0,addons:[],connections:zs,errnames:H,dependencies:Ea,cache:Lc,semVer:"4.0.8",version:"4.0.8".split(".").map(function(_){return parseInt(_)}).reduce(function(_,I,A){return _+I/Math.pow(10,2*A)})})),Vo.maxKey=qs(Vo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Yn(Sn,function(_){ss||(_=new CustomEvent(Bn,{detail:_}),ss=!0,dispatchEvent(_),ss=!1)}),addEventListener(Bn,function(_){_=_.detail,ss||Bc(_)}));var wa,ss=!1,In=function(){};return typeof BroadcastChannel<"u"&&((In=function(){(wa=new BroadcastChannel(Bn)).onmessage=function(_){return _.data&&Bc(_.data)}})(),"function"==typeof wa.unref&&wa.unref(),Yn(Sn,function(_){ss||wa.postMessage(_)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(_){if(!Ys.disableBfCache&&_.persisted){$t&&console.debug("Dexie: handling persisted pagehide"),wa?.close();for(var I=0,A=zs;I<A.length;I++)A[I].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(_){!Ys.disableBfCache&&_.persisted&&($t&&console.debug("Dexie: handling persisted pageshow"),In(),Bc({all:new ti(-1/0,[[]])}))})),Pt.rejectionMapper=function(_,I){return!_||_ instanceof Ge||_ instanceof TypeError||_ instanceof SyntaxError||!_.name||!X[_.name]?_:(I=new X[_.name](I||_.message,_),"stack"in _&&he(I,"stack",{get:function(){return this.inner.stack}}),I)},hn($t),M(Ys,Object.freeze({__proto__:null,Dexie:Ys,liveQuery:wu,Entity:ns,cmp:Kn,PropModSymbol:ko,PropModification:Ga,replacePrefix:function(_,I){return new Ga({replacePrefix:[_,I]})},add:function(_){return new Ga({add:_})},remove:function(_){return new Ga({remove:_})},default:Ys,RangeSet:ti,mergeRanges:hr,rangesOverlap:Vf}),{default:Ys}),Ys}()},4412:(Bt,nt,M)=>{"use strict";M.d(nt,{t:()=>ie});var p=M(1413);class ie extends p.B{constructor(se){super(),this._value=se}get value(){return this.getValue()}_subscribe(se){const te=super._subscribe(se);return!te.closed&&se.next(this._value),te}getValue(){const{hasError:se,thrownError:te,_value:ae}=this;if(se)throw te;return this._throwIfClosed(),ae}next(se){super.next(this._value=se)}}},1985:(Bt,nt,M)=>{"use strict";M.d(nt,{c:()=>lt});var p=M(7707),ie=M(8359),fe=M(3494),se=M(1203),te=M(1026),ae=M(8071),de=M(9786);let lt=(()=>{class Ve{constructor(ee){ee&&(this._subscribe=ee)}lift(ee){const Ue=new Ve;return Ue.source=this,Ue.operator=ee,Ue}subscribe(ee,Ue,Ae){const Oe=function he(Ve){return Ve&&Ve instanceof p.vU||function $e(Ve){return Ve&&(0,ae.T)(Ve.next)&&(0,ae.T)(Ve.error)&&(0,ae.T)(Ve.complete)}(Ve)&&(0,ie.Uv)(Ve)}(ee)?ee:new p.Ms(ee,Ue,Ae);return(0,de.Y)(()=>{const{operator:pe,source:Be}=this;Oe.add(pe?pe.call(Oe,Be):Be?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(ee){try{return this._subscribe(ee)}catch(Ue){ee.error(Ue)}}forEach(ee,Ue){return new(Ue=qe(Ue))((Ae,Oe)=>{const pe=new p.Ms({next:Be=>{try{ee(Be)}catch(dt){Oe(dt),pe.unsubscribe()}},error:Oe,complete:Ae});this.subscribe(pe)})}_subscribe(ee){var Ue;return null===(Ue=this.source)||void 0===Ue?void 0:Ue.subscribe(ee)}[fe.s](){return this}pipe(...ee){return(0,se.m)(ee)(this)}toPromise(ee){return new(ee=qe(ee))((Ue,Ae)=>{let Oe;this.subscribe(pe=>Oe=pe,pe=>Ae(pe),()=>Ue(Oe))})}}return Ve.create=Me=>new Ve(Me),Ve})();function qe(Ve){var Me;return null!==(Me=Ve??te.$.Promise)&&void 0!==Me?Me:Promise}},1413:(Bt,nt,M)=>{"use strict";M.d(nt,{B:()=>de});var p=M(1985),ie=M(8359);const se=(0,M(1853).L)(qe=>function(){qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=M(7908),ae=M(9786);let de=(()=>{class qe extends p.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(he){const Ve=new lt(this,this);return Ve.operator=he,Ve}_throwIfClosed(){if(this.closed)throw new se}next(he){(0,ae.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ve of this.currentObservers)Ve.next(he)}})}error(he){(0,ae.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=he;const{observers:Ve}=this;for(;Ve.length;)Ve.shift().error(he)}})}complete(){(0,ae.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:he}=this;for(;he.length;)he.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var he;return(null===(he=this.observers)||void 0===he?void 0:he.length)>0}_trySubscribe(he){return this._throwIfClosed(),super._trySubscribe(he)}_subscribe(he){return this._throwIfClosed(),this._checkFinalizedStatuses(he),this._innerSubscribe(he)}_innerSubscribe(he){const{hasError:Ve,isStopped:Me,observers:ee}=this;return Ve||Me?ie.Kn:(this.currentObservers=null,ee.push(he),new ie.yU(()=>{this.currentObservers=null,(0,te.o)(ee,he)}))}_checkFinalizedStatuses(he){const{hasError:Ve,thrownError:Me,isStopped:ee}=this;Ve?he.error(Me):ee&&he.complete()}asObservable(){const he=new p.c;return he.source=this,he}}return qe.create=($e,he)=>new lt($e,he),qe})();class lt extends de{constructor($e,he){super(),this.destination=$e,this.source=he}next($e){var he,Ve;null===(Ve=null===(he=this.destination)||void 0===he?void 0:he.next)||void 0===Ve||Ve.call(he,$e)}error($e){var he,Ve;null===(Ve=null===(he=this.destination)||void 0===he?void 0:he.error)||void 0===Ve||Ve.call(he,$e)}complete(){var $e,he;null===(he=null===($e=this.destination)||void 0===$e?void 0:$e.complete)||void 0===he||he.call($e)}_subscribe($e){var he,Ve;return null!==(Ve=null===(he=this.source)||void 0===he?void 0:he.subscribe($e))&&void 0!==Ve?Ve:ie.Kn}}},7707:(Bt,nt,M)=>{"use strict";M.d(nt,{Ms:()=>Ae,vU:()=>Ve});var p=M(8071),ie=M(8359),fe=M(1026),se=M(5334),te=M(5343);const ae=qe("C",void 0,void 0);function qe(Te,He,Ie){return{kind:Te,value:He,error:Ie}}var $e=M(9270),he=M(9786);class Ve extends ie.yU{constructor(He){super(),this.isStopped=!1,He?(this.destination=He,(0,ie.Uv)(He)&&He.add(this)):this.destination=dt}static create(He,Ie,ct){return new Ae(He,Ie,ct)}next(He){this.isStopped?Be(function lt(Te){return qe("N",Te,void 0)}(He),this):this._next(He)}error(He){this.isStopped?Be(function de(Te){return qe("E",void 0,Te)}(He),this):(this.isStopped=!0,this._error(He))}complete(){this.isStopped?Be(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(He){this.destination.next(He)}_error(He){try{this.destination.error(He)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Me=Function.prototype.bind;function ee(Te,He){return Me.call(Te,He)}class Ue{constructor(He){this.partialObserver=He}next(He){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(He)}catch(ct){Oe(ct)}}error(He){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(He)}catch(ct){Oe(ct)}else Oe(He)}complete(){const{partialObserver:He}=this;if(He.complete)try{He.complete()}catch(Ie){Oe(Ie)}}}class Ae extends Ve{constructor(He,Ie,ct){let st;if(super(),(0,p.T)(He)||!He)st={next:He??void 0,error:Ie??void 0,complete:ct??void 0};else{let ce;this&&fe.$.useDeprecatedNextContext?(ce=Object.create(He),ce.unsubscribe=()=>this.unsubscribe(),st={next:He.next&&ee(He.next,ce),error:He.error&&ee(He.error,ce),complete:He.complete&&ee(He.complete,ce)}):st=He}this.destination=new Ue(st)}}function Oe(Te){fe.$.useDeprecatedSynchronousErrorHandling?(0,he.l)(Te):(0,se.m)(Te)}function Be(Te,He){const{onStoppedNotification:Ie}=fe.$;Ie&&$e.f.setTimeout(()=>Ie(Te,He))}const dt={closed:!0,next:te.l,error:function pe(Te){throw Te},complete:te.l}},8359:(Bt,nt,M)=>{"use strict";M.d(nt,{Kn:()=>ae,yU:()=>te,Uv:()=>de});var p=M(8071);const fe=(0,M(1853).L)(qe=>function(he){qe(this),this.message=he?`${he.length} errors occurred during unsubscription:\n${he.map((Ve,Me)=>`${Me+1}) ${Ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=he});var se=M(7908);class te{constructor($e){this.initialTeardown=$e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $e;if(!this.closed){this.closed=!0;const{_parentage:he}=this;if(he)if(this._parentage=null,Array.isArray(he))for(const ee of he)ee.remove(this);else he.remove(this);const{initialTeardown:Ve}=this;if((0,p.T)(Ve))try{Ve()}catch(ee){$e=ee instanceof fe?ee.errors:[ee]}const{_finalizers:Me}=this;if(Me){this._finalizers=null;for(const ee of Me)try{lt(ee)}catch(Ue){$e=$e??[],Ue instanceof fe?$e=[...$e,...Ue.errors]:$e.push(Ue)}}if($e)throw new fe($e)}}add($e){var he;if($e&&$e!==this)if(this.closed)lt($e);else{if($e instanceof te){if($e.closed||$e._hasParent(this))return;$e._addParent(this)}(this._finalizers=null!==(he=this._finalizers)&&void 0!==he?he:[]).push($e)}}_hasParent($e){const{_parentage:he}=this;return he===$e||Array.isArray(he)&&he.includes($e)}_addParent($e){const{_parentage:he}=this;this._parentage=Array.isArray(he)?(he.push($e),he):he?[he,$e]:$e}_removeParent($e){const{_parentage:he}=this;he===$e?this._parentage=null:Array.isArray(he)&&(0,se.o)(he,$e)}remove($e){const{_finalizers:he}=this;he&&(0,se.o)(he,$e),$e instanceof te&&$e._removeParent(this)}}te.EMPTY=(()=>{const qe=new te;return qe.closed=!0,qe})();const ae=te.EMPTY;function de(qe){return qe instanceof te||qe&&"closed"in qe&&(0,p.T)(qe.remove)&&(0,p.T)(qe.add)&&(0,p.T)(qe.unsubscribe)}function lt(qe){(0,p.T)(qe)?qe():qe.unsubscribe()}},1026:(Bt,nt,M)=>{"use strict";M.d(nt,{$:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4843:(Bt,nt,M)=>{"use strict";M.d(nt,{_:()=>fe});var p=M(9350),ie=M(7707);function fe(se,te){const ae="object"==typeof te;return new Promise((de,lt)=>{const qe=new ie.Ms({next:$e=>{de($e),qe.unsubscribe()},error:lt,complete:()=>{ae?de(te.defaultValue):lt(new p.G)}});se.subscribe(qe)})}},8793:(Bt,nt,M)=>{"use strict";M.d(nt,{x:()=>te});var p=M(6365),fe=M(9326),se=M(6648);function te(...ae){return function ie(){return(0,p.U)(1)}()((0,se.H)(ae,(0,fe.lI)(ae)))}},983:(Bt,nt,M)=>{"use strict";M.d(nt,{w:()=>ie});const ie=new(M(1985).c)(te=>te.complete())},6648:(Bt,nt,M)=>{"use strict";M.d(nt,{H:()=>ct});var p=M(8750),ie=M(5225),fe=M(9974),se=M(4360);function te(st,ce=0){return(0,fe.N)((ne,W)=>{ne.subscribe((0,se._)(W,ft=>(0,ie.N)(W,st,()=>W.next(ft),ce),()=>(0,ie.N)(W,st,()=>W.complete(),ce),ft=>(0,ie.N)(W,st,()=>W.error(ft),ce)))})}function ae(st,ce=0){return(0,fe.N)((ne,W)=>{W.add(st.schedule(()=>ne.subscribe(W),ce))})}var qe=M(1985),he=M(4761),Ve=M(8071);function ee(st,ce){if(!st)throw new Error("Iterable cannot be null");return new qe.c(ne=>{(0,ie.N)(ne,ce,()=>{const W=st[Symbol.asyncIterator]();(0,ie.N)(ne,ce,()=>{W.next().then(ft=>{ft.done?ne.complete():ne.next(ft.value)})},0,!0)})})}var Ue=M(5055),Ae=M(9858),Oe=M(7441),pe=M(5397),Be=M(7953),dt=M(591),Te=M(5196);function ct(st,ce){return ce?function Ie(st,ce){if(null!=st){if((0,Ue.l)(st))return function de(st,ce){return(0,p.Tg)(st).pipe(ae(ce),te(ce))}(st,ce);if((0,Oe.X)(st))return function $e(st,ce){return new qe.c(ne=>{let W=0;return ce.schedule(function(){W===st.length?ne.complete():(ne.next(st[W++]),ne.closed||this.schedule())})})}(st,ce);if((0,Ae.y)(st))return function lt(st,ce){return(0,p.Tg)(st).pipe(ae(ce),te(ce))}(st,ce);if((0,Be.T)(st))return ee(st,ce);if((0,pe.x)(st))return function Me(st,ce){return new qe.c(ne=>{let W;return(0,ie.N)(ne,ce,()=>{W=st[he.l](),(0,ie.N)(ne,ce,()=>{let ft,At;try{({value:ft,done:At}=W.next())}catch(Rt){return void ne.error(Rt)}At?ne.complete():ne.next(ft)},0,!0)}),()=>(0,Ve.T)(W?.return)&&W.return()})}(st,ce);if((0,Te.U)(st))return function He(st,ce){return ee((0,Te.C)(st),ce)}(st,ce)}throw(0,dt.L)(st)}(st,ce):(0,p.Tg)(st)}},8750:(Bt,nt,M)=>{"use strict";M.d(nt,{Tg:()=>Me});var p=M(1635),ie=M(7441),fe=M(9858),se=M(1985),te=M(5055),ae=M(7953),de=M(591),lt=M(5397),qe=M(5196),$e=M(8071),he=M(5334),Ve=M(3494);function Me(Te){if(Te instanceof se.c)return Te;if(null!=Te){if((0,te.l)(Te))return function ee(Te){return new se.c(He=>{const Ie=Te[Ve.s]();if((0,$e.T)(Ie.subscribe))return Ie.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,ie.X)(Te))return function Ue(Te){return new se.c(He=>{for(let Ie=0;Ie<Te.length&&!He.closed;Ie++)He.next(Te[Ie]);He.complete()})}(Te);if((0,fe.y)(Te))return function Ae(Te){return new se.c(He=>{Te.then(Ie=>{He.closed||(He.next(Ie),He.complete())},Ie=>He.error(Ie)).then(null,he.m)})}(Te);if((0,ae.T)(Te))return pe(Te);if((0,lt.x)(Te))return function Oe(Te){return new se.c(He=>{for(const Ie of Te)if(He.next(Ie),He.closed)return;He.complete()})}(Te);if((0,qe.U)(Te))return function Be(Te){return pe((0,qe.C)(Te))}(Te)}throw(0,de.L)(Te)}function pe(Te){return new se.c(He=>{(function dt(Te,He){var Ie,ct,st,ce;return(0,p.sH)(this,void 0,void 0,function*(){try{for(Ie=(0,p.xN)(Te);!(ct=yield Ie.next()).done;)if(He.next(ct.value),He.closed)return}catch(ne){st={error:ne}}finally{try{ct&&!ct.done&&(ce=Ie.return)&&(yield ce.call(Ie))}finally{if(st)throw st.error}}He.complete()})})(Te,He).catch(Ie=>He.error(Ie))})}},7786:(Bt,nt,M)=>{"use strict";M.d(nt,{h:()=>ae});var p=M(6365),ie=M(8750),fe=M(983),se=M(9326),te=M(6648);function ae(...de){const lt=(0,se.lI)(de),qe=(0,se.R0)(de,1/0),$e=de;return $e.length?1===$e.length?(0,ie.Tg)($e[0]):(0,p.U)(qe)((0,te.H)($e,lt)):fe.w}},4360:(Bt,nt,M)=>{"use strict";M.d(nt,{_:()=>ie});var p=M(7707);function ie(se,te,ae,de,lt){return new fe(se,te,ae,de,lt)}class fe extends p.vU{constructor(te,ae,de,lt,qe,$e){super(te),this.onFinalize=qe,this.shouldUnsubscribe=$e,this._next=ae?function(he){try{ae(he)}catch(Ve){te.error(Ve)}}:super._next,this._error=lt?function(he){try{lt(he)}catch(Ve){te.error(Ve)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(he){te.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},3294:(Bt,nt,M)=>{"use strict";M.d(nt,{F:()=>se});var p=M(3669),ie=M(9974),fe=M(4360);function se(ae,de=p.D){return ae=ae??te,(0,ie.N)((lt,qe)=>{let $e,he=!0;lt.subscribe((0,fe._)(qe,Ve=>{const Me=de(Ve);(he||!ae($e,Me))&&(he=!1,$e=Me,qe.next(Ve))}))})}function te(ae,de){return ae===de}},5964:(Bt,nt,M)=>{"use strict";M.d(nt,{p:()=>fe});var p=M(9974),ie=M(4360);function fe(se,te){return(0,p.N)((ae,de)=>{let lt=0;ae.subscribe((0,ie._)(de,qe=>se.call(te,qe,lt++)&&de.next(qe)))})}},6354:(Bt,nt,M)=>{"use strict";M.d(nt,{T:()=>fe});var p=M(9974),ie=M(4360);function fe(se,te){return(0,p.N)((ae,de)=>{let lt=0;ae.subscribe((0,ie._)(de,qe=>{de.next(se.call(te,qe,lt++))}))})}},6365:(Bt,nt,M)=>{"use strict";M.d(nt,{U:()=>fe});var p=M(1397),ie=M(3669);function fe(se=1/0){return(0,p.Z)(ie.D,se)}},1397:(Bt,nt,M)=>{"use strict";M.d(nt,{Z:()=>lt});var p=M(6354),ie=M(8750),fe=M(9974),se=M(5225),te=M(4360),de=M(8071);function lt(qe,$e,he=1/0){return(0,de.T)($e)?lt((Ve,Me)=>(0,p.T)((ee,Ue)=>$e(Ve,ee,Me,Ue))((0,ie.Tg)(qe(Ve,Me))),he):("number"==typeof $e&&(he=$e),(0,fe.N)((Ve,Me)=>function ae(qe,$e,he,Ve,Me,ee,Ue,Ae){const Oe=[];let pe=0,Be=0,dt=!1;const Te=()=>{dt&&!Oe.length&&!pe&&$e.complete()},He=ct=>pe<Ve?Ie(ct):Oe.push(ct),Ie=ct=>{ee&&$e.next(ct),pe++;let st=!1;(0,ie.Tg)(he(ct,Be++)).subscribe((0,te._)($e,ce=>{Me?.(ce),ee?He(ce):$e.next(ce)},()=>{st=!0},void 0,()=>{if(st)try{for(pe--;Oe.length&&pe<Ve;){const ce=Oe.shift();Ue?(0,se.N)($e,Ue,()=>Ie(ce)):Ie(ce)}Te()}catch(ce){$e.error(ce)}}))};return qe.subscribe((0,te._)($e,He,()=>{dt=!0,Te()})),()=>{Ae?.()}}(Ve,Me,qe,he)))}},7647:(Bt,nt,M)=>{"use strict";M.d(nt,{u:()=>te});var p=M(8750),ie=M(1413),fe=M(7707),se=M(9974);function te(de={}){const{connector:lt=(()=>new ie.B),resetOnError:qe=!0,resetOnComplete:$e=!0,resetOnRefCountZero:he=!0}=de;return Ve=>{let Me,ee,Ue,Ae=0,Oe=!1,pe=!1;const Be=()=>{ee?.unsubscribe(),ee=void 0},dt=()=>{Be(),Me=Ue=void 0,Oe=pe=!1},Te=()=>{const He=Me;dt(),He?.unsubscribe()};return(0,se.N)((He,Ie)=>{Ae++,!pe&&!Oe&&Be();const ct=Ue=Ue??lt();Ie.add(()=>{Ae--,0===Ae&&!pe&&!Oe&&(ee=ae(Te,he))}),ct.subscribe(Ie),!Me&&Ae>0&&(Me=new fe.Ms({next:st=>ct.next(st),error:st=>{pe=!0,Be(),ee=ae(dt,qe,st),ct.error(st)},complete:()=>{Oe=!0,Be(),ee=ae(dt,$e),ct.complete()}}),(0,p.Tg)(He).subscribe(Me))})(Ve)}}function ae(de,lt,...qe){if(!0===lt)return void de();if(!1===lt)return;const $e=new fe.Ms({next:()=>{$e.unsubscribe(),de()}});return(0,p.Tg)(lt(...qe)).subscribe($e)}},6496:(Bt,nt,M)=>{"use strict";M.d(nt,{t:()=>te});var p=M(1413),ie=M(6129);class fe extends p.B{constructor(de=1/0,lt=1/0,qe=ie.U){super(),this._bufferSize=de,this._windowTime=lt,this._timestampProvider=qe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=lt===1/0,this._bufferSize=Math.max(1,de),this._windowTime=Math.max(1,lt)}next(de){const{isStopped:lt,_buffer:qe,_infiniteTimeWindow:$e,_timestampProvider:he,_windowTime:Ve}=this;lt||(qe.push(de),!$e&&qe.push(he.now()+Ve)),this._trimBuffer(),super.next(de)}_subscribe(de){this._throwIfClosed(),this._trimBuffer();const lt=this._innerSubscribe(de),{_infiniteTimeWindow:qe,_buffer:$e}=this,he=$e.slice();for(let Ve=0;Ve<he.length&&!de.closed;Ve+=qe?1:2)de.next(he[Ve]);return this._checkFinalizedStatuses(de),lt}_trimBuffer(){const{_bufferSize:de,_timestampProvider:lt,_buffer:qe,_infiniteTimeWindow:$e}=this,he=($e?1:2)*de;if(de<1/0&&he<qe.length&&qe.splice(0,qe.length-he),!$e){const Ve=lt.now();let Me=0;for(let ee=1;ee<qe.length&&qe[ee]<=Ve;ee+=2)Me=ee;Me&&qe.splice(0,Me+1)}}}var se=M(7647);function te(ae,de,lt){let qe,$e=!1;return ae&&"object"==typeof ae?({bufferSize:qe=1/0,windowTime:de=1/0,refCount:$e=!1,scheduler:lt}=ae):qe=ae??1/0,(0,se.u)({connector:()=>new fe(qe,de,lt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$e})}},9172:(Bt,nt,M)=>{"use strict";M.d(nt,{Z:()=>se});var p=M(8793),ie=M(9326),fe=M(9974);function se(...te){const ae=(0,ie.lI)(te);return(0,fe.N)((de,lt)=>{(ae?(0,p.x)(te,de,ae):(0,p.x)(te,de)).subscribe(lt)})}},6129:(Bt,nt,M)=>{"use strict";M.d(nt,{U:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},9270:(Bt,nt,M)=>{"use strict";M.d(nt,{f:()=>p});const p={setTimeout(ie,fe,...se){const{delegate:te}=p;return te?.setTimeout?te.setTimeout(ie,fe,...se):setTimeout(ie,fe,...se)},clearTimeout(ie){const{delegate:fe}=p;return(fe?.clearTimeout||clearTimeout)(ie)},delegate:void 0}},4761:(Bt,nt,M)=>{"use strict";M.d(nt,{l:()=>ie});const ie=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Bt,nt,M)=>{"use strict";M.d(nt,{s:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Bt,nt,M)=>{"use strict";M.d(nt,{G:()=>ie});const ie=(0,M(1853).L)(fe=>function(){fe(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(Bt,nt,M)=>{"use strict";M.d(nt,{R0:()=>ae,lI:()=>te,ms:()=>se});var p=M(8071),ie=M(9470);function fe(de){return de[de.length-1]}function se(de){return(0,p.T)(fe(de))?de.pop():void 0}function te(de){return(0,ie.m)(fe(de))?de.pop():void 0}function ae(de,lt){return"number"==typeof fe(de)?de.pop():lt}},7908:(Bt,nt,M)=>{"use strict";function p(ie,fe){if(ie){const se=ie.indexOf(fe);0<=se&&ie.splice(se,1)}}M.d(nt,{o:()=>p})},1853:(Bt,nt,M)=>{"use strict";function p(ie){const se=ie(te=>{Error.call(te),te.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}M.d(nt,{L:()=>p})},9786:(Bt,nt,M)=>{"use strict";M.d(nt,{Y:()=>fe,l:()=>se});var p=M(1026);let ie=null;function fe(te){if(p.$.useDeprecatedSynchronousErrorHandling){const ae=!ie;if(ae&&(ie={errorThrown:!1,error:null}),te(),ae){const{errorThrown:de,error:lt}=ie;if(ie=null,de)throw lt}}else te()}function se(te){p.$.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=te)}},5225:(Bt,nt,M)=>{"use strict";function p(ie,fe,se,te=0,ae=!1){const de=fe.schedule(function(){se(),ae?ie.add(this.schedule(null,te)):this.unsubscribe()},te);if(ie.add(de),!ae)return de}M.d(nt,{N:()=>p})},3669:(Bt,nt,M)=>{"use strict";function p(ie){return ie}M.d(nt,{D:()=>p})},7441:(Bt,nt,M)=>{"use strict";M.d(nt,{X:()=>p});const p=ie=>ie&&"number"==typeof ie.length&&"function"!=typeof ie},7953:(Bt,nt,M)=>{"use strict";M.d(nt,{T:()=>ie});var p=M(8071);function ie(fe){return Symbol.asyncIterator&&(0,p.T)(fe?.[Symbol.asyncIterator])}},8071:(Bt,nt,M)=>{"use strict";function p(ie){return"function"==typeof ie}M.d(nt,{T:()=>p})},5055:(Bt,nt,M)=>{"use strict";M.d(nt,{l:()=>fe});var p=M(3494),ie=M(8071);function fe(se){return(0,ie.T)(se[p.s])}},5397:(Bt,nt,M)=>{"use strict";M.d(nt,{x:()=>fe});var p=M(4761),ie=M(8071);function fe(se){return(0,ie.T)(se?.[p.l])}},9858:(Bt,nt,M)=>{"use strict";M.d(nt,{y:()=>ie});var p=M(8071);function ie(fe){return(0,p.T)(fe?.then)}},5196:(Bt,nt,M)=>{"use strict";M.d(nt,{C:()=>fe,U:()=>se});var p=M(1635),ie=M(8071);function fe(te){return(0,p.AQ)(this,arguments,function*(){const de=te.getReader();try{for(;;){const{value:lt,done:qe}=yield(0,p.N3)(de.read());if(qe)return yield(0,p.N3)(void 0);yield yield(0,p.N3)(lt)}}finally{de.releaseLock()}})}function se(te){return(0,ie.T)(te?.getReader)}},9470:(Bt,nt,M)=>{"use strict";M.d(nt,{m:()=>ie});var p=M(8071);function ie(fe){return fe&&(0,p.T)(fe.schedule)}},9974:(Bt,nt,M)=>{"use strict";M.d(nt,{N:()=>fe,S:()=>ie});var p=M(8071);function ie(se){return(0,p.T)(se?.lift)}function fe(se){return te=>{if(ie(te))return te.lift(function(ae){try{return se(ae,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5343:(Bt,nt,M)=>{"use strict";function p(){}M.d(nt,{l:()=>p})},1203:(Bt,nt,M)=>{"use strict";M.d(nt,{F:()=>ie,m:()=>fe});var p=M(3669);function ie(...se){return fe(se)}function fe(se){return 0===se.length?p.D:1===se.length?se[0]:function(ae){return se.reduce((de,lt)=>lt(de),ae)}}},5334:(Bt,nt,M)=>{"use strict";M.d(nt,{m:()=>fe});var p=M(1026),ie=M(9270);function fe(se){ie.f.setTimeout(()=>{const{onUnhandledError:te}=p.$;if(!te)throw se;te(se)})}},591:(Bt,nt,M)=>{"use strict";function p(ie){return new TypeError(`You provided ${null!==ie&&"object"==typeof ie?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(nt,{L:()=>p})},9969:(Bt,nt,M)=>{"use strict";M.d(nt,{FX:()=>ce,If:()=>p,K2:()=>ae,hZ:()=>fe,i0:()=>se,iF:()=>de,kY:()=>$e,kp:()=>ie,sf:()=>ct,ui:()=>st,wk:()=>lt});var p=function(ne){return ne[ne.State=0]="State",ne[ne.Transition=1]="Transition",ne[ne.Sequence=2]="Sequence",ne[ne.Group=3]="Group",ne[ne.Animate=4]="Animate",ne[ne.Keyframes=5]="Keyframes",ne[ne.Style=6]="Style",ne[ne.Trigger=7]="Trigger",ne[ne.Reference=8]="Reference",ne[ne.AnimateChild=9]="AnimateChild",ne[ne.AnimateRef=10]="AnimateRef",ne[ne.Query=11]="Query",ne[ne.Stagger=12]="Stagger",ne}(p||{});const ie="*";function fe(ne,W){return{type:p.Trigger,name:ne,definitions:W,options:{}}}function se(ne,W=null){return{type:p.Animate,styles:W,timings:ne}}function ae(ne,W=null){return{type:p.Sequence,steps:ne,options:W}}function de(ne){return{type:p.Style,styles:ne,offset:null}}function lt(ne,W,ft){return{type:p.State,name:ne,styles:W,options:ft}}function $e(ne,W,ft=null){return{type:p.Transition,expr:ne,animation:W,options:ft}}class ct{constructor(W=0,ft=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=W+ft}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(W=>W()),this._onDoneFns=[])}onStart(W){this._originalOnStartFns.push(W),this._onStartFns.push(W)}onDone(W){this._originalOnDoneFns.push(W),this._onDoneFns.push(W)}onDestroy(W){this._onDestroyFns.push(W)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(W=>W()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(W=>W()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(W){this._position=this.totalTime?W*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(W){const ft="start"==W?this._onStartFns:this._onDoneFns;ft.forEach(At=>At()),ft.length=0}}class st{constructor(W){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=W;let ft=0,At=0,Rt=0;const yn=this.players.length;0==yn?queueMicrotask(()=>this._onFinish()):this.players.forEach(rn=>{rn.onDone(()=>{++ft==yn&&this._onFinish()}),rn.onDestroy(()=>{++At==yn&&this._onDestroy()}),rn.onStart(()=>{++Rt==yn&&this._onStart()})}),this.totalTime=this.players.reduce((rn,pn)=>Math.max(rn,pn.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(W=>W()),this._onDoneFns=[])}init(){this.players.forEach(W=>W.init())}onStart(W){this._onStartFns.push(W)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(W=>W()),this._onStartFns=[])}onDone(W){this._onDoneFns.push(W)}onDestroy(W){this._onDestroyFns.push(W)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(W=>W.play())}pause(){this.players.forEach(W=>W.pause())}restart(){this.players.forEach(W=>W.restart())}finish(){this._onFinish(),this.players.forEach(W=>W.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(W=>W.destroy()),this._onDestroyFns.forEach(W=>W()),this._onDestroyFns=[])}reset(){this.players.forEach(W=>W.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(W){const ft=W*this.totalTime;this.players.forEach(At=>{const Rt=At.totalTime?Math.min(1,ft/At.totalTime):1;At.setPosition(Rt)})}getPosition(){const W=this.players.reduce((ft,At)=>null===ft||At.totalTime>ft.totalTime?At:ft,null);return null!=W?W.getPosition():0}beforeDestroy(){this.players.forEach(W=>{W.beforeDestroy&&W.beforeDestroy()})}triggerCallback(W){const ft="start"==W?this._onStartFns:this._onDoneFns;ft.forEach(At=>At()),ft.length=0}}const ce="!"},3953:(Bt,nt,M)=>{"use strict";M.d(nt,{bc$:()=>AC,iLQ:()=>sb,sZ2:()=>Fl,hnV:()=>Fx,Hbi:()=>iR,o8S:()=>Ha,BIS:()=>xC,gRc:()=>NI,Ql9:()=>jx,OM3:()=>Oh,Ocv:()=>ub,Z63:()=>ta,aKT:()=>wp,uvJ:()=>Uo,zcH:()=>Aa,bkB:()=>Wc,$GK:()=>yt,nKC:()=>In,zZn:()=>Li,_q3:()=>BI,MKu:()=>tR,xe9:()=>If,Co$:()=>OS,Vns:()=>Rn,SKi:()=>Sr,Xx1:()=>Iu,Agw:()=>mh,PLl:()=>Ns,rOR:()=>Bv,sFG:()=>v0,_9s:()=>Go,czy:()=>r_,WPN:()=>qc,kdw:()=>qd,C4Q:()=>em,NYb:()=>_k,giA:()=>yk,RxE:()=>vg,c1b:()=>Ai,gXe:()=>Cu,mal:()=>gm,Tzd:()=>w0,L39:()=>qV,Ol2:()=>U0,w6W:()=>j0,oH4:()=>qx,QZP:()=>l1,WQX:()=>sn,naY:()=>Rk,Hps:()=>M0,QuC:()=>Su,EmA:()=>rt,fpN:()=>rR,HJs:()=>r2,N4e:()=>sv,O8t:()=>ZV,An2:()=>wr,H3F:()=>_g,zAP:()=>_R,H8p:()=>nv,KH2:()=>hf,TgB:()=>Nl,wOt:()=>zt,WHO:()=>gk,e01:()=>vk,lNU:()=>$d,h9k:()=>XC,$MX:()=>Op,ZF7:()=>Hl,Kcf:()=>jC,e5t:()=>mO,UyX:()=>fO,cWb:()=>hO,osQ:()=>pO,H5H:()=>Xm,mq5:()=>DA,JZv:()=>hr,LfX:()=>ro,plB:()=>Hu,jNT:()=>Nx,zjR:()=>kx,ngT:()=>et,TL$:()=>xE,Tbb:()=>Qr,rcV:()=>Gc,Vt3:()=>B_,GFd:()=>MS,OA$:()=>dv,Jv_:()=>cx,aNF:()=>lx,R7$:()=>QO,BMQ:()=>ey,HbH:()=>Bm,AVh:()=>pw,vxM:()=>Dw,wni:()=>GA,VBU:()=>DD,FsC:()=>CD,jDH:()=>or,G2t:()=>xr,$C:()=>Qb,EJ8:()=>Yd,rXU:()=>zp,nrm:()=>Km,k0s:()=>zm,j41:()=>Hm,RV6:()=>hy,xGo:()=>NM,KVO:()=>io,kS0:()=>Nv,QTQ:()=>YO,bIt:()=>Zw,lsd:()=>Oy,qSk:()=>DM,XpG:()=>Iy,nI1:()=>ok,bMT:()=>bx,SdG:()=>Dy,NAR:()=>KA,Y8G:()=>ny,mGM:()=>Dc,sdS:()=>Py,Dyx:()=>Tw,Z7z:()=>bd,Njj:()=>VD,eBV:()=>IM,n$t:()=>Fp,DNE:()=>$0,EFF:()=>ex,Lme:()=>cI,GBs:()=>My});let ie=null,fe=!1,se=1;const te=Symbol("SIGNAL");function ae(i){const o=ie;return ie=i,o}const $e={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Me(i){if((!Ie(i)||i.dirty)&&(i.dirty||i.lastCleanEpoch!==se)){if(!i.producerMustRecompute(i)&&!Be(i))return i.dirty=!1,void(i.lastCleanEpoch=se);i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=se}}function Ae(i){i.dirty=!0,function ee(i){if(void 0===i.liveConsumerNode)return;const o=fe;fe=!0;try{for(const a of i.liveConsumerNode)a.dirty||Ae(a)}finally{fe=o}}(i),i.consumerMarkedDirty?.(i)}function Oe(i){return i&&(i.nextProducerIndex=0),ae(i)}function pe(i,o){if(ae(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(Ie(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)He(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Be(i){ct(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],c=i.producerLastReadVersion[o];if(c!==a.version||(Me(a),c!==a.version))return!0}return!1}function dt(i){if(ct(i),Ie(i))for(let o=0;o<i.producerNode.length;o++)He(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function He(i,o){if(function st(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),1===i.liveConsumerNode.length&&function ce(i){return void 0!==i.producerNode}(i))for(let c=0;c<i.producerNode.length;c++)He(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[o],l=i.liveConsumerNode[o];ct(l),l.producerIndexOfThis[c]=o}}function Ie(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function ct(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let rn=null;const Je=()=>{},Ct={...$e,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{null!==i.schedule&&i.schedule(i.ref)},hasRun:!1,cleanupFn:Je};var Mt=M(4412),jt=M(1413),on=M(8359),en=M(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const $d="https://g.co/ng/security#xss";class zt extends Error{constructor(o,a){super(function is(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function os(i){return{toString:i}.toString()}const Qa="__parameters__";function ti(i,o,a){return os(()=>{const c=function Fc(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(o);function l(...h){if(this instanceof l)return c.apply(this,h),this;const m=new l(...h);return E.annotation=m,E;function E(T,R,k){const z=T.hasOwnProperty(Qa)?T[Qa]:Object.defineProperty(T,Qa,{value:[]})[Qa];for(;z.length<=k;)z.push(null);return(z[k]=z[k]||[]).push(m),T}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}const hr=globalThis;function cr(i){for(let o in i)if(i[o]===cr)return o;throw Error("Could not find renamed property on target object.")}function jf(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function Qr(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Qr).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function vl(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const zd=cr({__forward_ref__:cr});function bu(i){return i.__forward_ref__=bu,i.toString=function(){return Qr(this())},i}function bn(i){return Eu(i)?i():i}function Eu(i){return"function"==typeof i&&i.hasOwnProperty(zd)&&i.__forward_ref__===bu}function or(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function xr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Ea(i){return Wd(i,Vo)||Wd(i,wa)}function ro(i){return null!==Ea(i)}function Wd(i,o){return i.hasOwnProperty(o)?i[o]:null}function wu(i){return i&&(i.hasOwnProperty(Bc)||i.hasOwnProperty(ss))?i[Bc]:null}const Vo=cr({\u0275prov:cr}),Bc=cr({\u0275inj:cr}),wa=cr({ngInjectableDef:cr}),ss=cr({ngInjectorDef:cr});class In{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=or({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function tt(i){return i&&!!i.\u0275providers}const Se=cr({\u0275cmp:cr}),Qe=cr({\u0275dir:cr}),Ne=cr({\u0275pipe:cr}),Ke=cr({\u0275mod:cr}),Xe=cr({\u0275fac:cr}),je=cr({__NG_ELEMENT_ID__:cr}),pt=cr({__NG_ENV_ID__:cr});function We(i){return"string"==typeof i?i:null==i?"":String(i)}function Wt(i,o){throw new zt(-201,!1)}var yt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(yt||{});let An;function Nn(){return An}function Dn(i){const o=An;return An=i,o}function Ln(i,o,a){const c=Ea(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&yt.Optional?null:void 0!==o?o:void Wt()}const si={},mi="__NG_DI_FLAG__",Ya="ngTempTokenPath",Za=/\n/gm,Hg="__source";let Ja;function Js(i){const o=Ja;return Ja=i,o}function oM(i,o=yt.Default){if(void 0===Ja)throw new zt(-203,!1);return null===Ja?Ln(i,void 0,o):Ja.get(i,o&yt.Optional?null:void 0,o)}function io(i,o=yt.Default){return(Nn()||oM)(bn(i),o)}function sn(i,o=yt.Default){return io(i,ec(o))}function ec(i){return typeof i>"u"||"number"==typeof i?i:(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Gf(i){const o=[];for(let a=0;a<i.length;a++){const c=bn(i[a]);if(Array.isArray(c)){if(0===c.length)throw new zt(900,!1);let l,h=yt.Default;for(let m=0;m<c.length;m++){const E=c[m],T=Nb(E);"number"==typeof T?-1===T?l=E.token:h|=T:l=E}o.push(io(l,h))}else o.push(io(c))}return o}function yl(i,o){return i[mi]=o,i.prototype[mi]=o,i}function Nb(i){return i[mi]}const Iu=yl(ti("Optional"),8),qd=yl(ti("SkipSelf"),4);function tc(i,o){return i.hasOwnProperty(Xe)?i[Xe]:null}function bl(i,o){i.forEach(a=>Array.isArray(a)?bl(a,o):o(a))}function Lb(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Qf(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function as(i,o,a){let c=Du(i,o);return c>=0?i[1|c]=a:(c=~c,function Yf(i,o,a,c){let l=i.length;if(l==o)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>o;)i[l]=i[l-2],l--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Bb(i,o){const a=Du(i,o);if(a>=0)return i[1|a]}function Du(i,o){return function Zf(i,o,a){let c=0,l=i.length>>a;for(;l!==c;){const h=c+(l-c>>1),m=i[h<<a];if(o===m)return h<<a;m>o?l=h:c=h+1}return~(l<<a)}(i,o,1)}const ea={},Jn=[],ta=new In(""),qg=new In("",-1),Qg=new In("");class Jf{get(o,a=si){if(a===si){const c=new Error(`NullInjectorError: No provider for ${Qr(o)}!`);throw c.name="NullInjectorError",c}return a}}var ep=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(ep||{}),Cu=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Cu||{}),Tu=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(Tu||{});function jb(i,o,a){let c=i.length;for(;;){const l=i.indexOf(o,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const h=o.length;if(l+h===c||i.charCodeAt(l+h)<=32)return l}a=l+1}}function Ub(i,o,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const h=a[c++],m=a[c++],E=a[c++];i.setAttribute(o,m,E,h)}else{const h=l,m=a[++c];Hb(h)?i.setProperty(o,h,m):i.setAttribute(o,h,m),c++}}return c}function $b(i){return 3===i||4===i||6===i}function Hb(i){return 64===i.charCodeAt(0)}function Qd(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const l=o[c];"number"==typeof l?a=l:0===a||Xg(i,a,l,null,-1===a||2===a?o[++c]:null)}}return i}function Xg(i,o,a,c,l){let h=0,m=i.length;if(-1===o)m=-1;else for(;h<i.length;){const E=i[h++];if("number"==typeof E){if(E===o){m=-1;break}if(E>o){m=h-1;break}}}for(;h<i.length;){const E=i[h];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==l&&(i[h+1]=l));if(c===i[h+1])return void(i[h+2]=l)}h++,null!==c&&h++,null!==l&&h++}-1!==m&&(i.splice(m,0,o),h=m+1),i.splice(h++,0,a),null!==c&&i.splice(h++,0,c),null!==l&&i.splice(h++,0,l)}const zb="ng-template";function Kb(i,o,a,c){let l=0;if(c){for(;l<o.length&&"string"==typeof o[l];l+=2)if("class"===o[l]&&-1!==jb(o[l+1].toLowerCase(),a,0))return!0}else if(Xd(i))return!1;if(l=o.indexOf(1,l),l>-1){let h;for(;++l<o.length&&"string"==typeof(h=o[l]);)if(h.toLowerCase()===a)return!0}return!1}function Xd(i){return 4===i.type&&i.value!==zb}function Yg(i,o,a){return o===(4!==i.type||a?i.value:zb)}function ED(i,o,a){let c=4;const l=i.attrs,h=null!==l?function Zg(i){for(let o=0;o<i.length;o++)if($b(i[o]))return o;return i.length}(l):0;let m=!1;for(let E=0;E<o.length;E++){const T=o[E];if("number"!=typeof T){if(!m)if(4&c){if(c=2|1&c,""!==T&&!Yg(i,T,a)||""===T&&1===o.length){if(Ia(c))return!1;m=!0}}else if(8&c){if(null===l||!Kb(i,l,T,a)){if(Ia(c))return!1;m=!0}}else{const R=o[++E],k=aM(T,l,Xd(i),a);if(-1===k){if(Ia(c))return!1;m=!0;continue}if(""!==R){let z;if(z=k>h?"":l[k+1].toLowerCase(),2&c&&R!==z){if(Ia(c))return!1;m=!0}}}}else{if(!m&&!Ia(c)&&!Ia(T))return!1;if(m&&Ia(T))continue;m=!1,c=T|1&c}}return Ia(c)||m}function Ia(i){return!(1&i)}function aM(i,o,a,c){if(null===o)return-1;let l=0;if(c||!a){let h=!1;for(;l<o.length;){const m=o[l];if(m===i)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let E=o[++l];for(;"string"==typeof E;)E=o[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function jo(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Wb(i,o,a=!1){for(let c=0;c<o.length;c++)if(ED(i,o[c],a))return!0;return!1}function qb(i,o){e:for(let a=0;a<o.length;a++){const c=o[a];if(i.length===c.length){for(let l=0;l<i.length;l++)if(i[l]!==c[l])continue e;return!0}}return!1}function wD(i,o){return i?":not("+o.trim()+")":o}function cM(i){let o=i[0],a=1,c=2,l="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&c){const E=i[++a];l+="["+m+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?l+="."+m:4&c&&(l+=" "+m);else""!==l&&!Ia(m)&&(o+=wD(h,l),l=""),c=m,h=h||!Ia(c);a++}return""!==l&&(o+=wD(h,l)),o}function DD(i){return os(()=>{const o=TD(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===ep.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||Cu.Emulated,styles:i.styles||Jn,_:null,schemas:i.schemas||null,tView:null,id:""};SD(a);const c=i.dependencies;return a.directiveDefs=Jg(c,!1),a.pipeDefs=Jg(c,!0),a.id=function fM(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const l of a)o=Math.imul(31,o)+l.charCodeAt(0)|0;return o+=2147483648,"c"+o}(a),a})}function lM(i){return Hn(i)||Ur(i)}function dM(i){return null!==i}function Qb(i){return os(()=>({type:i.type,bootstrap:i.bootstrap||Jn,declarations:i.declarations||Jn,imports:i.imports||Jn,exports:i.exports||Jn,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Xb(i,o){if(null==i)return ea;const a={};for(const c in i)if(i.hasOwnProperty(c)){const l=i[c];let h,m,E=Tu.None;Array.isArray(l)?(E=l[0],h=l[1],m=l[2]??h):(h=l,m=l),o?(a[h]=E!==Tu.None?[c,E]:c,o[h]=m):a[h]=c}return a}function CD(i){return os(()=>{const o=TD(i);return SD(o),o})}function Yd(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Hn(i){return i[Se]||null}function Ur(i){return i[Qe]||null}function gi(i){return i[Ne]||null}function Su(i){const o=Hn(i)||Ur(i)||gi(i);return null!==o&&o.standalone}function oo(i,o){const a=i[Ke]||null;if(!a&&!0===o)throw new Error(`Type ${Qr(i)} does not have '\u0275mod' property.`);return a}function TD(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||ea,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||Jn,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xb(i.inputs,o),outputs:Xb(i.outputs),debugInfo:null}}function SD(i){i.features?.forEach(o=>o(i))}function Jg(i,o){if(!i)return null;const a=o?gi:lM;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(dM)}function rt(i){return{\u0275providers:i}}function so(...i){return{\u0275providers:ao(0,i),\u0275fromNgModule:!0}}function ao(i,...o){const a=[],c=new Set;let l;const h=m=>{a.push(m)};return bl(o,m=>{const E=m;vi(E,h,[],c)&&(l||=[],l.push(E))}),void 0!==l&&Yb(l,h),a}function Yb(i,o){for(let a=0;a<i.length;a++){const{ngModule:c,providers:l}=i[a];cn(l,h=>{o(h,c)})}}function vi(i,o,a,c){if(!(i=bn(i)))return!1;let l=null,h=wu(i);const m=!h&&Hn(i);if(h||m){if(m&&!m.standalone)return!1;l=i}else{const T=i.ngModule;if(h=wu(T),!h)return!1;l=T}const E=c.has(l);if(m){if(E)return!1;if(c.add(l),m.dependencies){const T="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const R of T)vi(R,o,a,c)}}else{if(!h)return!1;{if(null!=h.imports&&!E){let R;c.add(l);try{bl(h.imports,k=>{vi(k,o,a,c)&&(R||=[],R.push(k))})}finally{}void 0!==R&&Yb(R,o)}if(!E){const R=tc(l)||(()=>new l);o({provide:l,useFactory:R,deps:Jn},l),o({provide:Qg,useValue:l,multi:!0},l),o({provide:ta,useValue:()=>io(l),multi:!0},l)}const T=h.providers;if(null!=T&&!E){const R=i;cn(T,k=>{o(k,R)})}}}return l!==i&&void 0!==i.providers}function cn(i,o){for(let a of i)tt(a)&&(a=a.\u0275providers),Array.isArray(a)?cn(a,o):o(a)}const Ti=cr({provide:String,useValue:cr});function ev(i){return null!==i&&"object"==typeof i&&Ti in i}function nc(i){return"function"==typeof i}const nv=new In(""),jc={},Mn={};let rv;function tp(){return void 0===rv&&(rv=new Jf),rv}class Uo{}class Au extends Uo{get destroyed(){return this._destroyed}constructor(o,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ru(o,m=>this.processProvider(m)),this.records.set(qg,Uc(void 0,this)),l.has("environment")&&this.records.set(Uo,Uc(void 0,this));const h=this.records.get(nv);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Qg,Jn,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const o=ae(null);try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ae(o)}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=Js(this),c=Dn(void 0);try{return o()}finally{Js(a),Dn(c)}}get(o,a=si,c=yt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(pt))return o[pt](this);c=ec(c);const h=Js(this),m=Dn(void 0);try{if(!(c&yt.SkipSelf)){let T=this.records.get(o);if(void 0===T){const R=function Da(i){return"function"==typeof i||"object"==typeof i&&i instanceof In}(o)&&Ea(o);T=R&&this.injectableDefInScope(R)?Uc(ai(o),jc):null,this.records.set(o,T)}if(null!=T)return this.hydrate(o,T)}return(c&yt.Self?tp():this.parent).get(o,a=c&yt.Optional&&a===si?null:a)}catch(E){if("NullInjectorError"===E.name){if((E[Ya]=E[Ya]||[]).unshift(Qr(o)),h)throw E;return function kb(i,o,a,c){const l=i[Ya];throw o[Hg]&&l.unshift(o[Hg]),i.message=function Gd(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=Qr(o);if(Array.isArray(o))l=o.map(Qr).join(" -> ");else if("object"==typeof o){let h=[];for(let m in o)if(o.hasOwnProperty(m)){let E=o[m];h.push(m+":"+("string"==typeof E?JSON.stringify(E):Qr(E)))}l=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Za,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Ya]=null,i}(E,o,"R3InjectorError",this.source)}throw E}finally{Dn(m),Js(h)}}resolveInjectorInitializers(){const o=ae(null),a=Js(this),c=Dn(void 0);try{const h=this.get(ta,Jn,yt.Self);for(const m of h)m()}finally{Js(a),Dn(c),ae(o)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Qr(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new zt(205,!1)}processProvider(o){let a=nc(o=bn(o))?o:bn(o&&o.provide);const c=function xu(i){return ev(i)?Uc(void 0,i.useValue):Uc(ov(i),jc)}(o);if(!nc(o)&&!0===o.multi){let l=this.records.get(a);l||(l=Uc(void 0,jc,!0),l.factory=()=>Gf(l.multi),this.records.set(a,l)),a=o,l.multi.push(o)}this.records.set(a,c)}hydrate(o,a){const c=ae(null);try{return a.value===jc&&(a.value=Mn,a.value=a.factory()),"object"==typeof a.value&&a.value&&function th(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}finally{ae(c)}}injectableDefInScope(o){if(!o.providedIn)return!1;const a=bn(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function ai(i){const o=Ea(i),a=null!==o?o.factory:tc(i);if(null!==a)return a;if(i instanceof In)throw new zt(204,!1);if(i instanceof Function)return function iv(i){if(i.length>0)throw new zt(204,!1);const a=function _l(i){return i&&(i[Vo]||i[wa])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new zt(204,!1)}function ov(i,o,a){let c;if(nc(i)){const l=bn(i);return tc(l)||ai(l)}if(ev(i))c=()=>bn(i.useValue);else if(function Jd(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Gf(i.deps||[]));else if(function tv(i){return!(!i||!i.useExisting)}(i))c=()=>io(bn(i.useExisting));else{const l=bn(i&&(i.useClass||i.provide));if(!function eh(i){return!!i.deps}(i))return tc(l)||ai(l);c=()=>new l(...Gf(i.deps))}return c}function Uc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Ru(i,o){for(const a of i)Array.isArray(a)?Ru(a,o):a&&tt(a)?Ru(a.\u0275providers,o):o(a)}function sv(i,o){i instanceof Au&&i.assertNotDestroyed();const c=Js(i),l=Dn(void 0);try{return o()}finally{Js(c),Dn(l)}}function $c(){return void 0!==Nn()||null!=function iM(){return Ja}()}function cs(i){if(!$c())throw new zt(-203,!1)}const On=0,y=1,b=2,C=3,w=4,O=5,B=6,Y=7,Z=8,ve=9,at=10,xe=11,wt=12,nn=13,Yt=14,mn=15,jn=16,Fn=17,ur=18,ui=19,$o=20,sr=21,co=22,uo=23,an=25,rp=1,Ho=7,Sa=9,Rr=10;var us=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(us||{});function Cn(i){return Array.isArray(i)&&"object"==typeof i[rp]}function Kr(i){return Array.isArray(i)&&!0===i[rp]}function eE(i){return!!(4&i.flags)}function Ms(i){return i.componentOffset>-1}function cv(i){return!(1&~i.flags)}function So(i){return!!i.template}function Mu(i){return!!(512&i[b])}class Il{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function OD(i,o,a,c){null!==o?o.applyValueToInputSignal(o,c):i[a]=c}function dv(){return iE}function iE(i){return i.type.prototype.ngOnChanges&&(i.setInput=ip),hv}function hv(){const i=oE(this),o=i?.current;if(o){const a=i.previous;if(a===ea)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function ip(i,o,a,c,l){const h=this.declaredInputs[c],m=oE(i)||function PD(i,o){return i[fv]=o}(i,{previous:ea,current:null}),E=m.current||(m.current={}),T=m.previous,R=T[h];E[h]=new Il(R&&R.currentValue,a,T===ea),OD(i,o,l,a)}dv.ngInherit=!0;const fv="__ngSimpleChanges__";function oE(i){return i[fv]||null}const rc=function(i,o,a){},ND="svg";function ar(i){for(;Array.isArray(i);)i=i[On];return i}function op(i,o){return ar(o[i])}function lo(i,o){return ar(o[i.index])}function rh(i,o){return i.data[o]}function Ou(i,o){return i[o]}function ho(i,o){const a=o[i];return Cn(a)?a:a[On]}function na(i){return!(128&~i[b])}function Si(i,o){return null==o?null:i[o]}function ls(i){i[Fn]=0}function sp(i){1024&i[b]||(i[b]|=1024,na(i)&&cp(i))}function ic(i){return!!(9216&i[b]||i[uo]?.dirty)}function ap(i){i[at].changeDetectionScheduler?.notify(7),64&i[b]&&(i[b]|=1024),ic(i)&&cp(i)}function cp(i){i[at].changeDetectionScheduler?.notify(0);let o=zc(i);for(;null!==o&&!(8192&o[b])&&(o[b]|=8192,na(o));)o=zc(o)}function gv(i,o){if(!(256&~i[b]))throw new zt(911,!1);null===i[sr]&&(i[sr]=[]),i[sr].push(o)}function zc(i){const o=i[C];return Kr(o)?o[C]:o}const xn={lFrame:HD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let FD=!1;function _v(){return xn.bindingsEnabled}function oc(){return null!==xn.skipHydrationRootTNode}function bt(){return xn.lFrame.lView}function zn(){return xn.lFrame.tView}function IM(i){return xn.lFrame.contextLView=i,i[Z]}function VD(i){return xn.lFrame.contextLView=null,i}function Tr(){let i=ra();for(;null!==i&&64===i.type;)i=i.parent;return i}function ra(){return xn.lFrame.currentTNode}function zo(i,o){const a=xn.lFrame;a.currentTNode=i,a.isParent=o}function uE(){return xn.lFrame.isParent}function Cl(){xn.lFrame.isParent=!1}function Tl(){return FD}function dE(i){FD=i}function ds(){return xn.lFrame.bindingIndex++}function oa(i){const o=xn.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function $D(i,o){const a=xn.lFrame;a.bindingIndex=a.bindingRootIndex=i,lp(o)}function lp(i){xn.lFrame.currentDirectiveIndex=i}function dp(){return xn.lFrame.currentQueryIndex}function ih(i){xn.lFrame.currentQueryIndex=i}function Ev(i){const o=i[y];return 2===o.type?o.declTNode:1===o.type?i[O]:null}function fE(i,o,a){if(a&yt.SkipSelf){let l=o,h=i;for(;!(l=l.parent,null!==l||a&yt.Host||(l=Ev(h),null===l||(h=h[Yt],10&l.type))););if(null===l)return!1;o=l,i=h}const c=xn.lFrame=oh();return c.currentTNode=o,c.lView=i,!0}function pE(i){const o=oh(),a=i[y];xn.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function oh(){const i=xn.lFrame,o=null===i?null:i.child;return null===o?HD(i):o}function HD(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function zD(){const i=xn.lFrame;return xn.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const wv=zD;function Iv(){const i=zD();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Gi(){return xn.lFrame.selectedIndex}function Al(i){xn.lFrame.selectedIndex=i}function Fr(){const i=xn.lFrame;return rh(i.tView,i.selectedIndex)}function DM(){xn.lFrame.currentNamespace=ND}let WD=!0;function fp(){return WD}function Ko(i){WD=i}function Cv(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:R,ngOnDestroy:k}=h;m&&(i.contentHooks??=[]).push(-a,m),E&&((i.contentHooks??=[]).push(a,E),(i.contentCheckHooks??=[]).push(a,E)),T&&(i.viewHooks??=[]).push(-a,T),R&&((i.viewHooks??=[]).push(a,R),(i.viewCheckHooks??=[]).push(a,R)),null!=k&&(i.destroyHooks??=[]).push(a,k)}}function Tv(i,o,a){GD(i,o,3,a)}function Nu(i,o,a,c){(3&i[b])===a&&GD(i,o,a,c)}function xl(i,o){let a=i[b];(3&a)===o&&(a&=16383,a+=1,i[b]=a)}function GD(i,o,a,c){const h=c??-1,m=o.length-1;let E=0;for(let T=void 0!==c?65535&i[Fn]:0;T<m;T++)if("number"==typeof o[T+1]){if(E=o[T],null!=c&&E>=c)break}else o[T]<0&&(i[Fn]+=65536),(E<h||-1==h)&&(SM(i,a,o,T),i[Fn]=(4294901760&i[Fn])+T+2),T++}function qD(i,o){rc(4,i,o);const a=ae(null);try{o.call(i)}finally{ae(a),rc(5,i,o)}}function SM(i,o,a,c){const l=a[c]<0,h=a[c+1],E=i[l?-a[c]:a[c]];l?i[b]>>14<i[Fn]>>16&&(3&i[b])===o&&(i[b]+=16384,qD(E,h)):qD(E,h)}const sh=-1;class mp{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}const mE={};class Rl{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=ec(c);const l=this.injector.get(o,mE,c);return l!==mE||a===mE?l:this.parentInjector.get(o,a,c)}}function gE(i){return i!==sh}function vp(i){return 32767&i}function _p(i,o){let a=function RM(i){return i>>16}(i),c=o;for(;a>0;)c=c[Yt],a--;return c}let Av=!0;function xv(i){const o=Av;return Av=i,o}const yp=255,Ml=5;let wF=0;const sc={};function Rv(i,o){const a=XD(i,o);if(-1!==a)return a;const c=o[y];c.firstCreatePass&&(i.injectorIndex=o.length,bp(c.data,i),bp(o,null),bp(c.blueprint,null));const l=ch(i,o),h=i.injectorIndex;if(gE(l)){const m=vp(l),E=_p(l,o),T=E[y].data;for(let R=0;R<8;R++)o[h+R]=E[m+R]|T[m+R]}return o[h+8]=l,h}function bp(i,o){i.push(0,0,0,0,0,0,0,0,o)}function XD(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function ch(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=o;for(;null!==l;){if(c=sC(l),null===c)return sh;if(a++,l=l[Yt],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return sh}function vE(i,o,a){!function OM(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(je)&&(c=a[je]),null==c&&(c=a[je]=wF++);const l=c&yp;o.data[i+(l>>Ml)]|=1<<l}(i,o,a)}function ZD(i,o,a){if(a&yt.Optional||void 0!==i)return i;Wt()}function JD(i,o,a,c){if(a&yt.Optional&&void 0===c&&(c=null),!(a&(yt.Self|yt.Host))){const l=i[ve],h=Dn(void 0);try{return l?l.get(o,c,a&yt.Optional):Ln(o,c,a&yt.Optional)}finally{Dn(h)}}return ZD(c,0,a)}function eC(i,o,a,c=yt.Default,l){if(null!==i){if(2048&o[b]&&!(c&yt.Self)){const m=function oC(i,o,a,c,l){let h=i,m=o;for(;null!==h&&null!==m&&2048&m[b]&&!(512&m[b]);){const E=tC(h,m,a,c|yt.Self,sc);if(E!==sc)return E;let T=h.parent;if(!T){const R=m[$o];if(R){const k=R.get(a,sc,c);if(k!==sc)return k}T=sC(m),m=m[Yt]}h=T}return l}(i,o,a,c,sc);if(m!==sc)return m}const h=tC(i,o,a,c,sc);if(h!==sc)return h}return JD(o,a,c,l)}function tC(i,o,a,c,l){const h=function PM(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(je)?i[je]:void 0;return"number"==typeof o?o>=0?o&yp:iC:o}(a);if("function"==typeof h){if(!fE(o,i,c))return c&yt.Host?ZD(l,0,c):JD(o,a,c,l);try{let m;if(m=h(c),null!=m||c&yt.Optional)return m;Wt()}finally{wv()}}else if("number"==typeof h){let m=null,E=XD(i,o),T=sh,R=c&yt.Host?o[mn][O]:null;for((-1===E||c&yt.SkipSelf)&&(T=-1===E?ch(i,o):o[E+8],T!==sh&&rC(c,!1)?(m=o[y],E=vp(T),o=_p(T,o)):E=-1);-1!==E;){const k=o[y];if(nC(h,E,k.data)){const z=Mv(E,o,a,m,c,R);if(z!==sc)return z}T=o[E+8],T!==sh&&rC(c,o[y].data[E+8]===R)&&nC(h,E,o)?(m=k,E=vp(T),o=_p(T,o)):E=-1}}return l}function Mv(i,o,a,c,l,h){const m=o[y],E=m.data[i+8],k=Ov(E,m,a,null==c?Ms(E)&&Av:c!=m&&!!(3&E.type),l&yt.Host&&h===E);return null!==k?Ol(o,m,k,E):sc}function Ov(i,o,a,c,l){const h=i.providerIndexes,m=o.data,E=1048575&h,T=i.directiveStart,k=h>>20,le=l?E+k:i.directiveEnd;for(let _e=c?E:E+k;_e<le;_e++){const Ze=m[_e];if(_e<T&&a===Ze||_e>=T&&Ze.type===a)return _e}if(l){const _e=m[T];if(_e&&So(_e)&&_e.type===a)return T}return null}function Ol(i,o,a,c){let l=i[a];const h=o.data;if(function AM(i){return i instanceof mp}(l)){const m=l;m.resolving&&function qt(i,o){throw o&&o.join(" > "),new zt(-200,i)}(function it(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():We(i)}(h[a]));const E=xv(m.canSeeViewProviders);m.resolving=!0;const R=m.injectImpl?Dn(m.injectImpl):null;fE(i,c,yt.Default);try{l=i[a]=m.factory(void 0,h,i,c),o.firstCreatePass&&a>=c.directiveStart&&function pp(i,o,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:h}=o.type.prototype;if(c){const m=iE(o);(a.preOrderHooks??=[]).push(i,m),(a.preOrderCheckHooks??=[]).push(i,m)}l&&(a.preOrderHooks??=[]).push(0-i,l),h&&((a.preOrderHooks??=[]).push(i,h),(a.preOrderCheckHooks??=[]).push(i,h))}(a,h[a],o)}finally{null!==R&&Dn(R),xv(E),m.resolving=!1,wv()}}return l}function nC(i,o,a){return!!(a[o+(i>>Ml)]&1<<i)}function rC(i,o){return!(i&yt.Self||i&yt.Host&&o)}class Fi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return eC(this._tNode,this._lView,o,ec(c),a)}}function iC(){return new Fi(Tr(),bt())}function NM(i){return os(()=>{const o=i.prototype.constructor,a=o[Xe]||Pv(o),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const h=l[Xe]||Pv(l);if(h&&h!==a)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function Pv(i){return Eu(i)?()=>{const o=Pv(bn(i));return o&&o()}:tc(i)}function sC(i){const o=i[y],a=o.type;return 2===a?o.declTNode:1===a?i[O]:null}function Nv(i){return function YD(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const h=a[l];if($b(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(h===o)return a[l+1];l+=2}}}return null}(Tr(),i)}function wE(i,o=null,a=null,c){const l=Lv(i,o,a,c);return l.resolveInjectorInitializers(),l}function Lv(i,o=null,a=null,c,l=new Set){const h=[a||Jn,so(i)];return c=c||("object"==typeof i?void 0:Qr(i)),new Au(h,o||tp(),c||null,l)}class Li{static#e=this.THROW_IF_NOT_FOUND=si;static#t=this.NULL=new Jf;static create(o,a){if(Array.isArray(o))return wE({name:""},a,o,"");{const c=o.name??"";return wE({name:c},o.parent,o.providers,c)}}static#n=this.\u0275prov=or({token:Li,providedIn:"any",factory:()=>io(qg)});static#r=this.__NG_ELEMENT_ID__=-1}new In("").__NG_ELEMENT_ID__=i=>{const o=Tr();if(null===o)throw new zt(204,!1);if(2&o.type)return o.value;if(i&yt.Optional)return null;throw new zt(204,!1)};function hh(i){return i.ngOriginalError}class Aa{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&hh(o);for(;a&&hh(a);)a=hh(a);return a||null}}const hC=new In("",{providedIn:"root",factory:()=>sn(Aa).handleError.bind(void 0)});let Ep=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=fC;static#t=this.__NG_ENV_ID__=a=>a}return i})();class BM extends Ep{constructor(o){super(),this._lView=o}onDestroy(o){return gv(this._lView,o),()=>function aE(i,o){if(null===i[sr])return;const a=i[sr].indexOf(o);-1!==a&&i[sr].splice(a,1)}(this._lView,o)}}function fC(){return new BM(bt())}function ac(){return fh(Tr(),bt())}function fh(i,o){return new wp(lo(i,o))}let wp=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=ac}return i})();function Ip(i){return i instanceof wp?i.nativeElement:i}let Nl=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Mt.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=or({token:i,providedIn:"root",factory:()=>new i})}return i})();const Wc=class mC extends jt.B{constructor(o=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=o,$c()&&(this.destroyRef=sn(Ep,{optional:!0})??void 0,this.pendingTasks=sn(Nl,{optional:!0})??void 0)}emit(o){const a=ae(null);try{super.next(o)}finally{ae(a)}}subscribe(o,a,c){let l=o,h=a||(()=>null),m=c;if(o&&"object"==typeof o){const T=o;l=T.next?.bind(T),h=T.error?.bind(T),m=T.complete?.bind(T)}this.__isAsync&&(h=this.wrapInTimeout(h),l&&(l=this.wrapInTimeout(l)),m&&(m=this.wrapInTimeout(m)));const E=super.subscribe({next:l,error:h,complete:m});return o instanceof on.yU&&o.add(E),E}wrapInTimeout(o){return a=>{const c=this.pendingTasks?.add();setTimeout(()=>{o(a),void 0!==c&&this.pendingTasks?.remove(c)})}}};function xF(){return this._results[Symbol.iterator]()}class Bv{static#e=Symbol.iterator;get changes(){return this._changes??=new Wc}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const a=Bv.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=xF)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){this.dirty=!1;const c=function Bo(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function Fb(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],h=o[c];if(a&&(l=a(l),h=a(h)),h!==l)return!1}return!0}(this._results,c,a))&&(this._results=c,this.length=c.length,this.last=c[this.length-1],this.first=c[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(o){this._onDirty=o}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Os(i){return!(128&~i.flags)}const vC=new Map;let RF=0;const Uv="__ngContext__";function Wo(i,o){Cn(o)?(i[Uv]=o[ui],function _C(i){vC.set(i[ui],i)}(o)):i[Uv]=o}function qM(i){return XM(i[wt])}function QM(i){return XM(i[w])}function XM(i){for(;null!==i&&!Kr(i);)i=i[w];return i}let SC;function xE(i){SC=i}const Fl=new In("",{providedIn:"root",factory:()=>Ps}),Ps="ng",Ns=new In(""),mh=new In("",{providedIn:"platform",factory:()=>"unknown"}),AC=new In(""),xC=new In("",{providedIn:"root",factory:()=>function li(){if(void 0!==SC)return SC;if(typeof document<"u")return document;throw new zt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let PE=()=>null;function Gv(i,o,a=!1){return PE(i,o,a)}const FC=new In("",{providedIn:"root",factory:()=>!1});let Yv,Vu;function Lu(i){return function Zv(){if(void 0===Yv&&(Yv=null,hr.trustedTypes))try{Yv=hr.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Yv}()?.createHTML(i)||i}function BC(i){return function VE(){if(void 0===Vu&&(Vu=null,hr.trustedTypes))try{Vu=hr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Vu}()?.createScriptURL(i)||i}class $l{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${$d})`}}class zF extends $l{getTypeName(){return"HTML"}}class aO extends $l{getTypeName(){return"Style"}}class cO extends $l{getTypeName(){return"Script"}}class uO extends $l{getTypeName(){return"URL"}}class lO extends $l{getTypeName(){return"ResourceURL"}}function Gc(i){return i instanceof $l?i.changingThisBreaksApplicationSecurity:i}function Hl(i,o){const a=function dO(i){return i instanceof $l&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${$d})`)}return a===o}function jC(i){return new zF(i)}function hO(i){return new aO(i)}function fO(i){return new cO(i)}function pO(i){return new uO(i)}function mO(i){return new lO(i)}class gO{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Lu(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class vO{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const a=this.inertDocument.createElement("template");return a.innerHTML=Lu(o),a}}const yO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Op(i){return(i=String(i)).match(yO)?i:"unsafe:"+i}function uc(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function Pp(...i){const o={};for(const a of i)for(const c in a)a.hasOwnProperty(c)&&(o[c]=!0);return o}const $C=uc("area,br,col,hr,img,wbr"),HC=uc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zC=uc("rp,rt"),jE=Pp($C,Pp(HC,uc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Pp(zC,uc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Pp(zC,HC)),UE=uc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Jv=Pp(UE,uc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),uc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),wO=uc("script,style,template");class IO{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,c=!0,l=[];for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)l.push(a),a=CO(a);else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=DO(a);if(h){a=h;break}a=l.pop()}return this.buf.join("")}startElement(o){const a=WC(o).toLowerCase();if(!jE.hasOwnProperty(a))return this.sanitizedSomething=!0,!wO.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=o.attributes;for(let l=0;l<c.length;l++){const h=c.item(l),m=h.name,E=m.toLowerCase();if(!Jv.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let T=h.value;UE[E]&&(T=Op(T)),this.buf.push(" ",m,'="',QC(T),'"')}return this.buf.push(">"),!0}endElement(o){const a=WC(o).toLowerCase();jE.hasOwnProperty(a)&&!$C.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(QC(o))}}function DO(i){const o=i.nextSibling;if(o&&i!==o.previousSibling)throw GC(o);return o}function CO(i){const o=i.firstChild;if(o&&function KC(i,o){return(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(i,o))throw GC(o);return o}function WC(i){const o=i.nodeName;return"string"==typeof o?o:"FORM"}function GC(i){return new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`)}const TO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qC=/([^\#-~ |!])/g;function QC(i){return i.replace(/&/g,"&amp;").replace(TO,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(qC,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Np;function XC(i,o){let a=null;try{Np=Np||function UC(i){const o=new vO(i);return function _O(){try{return!!(new window.DOMParser).parseFromString(Lu(""),"text/html")}catch{return!1}}()?new gO(o):o}(i);let c=o?String(o):"";a=Np.getInertBodyElement(c);let l=5,h=c;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,c=h,h=a.innerHTML,a=Np.getInertBodyElement(c)}while(c!==h);return Lu((new IO).sanitizeChildren(kp(a)||a))}finally{if(a){const c=kp(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function kp(i){return"content"in i&&function qF(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var qc=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(qc||{});function ZC(i){const o=Lp();return o?o.sanitize(qc.URL,i)||"":Hl(i,"URL")?Gc(i):Op(We(i))}function $E(i){const o=Lp();if(o)return BC(o.sanitize(qc.RESOURCE_URL,i)||"");if(Hl(i,"ResourceURL"))return BC(Gc(i));throw new zt(904,!1)}function Fp(i,o,a){return function AO(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?$E:ZC}(o,a)(i)}function Lp(){const i=bt();return i&&i[at].sanitizer}function sa(i){return i instanceof Function?i():i}function ks(i){return"browser"===(i??sn(Li)).get(mh)}var r_=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(r_||{});let XE;function bh(i,o){return XE(i,o)}function jp(i,o,a,c,l){if(null!=c){let h,m=!1;Kr(c)?h=c:Cn(c)&&(m=!0,c=c[On]);const E=ar(c);0===i&&null!==a?null==l?zO(o,a,E):wh(o,a,E,l||null,!0):1===i&&null!==a?wh(o,a,E,l||null,!0):2===i?function c_(i,o,a){const c=e0(i,o);c&&function rL(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,E,m):3===i&&o.destroyNode(E),null!=h&&function oL(i,o,a,c,l){const h=a[Ho];h!==ar(a)&&jp(o,i,c,h,l);for(let E=Rr;E<a.length;E++){const T=a[E];r0(T[y],T,i,o,c,h)}}(o,i,h,a,l)}}function o_(i,o,a){return i.createElement(o,a)}function Up(i,o){o[at].changeDetectionScheduler?.notify(8),r0(i,o,o[xe],2,null,null)}function JE(i,o){const a=i[Sa],c=o[C];(Cn(c)||o[mn]!==c[C][mn])&&(i[b]|=us.HasTransplantedViews),null===a?i[Sa]=[o]:a.push(o)}function uT(i,o){const a=i[Sa],c=a.indexOf(o);a.splice(c,1)}function Eh(i,o){if(i.length<=Rr)return;const a=Rr+o,c=i[a];if(c){const l=c[jn];null!==l&&l!==i&&uT(l,c),o>0&&(i[a-1][w]=c[w]);const h=Qf(i,Rr+o);!function BO(i,o){Up(i,o),o[On]=null,o[O]=null}(c[y],c);const m=h[ur];null!==m&&m.detachView(h[y]),c[C]=null,c[w]=null,c[b]&=-129}return c}function s_(i,o){if(!(256&o[b])){const a=o[xe];a.destroyNode&&r0(i,o,a,3,null,null),function UO(i){let o=i[wt];if(!o)return dc(i[y],i);for(;o;){let a=null;if(Cn(o))a=o[wt];else{const c=o[Rr];c&&(a=c)}if(!a){for(;o&&!o[w]&&o!==i;)Cn(o)&&dc(o[y],o),o=o[C];null===o&&(o=i),Cn(o)&&dc(o[y],o),a=o&&o[w]}o=a}}(o)}}function dc(i,o){if(256&o[b])return;const a=ae(null);try{o[b]&=-129,o[b]|=256,o[uo]&&dt(o[uo]),function HO(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=o[a[c]];if(!(l instanceof mp)){const h=a[c+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const E=l[h[m]],T=h[m+1];rc(4,E,T);try{T.call(E)}finally{rc(5,E,T)}}else{rc(4,l,h);try{h.call(l)}finally{rc(5,l,h)}}}}}(i,o),function nL(i,o){const a=i.cleanup,c=o[Y];if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+3];m>=0?c[m]():c[-m].unsubscribe(),h+=2}else a[h].call(c[a[h+1]]);null!==c&&(o[Y]=null);const l=o[sr];if(null!==l){o[sr]=null;for(let h=0;h<l.length;h++)(0,l[h])()}}(i,o),1===o[y].type&&o[xe].destroy();const c=o[jn];if(null!==c&&Kr(o[C])){c!==o[C]&&uT(c,o);const l=o[ur];null!==l&&l.detachView(i)}!function CE(i){vC.delete(i[ui])}(o)}finally{ae(a)}}function lT(i,o,a){return function dT(i,o,a){let c=o;for(;null!==c&&168&c.type;)c=(o=c).parent;if(null===c)return a[On];{const{componentOffset:l}=c;if(l>-1){const{encapsulation:h}=i.data[c.directiveStart+l];if(h===Cu.None||h===Cu.Emulated)return null}return lo(c,a)}}(i,o.parent,a)}function wh(i,o,a,c,l){i.insertBefore(o,a,c,l)}function zO(i,o,a){i.appendChild(o,a)}function KO(i,o,a,c,l){null!==c?wh(i,o,a,c,l):zO(i,o,a)}function e0(i,o){return i.parentNode(o)}function t0(i,o,a){return WO(i,o,a)}let n0,WO=function fT(i,o,a){return 40&i.type?lo(i,a):null};function $p(i,o,a,c){const l=lT(i,c,o),h=o[xe],E=t0(c.parent||o[O],c,o);if(null!=l)if(Array.isArray(a))for(let T=0;T<a.length;T++)KO(h,l,a[T],E,!1);else KO(h,l,a,E,!1);void 0!==n0&&n0(h,c,o,a,l)}function Ih(i,o){if(null!==o){const a=o.type;if(3&a)return lo(o,i);if(4&a)return a_(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return Ih(i,c);{const l=i[o.index];return Kr(l)?a_(-1,l):ar(l)}}if(32&a)return bh(o,i)()||ar(i[o.index]);{const c=pT(i,o);return null!==c?Array.isArray(c)?c[0]:Ih(zc(i[mn]),c):Ih(i,o.next)}}return null}function pT(i,o){return null!==o?i[mn][O].projection[o.projection]:null}function a_(i,o){const a=Rr+i+1;if(a<o.length){const c=o[a],l=c[y].firstChild;if(null!==l)return Ih(c,l)}return o[Ho]}function mT(i,o,a,c,l,h,m){for(;null!=a;){if(128===a.type){a=a.next;continue}const E=c[a.index],T=a.type;if(m&&0===o&&(E&&Wo(ar(E),c),a.flags|=2),32&~a.flags)if(8&T)mT(i,o,a.child,c,l,h,!1),jp(o,i,l,E,h);else if(32&T){const R=bh(a,c);let k;for(;k=R();)jp(o,i,l,k,h);jp(o,i,l,E,h)}else 16&T?GO(i,o,c,a,l,h):jp(o,i,l,E,h);a=m?a.projectionNext:a.next}}function r0(i,o,a,c,l,h){mT(a,c,i.firstChild,o,l,h,!1)}function GO(i,o,a,c,l,h){const m=a[mn],T=m[O].projection[c.projection];if(Array.isArray(T))for(let R=0;R<T.length;R++)jp(o,i,l,T[R],h);else{let R=T;const k=m[C];Os(c)&&(R.flags|=128),mT(i,o,R,k,l,h,!0)}}function qO(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function Dh(i,o,a){const{mergedAttrs:c,classes:l,styles:h}=a;null!==c&&Ub(i,o,c),null!==l&&qO(i,o,l),null!==h&&function aL(i,o,a){i.setAttribute(o,"style",a)}(i,o,h)}const kn={};function QO(i=1){XO(zn(),bt(),Gi()+i,!1)}function XO(i,o,a,c){if(!c)if(3&~o[b]){const h=i.preOrderHooks;null!==h&&Nu(o,h,0,a)}else{const h=i.preOrderCheckHooks;null!==h&&Tv(o,h,a)}Al(a)}function zp(i,o=yt.Default){const a=bt();return null===a?io(i,o):eC(Tr(),a,bn(i),o)}function YO(){throw new Error("invalid")}function ZO(i,o,a,c,l,h){const m=ae(null);try{let E=null;l&Tu.SignalBased&&(E=o[c][te]),null!==E&&void 0!==E.transformFn&&(h=E.transformFn(h)),l&Tu.HasDecoratorInputTransform&&(h=i.inputTransforms[c].call(o,h)),null!==i.setInput?i.setInput(o,E,h,a,c):OD(o,E,c,h)}finally{ae(m)}}function u_(i,o,a,c,l,h,m,E,T,R,k){const z=o.blueprint.slice();return z[On]=l,z[b]=204|c,(null!==R||i&&2048&i[b])&&(z[b]|=2048),ls(z),z[C]=z[Yt]=i,z[Z]=a,z[at]=m||i&&i[at],z[xe]=E||i&&i[xe],z[ve]=T||i&&i[ve]||null,z[O]=h,z[ui]=function MF(){return RF++}(),z[B]=k,z[$o]=R,z[mn]=2==o.type?i[mn]:z,z}function Ch(i,o,a,c,l){let h=i.data[o];if(null===h)h=function o0(i,o,a,c,l){const h=ra(),m=uE(),T=i.data[o]=function hL(i,o,a,c,l,h){let m=o?o.injectorIndex:-1,E=0;return oc()&&(E|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:m,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,o,c,l);return null===i.firstChild&&(i.firstChild=T),null!==h&&(m?null==h.child&&null!==T.parent&&(h.child=T):null===h.next&&(h.next=T,T.prev=h)),T}(i,o,a,c,l),function UD(){return xn.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=a,h.value=c,h.attrs=l;const m=function up(){const i=xn.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return zo(h,!0),h}function Gl(i,o,a,c){if(0===a)return-1;const l=o.length;for(let h=0;h<a;h++)o.push(c),i.blueprint.push(c),i.data.push(null);return l}function JO(i,o,a,c,l){const h=Gi(),m=2&c;try{Al(-1),m&&o.length>an&&XO(i,o,an,!1),rc(m?2:0,l),a(c,l)}finally{Al(h),rc(m?3:1,l)}}function Kp(i,o,a){if(eE(o)){const c=ae(null);try{const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const E=i.data[m];E.contentQueries&&E.contentQueries(1,a[m],m)}}finally{ae(c)}}}function gT(i,o,a){_v()&&(function aP(i,o,a,c){const l=a.directiveStart,h=a.directiveEnd;Ms(a)&&function lP(i,o,a){const c=lo(o,i),l=eP(a);let m=16;a.signals?m=4096:a.onPush&&(m=64);const E=d_(i,u_(i,l,null,m,c,o,null,i[at].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=E}(o,a,i.data[l+a.componentOffset]),i.firstCreatePass||Rv(a,o),Wo(c,o);const m=a.initialInputs;for(let E=l;E<h;E++){const T=i.data[E],R=Ol(o,i,E,a);Wo(R,o),null!==m&&ST(0,E-l,R,T,0,m),So(T)&&(ho(a.index,o)[Z]=Ol(o,i,E,a))}}(i,o,a,lo(a,o)),!(64&~a.flags)&&wT(i,o,a))}function vT(i,o,a=lo){const c=o.localNames;if(null!==c){let l=o.index+1;for(let h=0;h<c.length;h+=2){const m=c[h+1],E=-1===m?a(o,i):i[m];i[l++]=E}}}function eP(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=_T(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function _T(i,o,a,c,l,h,m,E,T,R,k){const z=an+c,le=z+l,_e=function uL(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:kn);return a}(z,le),Ze="function"==typeof R?R():R;return _e[y]={type:i,blueprint:_e,template:a,queries:null,viewQuery:E,declTNode:o,data:_e.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:T,consts:Ze,incompleteFirstPass:!1,ssrId:k}}let yT=()=>null;function bT(i,o,a,c,l){for(let h in o){if(!o.hasOwnProperty(h))continue;const m=o[h];if(void 0===m)continue;c??={};let E,T=Tu.None;Array.isArray(m)?(E=m[0],T=m[1]):E=m;let R=h;if(null!==l){if(!l.hasOwnProperty(h))continue;R=l[h]}0===i?fs(c,a,R,E,T):fs(c,a,R,E)}return c}function fs(i,o,a,c,l){let h;i.hasOwnProperty(a)?(h=i[a]).push(o,c):h=i[a]=[o,c],void 0!==l&&h.push(l)}function Gp(i,o,a,c){if(_v()){const l=null===c?null:{"":-1},h=function pL(i,o){const a=i.directiveRegistry;let c=null,l=null;if(a)for(let h=0;h<a.length;h++){const m=a[h];if(Wb(o,m.selectors,!1))if(c||(c=[]),So(m))if(null!==m.findHostDirectiveDefs){const E=[];l=l||new Map,m.findHostDirectiveDefs(m,E,l),c.unshift(...E,m),DT(i,o,E.length)}else c.unshift(m),DT(i,o,0);else l=l||new Map,m.findHostDirectiveDefs?.(m,c,l),c.push(m)}return null===c?null:[c,l]}(i,a);let m,E;null===h?m=E=null:[m,E]=h,null!==m&&tr(i,o,a,m,l,E),l&&function cP(i,o,a){if(o){const c=i.localNames=[];for(let l=0;l<o.length;l+=2){const h=a[o[l+1]];if(null==h)throw new zt(-301,!1);c.push(o[l],h)}}}(a,c,l)}a.mergedAttrs=Qd(a.mergedAttrs,a.attrs)}function tr(i,o,a,c,l,h){for(let R=0;R<c.length;R++)vE(Rv(a,o),i,c[R].type);!function TT(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let R=0;R<c.length;R++){const k=c[R];k.providersResolver&&k.providersResolver(k)}let m=!1,E=!1,T=Gl(i,o,c.length,null);for(let R=0;R<c.length;R++){const k=c[R];a.mergedAttrs=Qd(a.mergedAttrs,k.hostAttrs),uP(i,a,o,T,k),CT(T,k,l),null!==k.contentQueries&&(a.flags|=4),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=64);const z=k.type.prototype;!m&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),m=!0),!E&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),E=!0),T++}!function Wp(i,o,a){const l=o.directiveEnd,h=i.data,m=o.attrs,E=[];let T=null,R=null;for(let k=o.directiveStart;k<l;k++){const z=h[k],le=a?a.get(z):null,Ze=le?le.outputs:null;T=bT(0,z.inputs,k,T,le?le.inputs:null),R=bT(1,z.outputs,k,R,Ze);const _t=null===T||null===m||Xd(o)?null:s0(T,k,m);E.push(_t)}null!==T&&(T.hasOwnProperty("class")&&(o.flags|=8),T.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=T,o.outputs=R}(i,a,h)}function wT(i,o,a){const c=a.directiveStart,l=a.directiveEnd,h=a.index,m=function hE(){return xn.lFrame.currentDirectiveIndex}();try{Al(h);for(let E=c;E<l;E++){const T=i.data[E],R=o[E];lp(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&IT(T,R)}}finally{Al(-1),lp(m)}}function IT(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function DT(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function CT(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;So(o)&&(a[""]=i)}}function uP(i,o,a,c,l){i.data[c]=l;const h=l.factory||(l.factory=tc(l.type)),m=new mp(h,So(l),zp);i.blueprint[c]=m,a[c]=m,function ET(i,o,a,c,l){const h=l.hostBindings;if(h){let m=i.hostBindingOpCodes;null===m&&(m=i.hostBindingOpCodes=[]);const E=~o.index;(function sP(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(m)!=E&&m.push(E),m.push(a,c,h)}}(i,o,c,Gl(i,a,l.hostVars,kn),l)}function Ra(i,o,a,c,l,h){const m=lo(i,o);!function qp(i,o,a,c,l,h,m){if(null==h)i.removeAttribute(o,l,a);else{const E=null==m?We(h):m(h,c||"",l);i.setAttribute(o,l,E,a)}}(o[xe],m,h,i.value,a,c,l)}function ST(i,o,a,c,l,h){const m=h[o];if(null!==m)for(let E=0;E<m.length;)ZO(c,a,m[E++],m[E++],m[E++],m[E++])}function s0(i,o,a){let c=null,l=0;for(;l<a.length;){const h=a[l];if(0!==h)if(5!==h){if("number"==typeof h)break;if(i.hasOwnProperty(h)){null===c&&(c=[]);const m=i[h];for(let E=0;E<m.length;E+=3)if(m[E]===o){c.push(h,m[E+1],m[E+2],a[l+1]);break}}l+=2}else l+=2;else l+=4}return c}function l_(i,o,a,c){return[i,!0,0,o,null,c,null,a,null,null]}function AT(i,o){const a=i.contentQueries;if(null!==a){const c=ae(null);try{for(let l=0;l<a.length;l+=2){const m=a[l+1];if(-1!==m){const E=i.data[m];ih(a[l]),E.contentQueries(2,o[m],m)}}}finally{ae(c)}}}function d_(i,o){return i[wt]?i[nn][w]=o:i[wt]=o,i[nn]=o,o}function Qp(i,o,a){ih(0);const c=ae(null);try{o(i,a)}finally{ae(c)}}function xT(i){return i[Y]??=[]}function RT(i){return i.cleanup??=[]}function Th(i,o){const a=i[ve],c=a?a.get(Aa,null):null;c&&c.handleError(o)}function a0(i,o,a,c,l){for(let h=0;h<a.length;){const m=a[h++],E=a[h++],T=a[h++];ZO(i.data[m],o[m],c,E,T,l)}}function dP(i,o){const a=ho(o,i),c=a[y];!function hP(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const l=a[On];null!==l&&null===a[B]&&(a[B]=Gv(l,a[ve])),Xp(c,a,a[Z])}function Xp(i,o,a){pE(o);try{const c=i.viewQuery;null!==c&&Qp(1,c,a);const l=i.template;null!==l&&JO(i,o,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),o[ur]?.finishViewCreation(i),i.staticContentQueries&&AT(i,o),i.staticViewQueries&&Qp(2,i.viewQuery,a);const h=i.components;null!==h&&function MT(i,o){for(let a=0;a<o.length;a++)dP(i,o[a])}(o,h)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[b]&=-5,Iv()}}function Sh(i,o,a,c){const l=ae(null);try{const h=o.tView,T=u_(i,h,a,4096&i[b]?4096:16,null,o,null,null,c?.injector??null,c?.embeddedViewInjector??null,c?.dehydratedView??null);T[jn]=i[o.index];const k=i[ur];return null!==k&&(T[ur]=k.createEmbeddedView(h)),Xp(h,T,a),T}finally{ae(l)}}function OT(i,o){const a=Rr+o;if(a<i.length)return i[a]}function hc(i,o){return!o||null===o.firstChild||Os(i)}function ju(i,o,a,c=!0){const l=o[y];if(function $O(i,o,a,c){const l=Rr+c,h=a.length;c>0&&(a[l-1][w]=o),c<h-Rr?(o[w]=a[l],Lb(a,Rr+c,o)):(a.push(o),o[w]=null),o[C]=a;const m=o[jn];null!==m&&a!==m&&JE(m,o);const E=o[ur];null!==E&&E.insertView(i),ap(o),o[b]|=128}(l,o,i,a),c){const m=a_(a,i),E=o[xe],T=e0(E,i[Ho]);null!==T&&function jO(i,o,a,c,l,h){c[On]=l,c[O]=o,r0(i,c,a,1,l,h)}(l,i[O],E,o,T,m)}const h=o[B];null!==h&&null!==h.firstChild&&(h.firstChild=null)}function Xc(i,o){const a=Eh(i,o);return void 0!==a&&s_(a[y],a),a}function Yp(i,o,a,c,l=!1){for(;null!==a;){if(128===a.type){a=l?a.projectionNext:a.next;continue}const h=o[a.index];null!==h&&c.push(ar(h)),Kr(h)&&PT(h,c);const m=a.type;if(8&m)Yp(i,o,a.child,c);else if(32&m){const E=bh(a,o);let T;for(;T=E();)c.push(T)}else if(16&m){const E=pT(o,a);if(Array.isArray(E))c.push(...E);else{const T=zc(o[mn]);Yp(T[y],T,E,c,!0)}}a=l?a.projectionNext:a.next}return c}function PT(i,o){for(let a=Rr;a<i.length;a++){const c=i[a],l=c[y].firstChild;null!==l&&Yp(c[y],c,l,o)}i[Ho]!==i[On]&&o.push(i[Ho])}let NT=[];const gP={...$e,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{cp(i.lView)},consumerOnSignalRead(){this.lView[uo]=this}},_P={...$e,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{let o=zc(i.lView);for(;o&&!kT(o[y]);)o=zc(o);o&&sp(o)},consumerOnSignalRead(){this.lView[uo]=this}};function kT(i){return 2!==i.type}const yP=100;function h_(i,o=!0,a=0){const c=i[at],l=c.rendererFactory;l.begin?.();try{!function bP(i,o){const a=Tl();try{dE(!0),c0(i,o);let c=0;for(;ic(i);){if(c===yP)throw new zt(103,!1);c++,c0(i,1)}}finally{dE(a)}}(i,a)}catch(m){throw o&&Th(i,m),m}finally{l.end?.(),c.inlineEffectRunner?.flush()}}function EP(i,o,a,c){const l=o[b];if(!(256&~l))return;o[at].inlineEffectRunner?.flush(),pE(o);let E=!0,T=null,R=null;kT(i)?(R=function fP(i){return i[uo]??function pP(i){const o=NT.pop()??Object.create(gP);return o.lView=i,o}(i)}(o),T=Oe(R)):null===function de(){return ie}()?(E=!1,R=function vP(i){const o=i[uo]??Object.create(_P);return o.lView=i,o}(o),T=Oe(R)):o[uo]&&(dt(o[uo]),o[uo]=null);try{ls(o),function Sl(i){return xn.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&JO(i,o,a,2,c);const k=!(3&~l);if(k){const _e=i.preOrderCheckHooks;null!==_e&&Tv(o,_e,null)}else{const _e=i.preOrderHooks;null!==_e&&Nu(o,_e,0,null),xl(o,0)}if(function wP(i){for(let o=qM(i);null!==o;o=QM(o)){if(!(o[b]&us.HasTransplantedViews))continue;const a=o[Sa];for(let c=0;c<a.length;c++)sp(a[c])}}(o),LT(o,0),null!==i.contentQueries&&AT(i,o),k){const _e=i.contentCheckHooks;null!==_e&&Tv(o,_e)}else{const _e=i.contentHooks;null!==_e&&Nu(o,_e,1),xl(o,1)}!function cL(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)Al(~l);else{const h=l,m=a[++c],E=a[++c];$D(m,h),E(2,o[h])}}}finally{Al(-1)}}(i,o);const z=i.components;null!==z&&BT(o,z,0);const le=i.viewQuery;if(null!==le&&Qp(2,le,c),k){const _e=i.viewCheckHooks;null!==_e&&Tv(o,_e)}else{const _e=i.viewHooks;null!==_e&&Nu(o,_e,2),xl(o,2)}if(!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[co]){for(const _e of o[co])_e();o[co]=null}o[b]&=-73}catch(k){throw cp(o),k}finally{null!==R&&(pe(R,T),E&&function mP(i){i.lView[uo]!==i&&(i.lView=null,NT.push(i))}(R)),Iv()}}function LT(i,o){for(let a=qM(i);null!==a;a=QM(a))for(let c=Rr;c<a.length;c++)VT(a[c],o)}function IP(i,o,a){VT(ho(o,i),a)}function VT(i,o){na(i)&&c0(i,o)}function c0(i,o){const c=i[y],l=i[b],h=i[uo];let m=!!(0===o&&16&l);if(m||=!!(64&l&&0===o),m||=!!(1024&l),m||=!(!h?.dirty||!Be(h)),m||=!1,h&&(h.dirty=!1),i[b]&=-9217,m)EP(c,i,c.template,i[Z]);else if(8192&l){LT(i,1);const E=c.components;null!==E&&BT(i,E,1)}}function BT(i,o,a){for(let c=0;c<o.length;c++)IP(i,o[c],a)}function Zp(i,o){const a=Tl()?64:1088;for(i[at].changeDetectionScheduler?.notify(o);i;){i[b]|=a;const c=zc(i);if(Mu(i)&&!c)return i;i=c}return null}class Jp{get rootNodes(){const o=this._lView,a=o[y];return Yp(a,o,a.firstChild,[])}constructor(o,a,c=!0){this._lView=o,this._cdRefInjectingView=a,this.notifyErrorHandler=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Z]}set context(o){this._lView[Z]=o}get destroyed(){return!(256&~this._lView[b])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[C];if(Kr(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Eh(o,c),Qf(a,c))}this._attachedToViewContainer=!1}s_(this._lView[y],this._lView)}onDestroy(o){gv(this._lView,o)}markForCheck(){Zp(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[b]&=-129}reattach(){ap(this._lView),this._lView[b]|=128}detectChanges(){this._lView[b]|=1024,h_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new zt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const o=Mu(this._lView),a=this._lView[jn];null!==a&&!o&&uT(a,this._lView),Up(this._lView[y],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new zt(902,!1);this._appRef=o;const a=Mu(this._lView),c=this._lView[jn];null!==c&&!a&&JE(c,this._lView),ap(this._lView)}}let em=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=f_}return i})();const DP=em,CP=class extends DP{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,c){const l=Sh(this._declarationLView,this._declarationTContainer,o,{embeddedViewInjector:a,dehydratedView:c});return new Jp(l)}};function f_(){return p_(Tr(),bt())}function p_(i,o){return 4&i.type?new CP(o,i,fh(i,o)):null}let fn=()=>null;function Yl(i,o){return fn(i,o)}class wr{}const Gt=new In("",{providedIn:"root",factory:()=>!1}),T_=new In("");class Zl{}class eS{}class nS{resolveComponentFactory(o){throw function Jl(i){const o=Error(`No component factory found for ${Qr(i)}.`);return o.ngComponent=i,o}(o)}}class Oh{static#e=this.NULL=new nS}class Go{}let v0=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function rS(){const i=bt(),a=ho(Tr().index,i);return(Cn(a)?a:i)[xe]}()}return i})(),iS=(()=>{class i{static#e=this.\u0275prov=or({token:i,providedIn:"root",factory:()=>null})}return i})();const S_=new Set;function et(i){S_.has(i)||(S_.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}function hm(i){let o=!0;return setTimeout(()=>{o&&(o=!1,i())}),"function"==typeof hr.requestAnimationFrame&&hr.requestAnimationFrame(()=>{o&&(o=!1,i())}),()=>{o=!1}}function Oa(i){let o=!0;return queueMicrotask(()=>{o&&i()}),()=>{o=!1}}function _0(...i){}class Sr{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Wc(!1),this.onMicrotaskEmpty=new Wc(!1),this.onStable=new Wc(!1),this.onError=new Wc(!1),typeof Zone>"u")throw new zt(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.callbackScheduled=!1,function oS(i){const o=()=>{!function td(i){i.isCheckStableRunning||i.callbackScheduled||(i.callbackScheduled=!0,Zone.root.run(()=>{hm(()=>{i.callbackScheduled=!1,fm(i),i.isCheckStableRunning=!0,y0(i),i.isCheckStableRunning=!1})}),fm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,h,m,E)=>{if(function pm(i){return b0(i,"__ignore_ng_zone__")}(E))return a.invokeTask(l,h,m,E);try{return sS(i),a.invokeTask(l,h,m,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&o(),aS(i)}},onInvoke:(a,c,l,h,m,E,T)=>{try{return sS(i),a.invoke(l,h,m,E,T)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!function mm(i){return b0(i,"__scheduler_tick__")}(E)&&o(),aS(i)}},onHasTask:(a,c,l,h)=>{a.hasTask(l,h),c===l&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,fm(i),y0(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,l,h)=>(a.handleError(l,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Sr.isInAngularZone())throw new zt(909,!1)}static assertNotInAngularZone(){if(Sr.isInAngularZone())throw new zt(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,o,$u,_0,_0);try{return h.runTask(m,a,c)}finally{h.cancelTask(m)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const $u={};function y0(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function fm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&!0===i.callbackScheduled)}function sS(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function aS(i){i._nesting--,y0(i)}class qo{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Wc,this.onMicrotaskEmpty=new Wc,this.onStable=new Wc,this.onError=new Wc}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,l){return o.apply(a,c)}}function b0(i,o){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0]?.data?.[o]}var Qo=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(Qo||{});const E0={destroy(){}};function w0(i,o){!o&&cs();const a=o?.injector??sn(Li);return ks(a)?(et("NgAfterRender"),uS(i,a,!1,o?.phase??Qo.MixedReadWrite)):E0}function gm(i,o){!o&&cs();const a=o?.injector??sn(Li);return ks(a)?(et("NgAfterNextRender"),uS(i,a,!0,o?.phase??Qo.MixedReadWrite)):E0}function uS(i,o,a,c){const l=function cS(i,o){if(i instanceof Function)switch(o){case Qo.EarlyRead:return{earlyRead:i};case Qo.Write:return{write:i};case Qo.MixedReadWrite:return{mixedReadWrite:i};case Qo.Read:return{read:i}}return i}(i,c),h=o.get(A_),m=h.handler??=new zP,E=[],T=[],R=()=>{for(const _e of T)m.unregister(_e);k()},k=o.get(Ep).onDestroy(R);let z=0;const le=(_e,Ze)=>{if(!Ze)return;const _t=a?(...Ut)=>{z--,z<1&&R(),Ze(...Ut)}:Ze,Nt=sv(o,()=>new HP(_e,E,_t));m.register(Nt),T.push(Nt),z++};return le(Qo.EarlyRead,l.earlyRead),le(Qo.Write,l.write),le(Qo.MixedReadWrite,l.mixedReadWrite),le(Qo.Read,l.read),{destroy:R}}class HP{constructor(o,a,c){this.phase=o,this.pipelinedArgs=a,this.callbackFn=c,this.zone=sn(Sr),this.errorHandler=sn(Aa,{optional:!0}),sn(wr,{optional:!0})?.notify(6)}invoke(){try{const o=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,o)}catch(o){this.errorHandler?.handleError(o)}}}class zP{constructor(){this.executingCallbacks=!1,this.buckets={[Qo.EarlyRead]:new Set,[Qo.Write]:new Set,[Qo.MixedReadWrite]:new Set,[Qo.Read]:new Set},this.deferredCallbacks=new Set}register(o){(this.executingCallbacks?this.deferredCallbacks:this.buckets[o.phase]).add(o)}unregister(o){this.buckets[o.phase].delete(o),this.deferredCallbacks.delete(o)}execute(){this.executingCallbacks=!0;for(const o of Object.values(this.buckets))for(const a of o)a.invoke();this.executingCallbacks=!1;for(const o of this.deferredCallbacks)this.buckets[o.phase].add(o);this.deferredCallbacks.clear()}destroy(){for(const o of Object.values(this.buckets))o.clear();this.deferredCallbacks.clear()}}let A_=(()=>{class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const a=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const c of a)c()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=or({token:i,providedIn:"root",factory:()=>new i})}return i})();function Hu(i){return!!oo(i)}function R_(i,o,a){let c=a?i.styles:null,l=a?i.classes:null,h=0;if(null!==o)for(let m=0;m<o.length;m++){const E=o[m];"number"==typeof E?h=E:1==h?l=vl(l,E):2==h&&(c=vl(c,E+": "+o[++m]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}class C0 extends Oh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Hn(o);return new ym(a,this.ngModule)}}function T0(i,o){const a=[];for(const c in i){if(!i.hasOwnProperty(c))continue;const l=i[c];if(void 0===l)continue;const h=Array.isArray(l),m=h?l[0]:l;a.push(o?{propName:m,templateName:c,isSignal:!!((h?l[1]:Tu.None)&Tu.SignalBased)}:{propName:m,templateName:c})}return a}class ym extends eS{get inputs(){const o=this.componentDef,a=o.inputTransforms,c=T0(o.inputs,!0);if(null!==a)for(const l of c)a.hasOwnProperty(l.propName)&&(l.transform=a[l.propName]);return c}get outputs(){return T0(this.componentDef.outputs,!1)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function uM(i){return i.map(cM).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,l){const h=ae(null);try{let m=(l=l||this.ngModule)instanceof Uo?l:l?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const E=m?new Rl(o,m):o,T=E.get(Go,null);if(null===T)throw new zt(407,!1);const R=E.get(iS,null),le={rendererFactory:T,sanitizer:R,inlineEffectRunner:null,afterRenderEventManager:E.get(A_,null),changeDetectionScheduler:E.get(wr,null)},_e=T.createRenderer(null,this.componentDef),Ze=this.componentDef.selectors[0][0]||"div",_t=c?function lL(i,o,a,c){const h=c.get(FC,!1)||a===Cu.ShadowDom,m=i.selectRootElement(o,h);return function tP(i){yT(i)}(m),m}(_e,c,this.componentDef.encapsulation,E):o_(_e,Ze,function hS(i){const o=i.toLowerCase();return"svg"===o?ND:"math"===o?"math":null}(Ze));let Nt=512;this.componentDef.signals?Nt|=4096:this.componentDef.onPush||(Nt|=16);let Ut=null;null!==_t&&(Ut=Gv(_t,E,!0));const Tt=_T(0,null,null,1,0,null,null,null,null,null,null),Tn=u_(null,Tt,null,Nt,null,null,le,_e,E,null,Ut);let lr,jr;pE(Tn);try{const Yi=this.componentDef;let Ls,Ag=null;Yi.findHostDirectiveDefs?(Ls=[],Ag=new Map,Yi.findHostDirectiveDefs(Yi,Ls,Ag),Ls.push(Yi)):Ls=[Yi];const d1=function qi(i,o){const a=i[y],c=an;return i[c]=o,Ch(a,c,2,"#host",null)}(Tn,_t),o2=function fS(i,o,a,c,l,h,m){const E=l[y];!function Ku(i,o,a,c){for(const l of i)o.mergedAttrs=Qd(o.mergedAttrs,l.hostAttrs);null!==o.mergedAttrs&&(R_(o,o.mergedAttrs,!0),null!==a&&Dh(c,a,o))}(c,i,o,m);let T=null;null!==o&&(T=Gv(o,l[ve]));const R=h.rendererFactory.createRenderer(o,a);let k=16;a.signals?k=4096:a.onPush&&(k=64);const z=u_(l,eP(a),null,k,l[i.index],i,h,R,null,null,T);return E.firstCreatePass&&DT(E,i,c.length-1),d_(l,z),l[i.index]=z}(d1,_t,Yi,Ls,Tn,le,_e);jr=rh(Tt,an),_t&&function mS(i,o,a,c){if(c)Ub(i,a,["ng-version","18.1.1"]);else{const{attrs:l,classes:h}=function ID(i){const o=[],a=[];let c=1,l=2;for(;c<i.length;){let h=i[c];if("string"==typeof h)2===l?""!==h&&o.push(h,i[++c]):8===l&&a.push(h);else{if(!Ia(l))break;l=h}c++}return{attrs:o,classes:a}}(o.selectors[0]);l&&Ub(i,a,l),h&&h.length>0&&qO(i,a,h.join(" "))}}(_e,Yi,_t,c),void 0!==a&&function $r(i,o,a){const c=i.projection=[];for(let l=0;l<o.length;l++){const h=a[l];c.push(null!=h?Array.from(h):null)}}(jr,this.ngContentSelectors,a),lr=function pS(i,o,a,c,l,h){const m=Tr(),E=l[y],T=lo(m,l);tr(E,l,m,a,null,c);for(let k=0;k<a.length;k++)Wo(Ol(l,E,m.directiveStart+k,m),l);wT(E,l,m),T&&Wo(T,l);const R=Ol(l,E,m.directiveStart+m.componentOffset,m);if(i[Z]=l[Z]=R,null!==h)for(const k of h)k(R,o);return Kp(E,m,l),R}(o2,Yi,Ls,Ag,Tn,[M_]),Xp(Tt,Tn,null)}finally{Iv()}return new S0(this.componentType,lr,fh(jr,Tn),Tn,jr)}finally{ae(h)}}}class S0 extends Zl{constructor(o,a,c,l,h){super(),this.location=c,this._rootLView=l,this._tNode=h,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new Jp(l,void 0,!1),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const h=this._rootLView;a0(h[y],h,l,o,a),this.previousInputValues.set(o,a),Zp(ho(this._tNode.index,h),1)}}get injector(){return new Fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function M_(){const i=Tr();Cv(bt()[y],i)}let Ai=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Mr}return i})();function Mr(){return qP(Tr(),bt())}const gS=Ai,nd=class extends gS{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return fh(this._hostTNode,this._hostLView)}get injector(){return new Fi(this._hostTNode,this._hostLView)}get parentInjector(){const o=ch(this._hostTNode,this._hostLView);if(gE(o)){const a=_p(o,this._hostLView),c=vp(o);return new Fi(a[y].data[c+8],a)}return new Fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Xo(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Rr}createEmbeddedView(o,a,c){let l,h;"number"==typeof c?l=c:null!=c&&(l=c.index,h=c.injector);const m=Yl(this._lContainer,o.ssrId),E=o.createEmbeddedViewImpl(a||{},h,m);return this.insertImpl(E,l,hc(this._hostTNode,m)),E}createComponent(o,a,c,l,h){const m=o&&!function Xr(i){return"function"==typeof i}(o);let E;if(m)E=a;else{const Ze=a||{};E=Ze.index,c=Ze.injector,l=Ze.projectableNodes,h=Ze.environmentInjector||Ze.ngModuleRef}const T=m?o:new ym(Hn(o)),R=c||this.parentInjector;if(!h&&null==T.ngModule){const _t=(m?R:this.parentInjector).get(Uo,null);_t&&(h=_t)}const k=Hn(T.componentType??{}),z=Yl(this._lContainer,k?.id??null),_e=T.create(R,l,z?.firstChild??null,h);return this.insertImpl(_e.hostView,E,hc(this._hostTNode,z)),_e}insert(o,a){return this.insertImpl(o,a,!0)}insertImpl(o,a,c){const l=o._lView;if(function mv(i){return Kr(i[C])}(l)){const E=this.indexOf(o);if(-1!==E)this.detach(E);else{const T=l[C],R=new nd(T,T[O],T[C]);R.detach(R.indexOf(o))}}const h=this._adjustIndex(a),m=this._lContainer;return ju(m,l,h,c),o.attachToViewContainerRef(),Lb(O_(m),h,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Xo(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Eh(this._lContainer,a);c&&(Qf(O_(this._lContainer),a),s_(c[y],c))}detach(o){const a=this._adjustIndex(o,-1),c=Eh(this._lContainer,a);return c&&null!=Qf(O_(this._lContainer),a)?new Jp(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Xo(i){return i[8]}function O_(i){return i[8]||(i[8]=[])}function qP(i,o){let a;const c=o[i.index];return Kr(c)?a=c:(a=l_(c,o,null,i),o[i.index]=a,d_(o,a)),vS(a,o,i,c),new nd(a,i,o)}let vS=function pc(i,o,a,c){if(i[Ho])return;let l;l=8&a.type?ar(c):function Bi(i,o){const a=i[xe],c=a.createComment(""),l=lo(o,i);return wh(a,e0(a,l),c,function hT(i,o){return i.nextSibling(o)}(a,l),!1),c}(o,a),i[Ho]=l},Pa=()=>!1;class A0{constructor(o){this.queryList=o,this.matches=null}clone(){return new A0(this.queryList)}setDirty(){this.queryList.setDirty()}}class eu{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,l=[];for(let h=0;h<c;h++){const m=a.getByIndex(h);l.push(this.queries[m.indexInDeclarationView].clone())}return new eu(l)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}finishViewCreation(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==id(o,a).matches&&this.queries[a].setDirty()}}class tu{constructor(o,a,c=null){this.flags=a,this.read=c,this.predicate="string"==typeof o?function yS(i){return i.split(",").map(o=>o.trim())}(o):o}}class Ph{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(o,l);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new Ph(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class mc{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new mc(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1&~this.metadata.flags){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const h=c[l];this.matchTNodeWithReadOption(o,a,gc(a,h)),this.matchTNodeWithReadOption(o,a,Ov(a,o,h,!1,!1))}else c===em?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Ov(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===wp||l===Ai||l===em&&4&a.type)this.addMatch(a.index,-2);else{const h=Ov(a,o,l,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function gc(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function Wu(i,o,a,c){return-1===a?function Em(i,o){return 11&i.type?fh(i,o):4&i.type?p_(i,o):null}(o,i):-2===a?function _S(i,o,a){return a===wp?fh(o,i):a===em?p_(o,i):a===Ai?qP(o,i):void 0}(i,o,c):Ol(i,i[y],a,o)}function rd(i,o,a,c){const l=o[ur].queries[c];if(null===l.matches){const h=i.data,m=a.matches,E=[];for(let T=0;null!==m&&T<m.length;T+=2){const R=m[T];E.push(R<0?null:Wu(o,h[R],m[T+1],a.metadata.read))}l.matches=E}return l.matches}function wm(i,o,a,c){const l=i.queries.getByIndex(a),h=l.matches;if(null!==h){const m=rd(i,o,l,a);for(let E=0;E<h.length;E+=2){const T=h[E];if(T>0)c.push(m[E/2]);else{const R=h[E+1],k=o[-T];for(let z=Rr;z<k.length;z++){const le=k[z];le[jn]===le[C]&&wm(le[y],le,R,c)}if(null!==k[Sa]){const z=k[Sa];for(let le=0;le<z.length;le++){const _e=z[le];wm(_e[y],_e,R,c)}}}}}return c}function Gu(i,o,a){const c=new Bv(!(4&~a));return function dL(i,o,a,c){const l=xT(o);l.push(a),i.firstCreatePass&&RT(i).push(c,l.length-1)}(i,o,c,c.destroy),(o[ur]??=new eu).queries.push(new A0(c))-1}function x0(i,o,a){null===i.queries&&(i.queries=new Ph),i.queries.track(new mc(o,a))}function id(i,o){return i.queries.getByIndex(o)}function R0(i,o){const a=i[y],c=id(a,o);return c.crossesNgTemplate?wm(a,i,o,[]):rd(a,i,c,o)}function M0(i){return"function"==typeof i&&void 0!==i[te]}function B_(i){let o=function Bh(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let l;if(So(i))l=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new zt(903,!1);l=o.\u0275dir}if(l){if(a){c.push(l);const m=i;m.inputs=Am(i.inputs),m.inputTransforms=Am(i.inputTransforms),m.declaredInputs=Am(i.declaredInputs),m.outputs=Am(i.outputs);const E=l.hostBindings;E&&iu(i,E);const T=l.viewQuery,R=l.contentQueries;if(T&&SS(i,T),R&&oN(i,R),jh(i,l),jf(i.outputs,l.outputs),So(l)&&l.data.animation){const k=i.data;k.animation=(k.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let m=0;m<h.length;m++){const E=h[m];E&&E.ngInherit&&E(i),E===B_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Sm(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=o+=l.hostVars,l.hostAttrs=Qd(l.hostAttrs,a=Qd(a,l.hostAttrs))}}(c)}function jh(i,o){for(const a in o.inputs){if(!o.inputs.hasOwnProperty(a)||i.inputs.hasOwnProperty(a))continue;const c=o.inputs[a];if(void 0!==c&&(i.inputs[a]=c,i.declaredInputs[a]=o.declaredInputs[a],null!==o.inputTransforms)){const l=Array.isArray(c)?c[0]:c;if(!o.inputTransforms.hasOwnProperty(l))continue;i.inputTransforms??={},i.inputTransforms[l]=o.inputTransforms[l]}}}function Am(i){return i===ea?{}:i===Jn?[]:i}function SS(i,o){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{o(c,l),a(c,l)}:o}function oN(i,o){const a=i.contentQueries;i.contentQueries=a?(c,l,h)=>{o(c,l,h),a(c,l,h)}:o}function iu(i,o){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{o(c,l),a(c,l)}:o}function MS(i){const o=i.inputConfig,a={};for(const c in o)if(o.hasOwnProperty(c)){const l=o[c];Array.isArray(l)&&l[3]&&(a[c]=l[3])}i.inputTransforms=a}class Rn{}class OS{}function j0(i,o){return new U_(i,o??null,[])}class U_ extends Rn{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new C0(this);const l=oo(o);this._bootstrapComponents=sa(l.bootstrap),this._r3Injector=Lv(o,a,[{provide:Rn,useValue:this},{provide:Oh,useValue:this.componentFactoryResolver},...c],Qr(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class $_ extends OS{constructor(o){super(),this.moduleType=o}create(o){return new U_(this.moduleType,o,[])}}class PS extends Rn{constructor(o){super(),this.componentFactoryResolver=new C0(this),this.instance=null;const a=new Au([...o.providers,{provide:Rn,useValue:this},{provide:Oh,useValue:this.componentFactoryResolver}],o.parent||tp(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function U0(i,o,a=null){return new PS({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}function vc(i){return!!z_(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function z_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Wr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Hh(i,o,a,c,l,h,m,E,T,R){const k=a+an,z=o.firstCreatePass?function W_(i,o,a,c,l,h,m,E,T){const R=o.consts,k=Ch(o,i,4,m||null,E||null);Gp(o,a,k,Si(R,T)),Cv(o,k);const z=k.tView=_T(2,k,c,l,h,o.directiveRegistry,o.pipeRegistry,null,o.schemas,R,null);return null!==o.queries&&(o.queries.template(o,k),z.queries=o.queries.embeddedTView(k)),k}(k,o,i,c,l,h,m,E,T):o.data[k];zo(z,!1);const le=zh(o,i,z,a);fp()&&$p(o,i,le,z),Wo(le,i);const _e=l_(le,i,le,z);return i[k]=_e,d_(i,_e),function ni(i,o,a){return Pa(i,o,a)}(_e,z,i),cv(z)&&gT(o,i,z),null!=T&&vT(i,z,R),z}function $0(i,o,a,c,l,h,m,E){const T=bt(),R=zn();return Hh(T,R,i,o,a,c,l,Si(R.consts,h),m,E),$0}let zh=function FS(i,o,a,c){return Ko(!0),o[xe].createComment("")};function ey(i,o,a,c){const l=bt();return Wr(l,ds(),o)&&(zn(),Ra(Fr(),l,i,o,a,c)),ey}function md(i,o,a,c,l,h){const E=function sd(i,o,a,c){const l=Wr(i,o,a);return Wr(i,o+1,c)||l}(i,function Kc(){return xn.lFrame.bindingIndex}(),a,l);return oa(2),E?o+We(a)+c+We(l)+h:kn}function nf(i,o){return i<<17|o<<2}function wc(i){return i>>17&32767}function Fm(i){return 2|i}function rl(i){return(131068&i)>>2}function rf(i,o){return-131069&i|o<<2}function Lm(i){return 1|i}function af(i,o,a,c){const l=i[a+1],h=null===o;let m=c?wc(l):rl(l),E=!1;for(;0!==m&&(!1===E||h);){const R=i[m+1];cf(i[m],o)&&(E=!0,i[m+1]=c?Lm(R):Fm(R)),m=c?wc(R):rl(R)}E&&(i[a+1]=c?Fm(l):Lm(l))}function cf(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Du(i,o)>=0}const xi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function uw(i){return i.substring(xi.key,xi.keyEnd)}function Vm(i,o){const a=xi.textEnd;return a===o?-1:(o=xi.keyEnd=function sA(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,xi.key=o,a),La(i,o,a))}function La(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function ny(i,o,a){const c=bt();return Wr(c,ds(),o)&&function ps(i,o,a,c,l,h,m,E){const T=lo(o,a);let k,R=o.inputs;!E&&null!=R&&(k=R[c])?(a0(i,a,k,c,l),Ms(o)&&function iP(i,o){const a=ho(o,i);16&a[b]||(a[b]|=64)}(a,o.index)):3&o.type&&(c=function ql(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=m?m(l,o.value||"",c):l,h.setProperty(T,c,l))}(zn(),Fr(),c,i,o,c[xe],a,!1),ny}function hw(i,o,a,c,l){const m=l?"class":"style";a0(i,a,o.inputs[m],m,c)}function pw(i,o){return function ja(i,o,a,c){const l=bt(),h=zn(),m=oa(2);h.firstUpdatePass&&mw(h,i,m,c),o!==kn&&Wr(l,m,o)&&hA(h,h.data[Gi()],l,l[xe],i,l[m+1]=function bN(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Qr(Gc(i)))),i}(o,a),c,m)}(i,o,null,!0),pw}function Bm(i){!function ua(i,o,a,c){const l=zn(),h=oa(2);l.firstUpdatePass&&mw(l,null,h,c);const m=bt();if(a!==kn&&Wr(m,h,a)){const E=l.data[Gi()];if(iy(E,c)&&!cA(l,h)){let T=c?E.classesWithoutHost:E.stylesWithoutHost;null!==T&&(a=vl(T,a||"")),hw(l,E,m,a,c)}else!function Xi(i,o,a,c,l,h,m,E){l===kn&&(l=Jn);let T=0,R=0,k=0<l.length?l[0]:null,z=0<h.length?h[0]:null;for(;null!==k||null!==z;){const le=T<l.length?l[T+1]:void 0,_e=R<h.length?h[R+1]:void 0;let _t,Ze=null;k===z?(T+=2,R+=2,le!==_e&&(Ze=z,_t=_e)):null===z||null!==k&&k<z?(T+=2,Ze=k):(R+=2,Ze=z,_t=_e),null!==Ze&&hA(i,o,a,c,Ze,_t,m,E),k=T<l.length?l[T]:null,z=R<h.length?h[R]:null}}(l,E,m,m[xe],m[h+1],m[h+1]=function yN(i,o,a){if(null==a||""===a)return Jn;const c=[],l=Gc(a);if(Array.isArray(l))for(let h=0;h<l.length;h++)i(c,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&i(c,h,l[h]);else"string"==typeof l&&o(c,l);return c}(i,o,a),c,h)}}(vw,Ba,i,!0)}function Ba(i,o){for(let a=function oA(i){return function lu(i){xi.key=0,xi.keyEnd=0,xi.value=0,xi.valueEnd=0,xi.textEnd=i.length}(i),Vm(i,La(i,0,xi.textEnd))}(o);a>=0;a=Vm(o,a))as(i,uw(o),!0)}function cA(i,o){return o>=i.expandoStartIndex}function mw(i,o,a,c){const l=i.data;if(null===l[a+1]){const h=l[Gi()],m=cA(i,a);iy(h,c)&&null===o&&!m&&(o=!1),o=function yd(i,o,a,c){const l=function bv(i){const o=xn.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let h=c?o.residualClasses:o.residualStyles;if(null===l)0===(c?o.classBindings:o.styleBindings)&&(a=lf(a=gw(null,i,o,a,c),o.attrs,c),h=null);else{const m=o.directiveStylingLast;if(-1===m||i[m]!==l)if(a=gw(l,i,o,a,c),null===h){let T=function jm(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==rl(c))return i[wc(c)]}(i,o,c);void 0!==T&&Array.isArray(T)&&(T=gw(null,i,o,T[1],c),T=lf(T,o.attrs,c),function uA(i,o,a,c){i[wc(a?o.classBindings:o.styleBindings)]=c}(i,o,c,T))}else h=function lA(i,o,a){let c;const l=o.directiveEnd;for(let h=1+o.directiveStylingLast;h<l;h++)c=lf(c,i[h].hostAttrs,a);return lf(c,o.attrs,a)}(i,o,c)}return void 0!==h&&(c?o.residualClasses=h:o.residualStyles=h),a}(l,h,o,c),function iA(i,o,a,c,l,h){let m=h?o.classBindings:o.styleBindings,E=wc(m),T=rl(m);i[c]=a;let k,R=!1;if(Array.isArray(a)?(k=a[1],(null===k||Du(a,k)>0)&&(R=!0)):k=a,l)if(0!==T){const le=wc(i[E+1]);i[c+1]=nf(le,E),0!==le&&(i[le+1]=rf(i[le+1],c)),i[E+1]=function aw(i,o){return 131071&i|o<<17}(i[E+1],c)}else i[c+1]=nf(E,0),0!==E&&(i[E+1]=rf(i[E+1],c)),E=c;else i[c+1]=nf(T,0),0===E?E=c:i[T+1]=rf(i[T+1],c),T=c;R&&(i[c+1]=Fm(i[c+1])),af(i,k,c,!0),af(i,k,c,!1),function sf(i,o,a,c,l){const h=l?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof o&&Du(h,o)>=0&&(a[c+1]=Lm(a[c+1]))}(o,k,i,c,h),m=nf(E,T),h?o.classBindings=m:o.styleBindings=m}(l,h,o,a,m,c)}}function gw(i,o,a,c,l){let h=null;const m=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<m&&(h=o[E],c=lf(c,h.hostAttrs,l),h!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function lf(i,o,a){const c=a?1:2;let l=-1;if(null!==o)for(let h=0;h<o.length;h++){const m=o[h];"number"==typeof m?l=m:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),as(i,m,!!a||o[++h]))}return void 0===i?null:i}function vw(i,o,a){const c=String(o);""!==c&&!c.includes(" ")&&as(i,c,a)}function hA(i,o,a,c,l,h,m,E){if(!(3&o.type))return;const T=i.data,R=T[E+1],k=function vN(i){return!(1&~i)}(R)?fA(T,o,a,l,rl(R),m):void 0;ry(k)||(ry(h)||function rA(i){return!(2&~i)}(R)&&(h=fA(T,null,a,l,E,m)),function sL(i,o,a,c,l){if(o)l?i.addClass(a,c):i.removeClass(a,c);else{let h=-1===c.indexOf("-")?void 0:r_.DashCase;null==l?i.removeStyle(a,c,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=r_.Important),i.setStyle(a,c,l,h))}}(c,m,op(Gi(),a),l,h))}function fA(i,o,a,c,l,h){const m=null===o;let E;for(;l>0;){const T=i[l],R=Array.isArray(T),k=R?T[1]:T,z=null===k;let le=a[l+1];le===kn&&(le=z?Jn:void 0);let _e=z?Bb(le,c):k===c?le:void 0;if(R&&!ry(_e)&&(_e=Bb(T,c)),ry(_e)&&(E=_e,m))return E;const Ze=i[l+1];l=m?wc(Ze):rl(Ze)}if(null!==o){let T=h?o.residualClasses:o.residualStyles;null!=T&&(E=Bb(T,c))}return E}function ry(i){return void 0!==i}function iy(i,o){return!!(i.flags&(o?8:16))}class Ew{destroy(o){}updateValue(o,a){}swap(o,a){const c=Math.min(o,a),l=Math.max(o,a),h=this.detach(l);if(l-c>1){const m=this.detach(c);this.attach(c,h),this.attach(l,m)}else this.attach(c,h)}move(o,a){this.attach(a,this.detach(o))}}function ww(i,o,a,c,l){return i===a&&Object.is(o,c)?1:Object.is(l(i,o),l(a,c))?-1:0}function cy(i,o,a,c){return!(void 0===o||!o.has(c)||(i.attach(a,o.get(c)),o.delete(c),0))}function Iw(i,o,a,c,l){if(cy(i,o,c,a(c,l)))i.updateValue(c,l);else{const h=i.create(c,l);i.attach(c,h)}}function uy(i,o,a,c){const l=new Set;for(let h=o;h<=a;h++)l.add(c(h,i.at(h)));return l}class mA{constructor(){this.kvMap=new Map,this._vMap=void 0}has(o){return this.kvMap.has(o)}delete(o){if(!this.has(o))return!1;const a=this.kvMap.get(o);return void 0!==this._vMap&&this._vMap.has(a)?(this.kvMap.set(o,this._vMap.get(a)),this._vMap.delete(a)):this.kvMap.delete(o),!0}get(o){return this.kvMap.get(o)}set(o,a){if(this.kvMap.has(o)){let c=this.kvMap.get(o);void 0===this._vMap&&(this._vMap=new Map);const l=this._vMap;for(;l.has(c);)c=l.get(c);l.set(c,a)}else this.kvMap.set(o,a)}forEach(o){for(let[a,c]of this.kvMap)if(o(c,a),void 0!==this._vMap){const l=this._vMap;for(;l.has(c);)c=l.get(c),o(c,a)}}}function Dw(i,o){et("NgControlFlow");const a=bt(),c=ds(),l=a[c]!==kn?a[c]:-1,h=-1!==l?$m(a,an+l):void 0;if(Wr(a,c,i)){const E=ae(null);try{if(void 0!==h&&Xc(h,0),-1!==i){const T=an+i,R=$m(a,T),k=Aw(a[y],T),z=Yl(R,k.tView.ssrId);ju(R,Sh(a,k,o,{dehydratedView:z}),0,hc(k,z))}}finally{ae(E)}}else if(void 0!==h){const E=OT(h,0);void 0!==E&&(E[Z]=o)}}class CN{constructor(o,a,c){this.lContainer=o,this.$implicit=a,this.$index=c}get $count(){return this.lContainer.length-Rr}}class df{constructor(o,a,c){this.hasEmptyBlock=o,this.trackByFn=a,this.liveCollection=c}}function bd(i,o,a,c,l,h,m,E,T,R,k,z,le){et("NgControlFlow");const _e=bt(),Ze=zn(),_t=void 0!==T,Nt=bt(),Ut=E?m.bind(Nt[mn][Z]):m,Tt=new df(_t,Ut);Nt[an+i]=Tt,Hh(_e,Ze,i+1,o,a,c,l,Si(Ze.consts,h)),_t&&Hh(_e,Ze,i+2,T,R,k,z,Si(Ze.consts,le))}class _A extends Ew{constructor(o,a,c){super(),this.lContainer=o,this.hostLView=a,this.templateTNode=c,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Rr}at(o){return this.getLView(o)[Z].$implicit}attach(o,a){const c=a[B];this.needsIndexUpdate||=o!==this.length,ju(this.lContainer,a,o,hc(this.templateTNode,c))}detach(o){return this.needsIndexUpdate||=o!==this.length-1,function SN(i,o){return Eh(i,o)}(this.lContainer,o)}create(o,a){const c=Yl(this.lContainer,this.templateTNode.tView.ssrId),l=Sh(this.hostLView,this.templateTNode,new CN(this.lContainer,a,o),{dehydratedView:c});return this.operationsCounter?.recordCreate(),l}destroy(o){s_(o[y],o),this.operationsCounter?.recordDestroy()}updateValue(o,a){this.getLView(o)[Z].$implicit=a}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let o=0;o<this.length;o++)this.getLView(o)[Z].$index=o}getLView(o){return function Sw(i,o){return OT(i,o)}(this.lContainer,o)}}function Tw(i){const o=ae(null),a=Gi();try{const c=bt(),l=c[y],h=c[a],m=a+1,E=$m(c,m);if(void 0===h.liveCollection){const R=Aw(l,m);h.liveCollection=new _A(E,c,R)}else h.liveCollection.reset();const T=h.liveCollection;if(function DN(i,o,a){let c,l,h=0,m=i.length-1;if(Array.isArray(o)){let T=o.length-1;for(;h<=m&&h<=T;){const R=i.at(h),k=o[h],z=ww(h,R,h,k,a);if(0!==z){z<0&&i.updateValue(h,k),h++;continue}const le=i.at(m),_e=o[T],Ze=ww(m,le,T,_e,a);if(0!==Ze){Ze<0&&i.updateValue(m,_e),m--,T--;continue}const _t=a(h,R),Nt=a(m,le),Ut=a(h,k);if(Object.is(Ut,Nt)){const Tt=a(T,_e);Object.is(Tt,_t)?(i.swap(h,m),i.updateValue(m,_e),T--,m--):i.move(m,h),i.updateValue(h,k),h++}else if(c??=new mA,l??=uy(i,h,m,a),cy(i,c,h,Ut))i.updateValue(h,k),h++,m++;else if(l.has(Ut))c.set(_t,i.detach(h)),m--;else{const Tt=i.create(h,o[h]);i.attach(h,Tt),h++,m++}}for(;h<=T;)Iw(i,c,a,h,o[h]),h++}else if(null!=o){const T=o[Symbol.iterator]();let R=T.next();for(;!R.done&&h<=m;){const k=i.at(h),z=R.value,le=ww(h,k,h,z,a);if(0!==le)le<0&&i.updateValue(h,z),h++,R=T.next();else{c??=new mA,l??=uy(i,h,m,a);const _e=a(h,z);if(cy(i,c,h,_e))i.updateValue(h,z),h++,m++,R=T.next();else if(l.has(_e)){const Ze=a(h,k);c.set(Ze,i.detach(h)),m--}else i.attach(h,i.create(h,z)),h++,m++,R=T.next()}}for(;!R.done;)Iw(i,c,a,i.length,R.value),R=T.next()}for(;h<=m;)i.destroy(i.detach(m--));c?.forEach(T=>{i.destroy(T)})}(T,i,h.trackByFn),T.updateIndexes(),h.hasEmptyBlock){const R=ds(),k=0===T.length;if(Wr(c,R,k)){const z=a+2,le=$m(c,z);if(k){const _e=Aw(l,z),Ze=Yl(le,_e.tView.ssrId);ju(le,Sh(c,_e,void 0,{dehydratedView:Ze}),0,hc(_e,Ze))}else Xc(le,0)}}}finally{ae(o)}}function $m(i,o){return i[o]}function Aw(i,o){return rh(i,o)}function Hm(i,o,a,c){const l=bt(),h=zn(),m=an+i,E=l[xe],T=h.firstCreatePass?function xw(i,o,a,c,l,h){const m=o.consts,T=Ch(o,i,2,c,Si(m,l));return Gp(o,a,T,Si(m,h)),null!==T.attrs&&R_(T,T.attrs,!1),null!==T.mergedAttrs&&R_(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(m,h,l,o,a,c):h.data[m],R=Wm(h,l,T,E,o,i);l[m]=R;const k=cv(T);return zo(T,!0),Dh(E,R,T),!function ou(i){return!(32&~i.flags)}(T)&&fp()&&$p(h,l,R,T),0===function bM(){return xn.lFrame.elementDepthCount}()&&Wo(R,l),function EM(){xn.lFrame.elementDepthCount++}(),k&&(gT(h,l,T),Kp(h,T,l)),null!==c&&vT(l,T),Hm}function zm(){let i=Tr();uE()?Cl():(i=i.parent,zo(i,!1));const o=i;(function gF(i){return xn.skipHydrationRootTNode===i})(o)&&function yF(){xn.skipHydrationRootTNode=null}(),function LD(){xn.lFrame.elementDepthCount--}();const a=zn();return a.firstCreatePass&&(Cv(a,i),eE(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function ah(i){return!!(8&i.flags)}(o)&&hw(a,o,bt(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function xM(i){return!!(16&i.flags)}(o)&&hw(a,o,bt(),o.stylesWithoutHost,!1),zm}function Km(i,o,a,c){return Hm(i,o,a,c),zm(),Km}let Wm=(i,o,a,c,l,h)=>(Ko(!0),o_(c,l,function hp(){return xn.lFrame.currentNamespace}()));function hy(){return bt()}const hi=void 0;var IA=["en",[["a","p"],["AM","PM"],hi],[["AM","PM"],hi,hi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hi,"{1} 'at' {0}",hi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AN(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let du={};function Xm(i){const o=function RN(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=CA(o);if(a)return a;const c=o.split("-")[0];if(a=CA(c),a)return a;if("en"===c)return IA;throw new zt(701,!1)}function DA(i){return Xm(i)[hf.PluralCase]}function CA(i){return i in du||(du[i]=hr.ng&&hr.ng.common&&hr.ng.common.locales&&hr.ng.common.locales[i]),du[i]}var hf=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(hf||{});const Ua="en-US";let Nw=Ua;let by=(i,o,a)=>{};function Zw(i,o,a,c){const l=bt(),h=zn(),m=Tr();return function tg(i,o,a,c,l,h,m){const E=cv(c),R=i.firstCreatePass&&RT(i),k=o[Z],z=xT(o);let le=!0;if(3&c.type||m){const _t=lo(c,o),Nt=m?m(_t):_t,Ut=z.length,Tt=m?lr=>m(ar(lr[c.index])):c.index;let Tn=null;if(!m&&E&&(Tn=function zN(i,o,a,c){const l=i.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===a&&l[h+1]===c){const E=o[Y],T=l[h+2];return E.length>T?E[T]:null}"string"==typeof m&&(h+=2)}return null}(i,o,l,c.index)),null!==Tn)(Tn.__ngLastListenerFn__||Tn).__ngNextListenerFn__=h,Tn.__ngLastListenerFn__=h,le=!1;else{h=wy(c,o,k,h),by(_t,l,h);const lr=a.listen(Nt,l,h);z.push(h,lr),R&&R.push(l,Tt,Ut,Ut+1)}}else h=wy(c,o,k,h);const _e=c.outputs;let Ze;if(le&&null!==_e&&(Ze=_e[l])){const _t=Ze.length;if(_t)for(let Nt=0;Nt<_t;Nt+=2){const jr=o[Ze[Nt]][Ze[Nt+1]].subscribe(h),Yi=z.length;z.push(h,jr),R&&R.push(l,c.index,Yi,-(Yi+1))}}}(h,l,l[xe],m,i,o,c),Zw}function HA(i,o,a,c){const l=ae(null);try{return rc(6,o,a),!1!==a(c)}catch(h){return Th(i,h),!1}finally{rc(7,o,a),ae(l)}}function wy(i,o,a,c){return function l(h){if(h===Function)return c;Zp(i.componentOffset>-1?ho(i.index,o):o,5);let E=HA(o,a,c,h),T=l.__ngNextListenerFn__;for(;T;)E=HA(o,a,T,h)&&E,T=T.__ngNextListenerFn__;return E}}function Iy(i=1){return function Dv(i){return(xn.lFrame.contextLView=function Pu(i,o){for(;i>0;)o=o[Yt],i--;return o}(i,xn.lFrame.contextLView))[Z]}(i)}function zA(i,o){let a=null;const c=function Gb(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(!(1&a))return o[a+1]}return null}(i);for(let l=0;l<o.length;l++){const h=o[l];if("*"!==h){if(null===c?Wb(i,h,!0):qb(c,h))return l}else a=l}return a}function KA(i){const o=bt()[mn][O];if(!o.projection){const c=o.projection=function Xf(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(i?i.length:1,null),l=c.slice();let h=o.child;for(;null!==h;){if(128!==h.type){const m=i?zA(h,i):0;null!==m&&(l[m]?l[m].projectionNext=h:c[m]=h,l[m]=h)}h=h.next}}}function Dy(i,o=0,a,c,l,h){const m=bt(),E=zn(),T=c?i+1:null;null!==T&&Hh(m,E,T,c,l,h,null,a);const R=Ch(E,an+i,16,null,a||null);null===R.projection&&(R.projection=o),Cl();const z=!m[B]||oc();null===m[mn][O].projection[R.projection]&&null!==T?function WN(i,o,a){const c=an+a,l=o.data[c],h=i[c],m=Yl(h,l.tView.ssrId);ju(h,Sh(i,l,void 0,{dehydratedView:m}),0,hc(l,m))}(m,E,T):z&&32&~R.flags&&function iL(i,o,a){GO(o[xe],0,o,a,lT(i,a,o),t0(a.parent||o[O],a,o))}(E,m,R)}function GA(i,o,a,c){!function kh(i,o,a,c){const l=zn();if(l.firstCreatePass){const h=Tr();x0(l,new tu(o,a,c),h.index),function F_(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(l,i),!(2&~a)&&(l.staticContentQueries=!0)}return Gu(l,bt(),a)}(i,o,a,c)}function My(i,o,a){!function k_(i,o,a){const c=zn();return c.firstCreatePass&&(x0(c,new tu(i,o,a),-1),!(2&~o)&&(c.staticViewQueries=!0)),Gu(c,bt(),o)}(i,o,a)}function Dc(i){const o=bt(),a=zn(),c=dp();ih(c+1);const l=id(a,c);if(i.dirty&&function er(i){return!(4&~i[b])}(o)===!(2&~l.metadata.flags)){if(null===l.matches)i.reset([]);else{const h=R0(o,c);i.reset(h,Ip),i.notifyOnChanges()}return!0}return!1}function Oy(){return function Nh(i,o){return i[ur].queries[o].queryList}(bt(),dp())}function Py(i){return Ou(function lE(){return xn.lFrame.contextLView}(),an+i)}function ex(i,o=""){const a=bt(),c=zn(),l=i+an,h=c.firstCreatePass?Ch(c,l,1,o,null):c.data[l],m=Ly(c,a,h,o,i);a[l]=m,fp()&&$p(c,a,m,h),zo(h,!1)}let Ly=(i,o,a,c,l)=>(Ko(!0),function i_(i,o){return i.createText(o)}(o[xe],c));function cI(i,o,a,c,l){const h=bt(),m=md(h,i,o,a,c,l);return m!==kn&&function Bu(i,o,a){const c=op(o,i);!function cT(i,o,a){i.setValue(o,a)}(i[xe],c,a)}(h,Gi(),m),cI}function og(i,o,a,c,l){if(i=bn(i),Array.isArray(i))for(let h=0;h<i.length;h++)og(i[h],o,a,c,l);else{const h=zn(),m=bt(),E=Tr();let T=nc(i)?i:bn(i.provide);const R=ov(i),k=1048575&E.providerIndexes,z=E.directiveStart,le=E.providerIndexes>>20;if(nc(i)||!i.multi){const _e=new mp(R,l,zp),Ze=sg(T,o,l?k:k+le,z);-1===Ze?(vE(Rv(E,m),h,T),Hy(h,i,o.length),o.push(T),E.directiveStart++,E.directiveEnd++,l&&(E.providerIndexes+=1048576),a.push(_e),m.push(_e)):(a[Ze]=_e,m[Ze]=_e)}else{const _e=sg(T,o,k+le,z),Ze=sg(T,o,k,k+le),Nt=Ze>=0&&a[Ze];if(l&&!Nt||!l&&!(_e>=0&&a[_e])){vE(Rv(E,m),h,T);const Ut=function ax(i,o,a,c,l){const h=new mp(i,a,zp);return h.multi=[],h.index=o,h.componentProviders=0,xd(h,l,c&&!a),h}(l?JN:ZN,a.length,l,c,R);!l&&Nt&&(a[Ze].providerFactory=Ut),Hy(h,i,o.length,0),o.push(T),E.directiveStart++,E.directiveEnd++,l&&(E.providerIndexes+=1048576),a.push(Ut),m.push(Ut)}else Hy(h,i,_e>-1?_e:Ze,xd(a[l?Ze:_e],R,!l&&c));!l&&c&&Nt&&a[Ze].componentProviders++}}}function Hy(i,o,a,c){const l=nc(o),h=function Zb(i){return!!i.useClass}(o);if(l||h){const T=(h?bn(o.useClass):o).prototype.ngOnDestroy;if(T){const R=i.destroyHooks||(i.destroyHooks=[]);if(!l&&o.multi){const k=R.indexOf(a);-1===k?R.push(a,[c,T]):R[k+1].push(c,T)}else R.push(a,T)}}}function xd(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function sg(i,o,a,c){for(let l=a;l<c;l++)if(o[l]===i)return l;return-1}function ZN(i,o,a,c){return dI(this.multi,[])}function JN(i,o,a,c){const l=this.multi;let h;if(this.providerFactory){const m=this.providerFactory.componentProviders,E=Ol(a,a[y],this.providerFactory.index,c);h=E.slice(0,m),dI(l,h);for(let T=m;T<E.length;T++)h.push(E[T])}else h=[],dI(l,h);return h}function dI(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function cx(i,o=[]){return a=>{a.providersResolver=(c,l)=>function sx(i,o,a){const c=zn();if(c.firstCreatePass){const l=So(i);og(a,c.data,c.blueprint,l,!0),og(o,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,o)}}let ux=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=ao(0,a.type),l=c.length>0?U0([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,l)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=or({token:i,providedIn:"environment",factory:()=>new i(io(Uo))})}return i})();function lx(i){et("NgStandalone"),i.getStandaloneInjector=o=>o.get(ux).getOrCreateStandaloneInjector(i)}function fi(i,o,a,c,l,h){const m=o+a;return Wr(i,m,l)?function Fa(i,o,a){return i[o]=a}(i,m+1,h?c.call(h,l):c(l)):function Ii(i,o){const a=i[o];return a===kn?void 0:a}(i,m+1)}function ok(i,o){const a=zn();let c;const l=i+an;a.firstCreatePass?(c=function _x(i,o){if(o)for(let a=o.length-1;a>=0;a--){const c=o[a];if(i===c.name)return c}}(o,a.pipeRegistry),a.data[l]=c,c.onDestroy&&(a.destroyHooks??=[]).push(l,c.onDestroy)):c=a.data[l];const h=c.factory||(c.factory=tc(c.type)),E=Dn(zp);try{const T=xv(!1),R=h();return xv(T),function nI(i,o,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),o[a]=c}(a,bt(),l,R),R}finally{Dn(E)}}function bx(i,o,a){const c=i+an,l=bt(),h=Ou(l,c);return function Br(i,o){return i[y].data[o].pure}(l,c)?fi(l,function Ao(){const i=xn.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),o,h.transform,a,h):h.transform(a)}class vg{constructor(o){this.full=o;const a=o.split(".");this.major=a[0],this.minor=a[1],this.patch=a.slice(2).join(".")}}let _g=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const gk=new In(""),vk=new In("");let bg,_k=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,bg||(function yg(i){bg=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Sr.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb()}});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),a()},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(io(Sr),io(yk),io(vk))};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac})}return i})(),yk=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return bg?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function Nx(i){return!!i&&"function"==typeof i.then}function kx(i){return!!i&&"function"==typeof i.subscribe}const Fx=new In("");let xI=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=sn(Fx,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const l of this.appInits){const h=l();if(Nx(h))a.push(h);else if(kx(h)){const m=new Promise((E,T)=>{h.subscribe({complete:E,error:T})});a.push(m)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const sb=new In("");function Vx(i,o){return Array.isArray(o)?o.reduce(Vx,i):{...i,...o}}let Ha=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=sn(hC),this.afterRenderEffectManager=sn(A_),this.zonelessEnabled=sn(Gt),this.externalTestViews=new Set,this.beforeRender=new jt.B,this.afterTick=new jt.B,this.componentTypes=[],this.components=[],this.isStable=sn(Nl).hasPendingTasks.pipe((0,en.T)(a=>!a)),this._injector=sn(Uo)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof eS;if(!this._injector.get(xI).done)throw!l&&Su(a),new zt(405,!1);let m;m=l?a:this._injector.get(Oh).resolveComponentFactory(a),this.componentTypes.push(m.componentType);const E=function iV(i){return i.isBoundToModule}(m)?void 0:this._injector.get(Rn),R=m.create(Li.NULL,[],c||m.selector,E),k=R.location.nativeElement,z=R.injector.get(gk,null);return z?.registerApplication(k),R.onDestroy(()=>{this.detachView(R.hostView),RI(this.components,R),z?.unregisterApplication(k)}),this._loadComponent(R),R}tick(){this._tick(!0)}_tick(a){if(this._runningTick)throw new zt(101,!1);const c=ae(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(a)}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1,ae(c),this.afterTick.next()}}detectChangesInAttachedViews(a){let c=null;this._injector.destroyed||(c=this._injector.get(Go,null,{optional:!0}));let l=0;const h=this.afterRenderEffectManager;for(;l<10;){const m=0===l;if(a||!m){this.beforeRender.next(m);for(let{_lView:E,notifyErrorHandler:T}of this._views)sl(E,T,m,this.zonelessEnabled)}else c?.begin?.(),c?.end?.();if(l++,h.executeInternalCallbacks(),!this.allViews.some(({_lView:E})=>ic(E))&&(h.execute(),!this.allViews.some(({_lView:E})=>ic(E))))break}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;RI(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(sb,[]);[...this._bootstrapListeners,...c].forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>RI(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new zt(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function RI(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function sl(i,o,a,c){(a||ic(i))&&h_(i,o,a&&!c?0:1)}class Ek{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let jx=(()=>{class i{compileModuleSync(a){return new $_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),h=sa(oo(a).declarations).reduce((m,E)=>{const T=Hn(E);return T&&m.push(new ym(T)),m},[]);return new Ek(c,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),uV=(()=>{class i{constructor(){this.zone=sn(Sr),this.changeDetectionScheduler=sn(wr),this.applicationRef=sn(Ha)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function Ux({ngZoneFactory:i,ignoreChangesOutsideZone:o}){return i??=()=>new Sr(Hx()),[{provide:Sr,useFactory:i},{provide:ta,multi:!0,useFactory:()=>{const a=sn(uV,{optional:!0});return()=>a.initialize()}},{provide:ta,multi:!0,useFactory:()=>{const a=sn(dV);return()=>{a.initialize()}}},{provide:hC,useFactory:$x},!0===o?{provide:T_,useValue:!0}:[]]}function $x(){const i=sn(Sr),o=sn(Aa);return a=>i.runOutsideAngular(()=>o.handleError(a))}function Hx(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}let dV=(()=>{class i{constructor(){this.subscription=new on.yU,this.initialized=!1,this.zone=sn(Sr),this.pendingTasks=sn(Nl)}initialize(){if(this.initialized)return;this.initialized=!0;let a=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(a=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Sr.assertNotInAngularZone(),queueMicrotask(()=>{null!==a&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(a),a=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Sr.assertInAngularZone(),a??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),cb=(()=>{class i{constructor(){this.appRef=sn(Ha),this.taskService=sn(Nl),this.ngZone=sn(Sr),this.zonelessEnabled=sn(Gt),this.disableScheduling=sn(T_,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new on.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof qo||!this.zoneIsDefined)}notify(a){if(!this.zonelessEnabled&&5===a)return;switch(a){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const c=this.useMicrotaskScheduler?Oa:hm;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=c(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=c(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Sr.isInAngularZone())}tick(a){if(this.runningTick||this.appRef.destroyed)return;const c=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(a)},void 0,this.schedulerTickApplyArgs)}catch(l){throw this.taskService.remove(c),l}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Oa(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(c)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const a=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(a)}}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const If=new In("",{providedIn:"root",factory:()=>sn(If,yt.Optional|yt.SkipSelf)||function hV(){return typeof $localize<"u"&&$localize.locale||Ua}()}),ub=new In("",{providedIn:"root",factory:()=>"USD"}),OI=new In("");let Wx=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function Ro(i="zone.js",o){return"noop"===i?new qo:"zone.js"===i?new Sr(o):i}(c?.ngZone,Hx({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return l.run(()=>{const h=c?.ignoreChangesOutsideZone,m=function H_(i,o,a){return new U_(i,o,a)}(a.moduleType,this.injector,[...Ux({ngZoneFactory:()=>l,ignoreChangesOutsideZone:h}),{provide:wr,useExisting:cb}]),E=m.injector.get(Aa,null);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:R=>{E.handleError(R)}});m.onDestroy(()=>{RI(this._modules,m),T.unsubscribe()})}),function Lx(i,o,a){try{const c=a();return Nx(c)?c.catch(l=>{throw o.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=m.injector.get(xI);return T.runInitializers(),T.donePromise.then(()=>(function py(i){"string"==typeof i&&(Nw=i.toLowerCase().replace(/_/g,"-"))}(m.injector.get(If,Ua)||Ua),this._moduleDoBootstrap(m),m))})})}bootstrapModule(a,c=[]){const l=Vx({},c);return function cV(i,o,a){const c=new $_(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(a){const c=a.injector.get(Ha);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new zt(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new zt(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(OI,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(io(Li))};static#t=this.\u0275prov=or({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),al=null;const cl=new In("");function qx(i,o,a=[]){const c=`Platform: ${o}`,l=new In(c);return(h=[])=>{let m=Xx();if(!m||m.injector.get(cl,!1)){const E=[...a,...h,{provide:l,useValue:!0}];i?i(E):function Gx(i){if(al&&!al.get(cl,!1))throw new zt(400,!1);(function bk(){!function Un(i){rn=i}(()=>{throw new zt(600,!1)})})(),al=i;const o=i.get(Wx);(function PI(i){i.get(Ns,null)?.forEach(a=>a())})(i)}(function Qx(i=[],o){return Li.create({name:o,providers:[{provide:nv,useValue:"platform"},{provide:OI,useValue:new Set([()=>al=null])},...i]})}(E,c))}return function Sk(i){const o=Xx();if(!o)throw new zt(401,!1);return o}()}}function Xx(){return al?.get(Wx)??null}function Rk(){return!1}let NI=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Ok}return i})();function Ok(i){return function Pk(i,o,a){if(Ms(i)&&!a){const c=ho(i.index,o);return new Jp(c,c)}return 175&i.type?new Jp(o[mn],o):null}(Tr(),bt(),!(16&~i))}class hb{constructor(){}supports(o){return vc(o)}create(o){return new Lk(o)}}const Jx=(i,o)=>o;class Lk{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Jx}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,l=0,h=null;for(;a||c;){const m=!c||a&&a.currentIndex<jk(c,l,h)?a:c,E=jk(m,l,h),T=m.currentIndex;if(m===c)l--,c=c._nextRemoved;else if(a=a._next,null==m.previousIndex)l++;else{h||(h=[]);const R=E-l,k=T-l;if(R!=k){for(let le=0;le<R;le++){const _e=le<h.length?h[le]:h[le]=0,Ze=_e+le;k<=Ze&&Ze<R&&(h[le]=_e+1)}h[m.previousIndex]=k-R}}E!==T&&o(m,E,T)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!vc(o))throw new zt(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l,h,m,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)h=o[E],m=this._trackByFn(E,h),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,h,m,E)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,E),c=!0),a=a._next}else l=0,function od(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{m=this._trackByFn(l,E),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,E,m,l)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,m,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,l){let h;return null===o?h=this._itTail:(h=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,h,l)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,h,l)):o=this._addAfter(new LI(a,c),h,l),o}_verifyReinsertion(o,a,c,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?o=this._reinsertAfter(h,o._prev,l):o.currentIndex!=l&&(o.currentIndex=l,this._addToMoves(o,l)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const l=o._prevRemoved,h=o._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const l=null===a?this._itHead:a._next;return o._next=l,o._prev=a,null===l?this._itTail=o:l._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Bk),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Bk),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class LI{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Vk{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Bk{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new Vk,this.map.set(a,c)),c.add(o)}get(o,a){const l=this.map.get(o);return l?l.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jk(i,o,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+o+l}class eR{constructor(){}supports(o){return o instanceof Map||z_(o)}create(){return new VI}}class VI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||z_(o)))throw new zt(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const l=this._records.get(o);this._maybeAddToChanges(l,a);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const c=new Uk(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class Uk{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function fb(){return new BI([new hb])}let BI=(()=>{class i{static#e=this.\u0275prov=or({token:i,providedIn:"root",factory:fb});constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||fb()),deps:[[i,new qd,new Iu]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new zt(901,!1)}}return i})();function UI(){return new tR([new eR])}let tR=(()=>{class i{static#e=this.\u0275prov=or({token:i,providedIn:"root",factory:UI});constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||UI()),deps:[[i,new qd,new Iu]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new zt(901,!1)}}return i})();const rR=qx(null,"core",[]);let iR=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(io(Ha))};static#t=this.\u0275mod=Qb({type:i});static#n=this.\u0275inj=xr({})}return i})();const _R=new In("");function qV(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function ZV(i){const o=ae(null);try{return i()}finally{ae(o)}}const JV=new In("",{providedIn:"root",factory:()=>sn(e2)});let e2=(()=>{class i{static#e=this.\u0275prov=or({token:i,providedIn:"root",factory:()=>new t2})}return i})();class t2{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=sn(Nl),this.taskId=null}scheduleEffect(o){if(this.enqueue(o),null===this.taskId){const a=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(a),this.taskId=null})}}enqueue(o){const a=o.creationZone;this.queues.has(a)||this.queues.set(a,new Set);const c=this.queues.get(a);c.has(o)||(this.queuedEffectCount++,c.add(o))}flush(){for(;this.queuedEffectCount>0;)for(const[o,a]of this.queues)null===o?this.flushQueue(a):o.run(()=>this.flushQueue(a))}flushQueue(o){for(const a of o)o.delete(a),this.queuedEffectCount--,a.run()}}class n2{constructor(o,a,c,l,h,m){this.scheduler=o,this.effectFn=a,this.creationZone=c,this.injector=h,this.watcher=function oe(i,o,a){const c=Object.create(Ct);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=o;const l=T=>{c.cleanupFn=T};return c.ref={notify:()=>Ae(c),run:()=>{if(null===c.fn)return;if(function lt(){return fe}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(c.dirty=!1,c.hasRun&&!Be(c))return;c.hasRun=!0;const T=Oe(c);try{c.cleanupFn(),c.cleanupFn=Je,c.fn(l)}finally{pe(c,T)}},cleanup:()=>c.cleanupFn(),destroy:()=>function m(T){(function h(T){return null===T.fn&&null===T.schedule})(T)||(dt(T),T.cleanupFn(),T.fn=null,T.schedule=null,T.cleanupFn=Je)}(c),[te]:c},c.ref}(E=>this.runEffect(E),()=>this.schedule(),m),this.unregisterOnDestroy=l?.onDestroy(()=>this.destroy())}runEffect(o){try{this.effectFn(o)}catch(a){this.injector.get(Aa,null,{optional:!0})?.handleError(a)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function l1(i,o){et("NgSignals"),!o?.injector&&cs();const a=o?.injector??sn(Li),c=!0!==o?.manualCleanup?a.get(Ep):null,l=new n2(a.get(JV),i,typeof Zone>"u"?null:Zone.current,c,a,o?.allowSignalWrites??!1),h=a.get(NI,null,{optional:!0});return h&&8&h._lView[b]?(h._lView[co]??=[]).push(l.watcher.notify):l.watcher.notify(),l}function r2(i){const o=Hn(i);if(!o)return null;const a=new ym(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},9556:(Bt,nt,M)=>{"use strict";M.d(nt,{p4:()=>p});class p{ttl;map=new Map;_to=!1;constructor(te){this.ttl=te}has(te){return this.map.has(te)}add(te){this.map.set(te,fe()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,function ie(se){const te=fe()-se.ttl,ae=se.map[Symbol.iterator]();for(;;){const de=ae.next().value;if(!de)return;if(!(de[1]<te))return;se.map.delete(de[0])}}(this)},0))}clear(){this.map.clear()}}function fe(){return Date.now()}},9825:(Bt,nt,M)=>{"use strict";M.d(nt,{K:()=>de,X:()=>qe});var p=M(6126),ie=M(5520),fe=M(9403),se=M(6434),te=M(6568),ae=M(3896),de=function(){function ee(Ae,Oe,pe){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry(Be=>{var dt=Be.docId,Te=this.cacheItemByDocId.get(dt);Te&&(Te[0].delete(Be.revisionHeight),0===Te[0].size&&this.cacheItemByDocId.delete(dt))}):void 0,this.primaryPath=Ae,this.changes$=Oe,this.documentCreator=pe,Oe.subscribe(Be=>{this.tasks.add(()=>{for(var dt=this.cacheItemByDocId,Te=0;Te<Be.length;Te++){var He=Be[Te],Ie=dt.get(He.documentId);if(Ie){var ct=He.documentData;ct||(ct=He.previousDocumentData),Ie[1]=ct}}}),this.tasks.size<=1&&(0,ie.vN)().then(()=>{this.processTasks()})})}var Ue=ee.prototype;return Ue.processTasks=function(){0!==this.tasks.size&&(Array.from(this.tasks).forEach(pe=>pe()),this.tasks.clear())},Ue.getLatestDocumentData=function(Oe){return this.processTasks(),(0,fe.m)(this.cacheItemByDocId,Oe)[1]},Ue.getLatestDocumentDataIfExists=function(Oe){this.processTasks();var pe=this.cacheItemByDocId.get(Oe);if(pe)return pe[1]},(0,p.A)(ee,[{key:"getCachedRxDocuments",get:function(){var Ae=lt(this);return(0,se.Ns)(this,"getCachedRxDocuments",Ae)}},{key:"getCachedRxDocument",get:function(){var Ae=lt(this);return(0,se.Ns)(this,"getCachedRxDocument",Oe=>Ae([Oe])[0])}}])}();function lt(ee){var Ue=ee.primaryPath,Ae=ee.cacheItemByDocId,Oe=ee.registry,pe=ae.h.deepFreezeWhenDevMode,Be=ee.documentCreator;return Te=>{for(var He=new Array(Te.length),Ie=[],ct=0;ct<Te.length;ct++){var st=Te[ct],ce=st[Ue],ne=(0,te.Wg)(st._rev),W=void 0,ft=void 0,At=Ae.get(ce);At?ft=(W=At[0]).get(ne):Ae.set(ce,At=[W=new Map,st]);var Rt=ft?ft.deref():void 0;Rt||(st=pe(st),Rt=Be(st),W.set(ne,he(Rt)),Oe&&Ie.push(Rt)),He[ct]=Rt}return Ie.length>0&&Oe&&(ee.tasks.add(()=>{for(var yn=0;yn<Ie.length;yn++){var rn=Ie[yn];Oe.register(rn,{docId:rn.primary,revisionHeight:(0,te.Wg)(rn.revision)})}}),ee.tasks.size<=1&&(0,ie.vN)().then(()=>{ee.processTasks()})),He}}function qe(ee,Ue){return(0,ee.getCachedRxDocuments)(Ue)}var he="function"==typeof WeakRef?function Ve(ee){return new WeakRef(ee)}:function Me(ee){return{deref:()=>ee}}},2284:(Bt,nt,M)=>{"use strict";M.d(nt,{FX:()=>fe,Xi:()=>ie,r:()=>p});var p={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function ie(te,ae){p[te].length>0&&p[te].forEach(de=>de(ae))}function fe(te,ae){return Promise.all(p[te].map(de=>de(ae)))}},6706:(Bt,nt,M)=>{"use strict";M.d(nt,{Hl:()=>$e,N6:()=>qe});var p=M(467),ie=M(7650),fe=M(9403),se=M(8663),te=M(6434),ae=M(2060),de=M(6568),lt=M(6893),qe=function(){function Ve(ee,Ue,Ae,Oe){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=ee,this.primaryPath=Ue,this.preWrite=Ae,this.postWrite=Oe}var Me=Ve.prototype;return Me.addWrite=function(Ue,Ae){var pe=(0,fe.q)(this.queueByDocId,Ue[this.primaryPath],()=>[]);return new Promise((dt,Te)=>{var He={lastKnownDocumentState:Ue,modifier:Ae,resolve:dt,reject:Te};(0,se.ZN)(pe).push(He),this.triggerRun()})},Me.triggerRun=function(){var ee=(0,p.A)(function*(){var Ae=this;if(!0!==this.isRunning&&0!==this.queueByDocId.size){this.isRunning=!0;var Oe=[],pe=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(pe.entries()).map(function(){var dt=(0,p.A)(function*([Te,He]){var Ie=function he(Ve){var Me=Ve[0],ee=(0,de.Wg)(Me._rev);return Ve.forEach(Ue=>{var Ae=(0,de.Wg)(Ue._rev);Ae>ee&&(Me=Ue,ee=Ae)}),Me}(He.map(ce=>ce.lastKnownDocumentState)),ct=Ie;for(var st of He)try{ct=yield st.modifier((0,te.o8)(ct))}catch(ce){st.reject(ce),st.reject=()=>{},st.resolve=()=>{}}try{yield Ae.preWrite(ct,Ie)}catch(ce){return void He.forEach(ne=>ne.reject(ce))}Oe.push({previous:Ie,document:ct})});return function(Te){return dt.apply(this,arguments)}}()));var Be=Oe.length>0?yield this.storageInstance.bulkWrite(Oe,"incremental-write"):{error:[]};return yield Promise.all((0,lt.YN)(this.primaryPath,Oe,Be).map(dt=>{var Te=dt[this.primaryPath];this.postWrite(dt),(0,fe.m)(pe,Te).forEach(Ie=>Ie.resolve(dt))})),Be.error.forEach(dt=>{var Te=dt.documentId,He=(0,fe.m)(pe,Te),Ie=(0,ie.sX)(dt);if(Ie){var ct=(0,fe.q)(this.queueByDocId,Te,()=>[]);He.reverse().forEach(ce=>{ce.lastKnownDocumentState=(0,se.ZN)(Ie.documentInDb),(0,se.ZN)(ct).unshift(ce)})}else{var st=(0,ie.cg)(dt);He.forEach(ce=>ce.reject(st))}}),this.isRunning=!1,this.triggerRun()}});return function Ue(){return ee.apply(this,arguments)}}(),Ve}();function $e(Ve){var Me=function(){var ee=(0,p.A)(function*(Ue){var Ae=(0,ae.Xz)(Ue);Ae._deleted=Ue._deleted;var Oe=yield Ve(Ae),pe=Object.assign({},Oe,{_meta:Ue._meta,_attachments:Ue._attachments,_rev:Ue._rev,_deleted:typeof Oe._deleted<"u"?Oe._deleted:Ue._deleted});return typeof pe._deleted>"u"&&(pe._deleted=!1),pe});return function(Ae){return ee.apply(this,arguments)}}();return Me}},3896:(Bt,nt,M)=>{"use strict";M.d(nt,{h:()=>p});var p={isDevMode:()=>!1,deepFreezeWhenDevMode:ie=>ie,tunnelErrorMessage:ie=>"RxDB Error-Code "+ie+".\n        Error messages are not included in RxDB core to reduce build size.\n        "}},7176:(Bt,nt,M)=>{"use strict";M.d(nt,{$r:()=>te,Aj:()=>ae,Hb:()=>Ae,S7:()=>$e,Sd:()=>he,dG:()=>ie,j7:()=>Ve,jw:()=>Oe,k_:()=>lt});var p=M(467);function ie(pe){return pe[pe.length-1]}function te(pe){return Array.isArray(pe)?pe.slice(0):[pe]}function ae(pe,Be){pe=pe.slice(0);for(var dt=[];pe.length;){var Te=pe.splice(0,Be);dt.push(Te)}return dt}function lt(pe){return Array.isArray(pe)}function $e(pe){return null!=pe}function he(pe,Be){var dt=0,Te=-1;for(var He of pe){if(!Be(He,Te+=1))break;dt+=1}return dt}function Ve(pe,Be){return Me.apply(this,arguments)}function Me(){return(Me=(0,p.A)(function*(pe,Be){var dt=yield Promise.all(pe.map(Be));return pe.filter((...[,Te])=>dt[Te])})).apply(this,arguments)}function Ae(pe,Be){var dt=Be.length;if(0!==dt){var Te=pe.length;pe.length=Te+Be.length;for(var He=0;He<dt;++He)pe[Te+He]=Be[He]}}function Oe(pe){return pe.filter(function(Be,dt,Te){return Te.indexOf(Be)===dt})}},2060:(Bt,nt,M)=>{"use strict";M.d(nt,{Fq:()=>fe,MC:()=>p,Xz:()=>se,YL:()=>te,o4:()=>ie});var p=1;function ie(){return{lwt:p}}function fe(){return""}function se(qe){return Object.assign({},qe,{_meta:void 0,_deleted:void 0,_rev:void 0})}function te(qe,$e,he){if($e.length!==he.length)return!1;for(var Ve=0,Me=$e.length;Ve<Me;){var ee=$e[Ve],Ue=he[Ve];if(Ve++,ee._rev!==Ue._rev||ee[qe]!==Ue[qe])return!1}return!0}},203:(Bt,nt,M)=>{"use strict";M.d(nt,{S:()=>fe,u:()=>ie});var p=M(720);function ie(se){var te=se.split("-"),ae="RxDB";return te.forEach(de=>{ae+=(0,p.Z2)(de)}),ae+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+ae+" } from 'rxdb/plugins/"+se+"';\n            addRxPlugin("+ae+");\n        ")}function fe(se){return{name:se.name,message:se.message,rxdb:se.rxdb,parameters:se.parameters,extensions:se.extensions,code:se.code,url:se.url,stack:se.stack?se.stack.replace(/\n/g," \n "):void 0}}},7014:(Bt,nt,M)=>{"use strict";M.d(nt,{P:()=>p,Y:()=>ie});var p={},ie="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93"},6243:(Bt,nt,M)=>{"use strict";M.d(nt,{V0:()=>Un});var p=M(467);Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0}),Object.freeze(["prototype","__proto__","constructor"]);class qe{constructor(be,K){be=this.words=be||[],this.sigBytes=void 0===K?4*be.length:K}toString(be){return(be||$e).stringify(this)}concat(be){if(this.clamp(),this.sigBytes%4)for(let K=0;K<be.sigBytes;K++)this.words[this.sigBytes+K>>>2]|=(be.words[K>>>2]>>>24-K%4*8&255)<<24-(this.sigBytes+K)%4*8;else for(let K=0;K<be.sigBytes;K+=4)this.words[this.sigBytes+K>>>2]=be.words[K>>>2];return this.sigBytes+=be.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new qe([...this.words])}}const $e={stringify(me){const be=[];for(let K=0;K<me.sigBytes;K++){const H=me.words[K>>>2]>>>24-K%4*8&255;be.push((H>>>4).toString(16),(15&H).toString(16))}return be.join("")}},Ve={parse(me){const be=me.length,K=[];for(let H=0;H<be;H++)K[H>>>2]|=(255&me.charCodeAt(H))<<24-H%4*8;return new qe(K,be)}},Me_parse=me=>Ve.parse(unescape(encodeURIComponent(me)));class ee{constructor(){this._data=new qe,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=16}reset(){this._data=new qe,this._nDataBytes=0}_append(be){"string"==typeof be&&(be=Me_parse(be)),this._data.concat(be),this._nDataBytes+=be.sigBytes}_doProcessBlock(be,K){}_process(be){let K,H=this._data.sigBytes/(4*this.blockSize);H=be?Math.ceil(H):Math.max((0|H)-this._minBufferSize,0);const V=H*this.blockSize,q=Math.min(4*V,this._data.sigBytes);if(V){for(let X=0;X<V;X+=this.blockSize)this._doProcessBlock(this._data.words,X);K=this._data.words.splice(0,V),this._data.sigBytes-=q}return new qe(K,q)}}class Ue extends ee{update(be){return this._append(be),this._process(),this}finalize(be){be&&this._append(be)}}const Ae=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Oe=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],pe=[];class Be extends Ue{constructor(){super(...arguments),this._hash=new qe([...Ae])}reset(){super.reset(),this._hash=new qe([...Ae])}_doProcessBlock(be,K){const H=this._hash.words;let V=H[0],q=H[1],X=H[2],re=H[3],oe=H[4],Je=H[5],Ct=H[6],Ft=H[7];for(let Mt=0;Mt<64;Mt++){if(Mt<16)pe[Mt]=0|be[K+Mt];else{const tn=pe[Mt-15],wn=pe[Mt-2];pe[Mt]=((tn<<25|tn>>>7)^(tn<<14|tn>>>18)^tn>>>3)+pe[Mt-7]+((wn<<15|wn>>>17)^(wn<<13|wn>>>19)^wn>>>10)+pe[Mt-16]}const on=V&q^V&X^q&X,$t=Ft+((oe<<26|oe>>>6)^(oe<<21|oe>>>11)^(oe<<7|oe>>>25))+(oe&Je^~oe&Ct)+Oe[Mt]+pe[Mt];Ft=Ct,Ct=Je,Je=oe,oe=re+$t|0,re=X,X=q,q=V,V=$t+(((V<<30|V>>>2)^(V<<19|V>>>13)^(V<<10|V>>>22))+on)|0}H[0]=H[0]+V|0,H[1]=H[1]+q|0,H[2]=H[2]+X|0,H[3]=H[3]+re|0,H[4]=H[4]+oe|0,H[5]=H[5]+Je|0,H[6]=H[6]+Ct|0,H[7]=H[7]+Ft|0}finalize(be){super.finalize(be);const K=8*this._nDataBytes,H=8*this._data.sigBytes;return this._data.words[H>>>5]|=128<<24-H%32,this._data.words[14+(H+64>>>9<<4)]=Math.floor(K/4294967296),this._data.words[15+(H+64>>>9<<4)]=K,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}function rn(){return(rn=(0,p.A)(function*(me){var be=(new TextEncoder).encode(me),K=yield crypto.subtle.digest("SHA-256",be);return Array.prototype.map.call(new Uint8Array(K),V=>("00"+V.toString(16)).slice(-2)).join("")})).apply(this,arguments)}var Un=typeof crypto<"u"&&typeof crypto.subtle<"u"&&"function"==typeof crypto.subtle.digest?function yn(me){return rn.apply(this,arguments)}:function Rt(me){return Promise.resolve(function dt(me){return(new Be).finalize(me).toString()}(me))}},9403:(Bt,nt,M)=>{"use strict";function p(fe,se){var te=fe.get(se);if(typeof te>"u")throw new Error("missing value from map "+se);return te}function ie(fe,se,te,ae){var de=fe.get(se);return typeof de>"u"?(de=te(),fe.set(se,de)):ae&&ae(de),de}M.d(nt,{m:()=>p,q:()=>ie})},6636:(Bt,nt,M)=>{"use strict";function p(ie,fe){if(ie===fe)return!0;if(ie&&fe&&"object"==typeof ie&&"object"==typeof fe){if(ie.constructor!==fe.constructor)return!1;var se,te;if(Array.isArray(ie)){if((se=ie.length)!==fe.length)return!1;for(te=se;0!=te--;)if(!p(ie[te],fe[te]))return!1;return!0}if(ie.constructor===RegExp)return ie.source===fe.source&&ie.flags===fe.flags;if(ie.valueOf!==Object.prototype.valueOf)return ie.valueOf()===fe.valueOf();if(ie.toString!==Object.prototype.toString)return ie.toString()===fe.toString();var ae=Object.keys(ie);if((se=ae.length)!==Object.keys(fe).length)return!1;for(te=se;0!=te--;)if(!Object.prototype.hasOwnProperty.call(fe,ae[te]))return!1;for(te=se;0!=te--;){var de=ae[te];if(!p(ie[de],fe[de]))return!1}return!0}return ie!=ie&&fe!=fe}M.d(nt,{b:()=>p})},1744:(Bt,nt,M)=>{"use strict";M.d(nt,{UU:()=>de,oq:()=>lt});var p=Ae=>{var Oe=typeof Ae;return null!==Ae&&("object"===Oe||"function"===Oe)},ie=new Set(["__proto__","prototype","constructor"]),fe=new Set("0123456789");function se(Ae){var Oe=[],pe="",Be="start",dt=!1;for(var Te of Ae)switch(Te){case"\\":if("index"===Be)throw new Error("Invalid character in an index");if("indexEnd"===Be)throw new Error("Invalid character after an index");dt&&(pe+=Te),Be="property",dt=!dt;break;case".":if("index"===Be)throw new Error("Invalid character in an index");if("indexEnd"===Be){Be="property";break}if(dt){dt=!1,pe+=Te;break}if(ie.has(pe))return[];Oe.push(pe),pe="",Be="property";break;case"[":if("index"===Be)throw new Error("Invalid character in an index");if("indexEnd"===Be){Be="index";break}if(dt){dt=!1,pe+=Te;break}if("property"===Be){if(ie.has(pe))return[];Oe.push(pe),pe=""}Be="index";break;case"]":if("index"===Be){Oe.push(Number.parseInt(pe,10)),pe="",Be="indexEnd";break}if("indexEnd"===Be)throw new Error("Invalid character after an index");default:if("index"===Be&&!fe.has(Te))throw new Error("Invalid character in an index");if("indexEnd"===Be)throw new Error("Invalid character after an index");"start"===Be&&(Be="property"),dt&&(dt=!1,pe+="\\"),pe+=Te}switch(dt&&(pe+="\\"),Be){case"property":if(ie.has(pe))return[];Oe.push(pe);break;case"index":throw new Error("Index was not closed");case"start":Oe.push("")}return Oe}function te(Ae,Oe){if("number"!=typeof Oe&&Array.isArray(Ae)){var pe=Number.parseInt(Oe,10);return Number.isInteger(pe)&&Ae[pe]===Ae[Oe]}return!1}function ae(Ae,Oe){if(te(Ae,Oe))throw new Error("Cannot use string index")}function de(Ae,Oe,pe){if(Array.isArray(Oe)&&(Oe=Oe.join(".")),!Oe.includes(".")&&!Oe.includes("["))return Ae[Oe];if(!p(Ae)||"string"!=typeof Oe)return void 0===pe?Ae:pe;var Be=se(Oe);if(0===Be.length)return pe;for(var dt=0;dt<Be.length;dt++){var Te=Be[dt];if(null==(Ae=te(Ae,Te)?dt===Be.length-1?void 0:null:Ae[Te])){if(dt!==Be.length-1)return pe;break}}return void 0===Ae?pe:Ae}function lt(Ae,Oe,pe){if(Array.isArray(Oe)&&(Oe=Oe.join(".")),!p(Ae)||"string"!=typeof Oe)return Ae;for(var Be=Ae,dt=se(Oe),Te=0;Te<dt.length;Te++){var He=dt[Te];ae(Ae,He),Te===dt.length-1?Ae[He]=pe:p(Ae[He])||(Ae[He]="number"==typeof dt[Te+1]?[]:{}),Ae=Ae[He]}return Be}},6434:(Bt,nt,M)=>{"use strict";function p(Me){return Object.freeze(Me),Object.getOwnPropertyNames(Me).forEach(function(ee){Object.prototype.hasOwnProperty.call(Me,ee)&&null!==Me[ee]&&("object"==typeof Me[ee]||"function"==typeof Me[ee])&&!Object.isFrozen(Me[ee])&&p(Me[ee])}),Me}function ie(Me){var ee=Me.split("."),Ue=ee.length;return 1===Ue?Ae=>Ae[Me]:Ae=>{for(var Oe=Ae,pe=0;pe<Ue;++pe)if(typeof(Oe=Oe[ee[pe]])>"u")return Oe;return Oe}}function se(Me){var ee={};for(var Ue in Me)if(Object.prototype.hasOwnProperty.call(Me,Ue))if("object"==typeof Me[Ue]){var Ae=se(Me[Ue]);for(var Oe in Ae)Object.prototype.hasOwnProperty.call(Ae,Oe)&&(ee[Ue+"."+Oe]=Ae[Oe])}else ee[Ue]=Me[Ue];return ee}function te(Me){return Object.assign({},Me)}function ae(Me){return Object.keys(Me)[0]}function lt(Me,ee=!1){if(!Me)return Me;if(!ee&&Array.isArray(Me))return Me.sort((Ae,Oe)=>"string"==typeof Ae&&"string"==typeof Oe?Ae.localeCompare(Oe):"object"==typeof Ae?1:-1).map(Ae=>lt(Ae,ee));if("object"==typeof Me&&!Array.isArray(Me)){var Ue={};return Object.keys(Me).sort((Ae,Oe)=>Ae.localeCompare(Oe)).forEach(Ae=>{Ue[Ae]=lt(Me[Ae],ee)}),Ue}return Me}M.d(nt,{FD:()=>te,Ln:()=>ae,Ns:()=>he,SQ:()=>ie,YO:()=>se,mf:()=>lt,o8:()=>$e,ol:()=>p});var $e=function qe(Me){if(!Me||null===Me||"object"!=typeof Me)return Me;if(Array.isArray(Me)){for(var ee=new Array(Me.length),Ue=ee.length;Ue--;)ee[Ue]=qe(Me[Ue]);return ee}var Ae={};for(var Oe in Me)Ae[Oe]=qe(Me[Oe]);return Ae};function he(Me,ee,Ue){return Object.defineProperty(Me,ee,{get:function(){return Ue}}),Ue}},8663:(Bt,nt,M)=>{"use strict";function ie(te,ae){if(!te)throw ae||(ae=""),new Error("ensureNotFalsy() is falsy: "+ae);return te}M.d(nt,{ZN:()=>ie,bz:()=>se});var se={bufferSize:1,refCount:!0}},5520:(Bt,nt,M)=>{"use strict";function p(){return new Promise(ee=>setTimeout(ee,0))}function fe(ee){return ee&&"function"==typeof ee.then?ee:Promise.resolve(ee)}M.d(nt,{$A:()=>de,Dr:()=>ae,Ms:()=>te,Ve:()=>he,dY:()=>p,em:()=>lt,h$:()=>Me,hq:()=>fe,vN:()=>qe});var te=Promise.resolve(!0),ae=Promise.resolve(!1),de=Promise.resolve(null),lt=Promise.resolve();function qe(ee=1e4){return"function"==typeof requestIdleCallback?new Promise(Ue=>{requestIdleCallback(()=>Ue(),{timeout:ee})}):function ie(ee=0){return new Promise(Ue=>setTimeout(Ue,ee))}(0)}var $e=lt;function he(ee=void 0){return $e=$e.then(()=>qe(ee))}function Me(ee,Ue){return ee.reduce((Ae,Oe)=>Ae.then(Oe),Promise.resolve(Ue))}},6568:(Bt,nt,M)=>{"use strict";function ie(se){for(var te="",ae=0;ae<se.length;ae++){var de=se[ae];if("-"===de)return parseInt(te,10);te+=de}throw new Error("malformatted revision: "+se)}function fe(se,te){return(te?ie(te._rev)+1:1)+"-"+se}M.d(nt,{CM:()=>fe,Wg:()=>ie})},6052:(Bt,nt,M)=>{"use strict";M.d(nt,{o:()=>p});var p="15.28.1"},720:(Bt,nt,M)=>{"use strict";M.d(nt,{L$:()=>te,Z2:()=>se,ky:()=>de,z3:()=>ie});var p="abcdefghijklmnopqrstuvwxyz";function ie(he=10){for(var Ve="",Me=0;Me<he;Me++)Ve+=p.charAt(Math.floor(Math.random()*p.length));return Ve}function se(he){return(he+="").charAt(0).toUpperCase()+he.substr(1)}function te(he){for(;"."===he.charAt(0);)he=he.substr(1);for(;"."===he.slice(-1);)he=he.slice(0,-1);return he}function de(he){return!(!he.includes("/")&&!he.includes("\\"))}},4552:(Bt,nt,M)=>{"use strict";M.d(nt,{t:()=>ie});var p=0;function ie(){var fe=Date.now();(fe+=.01)<=p&&(fe=p+.01);var se=parseFloat(fe.toFixed(2));return p=se,se}},6259:(Bt,nt,M)=>{"use strict";M.d(nt,{Cx:()=>he,XA:()=>te,n9:()=>Me});var p=M(9403),ie=M(4552),fe=M(5520),se=function(){function ee(){this._map=new Map}return ee.prototype.getByQuery=function(Oe){var pe=Oe.toString();return(0,p.q)(this._map,pe,()=>Oe)},ee}();function te(){return new se}function ae(ee,Ue){Ue.uncached=!0;var Ae=Ue.toString();ee._map.delete(Ae)}function de(ee){return ee.refCount$.observers.length}var he=(100,3e4,(Ae,Oe)=>{if(!(Oe._map.size<100)){var pe=(0,ie.t)()-3e4,Be=[],dt=Array.from(Oe._map.values());for(var Te of dt)if(!(de(Te)>0)){if(0===Te._lastEnsureEqual&&Te._creationTime<pe){ae(Oe,Te);continue}Be.push(Te)}var He=Be.length-100;He<=0||Be.sort((st,ce)=>st._lastEnsureEqual-ce._lastEnsureEqual).slice(0,He).forEach(st=>ae(Oe,st))}}),Ve=new WeakSet;function Me(ee){Ve.has(ee)||(Ve.add(ee),(0,fe.dY)().then(()=>(0,fe.Ve)(200)).then(()=>{ee.destroyed||ee.cacheReplacementPolicy(ee,ee._queryCache),Ve.delete(ee)}))}},997:(Bt,nt,M)=>{"use strict";M.d(nt,{Cf:()=>de,OK:()=>te,g0:()=>se,sk:()=>ae});var p=M(7176),ie=M(7650),fe=M(1885),se="\uffff",te=Number.MIN_SAFE_INTEGER;function ae(Me,ee){var Ue=ee.selector,Ae=Me.indexes?Me.indexes.slice(0):[];ee.index&&(Ae=[ee.index]);var Oe=!!ee.sort.find(Ie=>"desc"===Object.values(Ie)[0]),pe=new Set;Object.keys(Ue).forEach(Ie=>{var ct=(0,fe.nT)(Me,Ie);ct&&"boolean"===ct.type&&Object.prototype.hasOwnProperty.call(Ue[Ie],"$eq")&&pe.add(Ie)});var He,dt=ee.sort.map(Ie=>Object.keys(Ie)[0]).filter(Ie=>!pe.has(Ie)).join(","),Te=-1;if(Ae.forEach(Ie=>{var ct=!0,st=!0,ce=Ie.map(Rt=>{var yn=Ue[Rt],rn=yn?Object.keys(yn):[],pn={};return yn&&rn.length?rn.forEach(Ge=>{if(de.has(Ge)){var be=function he(Me,ee){switch(Me){case"$eq":return{startKey:ee,endKey:ee,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:ee,inclusiveEnd:!0};case"$gte":return{startKey:ee,inclusiveStart:!0};case"$lt":return{endKey:ee,inclusiveEnd:!1};case"$gt":return{startKey:ee,inclusiveStart:!1};default:throw new Error("SNH")}}(Ge,yn[Ge]);pn=Object.assign(pn,be)}}):pn={startKey:st?te:se,endKey:ct?se:te,inclusiveStart:!0,inclusiveEnd:!0},typeof pn.startKey>"u"&&(pn.startKey=te),typeof pn.endKey>"u"&&(pn.endKey=se),typeof pn.inclusiveStart>"u"&&(pn.inclusiveStart=!0),typeof pn.inclusiveEnd>"u"&&(pn.inclusiveEnd=!0),st&&!pn.inclusiveStart&&(st=!1),ct&&!pn.inclusiveEnd&&(ct=!1),pn}),ne=ce.map(Rt=>Rt.startKey),W=ce.map(Rt=>Rt.endKey),ft={index:Ie,startKeys:ne,endKeys:W,inclusiveEnd:ct,inclusiveStart:st,sortSatisfiedByIndex:!Oe&&dt===Ie.filter(Rt=>!pe.has(Rt)).join(","),selectorSatisfiedByIndex:$e(Ie,ee.selector,ne,W)},At=function Ve(Me,ee,Ue){var Ae=0,Oe=Ie=>{Ie>0&&(Ae+=Ie)},Be=(0,p.Sd)(Ue.startKeys,Ie=>Ie!==te&&Ie!==se);Oe(10*Be);var dt=(0,p.Sd)(Ue.startKeys,Ie=>Ie!==se&&Ie!==te);Oe(10*dt);var Te=(0,p.Sd)(Ue.startKeys,(Ie,ct)=>Ie===Ue.endKeys[ct]);return Oe(10*Te*1.5),Oe(Ue.sortSatisfiedByIndex?5:0),Ae}(0,0,ft);(At>=Te||ee.index)&&(Te=At,He=ft)}),!He)throw(0,ie.Br)("SNH",{query:ee});return He}var de=new Set(["$eq","$gt","$gte","$lt","$lte"]),lt=new Set(["$eq","$gt","$gte"]),qe=new Set(["$eq","$lt","$lte"]);function $e(Me,ee,Ue,Ae){if(Object.entries(ee).find(([Ge,me])=>!Me.includes(Ge)||Object.entries(me).find(([K,H])=>!de.has(K)))||ee.$and||ee.$or)return!1;var Be=[],dt=new Set;for(var[Te,He]of Object.entries(ee)){if(!Me.includes(Te))return!1;var Ie=Object.keys(He).filter(Ge=>lt.has(Ge));if(Ie.length>1)return!1;var ct=Ie[0];if(ct&&dt.add(Te),"$eq"!==ct){if(Be.length>0)return!1;Be.push(ct)}}var st=[],ce=new Set;for(var[ne,W]of Object.entries(ee)){if(!Me.includes(ne))return!1;var ft=Object.keys(W).filter(Ge=>qe.has(Ge));if(ft.length>1)return!1;var At=ft[0];if(At&&ce.add(ne),"$eq"!==At){if(st.length>0)return!1;st.push(At)}}var Rt=0;for(var yn of Me){for(var rn of[dt,ce]){if(!rn.has(yn)&&rn.size>0)return!1;rn.delete(yn)}if(Ue[Rt]!==Ae[Rt]&&dt.size>0&&ce.size>0)return!1;Rt++}return!0}},327:(Bt,nt,M)=>{"use strict";M.d(nt,{a:()=>lt,r:()=>qe});var p=M(467),ie=M(6636),fe=M(6434),se=M(2060),te=M(4552),ae=M(6568),de=M(6893),lt=function(he,Ve){var Me=(0,de.on)(he.newDocumentState),ee=(0,de.on)(he.realMasterState);return(0,ie.b)(Me,ee)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:he.realMasterState})};function qe(he,Ve,Me){return $e.apply(this,arguments)}function $e(){return($e=(0,p.A)(function*(he,Ve,Me){var ee=he.input.conflictHandler,Ue=yield ee(Ve,"replication-resolve-conflict");if(!Ue.isEqual){var Ae=Object.assign({},Ue.documentData,{_meta:(0,fe.FD)(Me._meta),_rev:(0,se.Fq)(),_attachments:(0,fe.FD)(Me._attachments)});return Ae._meta.lwt=(0,te.t)(),Ae._rev=(0,ae.CM)(yield he.checkpointKey,Me),{resolvedDoc:Ae,output:Ue}}})).apply(this,arguments)}},312:(Bt,nt,M)=>{"use strict";M.d(nt,{_r:()=>fe,vk:()=>ie});var p=M(3896);function ie(te){return te.documentData?te.documentData:te.previousDocumentData}function fe(te){switch(te.operation){case"INSERT":return{operation:te.operation,id:te.documentId,doc:te.documentData,previous:null};case"UPDATE":return{operation:te.operation,id:te.documentId,doc:p.h.deepFreezeWhenDevMode(te.documentData),previous:te.previousDocumentData?te.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:te.operation,id:te.documentId,doc:null,previous:te.previousDocumentData}}}},1318:(Bt,nt,M)=>{"use strict";M.d(nt,{JY:()=>Ve,X3:()=>Oe,vK:()=>Me,vM:()=>Ue});var p=M(467),ie=M(6434),fe=M(2060),se=M(4552),te=M(6568),ae=M(1885),de=M(2284),lt=M(2104),qe=M(6893),$e=M(3896),he=M(7650);function Ve(pe,Be){return Be=(0,ie.FD)(Be),Be=(0,ae.pA)(pe,Be),"string"!=typeof pe.jsonSchema.primaryKey&&(Be=(0,ae.Nq)(pe.primaryPath,pe.jsonSchema,Be)),Be._meta=(0,fe.o4)(),Object.prototype.hasOwnProperty.call(Be,"_deleted")||(Be._deleted=!1),Object.prototype.hasOwnProperty.call(Be,"_attachments")||(Be._attachments={}),Object.prototype.hasOwnProperty.call(Be,"_rev")||(Be._rev=(0,fe.Fq)()),Be}function Me(pe,Be){return ee.apply(this,arguments)}function ee(){return(ee=(0,p.A)(function*(pe,Be){return Be.multiInstance=pe.multiInstance,yield pe.storage.createStorageInstance(Be)})).apply(this,arguments)}function Ue(pe,Be,dt,Te,He,Ie,ct){return Ae.apply(this,arguments)}function Ae(){return Ae=(0,p.A)(function*(pe,Be,dt,Te,He,Ie,ct){var ce=(yield(0,lt.WY)(Be)).filter(At=>At.data.name===He),ne=[];ce.forEach(At=>{ne.push({collectionName:At.data.name,schema:At.data.schema,isCollection:!0}),At.data.connectedStorages.forEach(Rt=>ne.push({collectionName:Rt.collectionName,isCollection:!1,schema:Rt.schema}))});var W=new Set;if(ne=ne.filter(At=>{var Rt=At.collectionName+"||"+At.schema.version;return!W.has(Rt)&&(W.add(Rt),!0)}),yield Promise.all(ne.map(function(){var At=(0,p.A)(function*(Rt){var yn=yield pe.createStorageInstance({collectionName:Rt.collectionName,databaseInstanceToken:dt,databaseName:Te,multiInstance:!1,options:{},schema:Rt.schema,password:Ie,devMode:$e.h.isDevMode()});yield yn.remove(),Rt.isCollection&&(yield(0,de.FX)("postRemoveRxCollection",{storage:pe,databaseName:Te,collectionName:He}))});return function(Rt){return At.apply(this,arguments)}}())),ct){var ft=ce.map(At=>{var Rt=(0,qe.C9)(At);return Rt._deleted=!0,Rt._meta.lwt=(0,se.t)(),Rt._rev=(0,te.CM)(dt,At),{previous:At,document:Rt}});yield Be.bulkWrite(ft,"rx-database-remove-collection-all")}}),Ae.apply(this,arguments)}function Oe(pe){if(pe.destroyed)throw(0,he.Br)("COL21",{collection:pe.name,version:pe.schema.version})}},4395:(Bt,nt,M)=>{"use strict";M.d(nt,{wm:()=>pn,dN:()=>be});var p=M(467),ie=M(6126),fe=M(5964),se=M(1397),te=M(6354),ae=M(5520),de=M(203),lt=M(8663),qe=M(6434),$e=M(9403),he=M(720),Ve=M(1318),Me=M(5672),ee=M(7650),Ue=M(9825),Ae=M(6259),Oe=M(7176),pe=function(){function H(q){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=q,this.subs.push(this.collection.database.eventBulks$.pipe((0,fe.p)(X=>X.collectionName===this.collection.name),(0,fe.p)(X=>!X.events[0].isLocal)).subscribe(X=>{this.tasks.add(()=>this._handleChangeEvents(X.events)),this.tasks.size<=1&&(0,ae.vN)().then(()=>{this.processTasks()})}))}var V=H.prototype;return V.processTasks=function(){0!==this.tasks.size&&(Array.from(this.tasks).forEach(re=>re()),this.tasks.clear())},V._handleChangeEvents=function(X){var re=this.counter;this.counter=this.counter+X.length,X.length>this.limit?this.buffer=X.slice(-1*X.length):((0,Oe.Hb)(this.buffer,X),this.buffer=this.buffer.slice(-1*this.limit));for(var oe=re+1,Je=this.eventCounterMap,Ct=0;Ct<X.length;Ct++)Je.set(X[Ct],oe+Ct)},V.getCounter=function(){return this.processTasks(),this.counter},V.getBuffer=function(){return this.processTasks(),this.buffer},V.getArrayIndexByPointer=function(X){this.processTasks();var oe=this.eventCounterMap.get(this.buffer[0]);return X<oe?null:X-oe},V.getFrom=function(X){this.processTasks();var re=[],oe=this.getArrayIndexByPointer(X);if(null===oe)return null;for(;;){var Je=this.buffer[oe];if(oe++,!Je)return re;re.push(Je)}},V.runFrom=function(X,re){this.processTasks();var oe=this.getFrom(X);if(null===oe)throw new Error("out of bounds");oe.forEach(Je=>re(Je))},V.reduceByLastOfDoc=function(X){return this.processTasks(),X.slice(0)},V.destroy=function(){this.tasks.clear(),this.subs.forEach(X=>X.unsubscribe())},H}(),dt=M(2284),Te=M(5908),He=M(3896),Ie=new WeakMap;var W=M(6893),ft=M(327),At=M(6706),Rt=["pre","post"],yn=["insert","save","remove","create"],rn=!1,pn=function(){function H(q,X,re,oe,Je={},Ct={},Ft={},Mt={},jt={},on=Ae.Cx,en={},ln=ft.a){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=(0,Ae.XA)(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=q,this.name=X,this.schema=re,this.internalStorageInstance=oe,this.instanceCreationOptions=Je,this.migrationStrategies=Ct,this.methods=Ft,this.attachments=Mt,this.options=jt,this.cacheReplacementPolicy=on,this.statics=en,this.conflictHandler=ln,function Un(H){if(!rn){rn=!0;var V=Object.getPrototypeOf(H);yn.forEach(q=>{Rt.map(X=>{var re=X+(0,he.Z2)(q);V[re]=function(oe,Je){return this.addHook(X,q,oe,Je)}})})}}(this.asRxCollection)}var V=H.prototype;return V.prepare=function(){var q=(0,p.A)(function*(){var re=this;this.storageInstance=(0,W.AM)(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new At.N6(this.storageInstance,this.schema.primaryPath,(jt,on)=>(0,Te.Lt)(this,jt,on),jt=>this._runHooks("post","save",jt));var Je,oe=this.database.eventBulks$.pipe((0,fe.p)(jt=>jt.collectionName===this.name));this.$=oe.pipe((0,se.Z)(jt=>jt.events)),this.checkpoint$=oe.pipe((0,te.T)(jt=>jt.checkpoint)),this._changeEventBuffer=function Be(H){return new pe(H)}(this.asRxCollection),this._docCache=new Ue.K(this.schema.primaryPath,this.database.eventBulks$.pipe((0,fe.p)(jt=>jt.collectionName===this.name&&!jt.events[0].isLocal),(0,te.T)(jt=>jt.events)),jt=>(Je||(Je=function st(H){return(0,$e.q)(Ie,H,()=>(0,Te.cM)(function ct(H){var V=H.schema.getDocumentPrototype(),q=function ne(H){var V={};return Object.entries(H.methods).forEach(([q,X])=>{V[q]=X}),V}(H),re={};return[V,q,Te.ky].forEach(oe=>{Object.getOwnPropertyNames(oe).forEach(Ct=>{var Ft=Object.getOwnPropertyDescriptor(oe,Ct),Mt=!0;(Ct.startsWith("_")||Ct.endsWith("_")||Ct.startsWith("$")||Ct.endsWith("$"))&&(Mt=!1),"function"==typeof Ft.value?Object.defineProperty(re,Ct,{get(){return Ft.value.bind(this)},enumerable:Mt,configurable:!1}):(Ft.enumerable=Mt,Ft.configurable=!1,Ft.writable&&(Ft.writable=!1),Object.defineProperty(re,Ct,Ft))})}),re}(H)))}(this.asRxCollection)),function ce(H,V,q){var X=(0,Te.Zb)(V,H,He.h.deepFreezeWhenDevMode(q));return H._runHooksSync("post","create",q,X),(0,dt.Xi)("postCreateRxDocument",X),X}(this.asRxCollection,Je,jt)));var Ct=this.database.internalStore.changeStream().pipe((0,fe.p)(jt=>{var on=this.name+"-"+this.schema.version;return!!jt.events.find(ln=>"collection"===ln.documentData.context&&ln.documentData.key===on&&"DELETE"===ln.operation)})).subscribe((0,p.A)(function*(){yield re.destroy(),yield Promise.all(re.onRemove.map(jt=>jt()))}));this._subs.push(Ct);var Ft=yield this.database.storageToken,Mt=this.storageInstance.changeStream().subscribe(jt=>{for(var on=new Array(jt.events.length),en=jt.events,ln=this.name,$t=He.h.deepFreezeWhenDevMode,hn=0;hn<en.length;hn++){var tn=en[hn];on[hn]={documentId:tn.documentId,collectionName:ln,isLocal:!1,operation:tn.operation,documentData:$t(tn.documentData),previousDocumentData:$t(tn.previousDocumentData)}}this.database.$emit({id:jt.id,internal:!1,collectionName:this.name,storageToken:Ft,events:on,databaseToken:this.database.token,checkpoint:jt.checkpoint,context:jt.context,endTime:jt.endTime,startTime:jt.startTime})});return this._subs.push(Mt),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(jt=>{this.conflictHandler(jt.input,jt.context).then(on=>{this.storageInstance.resolveConflictResultionTask({id:jt.id,output:on})})})),ae.em});return function X(){return q.apply(this,arguments)}}(),V.cleanup=function(X){throw(0,Ve.X3)(this),(0,de.u)("cleanup")},V.migrationNeeded=function(){throw(0,de.u)("migration-schema")},V.getMigrationState=function(){throw(0,de.u)("migration-schema")},V.startMigration=function(X=10){return(0,Ve.X3)(this),this.getMigrationState().startMigration(X)},V.migratePromise=function(X=10){return this.getMigrationState().migratePromise(X)},V.insert=function(){var q=(0,p.A)(function*(re){(0,Ve.X3)(this);var oe=yield this.bulkInsert([re]);return(0,W.WX)(this,re[this.schema.primaryPath],re,oe.error[0]),(0,lt.ZN)(oe.success[0])});return function X(re){return q.apply(this,arguments)}}(),V.bulkInsert=function(){var q=(0,p.A)(function*(re){if((0,Ve.X3)(this),0===re.length)return{success:[],error:[]};var Je,oe=this.schema.primaryPath;if(this.hasHooks("pre","insert"))Je=yield Promise.all(re.map(tn=>{var Wn=(0,Ve.JY)(this.schema,tn);return this._runHooks("pre","insert",Wn).then(()=>({document:Wn}))}));else{Je=new Array(re.length);for(var Ct=this.schema,Ft=0;Ft<re.length;Ft++){var jt=(0,Ve.JY)(Ct,re[Ft]);Je[Ft]={document:jt}}}var en,on=yield this.storageInstance.bulkWrite(Je,"rx-collection-bulk-insert"),ln=this,$t={get success(){if(!en){var tn=(0,W.YN)(ln.schema.primaryPath,Je,on);en=(0,Ue.X)(ln._docCache,tn)}return en},error:on.error};if(this.hasHooks("post","insert")){var hn=new Map;Je.forEach(tn=>{var Wn=tn.document;hn.set(Wn[oe],Wn)}),yield Promise.all($t.success.map(tn=>this._runHooks("post","insert",hn.get(tn.primary),tn)))}return $t});return function X(re){return q.apply(this,arguments)}}(),V.bulkRemove=function(){var q=(0,p.A)(function*(re){(0,Ve.X3)(this);var oe=this.schema.primaryPath;if(0===re.length)return{success:[],error:[]};var Je=yield this.findByIds(re).exec(),Ct=[],Ft=new Map;Array.from(Je.values()).forEach($t=>{var hn=$t.toMutableJSON(!0);Ct.push(hn),Ft.set($t.primary,hn)}),yield Promise.all(Ct.map($t=>this._runHooks("pre","remove",$t,Je.get($t[this.schema.primaryPath]))));var Mt=Ct.map($t=>{var hn=(0,qe.FD)($t);return hn._deleted=!0,{previous:$t,document:hn}}),jt=yield this.storageInstance.bulkWrite(Mt,"rx-collection-bulk-remove"),en=(0,W.YN)(this.schema.primaryPath,Mt,jt).map($t=>$t[oe]);return yield Promise.all(en.map($t=>this._runHooks("post","remove",Ft.get($t),Je.get($t)))),{success:en.map($t=>(0,$e.m)(Je,$t)),error:jt.error}});return function X(re){return q.apply(this,arguments)}}(),V.bulkUpsert=function(){var q=(0,p.A)(function*(re){var oe=this;(0,Ve.X3)(this);var Je=[],Ct=new Map;re.forEach(on=>{var en=(0,Ve.JY)(this.schema,on),ln=en[this.schema.primaryPath];if(!ln)throw(0,ee.Br)("COL3",{primaryPath:this.schema.primaryPath,data:en,schema:this.schema.jsonSchema});Ct.set(ln,en),Je.push(en)});var Ft=yield this.bulkInsert(Je),Mt=Ft.success.slice(0),jt=[];return yield Promise.all(Ft.error.map(function(){var on=(0,p.A)(function*(en){if(409!==en.status)jt.push(en);else{var $t=(0,$e.m)(Ct,en.documentId),hn=(0,lt.ZN)(en.documentInDb),tn=oe._docCache.getCachedRxDocuments([hn])[0],Wn=yield tn.incrementalModify(()=>$t);Mt.push(Wn)}});return function(en){return on.apply(this,arguments)}}())),{error:jt,success:Mt}});return function X(re){return q.apply(this,arguments)}}(),V.upsert=function(){var q=(0,p.A)(function*(re){(0,Ve.X3)(this);var oe=yield this.bulkUpsert([re]);return(0,W.WX)(this.asRxCollection,re[this.schema.primaryPath],re,oe.error[0]),oe.success[0]});return function X(re){return q.apply(this,arguments)}}(),V.incrementalUpsert=function(X){(0,Ve.X3)(this);var re=(0,Ve.JY)(this.schema,X),oe=re[this.schema.primaryPath];if(!oe)throw(0,ee.Br)("COL4",{data:X});var Je=this._incrementalUpsertQueues.get(oe);return Je||(Je=ae.em),Je=Je.then(()=>function me(H,V,q){var X=H._docCache.getLatestDocumentDataIfExists(V);return X?Promise.resolve({doc:H._docCache.getCachedRxDocuments([X])[0],inserted:!1}):H.findOne(V).exec().then(re=>re?{doc:re,inserted:!1}:H.insert(q).then(oe=>({doc:oe,inserted:!0})))}(this,oe,re)).then(Ct=>Ct.inserted?Ct.doc:function Ge(H,V){return H.incrementalModify(q=>V)}(Ct.doc,re)),this._incrementalUpsertQueues.set(oe,Je),Je},V.find=function(X){if((0,Ve.X3)(this),"string"==typeof X)throw(0,ee.Br)("COL5",{queryObj:X});return X||(X=(0,Me.XX)()),(0,Me.nd)("find",X,this)},V.findOne=function(X){if((0,Ve.X3)(this),"number"==typeof X||Array.isArray(X))throw(0,ee.JX)("COL6",{queryObj:X});var re;if("string"==typeof X)re=(0,Me.nd)("findOne",{selector:{[this.schema.primaryPath]:X},limit:1},this);else{if(X||(X=(0,Me.XX)()),X.limit)throw(0,ee.Br)("QU6");(X=(0,qe.FD)(X)).limit=1,re=(0,Me.nd)("findOne",X,this)}return re},V.count=function(X){return(0,Ve.X3)(this),X||(X=(0,Me.XX)()),(0,Me.nd)("count",X,this)},V.findByIds=function(X){(0,Ve.X3)(this);var re={selector:{[this.schema.primaryPath]:{$in:X.slice(0)}}};return(0,Me.nd)("findByIds",re,this)},V.exportJSON=function(){throw(0,de.u)("json-dump")},V.importJSON=function(X){throw(0,de.u)("json-dump")},V.insertCRDT=function(X){throw(0,de.u)("crdt")},V.addHook=function(X,re,oe,Je=!1){if("function"!=typeof oe)throw(0,ee.JX)("COL7",{key:re,when:X});if(!Rt.includes(X))throw(0,ee.JX)("COL8",{key:re,when:X});if(!yn.includes(re))throw(0,ee.Br)("COL9",{key:re});if("post"===X&&"create"===re&&!0===Je)throw(0,ee.Br)("COL10",{when:X,key:re,parallel:Je});var Ct=oe.bind(this),Ft=Je?"parallel":"series";this.hooks[re]=this.hooks[re]||{},this.hooks[re][X]=this.hooks[re][X]||{series:[],parallel:[]},this.hooks[re][X][Ft].push(Ct)},V.getHooks=function(X,re){return this.hooks[re]&&this.hooks[re][X]?this.hooks[re][X]:{series:[],parallel:[]}},V.hasHooks=function(X,re){if(!this.hooks[re]||!this.hooks[re][X])return!1;var oe=this.getHooks(X,re);return!!oe&&(oe.series.length>0||oe.parallel.length>0)},V._runHooks=function(X,re,oe,Je){var Ct=this.getHooks(X,re);if(!Ct)return ae.em;var Ft=Ct.series.map(Mt=>()=>Mt(oe,Je));return(0,ae.h$)(Ft).then(()=>Promise.all(Ct.parallel.map(Mt=>Mt(oe,Je))))},V._runHooksSync=function(X,re,oe,Je){if(this.hasHooks(X,re)){var Ct=this.getHooks(X,re);Ct&&Ct.series.forEach(Ft=>Ft(oe,Je))}},V.promiseWait=function(X){return new Promise(oe=>{var Je=setTimeout(()=>{this.timeouts.delete(Je),oe()},X);this.timeouts.add(Je)})},V.destroy=function(){var q=(0,p.A)(function*(){return this.destroyed?ae.Dr:(yield Promise.all(this.onDestroy.map(re=>re())),this.destroyed=!0,Array.from(this.timeouts).forEach(re=>clearTimeout(re)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(re=>re.unsubscribe()),delete this.database.collections[this.name],(0,dt.FX)("postDestroyRxCollection",this).then(()=>!0))))});return function X(){return q.apply(this,arguments)}}(),V.remove=function(){var q=(0,p.A)(function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(re=>re())),yield(0,Ve.vM)(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)});return function X(){return q.apply(this,arguments)}}(),(0,ie.A)(H,[{key:"insert$",get:function(){return this.$.pipe((0,fe.p)(q=>"INSERT"===q.operation))}},{key:"update$",get:function(){return this.$.pipe((0,fe.p)(q=>"UPDATE"===q.operation))}},{key:"remove$",get:function(){return this.$.pipe((0,fe.p)(q=>"DELETE"===q.operation))}},{key:"asRxCollection",get:function(){return this}}])}();function be({database:H,name:V,schema:q,instanceCreationOptions:X={},migrationStrategies:re={},autoMigrate:oe=!0,statics:Je={},methods:Ct={},attachments:Ft={},options:Mt={},localDocuments:jt=!1,cacheReplacementPolicy:on=Ae.Cx,conflictHandler:en=ft.a}){var ln={databaseInstanceToken:H.token,databaseName:H.name,collectionName:V,schema:q.jsonSchema,options:X,multiInstance:H.multiInstance,password:H.password,devMode:He.h.isDevMode()};return(0,dt.Xi)("preCreateRxStorageInstance",ln),(0,Ve.vK)(H,ln).then($t=>{var hn=new pn(H,V,q,$t,X,re,Ct,Ft,Mt,on,Je,en);return hn.prepare().then(()=>{Object.entries(Je).forEach(([Wn,wn])=>{Object.defineProperty(hn,Wn,{get:()=>wn.bind(hn)})});var tn=ae.em;return oe&&0!==hn.schema.version&&(tn=hn.migratePromise()),tn}).then(()=>((0,dt.Xi)("createRxCollection",{collection:hn,creator:{name:V,schema:q,storageInstance:$t,instanceCreationOptions:X,migrationStrategies:re,methods:Ct,attachments:Ft,options:Mt,cacheReplacementPolicy:on,localDocuments:jt,statics:Je}}),hn)).catch(tn=>$t.close().then(()=>Promise.reject(tn)))})}},2104:(Bt,nt,M)=>{"use strict";M.d(nt,{CC:()=>ee,Nu:()=>$e,WY:()=>Ae,bD:()=>st,bV:()=>ne,lz:()=>Ue,ol:()=>dt,vV:()=>Ie});var p=M(467),ie=M(7650),fe=M(1885),se=M(6893),te=M(720),ae=M(2060),de=M(8663),lt=M(6434),qe=M(5672),$e="collection",he="storage-token",ee=(0,fe.Ud)({version:0,title:"RxInternalDocument",primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[$e,he,"rx-migration-status","OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Ue(W,ft){return(0,fe.U)(ee,{key:W,context:ft})}function Ae(W){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,p.A)(function*(W){var ft=(0,qe.Ib)(W.schema,{selector:{context:$e,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0});return(yield W.query(ft)).documents})).apply(this,arguments)}var pe="storageToken",Be=Ue(pe,he);function dt(W){return Te.apply(this,arguments)}function Te(){return(Te=(0,p.A)(function*(W){var ft=(0,te.z3)(10),At=W.password?yield W.hashFunction(JSON.stringify(W.password)):void 0,yn=[{document:{id:Be,context:he,key:pe,data:{rxdbVersion:W.rxdbVersion,token:ft,instanceToken:W.token,passwordHash:At},_deleted:!1,_meta:(0,ae.o4)(),_rev:(0,ae.Fq)(),_attachments:{}}}],rn=yield W.internalStore.bulkWrite(yn,"internal-add-storage-token");if(!rn.error[0])return(0,se.YN)("id",yn,rn)[0];var pn=(0,de.ZN)(rn.error[0]);if(pn.isError&&(0,ie.sX)(pn)){var Un=pn;if(!function He(W,ft){return!(!W||ft.includes("beta")&&ft!==W)&&W.split(".")[0]===ft.split(".")[0]}(Un.documentInDb.data.rxdbVersion,W.rxdbVersion))throw(0,ie.Br)("DM5",{args:{database:W.name,databaseStateVersion:Un.documentInDb.data.rxdbVersion,codeVersion:W.rxdbVersion}});if(At&&At!==Un.documentInDb.data.passwordHash)throw(0,ie.Br)("DB1",{passwordHash:At,existingPasswordHash:Un.documentInDb.data.passwordHash});return(0,de.ZN)(Un.documentInDb)}throw pn})).apply(this,arguments)}function Ie(W,ft,At){return ct.apply(this,arguments)}function ct(){return(ct=(0,p.A)(function*(W,ft,At){if(W.schema.version!==At.version)throw(0,ie.Br)("SNH",{schema:At,version:W.schema.version,name:W.name,collection:W,args:{storageCollectionName:ft}});for(var yn=Ue(ne(W.name,W.schema.jsonSchema),$e);;){var rn=yield(0,se.O5)(W.database.internalStore,yn),pn=(0,lt.o8)((0,de.ZN)(rn));if(pn.data.connectedStorages.find(Ge=>Ge.collectionName===ft&&Ge.schema.version===At.version))return;pn.data.connectedStorages.push({collectionName:ft,schema:At});try{yield(0,se.mQ)(W.database.internalStore,{previous:(0,de.ZN)(rn),document:pn},"add-connected-storage-to-collection")}catch(Ge){if(!(0,ie.sX)(Ge))throw Ge}}})).apply(this,arguments)}function st(W,ft,At){return ce.apply(this,arguments)}function ce(){return(ce=(0,p.A)(function*(W,ft,At){if(W.schema.version!==At.version)throw(0,ie.Br)("SNH",{schema:At,version:W.schema.version,name:W.name,collection:W,args:{storageCollectionName:ft}});for(var yn=Ue(ne(W.name,W.schema.jsonSchema),$e);;){var rn=yield(0,se.O5)(W.database.internalStore,yn),pn=(0,lt.o8)((0,de.ZN)(rn));if(!pn.data.connectedStorages.find(Ge=>Ge.collectionName===ft&&Ge.schema.version===At.version))return;pn.data.connectedStorages=pn.data.connectedStorages.filter(Ge=>Ge.collectionName!==ft);try{yield(0,se.mQ)(W.database.internalStore,{previous:(0,de.ZN)(rn),document:pn},"remove-connected-storage-from-collection")}catch(Ge){if(!(0,ie.sX)(Ge))throw Ge}}})).apply(this,arguments)}function ne(W,ft){return W+"-"+ft.version}},7396:(Bt,nt,M)=>{"use strict";M.d(nt,{lB:()=>W,uh:()=>yn,NI:()=>me});var p=M(467),ie=M(6126),fe=function(){this._parallels=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};function te(V,q){if(q){if(q._timeoutObj&&clearTimeout(q._timeoutObj),V._pHM.has(q)){var X=V._pHM.get(q);V._hPM.delete(X),V._pHM.delete(q)}V._iC.delete(q)}}function ae(V){V._tryIR||0===V._iC.size||(V._tryIR=!0,setTimeout(function(){V.isIdle()?setTimeout(function(){V.isIdle()?(function se(V){0!==V._iC.size&&(V._iC.values().next().value._manRes(),setTimeout(function(){return ae(V)},0))}(V),V._tryIR=!1):V._tryIR=!1},0):V._tryIR=!1},0))}fe.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,ae(this)},wrapCall:function(q){var re,X=this;this.lock();try{re=q()}catch(oe){throw this.unlock(),oe}return re.then&&"function"==typeof re.then?re.then(function(oe){return X.unlock(),oe}).catch(function(oe){throw X.unlock(),oe}):(this.unlock(),re)},requestIdlePromise:function(q){var X=this;q=q||{};var re,oe=new Promise(function(Ft){return re=Ft});if(oe._manRes=function(){te(X,oe),re()},q.timeout){var Ct=setTimeout(function(){oe._manRes()},q.timeout);oe._timeoutObj=Ct}return this._iC.add(oe),ae(this),oe},cancelIdlePromise:function(q){te(this,q)},requestIdleCallback:function(q,X){var re=this._lHN++,oe=this.requestIdlePromise(X);return this._hPM.set(re,oe),this._pHM.set(oe,re),oe.then(function(){return q()}),re},cancelIdleCallback:function(q){var X=this._hPM.get(q);this.cancelIdlePromise(X)},clear:function(){var q=this;this._iC.forEach(function(X){return te(q,X)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};var de=M(6052),lt=M(5520),qe=M(2060),$e=M(6434),he=M(8663),Ve=M(203),Me=M(6243),ee=M(720),Ue=M(7650),Ae=M(9182),Oe=M(2284),pe=M(1413),Be=M(1397),dt=M(4395),Te=M(6893),He=M(9556),Ie=M(2104),ct=M(1318),st=M(3896),ce=new Set,W=function(){function V(X,re,oe,Je,Ct,Ft,Mt=!1,jt={},on,en,ln,$t,hn){this.idleQueue=new fe,this.rxdbVersion=de.o,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new pe.B,this.observable$=this.eventBulks$.pipe((0,Be.Z)(tn=>tn.events)),this.storageToken=lt.Dr,this.storageTokenDocument=lt.Dr,this.emittedEventBulkIds=new He.p4(6e4),this.name=X,this.token=re,this.storage=oe,this.instanceCreationOptions=Je,this.password=Ct,this.multiInstance=Ft,this.eventReduce=Mt,this.options=jt,this.internalStore=on,this.hashFunction=en,this.cleanupPolicy=ln,this.allowSlowCount=$t,this.reactivity=hn,"pseudoInstance"!==this.name&&(this.internalStore=(0,Te.AM)(this.asRxDatabase,on,Ie.CC),this.storageTokenDocument=(0,Ie.ol)(this.asRxDatabase).catch(tn=>this.startupErrors.push(tn)),this.storageToken=this.storageTokenDocument.then(tn=>tn.data.token).catch(tn=>this.startupErrors.push(tn)))}var q=V.prototype;return q.getReactivityFactory=function(){if(!this.reactivity)throw(0,Ue.Br)("DB14",{database:this.name});return this.reactivity},q.$emit=function(re){this.emittedEventBulkIds.has(re.id)||(this.emittedEventBulkIds.add(re.id),this.eventBulks$.next(re))},q.removeCollectionDoc=function(){var X=(0,p.A)(function*(oe,Je){var Ct=yield(0,Te.O5)(this.internalStore,(0,Ie.lz)((0,Ie.bV)(oe,Je),Ie.Nu));if(!Ct)throw(0,Ue.Br)("SNH",{name:oe,schema:Je});var Ft=(0,Te.C9)(Ct);Ft._deleted=!0,yield this.internalStore.bulkWrite([{document:Ft,previous:Ct}],"rx-database-remove-collection")});return function re(oe,Je){return X.apply(this,arguments)}}(),q.addCollections=function(){var X=(0,p.A)(function*(oe){var Je=this,Ct={},Ft={},Mt=[],jt={};yield Promise.all(Object.entries(oe).map(function(){var ln=(0,p.A)(function*([$t,hn]){var tn=$t,Wn=hn.schema;Ct[tn]=Wn;var wn=(0,Ae.Wq)(Wn,Je.hashFunction);if(Ft[tn]=wn,Je.collections[$t])throw(0,Ue.Br)("DB3",{name:$t});var Ui=(0,Ie.bV)($t,Wn),Hr={id:(0,Ie.lz)(Ui,Ie.Nu),key:Ui,context:Ie.Nu,data:{name:tn,schemaHash:yield wn.hash,schema:wn.jsonSchema,version:wn.version,connectedStorages:[]},_deleted:!1,_meta:(0,qe.o4)(),_rev:(0,qe.Fq)(),_attachments:{}};Mt.push({document:Hr});var _n=Object.assign({},hn,{name:tn,schema:wn,database:Je}),St=(0,$e.FD)(hn);St.database=Je,St.name=$t,(0,Oe.Xi)("preCreateRxCollection",St),_n.conflictHandler=St.conflictHandler,jt[tn]=_n});return function($t){return ln.apply(this,arguments)}}()));var on=yield this.internalStore.bulkWrite(Mt,"rx-database-add-collection");yield function K(V){return H.apply(this,arguments)}(this),yield Promise.all(on.error.map(function(){var ln=(0,p.A)(function*($t){if(409!==$t.status)throw(0,Ue.Br)("DB12",{database:Je.name,writeError:$t});var hn=(0,he.ZN)($t.documentInDb),tn=hn.data.name,Wn=Ft[tn];if(hn.data.schemaHash!==(yield Wn.hash))throw(0,Ue.Br)("DB6",{database:Je.name,collection:tn,previousSchemaHash:hn.data.schemaHash,schemaHash:yield Wn.hash,previousSchema:hn.data.schema,schema:(0,he.ZN)(Ct[tn])})});return function($t){return ln.apply(this,arguments)}}()));var en={};return yield Promise.all(Object.keys(oe).map(function(){var ln=(0,p.A)(function*($t){var hn=jt[$t],tn=yield(0,dt.dN)(hn);en[$t]=tn,Je.collections[$t]=tn,Je[$t]||Object.defineProperty(Je,$t,{get:()=>Je.collections[$t]})});return function($t){return ln.apply(this,arguments)}}())),en});return function re(oe){return X.apply(this,arguments)}}(),q.lockedRun=function(re){return this.idleQueue.wrapCall(re)},q.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},q.exportJSON=function(re){throw(0,Ve.u)("json-dump")},q.addState=function(re){throw(0,Ve.u)("state")},q.importJSON=function(re){throw(0,Ve.u)("json-dump")},q.backup=function(re){throw(0,Ve.u)("backup")},q.leaderElector=function(){throw(0,Ve.u)("leader-election")},q.isLeader=function(){throw(0,Ve.u)("leader-election")},q.waitForLeadership=function(){throw(0,Ve.u)("leader-election")},q.migrationStates=function(){throw(0,Ve.u)("migration-schema")},q.destroy=function(){var X=(0,p.A)(function*(){return this.destroyed||(this.destroyed=!0,yield(0,Oe.FX)("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map(oe=>oe.unsubscribe()),"pseudoInstance"===this.name)?lt.Dr:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(oe=>oe()))).then(()=>Promise.all(Object.keys(this.collections).map(oe=>this.collections[oe]).map(oe=>oe.destroy()))).then(()=>this.internalStore.close()).then(()=>ce.delete(this.storage.name+"|"+this.name)).then(()=>!0)});return function re(){return X.apply(this,arguments)}}(),q.remove=function(){return this.destroy().then(()=>function rn(V,q,X){return pn.apply(this,arguments)}(this.name,this.storage,this.password))},(0,ie.A)(V,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function At(V,q,X,re,oe,Je){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,p.A)(function*(V,q,X,re,oe,Je){return yield q.createStorageInstance({databaseInstanceToken:V,databaseName:X,collectionName:Te.OG,schema:Ie.CC,options:re,multiInstance:oe,password:Je,devMode:st.h.isDevMode()})})).apply(this,arguments)}function yn({storage:V,instanceCreationOptions:q,name:X,password:re,multiInstance:oe=!0,eventReduce:Je=!0,ignoreDuplicate:Ct=!1,options:Ft={},cleanupPolicy:Mt,allowSlowCount:jt=!1,localDocuments:on=!1,hashFunction:en=Me.V0,reactivity:ln}){(0,Oe.Xi)("preCreateRxDatabase",{storage:V,instanceCreationOptions:q,name:X,password:re,multiInstance:oe,eventReduce:Je,ignoreDuplicate:Ct,options:Ft,localDocuments:on}),Ct||function ft(V,q){if(ce.has(q.name+"|"+V))throw(0,Ue.Br)("DB8",{name:V,storage:q.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}(X,V),ce.add(V.name+"|"+X);var $t=(0,ee.z3)(10);return At($t,V,X,q,oe,re).catch(hn=>{throw ce.delete(V.name+"|"+X),hn}).then(hn=>{var tn=new W(X,$t,V,q,re,oe,Je,Ft,hn,en,Mt,jt,ln);return(0,Oe.FX)("createRxDatabase",{database:tn,creator:{storage:V,instanceCreationOptions:q,name:X,password:re,multiInstance:oe,eventReduce:Je,ignoreDuplicate:Ct,options:Ft,localDocuments:on}}).then(()=>tn)})}function pn(){return(pn=(0,p.A)(function*(V,q,X){var re=(0,ee.z3)(10),oe=yield At(re,q,V,{},!1,X),Je=yield(0,Ie.WY)(oe),Ct=new Set;Je.forEach(Mt=>Ct.add(Mt.data.name));var Ft=Array.from(Ct);return yield Promise.all(Ft.map(Mt=>(0,ct.vM)(q,oe,re,V,Mt,X))),yield(0,Oe.FX)("postRemoveRxDatabase",{databaseName:V,storage:q}),yield oe.remove(),Ft})).apply(this,arguments)}function me(V){return be.apply(this,arguments)}function be(){return(be=(0,p.A)(function*(V){return(yield V.storageTokenDocument).data.instanceToken===V.token})).apply(this,arguments)}function H(){return(H=(0,p.A)(function*(V){if(yield V.storageToken,V.startupErrors[0])throw V.startupErrors[0]})).apply(this,arguments)}},5908:(Bt,nt,M)=>{"use strict";M.d(nt,{Lt:()=>st,Zb:()=>Ie,cM:()=>He,ky:()=>Te});var p=M(467),ie=M(6354),fe=M(5964),se=M(9172),te=M(3294),ae=M(6496),de=M(8663),lt=M(1744),qe=M(5520),$e=M(9403),he=M(6434),Ve=M(720),Me=M(203),ee=M(7650),Ue=M(2284),Ae=M(312),Oe=M(3896),pe=M(1885),Be=M(6893),dt=M(6706),Te={get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){if(this.isInstanceOfRxDocument)return this._data[this.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this.$.pipe((0,ie.T)(ne=>ne._data._deleted))},get deleted$$(){return this.collection.database.getReactivityFactory().fromObservable(this.deleted$,this.getLatest().deleted,this.collection.database)},get deleted(){if(this.isInstanceOfRxDocument)return this._data._deleted},getLatest(){var ce=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(ce)},get $(){return this.collection.$.pipe((0,fe.p)(ne=>!ne.isLocal),(0,fe.p)(ne=>ne.documentId===this.primary),(0,ie.T)(ne=>(0,Ae.vk)(ne)),(0,se.Z)(this.collection._docCache.getLatestDocumentData(this.primary)),(0,te.F)((ne,W)=>ne._rev===W._rev),(0,ie.T)(ne=>this.collection._docCache.getCachedRxDocument(ne)),(0,ae.t)(de.bz))},get $$(){return this.collection.database.getReactivityFactory().fromObservable(this.$,this.getLatest()._data,this.collection.database)},get$(ce){if(Oe.h.isDevMode()){if(ce.includes(".item."))throw(0,ee.Br)("DOC1",{path:ce});if(ce===this.primaryPath)throw(0,ee.Br)("DOC2");if(this.collection.schema.finalFields.includes(ce))throw(0,ee.Br)("DOC3",{path:ce});if(!(0,pe.nT)(this.collection.schema.jsonSchema,ce))throw(0,ee.Br)("DOC4",{path:ce})}return this.$.pipe((0,ie.T)(W=>(0,lt.UU)(W,ce)),(0,te.F)())},get$$(ce){var ne=this.get$(ce);return this.collection.database.getReactivityFactory().fromObservable(ne,this.getLatest().get(ce),this.collection.database)},populate(ce){var ne=(0,pe.nT)(this.collection.schema.jsonSchema,ce),W=this.get(ce);if(!W)return qe.$A;if(!ne)throw(0,ee.Br)("DOC5",{path:ce});if(!ne.ref)throw(0,ee.Br)("DOC6",{path:ce,schemaObj:ne});var ft=this.collection.database.collections[ne.ref];if(!ft)throw(0,ee.Br)("DOC7",{ref:ne.ref,path:ce,schemaObj:ne});return"array"===ne.type?ft.findByIds(W).exec().then(At=>{var Rt=At.values();return Array.from(Rt)}):ft.findOne(W).exec()},get(ce){return(0,$e.q)(this._propertyCache,ce,()=>{var ne=(0,lt.UU)(this._data,ce);if("object"!=typeof ne||null===ne||Array.isArray(ne))return Oe.h.deepFreezeWhenDevMode(ne);var W=this;return new Proxy((0,he.FD)(ne),{get(At,Rt){if("string"!=typeof Rt)return At[Rt];var yn=Rt.charAt(Rt.length-1);if(Rt.endsWith("$$")){var rn=Rt.slice(0,-2);return W.get$$((0,Ve.L$)(ce+"."+rn))}if("$"===yn){var pn=Rt.slice(0,-1);return W.get$((0,Ve.L$)(ce+"."+pn))}if("_"===yn){var Un=Rt.slice(0,-1);return W.populate((0,Ve.L$)(ce+"."+Un))}return W.get((0,Ve.L$)(ce+"."+Rt))}})})},toJSON(ce=!1){if(ce)return Oe.h.deepFreezeWhenDevMode(this._data);var ne=(0,he.FD)(this._data);return delete ne._rev,delete ne._attachments,delete ne._deleted,delete ne._meta,Oe.h.deepFreezeWhenDevMode(ne)},toMutableJSON(ce=!1){return(0,he.o8)(this.toJSON(ce))},update(ce){throw(0,Me.u)("update")},incrementalUpdate(ce){throw(0,Me.u)("update")},updateCRDT(ce){throw(0,Me.u)("crdt")},putAttachment(){throw(0,Me.u)("attachments")},getAttachment(){throw(0,Me.u)("attachments")},allAttachments(){throw(0,Me.u)("attachments")},get allAttachments$(){throw(0,Me.u)("attachments")},modify(ce,ne){var W=this;return(0,p.A)(function*(){var ft=W._data,At=yield(0,dt.Hl)(ce)(ft);return W._saveData(At,ft)})()},incrementalModify(ce,ne){return this.collection.incrementalWriteQueue.addWrite(this._data,(0,dt.Hl)(ce)).then(W=>this.collection._docCache.getCachedRxDocument(W))},patch(ce){var ne=this._data,W=(0,he.o8)(ne);return Object.entries(ce).forEach(([ft,At])=>{W[ft]=At}),this._saveData(W,ne)},incrementalPatch(ce){return this.incrementalModify(ne=>(Object.entries(ce).forEach(([W,ft])=>{ne[W]=ft}),ne))},_saveData(ce,ne){var W=this;return(0,p.A)(function*(){if(ce=(0,he.FD)(ce),W._data._deleted)throw(0,ee.Br)("DOC11",{id:W.primary,document:W});yield st(W.collection,ce,ne);var ft=[{previous:ne,document:ce}],At=yield W.collection.storageInstance.bulkWrite(ft,"rx-document-save-data");return(0,Be.WX)(W.collection,W.primary,ce,At.error[0]),yield W.collection._runHooks("post","save",ce,W),W.collection._docCache.getCachedRxDocument((0,Be.YN)(W.collection.schema.primaryPath,ft,At)[0])})()},remove(){var ce=this,ne=this.collection;if(this.deleted)return Promise.reject((0,ee.Br)("DOC13",{document:this,id:this.primary}));var ft,W=(0,he.FD)(this._data);return ne._runHooks("pre","remove",W,this).then((0,p.A)(function*(){W._deleted=!0;var At=[{previous:ce._data,document:W}],Rt=yield ne.storageInstance.bulkWrite(At,"rx-document-remove");return(0,Be.WX)(ne,ce.primary,W,Rt.error[0]),(0,Be.YN)(ce.collection.schema.primaryPath,At,Rt)[0]})).then(At=>(ft=At,this.collection._runHooks("post","remove",W,this))).then(()=>this.collection._docCache.getCachedRxDocument(ft))},incrementalRemove(){var ce=this;return this.incrementalModify(function(){var ne=(0,p.A)(function*(W){return yield ce.collection._runHooks("pre","remove",W,ce),W._deleted=!0,W});return function(W){return ne.apply(this,arguments)}}()).then(function(){var ne=(0,p.A)(function*(W){return yield ce.collection._runHooks("post","remove",W._data,W),W});return function(W){return ne.apply(this,arguments)}}())},destroy(){throw(0,ee.Br)("DOC14")}};function He(ce=Te){var ne=function(ft,At){this.collection=ft,this._data=At,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return ne.prototype=ce,ne}function Ie(ce,ne,W){var ft=new ce(ne,W);return(0,Ue.Xi)("createRxDocument",ft),ft}function st(ce,ne,W){return ne._meta=Object.assign({},W._meta,ne._meta),Oe.h.isDevMode()&&ce.schema.validateChange(W,ne),ce._runHooks("pre","save",ne,W)}},7650:(Bt,nt,M)=>{"use strict";M.d(nt,{sX:()=>pe,Br:()=>Ae,JX:()=>Oe,cg:()=>dt});var p=M(6126),ie=M(6719);function fe(Te){return(fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(He){return He.__proto__||Object.getPrototypeOf(He)})(Te)}var se=M(4394);function ae(){try{var Te=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ae=function(){return!!Te})()}function lt(Te){var He="function"==typeof Map?new Map:void 0;return lt=function(ct){if(null===ct||!function te(Te){try{return-1!==Function.toString.call(Te).indexOf("[native code]")}catch{return"function"==typeof Te}}(ct))return ct;if("function"!=typeof ct)throw new TypeError("Super expression must either be null or a function");if(void 0!==He){if(He.has(ct))return He.get(ct);He.set(ct,st)}function st(){return function de(Te,He,Ie){if(ae())return Reflect.construct.apply(null,arguments);var ct=[null];ct.push.apply(ct,He);var st=new(Te.bind.apply(Te,ct));return Ie&&(0,se.A)(st,Ie.prototype),st}(ct,arguments,fe(this).constructor)}return st.prototype=Object.create(ct.prototype,{constructor:{value:st,enumerable:!1,writable:!0,configurable:!0}}),(0,se.A)(st,ct)},lt(Te)}var qe=M(3896);function he(Te,He,Ie){return"RxError ("+He+"):\n"+Te+"\n"+function $e(Te){var He="";return 0===Object.keys(Te).length||(He+="Given parameters: {\n",He+=Object.keys(Te).map(Ie=>{var ct="[object Object]";try{ct="errors"===Ie?Te[Ie].map(st=>JSON.stringify(st,Object.getOwnPropertyNames(st))):JSON.stringify(Te[Ie],function(st,ce){return void 0===ce?null:ce},2)}catch{}return Ie+":"+ct}).join("\n"),He+="}"),He}(Ie)}var Ve=function(Te){function He(ct,st,ce={}){var ne,W=he(st,ct,ce);return(ne=Te.call(this,W)||this).code=ct,ne.message=W,ne.url=ee(ct),ne.parameters=ce,ne.rxdb=!0,ne}return(0,ie.A)(He,Te),He.prototype.toString=function(){return this.message},(0,p.A)(He,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(lt(Error)),Me=function(Te){function He(ct,st,ce={}){var ne,W=he(st,ct,ce);return(ne=Te.call(this,W)||this).code=ct,ne.message=W,ne.url=ee(ct),ne.parameters=ce,ne.rxdb=!0,ne}return(0,ie.A)(He,Te),He.prototype.toString=function(){return this.message},(0,p.A)(He,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(lt(TypeError));function ee(Te){return"https://rxdb.info/errors.html?console=errors#"+Te}function Ue(Te){return"\n You can find out more about this error here: "+ee(Te)+" "}function Ae(Te,He){return new Ve(Te,qe.h.tunnelErrorMessage(Te)+Ue(Te),He)}function Oe(Te,He){return new Me(Te,qe.h.tunnelErrorMessage(Te)+Ue(Te),He)}function pe(Te){return!(!Te||409!==Te.status)&&Te}var Be={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function dt(Te){return Ae("COL20",{name:Be[Te.status],document:Te.documentId,writeError:Te})}},5365:(Bt,nt,M)=>{"use strict";M.d(nt,{Lr:()=>Ca,Xw:()=>Jb,_V:()=>av,dx:()=>Ta});var p=M(467),ie=M(997),fe=M(1885),se=M(6434),te=M(7176);class ae extends Error{}const qe=Number.MAX_SAFE_INTEGER,$e=Number.MIN_SAFE_INTEGER,he=Symbol("missing"),Ve=Object.freeze(new Error("mingo: cycle detected while processing object/array")),Me=Object.getPrototypeOf([]),ee=Object.getPrototypeOf({}),Ae=/^\[object ([a-zA-Z0-9]+)\]$/;class Oe{}class pe{}const Be=y=>null===y?Oe:void 0===y?pe:y.constructor,dt=y=>{const b=function Hr(y){const b=new Set,C=w=>{const O=Be(w);if(st.has(O))return st.get(O)(w);const B=O===Object?"":O.name;if(X(w.toJSON))return`${B}(${JSON.stringify(w)})`;if(b.has(w))throw Ve;b.add(w);try{if(O===Array)return"["+w.map(C).join(",")+"]";if(O!==Object){const[Z,ve]=Wn(w);if(be(w))return`${B}${C([...w,Z])}`;w=Z}const Y=Object.keys(w);return Y.sort(),`${B}{`+Y.map(Z=>`${Z}:${C(w[Z])}`).join(",")+"}"}finally{b.delete(w)}};return C(y)}(y);let C=0,w=b.length;for(;w;)C=(C<<5)-C^b.charCodeAt(--w);return C>>>0},Te=new Set(["null","undefined","boolean","number","string","date","regexp"]),He=new Set([pe,Oe,Boolean,String,Number]),Ie=y=>y.toString(),ct=y=>`${Be(y).name}[${y.toString()}]`,st=new Map([[Number,Ie],[Boolean,Ie],[RegExp,Ie],[Function,Ie],[Symbol,Ie],[Date,y=>y.toISOString()],[String,JSON.stringify],[Oe,y=>"null"],[pe,y=>"undefined"],[Int8Array,ct],[Uint8Array,ct],[Uint8ClampedArray,ct],[Int16Array,ct],[Uint16Array,ct],[Int32Array,ct],[Uint32Array,ct],[Float32Array,ct],[Float64Array,ct]]);typeof BigInt<"u"&&st.set(BigInt,y=>"0x"+y.toString(16)),typeof BigInt64Array<"u"&&st.set(BigInt64Array,ct),typeof BigUint64Array<"u"&&st.set(BigUint64Array,ct);const ce={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},ne=(y,b)=>{y===he&&(y=void 0),b===he&&(b=void 0);const[C,w]=[y,b].map(O=>ce[Rt(O).toLowerCase()]);return C!==w?C-w:1===C||2===C||6===C?y<b?-1:y>b?1:0:wn(y,b)?0:y<b?-1:y>b?1:0};function W(y,b){if(!y)throw new ae(b)}const At=y=>{if(He.has(Be(y)))return y;const b=new Set,C=w=>{if(b.has(w))throw Ve;const O=Be(w);if(He.has(O))return w;try{if(be(w))return b.add(w),w.map(C);if(K(w)){b.add(w);const B={};for(const Y in w)B[Y]=C(w[Y]);return B}}finally{b.delete(w)}return O===Date||O===RegExp||(y=>{const b=Object.getPrototypeOf(Be(y));return b&&"TypedArray"===b.name})(w)?new O(w):w};return C(y)},Rt=y=>Ae.exec(Object.prototype.toString.call(y))[1],yn=y=>"boolean"==typeof y,rn=y=>"string"==typeof y,Un=y=>!isNaN(y)&&"number"==typeof y,be=Array.isArray,K=y=>{if(!y)return!1;const b=Object.getPrototypeOf(y);return(b===ee||null===b)&&"[object Object]"===Object.prototype.toString.call(y)},H=y=>y===Object(y),V=y=>y instanceof Date,q=y=>y instanceof RegExp,X=y=>"function"==typeof y,re=y=>null==y,oe=(y,b)=>y.includes(b),Je=(y,b)=>!oe(y,b),Ft=y=>re(y)||rn(y)&&!y||y instanceof Array&&0===y.length||K(y)&&0===Object.keys(y).length,Mt=y=>y===he,jt=y=>y instanceof Array?y:[y],on=(y,b)=>!!y&&Object.prototype.hasOwnProperty.call(y,b),en=(y,b)=>K(y)&&K(b)||be(y)&&be(b);function ln(y,b,C){if(C=C||{flatten:!1},Mt(y)||re(y))return b;if(Mt(b)||re(b))return y;if(!en(y,b)){if(C.skipValidation)return b||y;throw Error("mismatched types. must both be array or object")}if(C.skipValidation=!0,be(y)){const w=y,O=b;if(C.flatten){let B=0,Y=0;for(;B<w.length&&Y<O.length;)w[B]=ln(w[B++],O[Y++],C);for(;Y<O.length;)w.push(b[Y++])}else Cr(w,O)}else for(const w in b)y[w]=ln(y[w],b[w],C);return y}function $t(y,b=dt){const C=new Map;return y.forEach((w,O)=>{const B=_n(w,b);C.has(B)?C.get(B).some(Y=>wn(y[Y],w))||C.get(B).push(O):C.set(B,[O])}),C}function hn(y,b=dt){if(y.some(Z=>0==Z.length))return[];if(1===y.length)return Array.from(y);const C=function St(y,b,C=ne){if(Ft(y))return y;const w=new Array,O=new Array;for(let B=0;B<y.length;B++){const Y=y[B],Z=b(Y,B);re(Z)?O.push(Y):w.push([Z,Y])}return w.sort((B,Y)=>C(B[0],Y[0])),Cr(O,w.map(B=>B[1]))}(y.map((Z,ve)=>[ve,Z.length]),Z=>Z[1]),w=y[C[0][0]],O=$t(w,b),B=new Map,Y=new Array;return O.forEach((Z,ve)=>{const at=Z.map(Yt=>w[Yt]),xe=at.map(Yt=>0),wt=at.map(Yt=>[C[0][0],0]);let nn=!1;for(let Yt=1;Yt<y.length;Yt++){const[mn,jn]=C[Yt],Fn=y[mn];if(B.has(Yt)||B.set(Yt,$t(Fn)),B.get(Yt).has(ve)){const ur=B.get(Yt).get(ve).map(ui=>Fn[ui]);nn=at.map((ui,$o)=>ur.some((sr,co)=>{const uo=xe[$o];return wn(ui,sr)&&(xe[$o]++,mn<wt[$o][0]&&(wt[$o]=[mn,B.get(Yt).get(ve)[co]])),uo<xe[$o]})).some(Boolean)}if(!nn)return}nn&&Cr(Y,xe.map((Yt,mn)=>Yt===y.length-1?[at[mn],wt[mn]]:he).filter(Yt=>Yt!==he))}),Y.sort((Z,ve)=>{const[at,[xe,wt]]=Z,[nn,[Yt,mn]]=ve,jn=ne(xe,Yt);return 0!==jn?jn:ne(wt,mn)}).map(Z=>Z[0])}function tn(y,b=0){const C=new Array;return function w(O,B){for(let Y=0,Z=O.length;Y<Z;Y++)be(O[Y])&&(B>0||B<0)?w(O[Y],Math.max(-1,B-1)):C.push(O[Y])}(y,b),C}const Wn=y=>{let[b,C]=[Object.getPrototypeOf(y),Object.getOwnPropertyNames(y)],w=b;for(;!C.length&&b!==ee&&b!==Me;)w=b,C=Object.getOwnPropertyNames(b),b=Object.getPrototypeOf(b);const O={};return C.forEach(B=>O[B]=y[B]),[O,w]};function wn(y,b){const C=[[y,b]];for(;C.length>0;){if([y,b]=C.pop(),y===b)continue;const w=Be(y);if(w!==Be(b)||X(y))return!1;if(st.has(w)){const O=st.get(w);if(O(y)!==O(b))return!1}else{if(w!==Array&&w!==Object)return!1;{const O=Object.keys(y),B=Object.keys(b);if(O.length!==B.length||new Set(O.concat(B)).size!=O.length)return!1;for(const Y of O)C.push([y[Y],b[Y]])}}}return!C.length}function _n(y,b){return b=b||dt,re(y)?null:b(y).toString()}function Nr(y,b,C=dt){if(y.length<1)return new Map;const w=new Map,O=new Map;for(let B=0;B<y.length;B++){const Y=y[B],Z=b(Y,B),ve=_n(Z,C);if(null===ve)O.has(null)?O.get(null).push(Y):O.set(null,[Y]);else{const at=w.has(ve)?w.get(ve).find(xe=>wn(xe,Z)):null;re(at)?(O.set(Z,[Y]),w.has(ve)?w.get(ve).push(Z):w.set(ve,[Z])):O.get(at).push(Y)}}return O}const Dr=5e4;function Cr(y,...b){return y instanceof Array?b.reduce((C,w)=>{let O=Math.ceil(w.length/Dr),B=0;for(;O-- >0;)Array.prototype.push.apply(C,w.slice(B,B+Dr)),B+=Dr;return C},y):b.filter(H).reduce((C,w)=>(Object.assign(C,w),C),y)}function pr(y,b){return H(y)?y[b]:void 0}function ir(y,b,C){let w=0;const B=Te.has(Rt(y).toLowerCase())?y:function O(Y,Z){let ve=Y;for(let at=0;at<Z.length;at++){const xe=Z[at];if(null===/^\d+$/.exec(xe)&&ve instanceof Array){if(0===at&&w>0)break;w+=1;const nn=Z.slice(at);ve=ve.reduce((Yt,mn)=>{const jn=O(mn,nn);return void 0!==jn&&Yt.push(jn),Yt},[]);break}if(ve=pr(ve,xe),void 0===ve)break}return ve}(y,b.split("."));return B instanceof Array&&C?.unwrapArray?function Zt(y,b){if(b<1)return y;for(;b--&&1===y.length;)y=y[0];return y}(B,w):B}function go(y,b,C){const w=b.split("."),O=w[0],B=w.slice(1).join("."),Y=null!==/^\d+$/.exec(O),Z=w.length>1;let ve,at;if(y instanceof Array)if(Y)ve=pr(y,Number(O)),Z&&(ve=go(ve,B,C)),ve=[ve];else{ve=[];for(const xe of y)at=go(xe,b,C),C?.preserveMissing?(void 0===at&&(at=he),ve.push(at)):void 0!==at&&ve.push(at)}else{if(at=pr(y,O),Z&&(at=go(at,B,C)),void 0===at)return;ve=C?.preserveKeys?Object.assign({},y):{},ve[O]=at}return ve}function Qn(y){if(y instanceof Array)for(let b=y.length-1;b>=0;b--)y[b]===he?y.splice(b,1):Qn(y[b]);else if(K(y))for(const b in y)on(y,b)&&Qn(y[b])}const Pt=/^\d+$/;function $i(y,b,C,w){const O=b.split("."),B=O[0],Y=O.slice(1).join(".");if(1===O.length)(K(y)||be(y)&&Pt.test(B))&&C(y,B);else{w?.buildGraph&&re(y[B])&&(y[B]={});const Z=y[B];if(!Z)return;const ve=!!(O.length>1&&Pt.test(O[1]));Z instanceof Array&&w?.descendArray&&!ve?Z.forEach(at=>$i(at,Y,C,w)):$i(Z,Y,C,w)}}function $s(y,b,C){$i(y,b,(w,O)=>{w[O]=X(C)?C(w[O]):C},{buildGraph:!0})}function vo(y,b,C){$i(y,b,(w,O)=>{if(w instanceof Array){if(/^\d+$/.test(O))w.splice(parseInt(O),1);else if(C&&C.descendArray)for(const B of w)K(B)&&delete B[O]}else K(w)&&delete w[O]},C)}const fa=/^\$[a-zA-Z0-9_]+$/;function _o(y){return fa.test(y)}function zr(y){if(Te.has(Rt(y).toLowerCase()))return q(y)?{$regex:y}:{$eq:y};if(H(y)){if(!Object.keys(y).some(_o))return{$eq:y};if(on(y,"$regex")){const C=Object.assign({},y);return C.$regex=new RegExp(y.$regex,y.$options),delete C.$options,C}}return y}var pi=M(7650),Di=function(y){return y.CLONE_ALL="CLONE_ALL",y.CLONE_INPUT="CLONE_INPUT",y.CLONE_OUTPUT="CLONE_OUTPUT",y.CLONE_OFF="CLONE_OFF",y}(Di||{});class Hi{constructor(b,C,w,O=Date.now()){this._opts=b,this._root=C,this._local=w,this.timestamp=O,this.update(C,w)}static init(b,C,w){return b instanceof Hi?new Hi(b._opts,re(b.root)?C:b.root,Object.assign({},b.local,w)):new Hi(b,C,w)}update(b,C){var w;return this._root=b,this._local=C&&Object.assign({},C,{variables:Object.assign({},null===(w=this._local)||void 0===w?void 0:w.variables,C?.variables)}),this}getOptions(){return Object.freeze(Object.assign(Object.assign({},this._opts),{context:mr.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){var b;return null===(b=this._opts)||void 0===b?void 0:b.collation}get processingMode(){var b;return(null===(b=this._opts)||void 0===b?void 0:b.processingMode)||Di.CLONE_OFF}get useStrictMode(){var b;return null===(b=this._opts)||void 0===b?void 0:b.useStrictMode}get scriptEnabled(){var b;return null===(b=this._opts)||void 0===b?void 0:b.scriptEnabled}get useGlobalContext(){var b;return null===(b=this._opts)||void 0===b?void 0:b.useGlobalContext}get hashFunction(){var b;return null===(b=this._opts)||void 0===b?void 0:b.hashFunction}get collectionResolver(){var b;return null===(b=this._opts)||void 0===b?void 0:b.collectionResolver}get jsonSchemaValidator(){var b;return null===(b=this._opts)||void 0===b?void 0:b.jsonSchemaValidator}get variables(){var b;return null===(b=this._opts)||void 0===b?void 0:b.variables}get context(){var b;return null===(b=this._opts)||void 0===b?void 0:b.context}}function pa(y){return y instanceof Hi?y.getOptions():Object.freeze(Object.assign(Object.assign({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:Di.CLONE_OFF},y),{context:y?.context?mr.from(y?.context):mr.init({})}))}var gn=function(y){return y.ACCUMULATOR="accumulator",y.EXPRESSION="expression",y.PIPELINE="pipeline",y.PROJECTION="projection",y.QUERY="query",y.WINDOW="window",y}(gn||{});class mr{constructor(b){this.operators={[gn.ACCUMULATOR]:{},[gn.EXPRESSION]:{},[gn.PIPELINE]:{},[gn.PROJECTION]:{},[gn.QUERY]:{},[gn.WINDOW]:{}};for(const[C,w]of Object.entries(b))this.addOperators(C,w)}static init(b={}){return new mr(b)}static from(b){return new mr(b.operators)}addOperators(b,C){for(const[w,O]of Object.entries(C))this.getOperator(b,w)||(this.operators[b][w]=O);return this}addAccumulatorOps(b){return this.addOperators(gn.ACCUMULATOR,b)}addExpressionOps(b){return this.addOperators(gn.EXPRESSION,b)}addQueryOps(b){return this.addOperators(gn.QUERY,b)}addPipelineOps(b){return this.addOperators(gn.PIPELINE,b)}addProjectionOps(b){return this.addOperators(gn.PROJECTION,b)}addWindowOps(b){return this.addOperators(gn.WINDOW,b)}getOperator(b,C){return b in this.operators&&this.operators[b][C]||null}}const Jo=mr.init();function Hs(y,b){for(const[C,w]of Object.entries(b)){W(X(w)&&_o(C),`'${C}' is not a valid operator`);const O=yo(y,C,null);W(!O||w===O,`${C} already exists for '${y}' operators. Cannot change operator function once registered.`)}switch(y){case gn.ACCUMULATOR:Jo.addAccumulatorOps(b);break;case gn.EXPRESSION:Jo.addExpressionOps(b);break;case gn.PIPELINE:Jo.addPipelineOps(b);break;case gn.PROJECTION:Jo.addProjectionOps(b);break;case gn.QUERY:Jo.addQueryOps(b);break;case gn.WINDOW:Jo.addWindowOps(b)}}function yo(y,b,C){const{context:w,useGlobalContext:O}=C||{},B=w?w.getOperator(y,b):null;return!B&&O?Jo.getOperator(y,b):B}const ws={$$ROOT:(y,b,C)=>C.root,$$CURRENT:(y,b,C)=>y,$$REMOVE(y,b,C){},$$NOW:(y,b,C)=>new Date(C.timestamp)},Is={$$KEEP:(y,b,C)=>y,$$PRUNE(y,b,C){},$$DESCEND(y,b,C){if(!on(b,"$cond"))return y;let w;for(const[O,B]of Object.entries(y))if(H(B)){if(B instanceof Array){const Y=[];for(let Z of B)K(Z)&&(Z=Ds(Z,b,C.update(Z))),re(Z)||Y.push(Z);w=Y}else w=Ds(B,b,C.update(B));re(w)?delete y[O]:y[O]=w}return y}};function gr(y,b,C,w){var O;const B=Hi.init(w,y);if(_o(C=C||"")){const Y=yo(gn.EXPRESSION,C,w);if(Y)return Y(y,b,B);const Z=yo(gn.ACCUMULATOR,C,w);if(Z)return y instanceof Array||(y=gr(y,b,null,B),b=null),W(y instanceof Array,`'${C}' target must be an array.`),Z(y,b,B.update(null,B.local));throw new ae(`operator '${C}' is not registered`)}if(rn(b)&&b.length>0&&"$"===b[0]){if(on(Is,b))return b;let Y=B.root;const Z=b.split(".");if(on(ws,Z[0]))Y=ws[Z[0]](y,null,B),b=b.slice(Z[0].length+1);else if("$$"===Z[0].slice(0,2)){Y=Object.assign({},B.variables,{this:y},null===(O=B.local)||void 0===O?void 0:O.variables);const ve=Z[0].slice(2);W(on(Y,ve),`Use of undefined variable: ${ve}`),b=b.slice(2)}else b=b.slice(1);return""===b?Y:ir(Y,b)}if(be(b))return b.map(Y=>gr(y,Y,null,B));if(K(b)){const Y={};for(const[Z,ve]of Object.entries(b))if(Y[Z]=gr(y,ve,Z,B),[gn.EXPRESSION,gn.ACCUMULATOR].some(at=>!!yo(at,Z,w)))return W(1===Object.keys(b).length,"Invalid aggregation expression '"+JSON.stringify(b)+"'"),Y[Z];return Y}return b}function Ds(y,b,C){const w=gr(y,b,null,C);return on(Is,w)?Is[w](y,b,C):w}function Ci(y){return y instanceof Ss?y:new Ss(y)}function es(y,b){const C=y.slice(b+1);y.splice(b),Array.prototype.push.apply(y,C)}const Ts=new Error;var ii=function(y){return y[y.MAP=0]="MAP",y[y.FILTER=1]="FILTER",y[y.TAKE=2]="TAKE",y[y.DROP=3]="DROP",y}(ii||{});class Ss{constructor(b){let C;if(this.iteratees=[],this.yieldedValues=[],this.isDone=!1,b instanceof Function&&(b={next:b}),function Rc(y){return!!y&&"object"==typeof y&&y?.next instanceof Function}(b)){const w=b;C=()=>{const O=w.next();if(O.done)throw Ts;return O.value}}else if(b instanceof Array){const w=b,O=b.length;let B=0;C=()=>{if(B<O)return w[B++];throw Ts}}else if(!(b instanceof Function))throw new ae("Lazy must be initialized with an array, generator, or function.");this.getNext=function Mc(y,b,C){let w=!1,O=-1,B=0;return function(Y){try{e:for(;!w;){let Z=y();O++;let ve=-1;const at=b.length;let xe=!1;for(;++ve<at;){const wt=b[ve];switch(wt.action){case ii.MAP:Z=wt.func(Z,O);break;case ii.FILTER:if(!wt.func(Z,O))continue e;break;case ii.TAKE:--wt.count,wt.count||(xe=!0);break;case ii.DROP:--wt.count,wt.count||es(b,ve);continue e;default:break e}}if(w=xe,!Y)return{value:Z,done:!1};C[B++]=Z}}catch(Z){if(Z!==Ts)throw Z}return w=!0,{done:w}}}(C,this.iteratees,this.yieldedValues)}push(b,C){return"function"==typeof C?this.iteratees.push({action:b,func:C}):"number"==typeof C&&this.iteratees.push({action:b,count:C}),this}next(){return this.getNext()}map(b){return this.push(ii.MAP,b)}filter(b){return this.push(ii.FILTER,b)}take(b){return b>0?this.push(ii.TAKE,b):this}drop(b){return b>0?this.push(ii.DROP,b):this}transform(b){const C=this;let w;return Ci(()=>(w||(w=Ci(b(C.value()))),w.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(b){for(;;){const C=this.next();if(C.done)break;if(!1===b(C.value))return!1}return!0}reduce(b,C){let w=this.next();for(void 0===C&&!w.done&&(C=w.value,w=this.next());!w.done;)C=b(C,w.value),w=this.next();return C}size(){return this.reduce((b,C)=>++b,0)}[Symbol.iterator](){return this}}class yr{constructor(b,C){this.pipeline=b,this.options=pa(C)}stream(b){let C=Ci(b);const w=this.options.processingMode;(w==Di.CLONE_ALL||w==Di.CLONE_INPUT)&&C.map(At);const O=new Array;if(!Ft(this.pipeline))for(const B of this.pipeline){const Y=Object.keys(B),Z=Y[0],ve=yo(gn.PIPELINE,Z,this.options);W(1===Y.length&&!!ve,`invalid pipeline operator ${Z}`),O.push(Z),C=ve(C,B[Z],this.options)}return(w==Di.CLONE_OUTPUT||w==Di.CLONE_ALL&&hn([["$group","$unwind"],O]).length)&&C.map(At),C}run(b){return this.stream(b).value()}}class ts{constructor(b,C,w,O){this.source=b,this.predicate=C,this.projection=w,this.options=O,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result||(K(this.projection)&&this.operators.push({$project:this.projection}),this.result=Ci(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new yr(this.operators,this.options).stream(this.result))),this.result}fetchAll(){const b=Ci([...this.buffer]);return this.buffer=[],function Cs(...y){let b=0;return Ci(()=>{for(;b<y.length;){const C=y[b].next();if(!C.done)return C;b++}return{done:!0}})}(b,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(b){return this.operators.push({$skip:b}),this}limit(b){return this.operators.push({$limit:b}),this}sort(b){return this.operators.push({$sort:b}),this}collation(b){return this.options=Object.assign(Object.assign({},this.options),{collation:b}),this}next(){if(this.buffer.length>0)return this.buffer.pop();const b=this.fetch().next();return b.done?void 0:b.value}hasNext(){if(this.buffer.length>0)return!0;const b=this.fetch().next();return!b.done&&(this.buffer.push(b.value),!0)}map(b){return this.all().map(b)}forEach(b){this.all().forEach(b)}[Symbol.iterator](){return this.fetchAll()}}class Pi{constructor(b,C){this.condition=b,this.options=pa(C),this.compiled=[],this.compile()}compile(){W(K(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);const b={};for(const[C,w]of Object.entries(this.condition)){if("$where"===C)Object.assign(b,{field:C,expr:w});else if(oe(["$and","$or","$nor","$expr","$jsonSchema"],C))this.processOperator(C,C,w);else{W(!_o(C),`unknown top level operator: ${C}`);for(const[O,B]of Object.entries(zr(w)))this.processOperator(C,O,B)}b.field&&this.processOperator(b.field,b.field,b.expr)}}processOperator(b,C,w){const O=yo(gn.QUERY,C,this.options);if(!O)throw new ae(`unknown query operator ${C}`);const B=O(b,w,this.options);this.compiled.push(B)}test(b){for(let C=0,w=this.compiled.length;C<w;C++)if(!this.compiled[C](b))return!1;return!0}find(b,C){return new ts(b,w=>this.test(w),C||{},this.options)}remove(b){return b.reduce((C,w)=>(this.test(w)||C.push(w),C),[])}}const fl=(y,b,C)=>{if(Ft(b)||!K(b))return y;let w=ne;const O=C.collation;return K(O)&&rn(O.locale)&&(w=function ml(y){const b={sensitivity:pl[y.strength||3],caseFirst:"off"===y.caseFirst?"false":y.caseFirst||"false",numeric:y.numericOrdering||!1,ignorePunctuation:"shifted"===y.alternate};!0===(y.caseLevel||!1)&&("base"===b.sensitivity&&(b.sensitivity="case"),"accent"===b.sensitivity&&(b.sensitivity="variant"));const C=new Intl.Collator(y.locale,b);return(w,O)=>{if(!rn(w)||!rn(O))return ne(w,O);const B=C.compare(w,O);return B<0?-1:B>0?1:0}}(O)),y.transform(B=>{const Y=Object.keys(b);for(const Z of Y.reverse()){const ve=Nr(B,xe=>ir(xe,Z),C.hashFunction),at=Array.from(ve.keys()).sort(w);-1===b[Z]&&at.reverse(),at.reduce((xe,wt)=>Cr(xe,ve.get(wt)),B=[])}return B})},pl={1:"base",2:"accent",3:"variant"};function no(y){const b=(C,w,O)=>{const B={unwrapArray:!0},Y=Math.max(1,C.split(".").length-1);return Z=>{const ve=ir(Z,C,B);return y(ve,w,Object.assign(Object.assign({},O),{depth:Y}))}};return b.op="query",b}function Vc(y){return(b,C,w)=>{const O=gr(b,C,null,w);return y(...O)}}function Kf(y,b,C){if(wn(y,b)||re(y)&&re(b))return!0;if(y instanceof Array){const w=wn.bind(null,b);return y.some(w)||tn(y,C?.depth).some(w)}return!1}function or(y,b,C){return!Kf(y,b,C)}function Ys(y,b,C){return re(y)?b.some(w=>null===w):hn([jt(y),b],C?.hashFunction).length>0}function xr(y,b,C){return!Ys(y,b,C)}function Ea(y,b,C){return ge(y,b,(w,O)=>ne(w,O)<0)}function ro(y,b,C){return ge(y,b,(w,O)=>ne(w,O)<=0)}function Wd(y,b,C){return ge(y,b,(w,O)=>ne(w,O)>0)}function _l(y,b,C){return ge(y,b,(w,O)=>ne(w,O)>=0)}function In(y){return _o(y)&&-1===["$and","$or","$nor"].indexOf(y)}function _(y,b,C){if(be(y)&&!Ft(y)){let w=Y=>Y,O=b;Object.keys(b).every(In)&&(O={temp:b},w=Y=>({temp:Y}));const B=new Pi(O,C);for(let Y=0,Z=y.length;Y<Z;Y++)if(B.test(w(y[Y])))return!0}return!1}const I=y=>null===y,A=y=>Un(y)&&y>=-2147483648&&y<=2147483647&&-1===y.toString().indexOf("."),N=y=>Un(y)&&y>=$e&&y<=qe&&-1===y.toString().indexOf("."),L={array:be,bool:yn,boolean:yn,date:V,decimal:Un,double:Un,int:A,long:N,number:Un,null:I,object:K,regex:q,regexp:q,string:rn,undefined:re,function:y=>{throw new ae("unsupported type key `function`.")},1:Un,2:rn,3:K,4:be,6:re,8:yn,9:V,10:I,11:q,16:A,18:N,19:Un};function $(y,b,C){const w=L[b];return!!w&&w(y)}function ge(y,b,C){return jt(y).some(w=>Rt(w)===Rt(b)&&C(w,b))}Vc(xr);const je=(y,b)=>(C,w,O)=>{W(be(w),`${y}: expression must be an array.`);const B=gr(C,w,null,O);return B.some(re)?null:(W(B.every(Un),`${y}: expression must evalue to array of numbers.`),b(B))};je("$bitAnd",y=>y.reduce((b,C)=>b&C,-1)),je("$bitOr",y=>y.reduce((b,C)=>b|C,0)),je("$bitXor",y=>y.reduce((b,C)=>b^C,0)),Vc(Kf),Vc(Wd),Vc(_l),Vc(Ea),Vc(ro),Vc(or);const Hg=(y,b)=>{const C={};return y.split("").forEach((w,O)=>C[w]=b*(O+1)),C};Object.assign(Object.assign(Object.assign({},Hg("ABCDEFGHIKLM",1)),Hg("NOPQRSTUVWXY",-1)),{Z:0});const Zg={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function jo(y,b=Zg){const C=Object.assign({},Zg,b),w=new Set(Object.keys(C));return(O,B,Y)=>{const Z=gr(O,B,null,Y);if(w.has(`${Z}`)){const ve=C[`${Z}`];if(ve instanceof Error)throw new ae(`cannot apply $${y.name} to -inf, value must in (-inf,inf)`);return ve}return y(Z)}}jo(Math.acos,{Infinity:1/0,0:new Error}),jo(Math.acosh,{Infinity:1/0,0:new Error}),jo(Math.asin),jo(Math.asinh,{Infinity:1/0,"-Infinity":-1/0}),jo(Math.atan),jo(Math.atanh,{1:1/0,"-1":-1/0}),jo(Math.cos),jo(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const Xb=Math.PI/180,Yd=(jo(y=>y*Xb,{Infinity:1/0,"-Infinity":1/0}),180/Math.PI);jo(y=>y*Yd,{Infinity:1/0,"-Infinity":-1/0}),jo(Math.sin),jo(Math.sinh,{"-Infinity":-1/0,Infinity:1/0}),jo(Math.tan),Error;const tv=(y,b,C)=>{if(Ft(b))return y;let w=Object.keys(b),O=!1;nc(b,C);const B=C.idKey;if(oe(w,B)){const Z=b[B];(0===Z||!1===Z)&&(w=w.filter(Je.bind(null,[B])),O=0==w.length)}else w.push(B);const Y=Hi.init(C);return y.map(Z=>Jd(Z,b,Y.update(Z),w,O))};function Jd(y,b,C,w,O){let B={},Y=!1,Z=!1;const ve=[];O&&ve.push(C.idKey);for(const at of w){let xe;const wt=b[at];if(at!==C.idKey&&oe([0,!1],wt)&&(Z=!0),at===C.idKey&&Ft(wt))xe=y[at];else if(rn(wt))xe=gr(y,wt,at,C);else if(!oe([1,!0],wt))if(wt instanceof Array)xe=wt.map(Yt=>{const mn=gr(y,Yt,null,C);return re(mn)?null:mn});else{if(!K(wt)){ve.push(at);continue}{const Yt=wt,mn=Object.keys(wt),jn=1==mn.length?mn[0]:"",Fn=yo(gn.PROJECTION,jn,C);if(Fn)"$slice"===jn?jt(Yt[jn]).every(Un)?(xe=Fn(y,Yt[jn],at,C),Y=!0):xe=gr(y,Yt,at,C):xe=Fn(y,Yt[jn],at,C);else if(_o(jn))xe=gr(y,Yt[jn],jn,C);else if(on(y,at)){nc(Yt,C);let ur=y[at];ur instanceof Array?xe=ur.map(ui=>Jd(ui,Yt,C,mn,!1)):(ur=K(ur)?ur:y,xe=Jd(ur,Yt,C,mn,!1))}else xe=gr(y,wt,null,C)}}const nn=go(y,at,{preserveMissing:!0});void 0!==nn&&ln(B,nn,{flatten:!0}),Je([0,1,!1,!0],wt)&&(void 0===xe?vo(B,at,{descendArray:!0}):$s(B,at,xe))}if(Qn(B),(Y||Z||O)&&(B=Cr({},y,B),ve.length>0))for(const at of ve)vo(B,at,{descendArray:!0});return B}function nc(y,b){const C=[!1,!1];for(const[w,O]of Object.entries(y)){if(w===b?.idKey)return;0===O||!1===O?C[0]=!0:(1===O||!0===O)&&(C[1]=!0),W(!(C[0]&&C[1]),"Projection cannot have a mix of inclusion and exclusion.")}}const ai=(y,b,C)=>{W(be(b),"Invalid expression: $and expects value to be an Array.");const w=b.map(O=>new Pi(O,C));return O=>w.every(B=>B.test(O))},iv=(y,b,C)=>{W(be(b),"Invalid expression. $or expects value to be an Array");const w=b.map(O=>new Pi(O,C));return O=>w.some(B=>B.test(O))},xu=(y,b,C)=>{W(be(b),"Invalid expression. $nor expects value to be an array.");const w=iv("$or",b,C);return O=>!w(O)},ov=(y,b,C)=>{const w={};w[y]=zr(b);const O=new Pi(w,C);return B=>!O.test(B)},Uc=no(Kf),eh=no(Wd),th=no(_l),Da=no(Ys),Ru=no(Ea),sv=no(ro),$c=no(or),cs=no(xr),ki=no(function wu(y,b,C){return jt(y).some(w=>2===b.length&&w%b[0]===b[1])}),np=no(function Vo(y,b,C){const w=jt(y),O=B=>rn(B)&&((y,b=!0)=>!!y||b&&""===y)(b.exec(B),C?.useStrictMode);return w.some(O)||tn(w,1).some(O)});no(function wa(y,b,C){if(!(be(y)&&be(b)&&y.length&&b.length))return!1;let w=!0;for(const O of b){if(!w)break;w=K(O)&&oe(Object.keys(O),"$elemMatch")?_(y,O.$elemMatch,C):O instanceof RegExp?y.some(B=>"string"==typeof B&&O.test(B)):y.some(B=>wn(O,B))}return w});const Wi=no(_),Xr=no(function ss(y,b,C){return Array.isArray(y)&&y.length===b}),El=no(function Bc(y,b,C){return(!1===b||0===b)&&void 0===y||(!0===b||1===b)&&void 0!==y}),Er=no(function J(y,b,C){return Array.isArray(b)?b.findIndex(w=>$(y,w))>=0:$(y,b)});var _i=!1;function av(y,b){var C=(0,fe.xQ)(y.primaryKey);b=(0,se.FD)(b);var w=(0,se.o8)(b);if("number"!=typeof w.skip&&(w.skip=0),w.selector?(w.selector=w.selector,Object.entries(w.selector).forEach(([at,xe])=>{("object"!=typeof xe||null===xe)&&(w.selector[at]={$eq:xe})})):w.selector={},w.index){var O=(0,te.$r)(w.index);O.includes(C)||O.push(C),w.index=O}if(w.sort)w.sort.find(at=>(0,se.Ln)(at)===C)||(w.sort=w.sort.slice(0),w.sort.push({[C]:"asc"}));else if(w.index)w.sort=w.index.map(at=>({[at]:"asc"}));else{if(y.indexes){var B=new Set;Object.entries(w.selector).forEach(([at,xe])=>{("object"!=typeof xe||null===xe||Object.keys(xe).find(nn=>ie.Cf.has(nn)))&&B.add(at)});var Z,Y=-1;y.indexes.forEach(at=>{var xe=(0,te.k_)(at)?at:[at],wt=xe.findIndex(nn=>!B.has(nn));wt>0&&wt>Y&&(Y=wt,Z=xe)}),Z&&(w.sort=Z.map(at=>({[at]:"asc"})))}w.sort||(w.sort=[{[C]:"asc"}])}return w}function Jb(y,b){if(!b.sort)throw(0,pi.Br)("SNH",{query:b});var C=[];return b.sort.forEach(O=>{var B=Object.keys(O)[0],Y=Object.values(O)[0];C.push({key:B,direction:Y,getValueFn:(0,se.SQ)(B)})}),(O,B)=>{for(var Y=0;Y<C.length;++Y){var Z=C[Y],ve=Z.getValueFn(O),at=Z.getValueFn(B);if(ve!==at)return"asc"===Z.direction?ne(ve,at):ne(at,ve)}}}function Ca(y,b){if(!b.sort)throw(0,pi.Br)("SNH",{query:b});var C=function nh(y){return _i||(Hs(gn.PIPELINE,{$sort:fl,$project:tv}),Hs(gn.QUERY,{$and:ai,$eq:Uc,$elemMatch:Wi,$exists:El,$gt:eh,$gte:th,$in:Da,$lt:Ru,$lte:sv,$ne:$c,$nin:cs,$mod:ki,$nor:xu,$not:ov,$or:iv,$regex:np,$size:Xr,$type:Er}),_i=!0),new Pi(y)}(b.selector);return O=>C.test(O)}function Ta(y,b){return On.apply(this,arguments)}function On(){return(On=(0,p.A)(function*(y,b){var C=yield y.exec();return C?Array.isArray(C)?Promise.all(C.map(O=>b(O))):yield b(C):null})).apply(this,arguments)}},5672:(Bt,nt,M)=>{"use strict";M.d(nt,{Mh:()=>ko,XX:()=>Ga,nd:()=>Bg,Ib:()=>bo});var p=M(467),ie=M(6126),fe=M(4412),se=M(4843),te=M(7786),ae=M(5964),de=M(9172),lt=M(1397),qe=M(6354),$e=M(6496),he=M(3294),Ve=M(4552),Me=M(5520),ee=M(8663),Ue=M(6434),Ae=M(203),Oe=M(2060),pe=M(7176),Be=M(7650),dt=M(2284);const Ie=U=>{U.previousResults.unshift(U.changeEvent.doc),U.keyDocumentMap&&U.keyDocumentMap.set(U.changeEvent.id,U.changeEvent.doc)},ct=U=>{U.previousResults.push(U.changeEvent.doc),U.keyDocumentMap&&U.keyDocumentMap.set(U.changeEvent.id,U.changeEvent.doc)},st=U=>{const Re=U.previousResults.shift();U.keyDocumentMap&&Re&&U.keyDocumentMap.delete(Re[U.queryParams.primaryKey])},ce=U=>{const Re=U.previousResults.pop();U.keyDocumentMap&&Re&&U.keyDocumentMap.delete(Re[U.queryParams.primaryKey])},Rt=U=>{U.keyDocumentMap&&U.keyDocumentMap.delete(U.changeEvent.id);const Re=U.queryParams.primaryKey,Ye=U.previousResults;for(let ht=0;ht<Ye.length;ht++)if(Ye[ht][Re]===U.changeEvent.id){Ye.splice(ht,1);break}},pn=U=>{const Re=U.changeEvent.id,Ye=U.changeEvent.doc;if(U.keyDocumentMap){if(U.keyDocumentMap.has(Re))return;U.keyDocumentMap.set(Re,Ye)}else if(U.previousResults.find(kt=>kt[U.queryParams.primaryKey]===Re))return;!function Te(U,Re,Ye,ht){var Yn,kt=U.length,Sn=kt-1,Bn=0;if(0===kt)return U.push(Re),0;for(;ht<=Sn;)Ye(Yn=U[Bn=ht+(Sn-ht>>1)],Re)<=0?ht=Bn+1:Sn=Bn-1;Ye(Yn,Re)<=0&&Bn++,U.splice(Bn,0,Re)}(U.previousResults,Ye,U.queryParams.sortComparator,0)},be=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],K={doNothing:U=>{},insertFirst:Ie,insertLast:ct,removeFirstItem:st,removeLastItem:ce,removeFirstInsertLast:U=>{st(U),ct(U)},removeLastInsertFirst:U=>{ce(U),Ie(U)},removeFirstInsertFirst:U=>{st(U),Ie(U)},removeLastInsertLast:U=>{ce(U),ct(U)},removeExisting:Rt,replaceExisting:U=>{const Re=U.changeEvent.doc,Ye=U.queryParams.primaryKey,ht=U.previousResults;for(let kt=0;kt<ht.length;kt++)if(ht[kt][Ye]===U.changeEvent.id){ht[kt]=Re,U.keyDocumentMap&&U.keyDocumentMap.set(U.changeEvent.id,Re);break}},alwaysWrong:U=>{const Re={_id:"wrongHuman"+(new Date).getTime()};U.previousResults.length=0,U.previousResults.push(Re),U.keyDocumentMap&&(U.keyDocumentMap.clear(),U.keyDocumentMap.set(Re._id,Re))},insertAtSortPosition:pn,removeExistingAndInsertAtSortPosition:U=>{Rt(U),pn(U)},runFullQueryAgain:U=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},unknownAction:U=>{throw new Error("Action unknownAction should never be called")}};function V(U){return U?"1":"0"}function Wn(U,Re){const Ye=[];for(let ht=0,kt=U.length;ht<kt;ht+=Re)Ye.push(U.substring(ht,ht+Re));return Ye}!function re(U=6){let Re="";for(let kt=0;kt<U;kt++)Re+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))}(4);const wn=40;function Hr(U){return U.charCodeAt(0)-wn}function mo(U){return U[U.length-1]}function pi(U,Re,Ye){if(Array.isArray(Re)&&(Re=Re.join(".")),!function ei(U){const Re=typeof U;return null!==U&&("object"===Re||"function"===Re)}(U)||"string"!=typeof Re)return void 0===Ye?U:Ye;const ht=Re.split(".");if(0===ht.length)return Ye;for(let kt=0;kt<ht.length;kt++){const Sn=ht[kt];if(null==(U=Di(U,Sn)?kt===ht.length-1?void 0:null:U[Sn])){if(kt!==ht.length-1)return Ye;break}}return void 0===U?Ye:U}function Di(U,Re){if("number"!=typeof Re&&Array.isArray(U)){const Ye=Number.parseInt(Re,10);return Number.isInteger(Ye)&&U[Ye]===U[Re]}return!1}const Hi=U=>!!U.queryParams.limit,ts={0:U=>"INSERT"===U.changeEvent.operation,1:U=>"UPDATE"===U.changeEvent.operation,2:U=>"DELETE"===U.changeEvent.operation,3:Hi,4:U=>1===U.queryParams.limit,5:U=>!!(U.queryParams.skip&&U.queryParams.skip>0),6:U=>0===U.previousResults.length,7:U=>Hi(U)&&U.previousResults.length>=U.queryParams.limit,8:U=>{const Re=U.previousResults[0];return!(!Re||Re[U.queryParams.primaryKey]!==U.changeEvent.id)},9:U=>{const Re=mo(U.previousResults);return!(!Re||Re[U.queryParams.primaryKey]!==U.changeEvent.id)},10:U=>{const Re=U.queryParams.sortFields,Ye=U.changeEvent.previous,ht=U.changeEvent.doc;if(!ht)return!1;if(!Ye)return!0;for(let kt=0;kt<Re.length;kt++){const Sn=Re[kt];if(pi(Ye,Sn)!==pi(ht,Sn))return!0}return!1},11:U=>{const Re=U.changeEvent.id;if(U.keyDocumentMap)return U.keyDocumentMap.has(Re);{const Ye=U.queryParams.primaryKey,ht=U.previousResults;for(let kt=0;kt<ht.length;kt++)if(ht[kt][Ye]===Re)return!0;return!1}},12:U=>{const Re=U.changeEvent.previous;if(!Re)return!1;const Ye=U.previousResults[0];return!!Ye&&(Ye[U.queryParams.primaryKey]===U.changeEvent.id||U.queryParams.sortComparator(Re,Ye)<0)},13:U=>{const Re=U.changeEvent.previous;if(!Re)return!1;const Ye=mo(U.previousResults);return!!Ye&&(Ye[U.queryParams.primaryKey]===U.changeEvent.id||U.queryParams.sortComparator(Re,Ye)>0)},14:U=>{const Re=U.changeEvent.doc;if(!Re)return!1;const Ye=U.previousResults[0];return!!Ye&&(Ye[U.queryParams.primaryKey]===U.changeEvent.id||U.queryParams.sortComparator(Re,Ye)<0)},15:U=>{const Re=U.changeEvent.doc;if(!Re)return!1;const Ye=mo(U.previousResults);return!!Ye&&(Ye[U.queryParams.primaryKey]===U.changeEvent.id||U.queryParams.sortComparator(Re,Ye)>0)},16:U=>{const Re=U.changeEvent.previous;return!!Re&&U.queryParams.queryMatcher(Re)},17:U=>{const Re=U.changeEvent.doc;return!!Re&&U.queryParams.queryMatcher(Re)}};let ma;const ga=U=>function Cr(U,Re,Ye){let ht=U,kt=U.l;for(;;){if(ht=ht[V(Re[kt](Ye))],"number"==typeof ht||"string"==typeof ht)return ht;kt=ht.l}}(function ul(){return ma||(ma=function Dr(U){const Re=new Map,ht=2+2*parseInt(U.charAt(0)+U.charAt(1),10),Sn=Wn(U.substring(2,ht),2);for(let wo=0;wo<Sn.length;wo++){const Qs=Sn[wo],Xs=Qs.charAt(0),Io=Hr(Qs.charAt(1));Re.set(Xs,Io)}const Yn=Wn(U.substring(ht,U.length-3),4);for(let wo=0;wo<Yn.length;wo++){const Qs=Yn[wo],Xs=Qs.charAt(0),Io=Qs.charAt(1),Rs=Qs.charAt(2),ya=Hr(Qs.charAt(3));if(!Re.has(Io))throw new Error("missing node with id "+Io);if(!Re.has(Rs))throw new Error("missing node with id "+Rs);const dl=Re.get(Io),hl=Re.get(Rs);Re.set(Xs,{l:ya,0:dl,1:hl})}const _r=U.slice(-3),kr=_r.charAt(0),qr=_r.charAt(1);return{l:Hr(_r.charAt(2)),0:Re.get(kr),1:Re.get(qr)}}("14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7fae9\xa1bf9\xa2bq9\xa3cg9\xa4ck9\xa5cn9\xa6nd9\xa7np9\xa8nq9\xa9nf9\xaang9\xabnm9\xacnk9\xadmr9\xaems9\xafmt9\xb0mj9\xb1mk9\xb2ml9\xb3mn9\xb4mc8\xb5\xb3{8\xb6\xaf}8\xb7\xb0\xa48\xb8\xb3\xa78\xb9mn8\xba\xb3\xab8\xbb\xb3m8\xbcm\xb44\xbdz\xb24\xbe\xb3w4\xbfz\xb54\xc0\xaf\xb64\xc1\xb0\xb74\xc2\xb3\xba4\xc3\xb3\xb84\xc4m\xb94\xc5v\xa47\xc6yn7\xc7\xc0\xc17\xc8~\x7f7\xc9\xa5\xa47\xca\xc3\xc47\xcb\xa8n7\xcc\xba\xb97\xcd\xad\xb07\xce\xaem7\xcf\xaf\xb07\xd0\xb1m7\xd1\xb3m7\xd2\xbcm5\xd3\xc4m5\xd4\xb9m5\xd5\xbd\xb05\xd6\xbem5\xd7\xbf\xb05\xd8\xc7\xcf5\xd9\xc2m5\xda\xca\xd15\xdb\xb1m5\xdc\xbam5\xdd\xcc\xd15\xde\xd5\xcd2\xdf|\x7f2\xe0\xa1u2\xe1\xa3\xc52\xe2\xd6\xce2\xe3\xa6\xc62\xe4\xa9x2\xe5\xaa\xc62\xe6\xd7\xd82\xe7|\xc82\xe8\xa1\xa22\xe9\xa3\xc92\xea\xa4\xa52\xeb\xd9\xda2\xec\xa6\xcb2\xed\xa9n2\xee\xaan2\xef\xdb\xd02\xf0\xdc\xdd2\xf1\xacn2\xf2\xd2\xd3/\xf3an/\xf4bn/\xf5cn/\xf6\xde\xe2/\xf7\xdf\xe3/\xf8\xe0\xe4/\xf9\xe1\xe5/\xfa\xe6\xeb/\xfb\xe7\xec/\xfc\xe8\xed/\xfd\xe9\xee/\xfe\xcd\xce/\xff\xcf\xd1/\u0100\xf2\xd4,\u0101cn,\u0102\xf6\xef,\u0103\xa4\xf1,\u0104\xfa\xf0,\u0105\xea\xf1,\u0106\xfe\xd0,\u0107\xff\xd1,\u0108ac0\u0109bc0\u010a\xf3\xf50\u010b\xf4\u01010\u010c\xdf\xe10\u010d\xe0\xa40\u010e\xe7\xe90\u010f\xe8\xea0\u0110\xf7\xf90\u0111\xf8\u01030\u0112\xfb\xfd0\u0113\xfc\u01050\u0114m\xd2-\u0115m\u0100-\u0116\xde\xe6-\u0117\u010c\u010e-\u0118\u010d\u010f-\u0119\u0102\u0104-\u011a\u0110\u0112-\u011b\u0111\u0113-\u011c\xb2\xbb-\u011d\xcd\xcf-\u011e\u0106\u0107-\u011f\xb2\xb3-\u0120\u0114\u01083\u0121\u0115\u010a3\u0122\u0116\u01173\u0123\u0119\u011a3\u0124\u0122\u011d(\u0125\u011c\u011f(\u0126\u0123\u011e(\u0127\u0120\u0121+\u0128\u0109\u010b+\u0129\u0124\u0126+\u012a\u0118\u011b+\u012b\u0127\u01281\u012c\u0129\u012a1\u012d\u012c\u012b*\u012e\u0125m*\u012d\u012e.")),ma}(),ts,U);var Ka=M(312),Oc=M(9403),zi=M(5365);function vr(U,Re){return Re.sort&&0!==Re.sort.length?Re.sort.map(Ye=>Object.keys(Ye)[0]):[U]}var Ws=new WeakMap;function va(U,Re){if(!U.collection.database.eventReduce)return{runFullQueryAgain:!0};var Ye=function Pc(U){return(0,Oc.q)(Ws,U,()=>{var Re=U.collection,Ye=(0,zi._V)(Re.storageInstance.schema,(0,Ue.o8)(U.mangoQuery)),ht=Re.schema.primaryPath,kt=(0,zi.Xw)(Re.schema.jsonSchema,Ye),Bn=(0,zi.Lr)(Re.schema.jsonSchema,Ye);return{primaryKey:U.collection.schema.primaryPath,skip:Ye.skip,limit:Ye.limit,sortFields:vr(ht,Ye),sortComparator:(kr,qr)=>{var oi={docA:kr,docB:qr,rxQuery:U};return kt(oi.docA,oi.docB)},queryMatcher:kr=>Bn({doc:kr,rxQuery:U}.doc)}})}(U),ht=(0,ee.ZN)(U._result).docsData.slice(0),kt=(0,ee.ZN)(U._result).docsDataMap,Sn=!1,Yn=Re.map(_r=>(0,Ka._r)(_r)).filter(pe.S7).find(_r=>{var qr=function Ks(U){const Re=ga(U);return be[Re]}({queryParams:Ye,changeEvent:_r,previousResults:ht,keyDocumentMap:kt});return"runFullQueryAgain"===qr||("doNothing"!==qr?(Sn=!0,function Kn(U,Re,Ye,ht,kt){(0,K[U])({queryParams:Re,changeEvent:Ye,previousResults:ht,keyDocumentMap:kt})}(qr,Ye,_r,ht,kt),!1):void 0)});return Yn?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:Sn,newResults:ht}}var vu=M(6259),Gs=M(9825),xs=function(){return(0,ie.A)(function U(Re,Ye,ht){this.time=(0,Ve.t)(),this.collection=Re,this.count=ht,this.documents=(0,Gs.X)(this.collection._docCache,Ye)},[{key:"docsData",get:function(){return(0,Ue.Ns)(this,"docsData",this.documents.map(Re=>Re._data))}},{key:"docsDataMap",get:function(){var Re=new Map;return this.documents.forEach(Ye=>{Re.set(Ye.primary,Ye._data)}),(0,Ue.Ns)(this,"docsDataMap",Re)}},{key:"docsMap",get:function(){for(var Re=new Map,Ye=this.documents,ht=0;ht<Ye.length;ht++){var kt=Ye[ht];Re.set(kt.primary,kt)}return(0,Ue.Ns)(this,"docsMap",Re)}}])}(),_a=M(997),_u=0,ko=function(){function U(Ye,ht,kt,Sn={}){this.id=++_u,this._execOverDatabaseCount=0,this._creationTime=(0,Ve.t)(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new fe.t(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=Me.Dr,this.op=Ye,this.mangoQuery=ht,this.collection=kt,this.other=Sn,ht||(this.mangoQuery={selector:{}}),this.isFindOneByIdQuery=function qa(U,Re){if(!Re.skip&&Re.selector&&1===Object.keys(Re.selector).length&&Re.selector[U]){var Ye=Re.selector[U];if("string"==typeof Ye)return Ye;if(1===Object.keys(Ye).length&&"string"==typeof Ye.$eq||1===Object.keys(Ye).length&&Array.isArray(Ye.$eq)&&!Ye.$eq.find(ht=>"string"!=typeof ht))return Ye.$eq}return!1}(this.collection.schema.primaryPath,ht)}var Re=U.prototype;return Re._setResultData=function(ht){if("number"!=typeof ht){ht instanceof Map&&(ht=Array.from(ht.values()));var kt=new xs(this.collection,ht,ht.length);this._result=kt}else this._result=new xs(this.collection,[],ht)},Re._execOverDatabase=function(){var Ye=(0,p.A)(function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=(0,Ve.t)(),"count"===this.op){var kt=this.getPreparedQuery(),Sn=yield this.collection.storageInstance.count(kt);if("slow"===Sn.mode&&!this.collection.database.allowSlowCount)throw(0,Be.Br)("QU14",{collection:this.collection,queryObj:this.mangoQuery});return Sn.count}if("findByIds"===this.op){var Bn=(0,ee.ZN)(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,Yn=new Map,_r=[];return Bn.forEach(oi=>{var Fo=this.collection._docCache.getLatestDocumentDataIfExists(oi);if(Fo){if(!Fo._deleted){var qs=this.collection._docCache.getCachedRxDocument(Fo);Yn.set(oi,qs)}}else _r.push(oi)}),_r.length>0&&(yield this.collection.storageInstance.findDocumentsById(_r,!1)).forEach(oi=>{var Fo=this.collection._docCache.getCachedRxDocument(oi);Yn.set(Fo.primary,Fo)}),Yn}var qr=function Ji(U){return Eo.apply(this,arguments)}(this);return qr.then(oi=>(this._lastExecEnd=(0,Ve.t)(),oi))});return function ht(){return Ye.apply(this,arguments)}}(),Re.exec=function(ht){if(ht&&"findOne"!==this.op)throw(0,Be.Br)("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return Nc(this).then(()=>(0,se._)(this.$)).then(kt=>{if(!kt&&ht)throw(0,Be.Br)("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return kt})},Re.toString=function(){var ht=(0,Ue.mf)({op:this.op,query:this.mangoQuery,other:this.other},!0),kt=JSON.stringify(ht);return this.toString=()=>kt,kt},Re.getPreparedQuery=function(){var ht={rxQuery:this,mangoQuery:(0,zi._V)(this.collection.schema.jsonSchema,this.mangoQuery)};ht.mangoQuery.selector._deleted={$eq:!1},ht.mangoQuery.index&&ht.mangoQuery.index.unshift("_deleted"),(0,dt.Xi)("prePrepareQuery",ht);var kt=bo(this.collection.schema.jsonSchema,ht.mangoQuery);return this.getPreparedQuery=()=>kt,kt},Re.doesDocumentDataMatch=function(ht){return!ht._deleted&&this.queryMatcher(ht)},Re.remove=function(){return this.exec().then(ht=>Array.isArray(ht)?Promise.all(ht.map(kt=>kt.remove())):ht.remove())},Re.incrementalRemove=function(){return(0,zi.dx)(this.asRxQuery,ht=>ht.incrementalRemove())},Re.update=function(ht){throw(0,Ae.u)("update")},Re.patch=function(ht){return(0,zi.dx)(this.asRxQuery,kt=>kt.patch(ht))},Re.incrementalPatch=function(ht){return(0,zi.dx)(this.asRxQuery,kt=>kt.incrementalPatch(ht))},Re.modify=function(ht){return(0,zi.dx)(this.asRxQuery,kt=>kt.modify(ht))},Re.incrementalModify=function(ht){return(0,zi.dx)(this.asRxQuery,kt=>kt.incrementalModify(ht))},Re.where=function(ht){throw(0,Ae.u)("query-builder")},Re.sort=function(ht){throw(0,Ae.u)("query-builder")},Re.skip=function(ht){throw(0,Ae.u)("query-builder")},Re.limit=function(ht){throw(0,Ae.u)("query-builder")},(0,ie.A)(U,[{key:"$",get:function(){if(!this._$){var Ye=this.collection.$.pipe((0,ae.p)(ht=>!ht.isLocal),(0,de.Z)(null),(0,lt.Z)(()=>Nc(this)),(0,qe.T)(()=>this._result),(0,$e.t)(ee.bz),(0,he.F)((ht,kt)=>!(!ht||ht.time!==(0,ee.ZN)(kt).time)),(0,ae.p)(ht=>!!ht),(0,qe.T)(ht=>{var kt=(0,ee.ZN)(ht);return"count"===this.op?kt.count:"findOne"===this.op?0===kt.documents.length?null:kt.documents[0]:"findByIds"===this.op?kt.docsMap:kt.documents.slice(0)}));this._$=(0,te.h)(Ye,this.refCount$.pipe((0,ae.p)(()=>!1)))}return this._$}},{key:"$$",get:function(){return this.collection.database.getReactivityFactory().fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var Ye=this.collection.schema.jsonSchema,ht=(0,zi._V)(this.collection.schema.jsonSchema,this.mangoQuery);return(0,Ue.Ns)(this,"queryMatcher",(0,zi.Lr)(Ye,ht))}},{key:"asRxQuery",get:function(){return this}}])}();function Ga(){return{selector:{}}}function Bg(U,Re,Ye,ht){(0,dt.Xi)("preCreateRxQuery",{op:U,queryObj:Re,collection:Ye,other:ht});var kt=new ko(U,Re,Ye,ht);return kt=function ll(U){return U.collection._queryCache.getByQuery(U)}(kt),(0,vu.n9)(Ye),kt}function Gn(U){var Re=U.asRxQuery.collection._changeEventBuffer.getCounter();return U._latestChangeEvent>=Re}function Nc(U){return U.collection.database.destroyed||Gn(U)?Me.Dr:(U._ensureEqualQueue=U._ensureEqualQueue.then(()=>function Lf(U){if(U._lastEnsureEqual=(0,Ve.t)(),U.collection.database.destroyed||Gn(U))return Me.Dr;var Re=!1,Ye=!1;if(-1===U._latestChangeEvent&&(Ye=!0),!Ye){var ht=U.asRxQuery.collection._changeEventBuffer.getFrom(U._latestChangeEvent+1);if(null===ht)Ye=!0;else{U._latestChangeEvent=U.asRxQuery.collection._changeEventBuffer.getCounter();var kt=U.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(ht);if("count"===U.op){var Sn=(0,ee.ZN)(U._result).count,Bn=Sn;kt.forEach(_r=>{var kr=_r.previousDocumentData&&U.doesDocumentDataMatch(_r.previousDocumentData),qr=U.doesDocumentDataMatch(_r.documentData);!kr&&qr&&Bn++,kr&&!qr&&Bn--}),Bn!==Sn&&(Re=!0,U._setResultData(Bn))}else{var Yn=va(U,kt);Yn.runFullQueryAgain?Ye=!0:Yn.changed&&(Re=!0,U._setResultData(Yn.newResults))}}}return Ye?U._execOverDatabase().then(_r=>(U._latestChangeEvent=U.collection._changeEventBuffer.getCounter(),"number"==typeof _r?((!U._result||_r!==U._result.count)&&(Re=!0,U._setResultData(_r)),Re):((!U._result||!(0,Oe.YL)(U.collection.schema.primaryPath,_r,U._result.docsData))&&(Re=!0,U._setResultData(_r)),Re))):Promise.resolve(Re)}(U)),U._ensureEqualQueue)}function bo(U,Re){if(!Re.sort)throw(0,Be.Br)("SNH",{query:Re});return{query:Re,queryPlan:(0,_a.sk)(U,Re)}}function Eo(){return(Eo=(0,p.A)(function*(U){var Re=[],Ye=U.collection;if(U.isFindOneByIdQuery)if(Array.isArray(U.isFindOneByIdQuery)){var ht=U.isFindOneByIdQuery;if((ht=ht.filter(qr=>{var oi=U.collection._docCache.getLatestDocumentDataIfExists(qr);return!oi||(oi._deleted||Re.push(oi),!1)})).length>0){var kt=yield Ye.storageInstance.findDocumentsById(ht,!1);(0,pe.Hb)(Re,kt)}}else{var Sn=U.isFindOneByIdQuery,Bn=U.collection._docCache.getLatestDocumentDataIfExists(Sn);if(!Bn){var Yn=yield Ye.storageInstance.findDocumentsById([Sn],!1);Yn[0]&&(Bn=Yn[0])}Bn&&!Bn._deleted&&Re.push(Bn)}else{var _r=U.getPreparedQuery(),kr=yield Ye.storageInstance.query(_r);Re=kr.documents}return Re})).apply(this,arguments)}},1885:(Bt,nt,M)=>{"use strict";M.d(nt,{pA:()=>Te,Nq:()=>Ve,Ud:()=>pe,U:()=>Ue,uK:()=>dt,Hq:()=>ee,xQ:()=>Me,nT:()=>he,d1:()=>Ae});var p=M(7650),ie=/\./g,se=M(720),te=M(1744),ae=M(8663),de=M(6434),lt=M(7176);function he(Ie,ct){var st=ct;return st=st.replace(ie,".properties."),st=(0,se.L$)(st="properties."+st),(0,te.UU)(Ie,st)}function Ve(Ie,ct,st){if("string"==typeof ct.primaryKey)return st;var ce=Ue(ct,st),ne=st[Ie];if(ne&&ne!==ce)throw(0,p.Br)("DOC19",{args:{documentData:st,existingPrimary:ne,newPrimary:ce},schema:ct});return st[Ie]=ce,st}function Me(Ie){return"string"==typeof Ie?Ie:Ie.key}function ee(Ie){var st=he(Ie,Me(Ie.primaryKey));return(0,ae.ZN)(st.maxLength)}function Ue(Ie,ct){if("string"==typeof Ie.primaryKey)return ct[Ie.primaryKey];var st=Ie.primaryKey;return st.fields.map(ce=>{var ne=(0,te.UU)(ct,ce);if(typeof ne>"u")throw(0,p.Br)("DOC18",{args:{field:ce,documentData:ct}});return ne}).join(st.separator)}function Ae(Ie){return(0,de.mf)(Ie,!0)}function pe(Ie){var ct=Me((Ie=(0,de.FD)(Ie)).primaryKey);Ie.properties=(0,de.FD)(Ie.properties),Ie.additionalProperties=!1,Object.prototype.hasOwnProperty.call(Ie,"keyCompression")||(Ie.keyCompression=!1),Ie.indexes=Ie.indexes?Ie.indexes.slice(0):[],Ie.required=Ie.required?Ie.required.slice(0):[],Ie.encrypted=Ie.encrypted?Ie.encrypted.slice(0):[],Ie.properties._rev={type:"string",minLength:1},Ie.properties._attachments={type:"object"},Ie.properties._deleted={type:"boolean"},Ie.properties._meta=Be,Ie.required=Ie.required?Ie.required.slice(0):[],Ie.required.push("_deleted"),Ie.required.push("_rev"),Ie.required.push("_meta"),Ie.required.push("_attachments");var st=dt(Ie);(0,lt.Hb)(Ie.required,st),Ie.required=Ie.required.filter(W=>!W.includes(".")).filter((W,ft,At)=>At.indexOf(W)===ft),Ie.version=Ie.version||0;var ce=Ie.indexes.map(W=>{var ft=(0,lt.k_)(W)?W.slice(0):[W];return ft.includes(ct)||ft.push(ct),"_deleted"!==ft[0]&&ft.unshift("_deleted"),ft});0===ce.length&&ce.push(function Oe(Ie){return["_deleted",Ie]}(ct)),ce.push(["_meta.lwt",ct]),Ie.internalIndexes&&Ie.internalIndexes.map(W=>{ce.push(W)});var ne=new Set;return ce.filter(W=>{var ft=W.join(",");return!ne.has(ft)&&(ne.add(ft),!0)}),Ie.indexes=ce,Ie}var Be={type:"object",properties:{lwt:{type:"number",minimum:M(2060).MC,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function dt(Ie){var ct=Object.keys(Ie.properties).filter(ce=>Ie.properties[ce].final),st=Me(Ie.primaryKey);return ct.push(st),"string"!=typeof Ie.primaryKey&&Ie.primaryKey.fields.forEach(ce=>ct.push(ce)),ct}function Te(Ie,ct){for(var st=Object.keys(Ie.defaultValues),ce=0;ce<st.length;++ce){var ne=st[ce];(!Object.prototype.hasOwnProperty.call(ct,ne)||typeof ct[ne]>"u")&&(ct[ne]=Ie.defaultValues[ne])}return ct}},9182:(Bt,nt,M)=>{"use strict";M.d(nt,{NP:()=>he,Wq:()=>Ve,wJ:()=>qe});var p=M(6126),ie=M(6636),fe=M(6434),se=M(7176),te=M(7650),ae=M(2284),de=M(1885),lt=M(3896),qe=function(){function Ue(Oe,pe){this.jsonSchema=Oe,this.hashFunction=pe,this.indexes=function $e(Ue){return(Ue.indexes||[]).map(Ae=>(0,se.k_)(Ae)?Ae:[Ae])}(this.jsonSchema),this.primaryPath=(0,de.xQ)(this.jsonSchema.primaryKey),this.finalFields=(0,de.uK)(this.jsonSchema)}var Ae=Ue.prototype;return Ae.validateChange=function(pe,Be){this.finalFields.forEach(dt=>{if(!(0,ie.b)(pe[dt],Be[dt]))throw(0,te.Br)("DOC9",{dataBefore:pe,dataAfter:Be,fieldName:dt,schema:this.jsonSchema})})},Ae.getDocumentPrototype=function(){var pe={},Be=(0,de.nT)(this.jsonSchema,"");return Object.keys(Be).forEach(dt=>{var Te=dt;pe.__defineGetter__(dt,function(){if(this.get&&"function"==typeof this.get)return this.get(Te)}),Object.defineProperty(pe,dt+"$",{get:function(){return this.get$(Te)},enumerable:!1,configurable:!1}),Object.defineProperty(pe,dt+"$$",{get:function(){return this.get$$(Te)},enumerable:!1,configurable:!1}),Object.defineProperty(pe,dt+"_",{get:function(){return this.populate(Te)},enumerable:!1,configurable:!1})}),(0,fe.Ns)(this,"getDocumentPrototype",()=>pe),pe},Ae.getPrimaryOfDocumentData=function(pe){return(0,de.U)(this.jsonSchema,pe)},(0,p.A)(Ue,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var Oe={};return Object.entries(this.jsonSchema.properties).filter(([,pe])=>Object.prototype.hasOwnProperty.call(pe,"default")).forEach(([pe,Be])=>Oe[pe]=Be.default),(0,fe.Ns)(this,"defaultValues",Oe)}},{key:"hash",get:function(){return(0,fe.Ns)(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function he(Ue){var Oe=0;return new Array(Ue.version?Ue.version:0).fill(0).map(()=>Oe++)}function Ve(Ue,Ae,Oe=!0){Oe&&(0,ae.Xi)("preCreateRxSchema",Ue);var pe=(0,de.Ud)(Ue);pe=(0,de.d1)(pe),lt.h.deepFreezeWhenDevMode(pe);var Be=new qe(pe,Ae);return(0,ae.Xi)("createRxSchema",Be),Be}},6893:(Bt,nt,M)=>{"use strict";M.d(nt,{AM:()=>Rt,C9:()=>ft,ME:()=>rn,Mu:()=>He,O5:()=>Oe,OG:()=>Ue,WX:()=>Ie,YN:()=>me,gi:()=>ct,mQ:()=>Be,on:()=>W,p0:()=>Un,pZ:()=>yn});var p=M(467),ie=M(3896),fe=M(7650),se=M(1885),te=M(720),ae=M(4552),de=M(8663),lt=M(6434),qe=M(6568),$e=M(7176),he=M(2060),Ve=M(5672),Me=M(5365),ee=M(2284),Ue="_rxdb_internal";function Oe(K,H){return pe.apply(this,arguments)}function pe(){return(pe=(0,p.A)(function*(K,H){var q=(yield K.findDocumentsById([H],!1))[0];if(q)return q})).apply(this,arguments)}function Be(K,H,V){return dt.apply(this,arguments)}function dt(){return(dt=(0,p.A)(function*(K,H,V){var q=yield K.bulkWrite([H],V);if(q.error.length>0)throw q.error[0];return me((0,se.xQ)(K.schema.primaryKey),[H],q)[0]})).apply(this,arguments)}function He(K){return Object.assign({},...K)}function Ie(K,H,V,q){if(q)throw 409===q.status?(0,fe.Br)("CONFLICT",{collection:K.name,id:H,writeError:q,data:V}):422===q.status?(0,fe.Br)("VD2",{collection:K.name,id:H,writeError:q,data:V}):q}function ct(K,H,V,q,X,re,oe){for(var Wn,Je=!!K.schema.attachments,Ct=[],Ft=[],Mt=[],on={id:(0,te.z3)(10),events:[],checkpoint:null,context:X,startTime:(0,ae.t)(),endTime:0},en=on.events,ln=[],$t=[],hn=[],tn=V.size>0,wn=q.length,Ui=function(){var Zt,_n=q[Hr],St=_n.document,Nr=_n.previous,Dr=St[H],Cr=St._deleted,mo=Nr&&Nr._deleted,pr=void 0;if(tn&&(pr=V.get(Dr)),pr){if(!Nr||Nr&&pr._rev!==Nr._rev)return Mt.push({isError:!0,status:409,documentId:Dr,writeRow:_n,documentInDb:pr}),1;var $i=Je?st(_n):_n;Je&&(Cr?Nr&&Object.keys(Nr._attachments).forEach(zr=>{$t.push({documentId:Dr,attachmentId:zr,digest:(0,de.ZN)(Nr)._attachments[zr].digest})}):(Object.entries(St._attachments).find(([zr,ei])=>(!(Nr?Nr._attachments[zr]:void 0)&&!ei.data&&(Zt={documentId:Dr,documentInDb:pr,isError:!0,status:510,writeRow:_n,attachmentId:zr}),!0)),Zt||Object.entries(St._attachments).forEach(([zr,ei])=>{var pi=Nr?Nr._attachments[zr]:void 0;pi?ei.data&&pi.digest!==$i.document._attachments[zr].digest&&hn.push({documentId:Dr,attachmentId:zr,attachmentData:ei,digest:ei.digest}):ln.push({documentId:Dr,attachmentId:zr,attachmentData:ei,digest:ei.digest})}))),Zt?Mt.push(Zt):(Je?(Ft.push(st($i)),oe&&oe(St)):(Ft.push($i),oe&&oe(St)),Wn=$i);var $s=null,vo=null,fa=null;if(mo&&!Cr)fa="INSERT",$s=Je?W(St):St;else if(!Nr||mo||Cr){if(!Cr)throw(0,fe.Br)("SNH",{args:{writeRow:_n}});fa="DELETE",$s=(0,de.ZN)(St),vo=Nr}else fa="UPDATE",$s=Je?W(St):St,vo=Nr;en.push({documentId:Dr,documentData:$s,previousDocumentData:vo,operation:fa})}else{var ir=!!Cr;if(Je&&Object.entries(St._attachments).forEach(([zr,ei])=>{ei.data?ln.push({documentId:Dr,attachmentId:zr,attachmentData:ei,digest:ei.digest}):Mt.push(Zt={documentId:Dr,isError:!0,status:510,writeRow:_n,attachmentId:zr})}),Zt||(Je?(Ct.push(st(_n)),re&&re(St)):(Ct.push(_n),re&&re(St)),Wn=_n),!ir){var go={documentId:Dr,operation:"INSERT",documentData:Je?W(St):St,previousDocumentData:Je&&Nr?W(Nr):Nr};en.push(go)}}},Hr=0;Hr<wn;Hr++)Ui();return{bulkInsertDocs:Ct,bulkUpdateDocs:Ft,newestRow:Wn,errors:Mt,eventBulk:on,attachmentsAdd:ln,attachmentsRemove:$t,attachmentsUpdate:hn}}function st(K){return{previous:K.previous,document:W(K.document)}}function ce(K){return atob(K).length}function W(K){if(!K._attachments||0===Object.keys(K._attachments).length)return K;var H=(0,lt.FD)(K);return H._attachments={},Object.entries(K._attachments).forEach(([V,q])=>{H._attachments[V]=function ne(K){var H=K.data;return H?{length:ce(H),digest:K.digest,type:K.type}:K}(q)}),H}function ft(K){return Object.assign({},K,{_meta:(0,lt.FD)(K._meta)})}var At=new WeakMap;function Rt(K,H,V){ie.h.deepFreezeWhenDevMode(V);var q=(0,se.xQ)(H.schema.primaryKey),X={originalStorageInstance:H,schema:H.schema,internals:H.internals,collectionName:H.collectionName,databaseName:H.databaseName,options:H.options,bulkWrite(re,oe){for(var Je=K.token,Ct=new Array(re.length),Ft=(0,ae.t)(),Mt=0;Mt<re.length;Mt++){var jt=re[Mt],on=ft(jt.document);on._meta.lwt=Ft;var en=jt.previous;on._rev=(0,qe.CM)(Je,en),Ct[Mt]={document:on,previous:en}}return(0,ee.Xi)("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:Ct}),K.lockedRun(()=>H.bulkWrite(Ct,oe)).then(ln=>{var $t={error:[]},hn=me(q,Ct,ln);At.set($t,hn);var tn=0===ln.error.length?[]:ln.error.filter(wn=>!(409!==wn.status||wn.writeRow.previous||wn.writeRow.document._deleted||!(0,de.ZN)(wn.documentInDb)._deleted)||($t.error.push(wn),!1));if(tn.length>0){var Wn=tn.map(wn=>({previous:wn.documentInDb,document:Object.assign({},wn.writeRow.document,{_rev:(0,qe.CM)(K.token,wn.documentInDb)})}));return K.lockedRun(()=>H.bulkWrite(Wn,oe)).then(wn=>{(0,$e.Hb)($t.error,wn.error);var Ui=me(q,Wn,wn);return(0,$e.Hb)(hn,Ui),$t})}return $t})},query:re=>K.lockedRun(()=>H.query(re)),count:re=>K.lockedRun(()=>H.count(re)),findDocumentsById:(re,oe)=>K.lockedRun(()=>H.findDocumentsById(re,oe)),getAttachmentData:(re,oe,Je)=>K.lockedRun(()=>H.getAttachmentData(re,oe,Je)),getChangedDocumentsSince:H.getChangedDocumentsSince?(re,oe)=>K.lockedRun(()=>H.getChangedDocumentsSince((0,de.ZN)(re),oe)):void 0,cleanup:re=>K.lockedRun(()=>H.cleanup(re)),remove:()=>(K.storageInstances.delete(X),K.lockedRun(()=>H.remove())),close:()=>(K.storageInstances.delete(X),K.lockedRun(()=>H.close())),changeStream:()=>H.changeStream(),conflictResultionTasks:()=>H.conflictResultionTasks(),resolveConflictResultionTask(re){if(re.output.isEqual)return H.resolveConflictResultionTask(re);var oe=Object.assign({},re.output.documentData,{_meta:(0,he.o4)(),_rev:(0,he.Fq)(),_attachments:{}}),Je=(0,lt.FD)(oe);return delete Je._meta,delete Je._rev,delete Je._attachments,H.resolveConflictResultionTask({id:re.id,output:{isEqual:!1,documentData:Je}})}};return K.storageInstances.add(X),X}function yn(K){if(K.schema.keyCompression)throw(0,fe.Br)("UT5",{args:{params:K}});if(rn(K.schema))throw(0,fe.Br)("UT6",{args:{params:K}});if(K.schema.attachments&&K.schema.attachments.compression)throw(0,fe.Br)("UT7",{args:{params:K}})}function rn(K){return!!(K.encrypted&&K.encrypted.length>0||K.attachments&&K.attachments.encrypted)}function Un(K,H,V){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,p.A)(function*(K,H,V){if(K.getChangedDocumentsSince)return K.getChangedDocumentsSince(H,V);var q=(0,se.xQ)(K.schema.primaryKey),X=(0,Ve.Ib)(K.schema,function pn(K,H,V){var q=(0,se.xQ)(K.schema.primaryKey),X=V?V.lwt:he.MC;return(0,Me._V)(K.schema,{selector:{$or:[{"_meta.lwt":{$gt:X}},{"_meta.lwt":{$eq:X},[q]:{$gt:V&&V?V.id:""}}],"_meta.lwt":{$gte:X}},sort:[{"_meta.lwt":"asc"},{[q]:"asc"}],skip:0,limit:H})}(K,H,V)),oe=(yield K.query(X)).documents,Je=(0,$e.dG)(oe);return{documents:oe,checkpoint:Je?{id:Je[q],lwt:Je._meta.lwt}:V||{id:"",lwt:0}}})).apply(this,arguments)}function me(K,H,V){var q=At.get(V);if(q)return q;var X=[];if(V.error.length>0){for(var re=new Set,oe=0;oe<V.error.length;oe++)re.add(V.error[oe].documentId);for(var Ct=0;Ct<H.length;Ct++){var Ft=H[Ct].document;re.has(Ft[K])||X.push(W(Ft))}}else{X.length=H.length-V.error.length;for(var Mt=0;Mt<H.length;Mt++)X[Mt]=W(H[Mt].document)}return X}},467:(Bt,nt,M)=>{"use strict";function p(fe,se,te,ae,de,lt,qe){try{var $e=fe[lt](qe),he=$e.value}catch(Ve){return void te(Ve)}$e.done?se(he):Promise.resolve(he).then(ae,de)}function ie(fe){return function(){var se=this,te=arguments;return new Promise(function(ae,de){var lt=fe.apply(se,te);function qe(he){p(lt,ae,de,qe,$e,"next",he)}function $e(he){p(lt,ae,de,qe,$e,"throw",he)}qe(void 0)})}}M.d(nt,{A:()=>ie})},6126:(Bt,nt,M)=>{"use strict";function p(ae){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(de){return typeof de}:function(de){return de&&"function"==typeof Symbol&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(ae)}function fe(ae){var de=function ie(ae,de){if("object"!=p(ae)||!ae)return ae;var lt=ae[Symbol.toPrimitive];if(void 0!==lt){var qe=lt.call(ae,de||"default");if("object"!=p(qe))return qe;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===de?String:Number)(ae)}(ae,"string");return"symbol"==p(de)?de:de+""}function se(ae,de){for(var lt=0;lt<de.length;lt++){var qe=de[lt];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(ae,fe(qe.key),qe)}}function te(ae,de,lt){return de&&se(ae.prototype,de),lt&&se(ae,lt),Object.defineProperty(ae,"prototype",{writable:!1}),ae}M.d(nt,{A:()=>te})},6719:(Bt,nt,M)=>{"use strict";M.d(nt,{A:()=>ie});var p=M(4394);function ie(fe,se){fe.prototype=Object.create(se.prototype),fe.prototype.constructor=fe,(0,p.A)(fe,se)}},4394:(Bt,nt,M)=>{"use strict";function p(ie,fe){return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(se,te){return se.__proto__=te,se})(ie,fe)}M.d(nt,{A:()=>p})},1635:(Bt,nt,M)=>{"use strict";function Ve(Ge,me,be,K){return new(be||(be=Promise))(function(V,q){function X(Je){try{oe(K.next(Je))}catch(Ct){q(Ct)}}function re(Je){try{oe(K.throw(Je))}catch(Ct){q(Ct)}}function oe(Je){Je.done?V(Je.value):function H(V){return V instanceof be?V:new be(function(q){q(V)})}(Je.value).then(X,re)}oe((K=K.apply(Ge,me||[])).next())})}function Te(Ge){return this instanceof Te?(this.v=Ge,this):new Te(Ge)}function He(Ge,me,be){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H,K=be.apply(Ge,me||[]),V=[];return H={},X("next"),X("throw"),X("return",function q(Mt){return function(jt){return Promise.resolve(jt).then(Mt,Ct)}}),H[Symbol.asyncIterator]=function(){return this},H;function X(Mt,jt){K[Mt]&&(H[Mt]=function(on){return new Promise(function(en,ln){V.push([Mt,on,en,ln])>1||re(Mt,on)})},jt&&(H[Mt]=jt(H[Mt])))}function re(Mt,jt){try{!function oe(Mt){Mt.value instanceof Te?Promise.resolve(Mt.value.v).then(Je,Ct):Ft(V[0][2],Mt)}(K[Mt](jt))}catch(on){Ft(V[0][3],on)}}function Je(Mt){re("next",Mt)}function Ct(Mt){re("throw",Mt)}function Ft(Mt,jt){Mt(jt),V.shift(),V.length&&re(V[0][0],V[0][1])}}function ct(Ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var be,me=Ge[Symbol.asyncIterator];return me?me.call(Ge):(Ge=function Ae(Ge){var me="function"==typeof Symbol&&Symbol.iterator,be=me&&Ge[me],K=0;if(be)return be.call(Ge);if(Ge&&"number"==typeof Ge.length)return{next:function(){return Ge&&K>=Ge.length&&(Ge=void 0),{value:Ge&&Ge[K++],done:!Ge}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ge),be={},K("next"),K("throw"),K("return"),be[Symbol.asyncIterator]=function(){return this},be);function K(V){be[V]=Ge[V]&&function(q){return new Promise(function(X,re){!function H(V,q,X,re){Promise.resolve(re).then(function(oe){V({value:oe,done:X})},q)}(X,re,(q=Ge[V](q)).done,q.value)})}}}M.d(nt,{AQ:()=>He,N3:()=>Te,sH:()=>Ve,xN:()=>ct}),"function"==typeof SuppressedError&&SuppressedError}},Bt=>{Bt(Bt.s=222)}]);