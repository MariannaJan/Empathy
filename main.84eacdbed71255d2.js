(self.webpackChunkEmpathy=self.webpackChunkEmpathy||[]).push([[792],{3278:(Bt,tt,M)=>{"use strict";var m=M(3953);let ie=null;function fe(){return ie}class te{}const de=new m.nKC("");let lt=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:()=>(0,m.WQX)($e),providedIn:"platform"})}return n})();const qe=new m.nKC("");let $e=(()=>{class n extends lt{constructor(){super(),this._doc=(0,m.WQX)(de),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fe().getBaseHref(this._doc)}onPopState(t){const r=fe().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=fe().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function he(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function xe(n){return n&&"?"!==n[0]?"?"+n:n}let ee=(()=>{class n{historyGo(t){throw new Error("")}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:()=>(0,m.WQX)(Te),providedIn:"root"})}return n})();const Ue=new m.nKC("");let Te=(()=>{class n extends ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,m.WQX)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return he(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+xe(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const d=this.prepareExternalUrl(s+xe(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){const d=this.prepareExternalUrl(s+xe(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(lt),m.KVO(Ue,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oe=(()=>{class n extends ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=he(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let d=this.prepareExternalUrl(s+xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,u){let d=this.prepareExternalUrl(s+xe(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(lt),m.KVO(Ue,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})(),pe=(()=>{class n{constructor(t){this._subject=new m.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function He(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ve(De(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+xe(r))}normalize(t){return n.stripTrailingSlash(function dt(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,De(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xe(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xe(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}static#e=this.normalizeQueryParams=xe;static#t=this.joinWithSlash=he;static#n=this.stripTrailingSlash=Ve;static#r=this.\u0275fac=function(r){return new(r||n)(m.KVO(ee))};static#i=this.\u0275prov=m.jDH({token:n,factory:()=>function Be(){return new pe((0,m.KVO)(ee))}(),providedIn:"root"})}return n})();function De(n){return n.replace(/\/index.html$/,"")}let vl=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({})}return n})();const Dg="browser";function zt(n){return n===Dg}function is(n){return"server"===n}let bu=(()=>{class n{static#e=this.\u0275prov=(0,m.jDH)({token:n,providedIn:"root",factory:()=>zt((0,m.WQX)(m.Agw))?new _l((0,m.WQX)(de),window):new bl})}return n})();class _l{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){const t=function yl(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}}class bl{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}}class Ag extends te{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sn extends Ag{static makeCurrent(){!function se(n){ie??=n}(new sn)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function lp(){return tc=tc||document.querySelector("base"),tc?tc.getAttribute("href"):null}();return null==t?null:function Dl(n){return new URL(n,document.baseURI).pathname}(t)}resetBaseElement(){tc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Jf(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let tc=null,Eb=(()=>{class n{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();const Jd=new m.nKC("");let dp=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(u=>u.supports(t)),!r)throw new m.wOt(5101,!1);return this._eventNameToPlugin.set(t,r),r}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(Jd),m.KVO(m.SKi))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();class Du{constructor(e){this._doc=e}}const Rg="ng-app-id";let eh=(()=>{class n{constructor(t,r,s,u={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=is(u),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${Rg}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const u=s.get(t);return u.usage+=r,u.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,u=s?.get(r);if(u?.parentNode===t)return s.delete(r),u.removeAttribute(Rg),u;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=r,this.platformIsServer&&d.setAttribute(Rg,this.appId),t.appendChild(d),d}}addStyleToHost(t,r){const s=this.getStyleElement(t,r),u=this.styleRef,d=u.get(r)?.elements;d?d.push(s):u.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de),m.KVO(m.sZ2),m.KVO(m.BIS,8),m.KVO(m.Agw))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();const xg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},nc=/%COMP%/g,hp=new m.nKC("",{providedIn:"root",factory:()=>!0});function vD(n,e){return e.map(t=>t.replace(nc,n))}let pp=(()=>{class n{constructor(t,r,s,u,d,f,g,D=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=u,this.doc=d,this.platformId=f,this.ngZone=g,this.nonce=D,this.rendererByCompId=new Map,this.platformIsServer=is(f),this.defaultRenderer=new Db(t,d,g,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===m.gXe.ShadowDom&&(r={...r,encapsulation:m.gXe.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof oa?s.applyToHost(t):s instanceof mp&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const d=this.doc,f=this.ngZone,g=this.eventManager,D=this.sharedStylesHost,S=this.removeStylesOnCompDestroy,P=this.platformIsServer;switch(r.encapsulation){case m.gXe.Emulated:u=new oa(g,D,r,this.appId,S,d,f,P);break;case m.gXe.ShadowDom:return new Kx(g,D,t,r,d,f,this.nonce,P);default:u=new mp(g,D,r,S,d,f,P)}s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(dp),m.KVO(eh),m.KVO(m.sZ2),m.KVO(hp),m.KVO(de),m.KVO(m.Agw),m.KVO(m.SKi),m.KVO(m.BIS))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();class Db{constructor(e,t,r,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=s,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(xg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Cu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Cu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new m.wOt(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=xg[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=xg[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(m.czy.DashCase|m.czy.Important)?e.style.setProperty(t,r,s&m.czy.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.czy.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){null!=e&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=fe().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function Cu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Kx extends Db{constructor(e,t,r,s,u,d,f,g){super(e,u,d,g),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const D=vD(s.id,s.styles);for(const S of D){const P=document.createElement("style");f&&P.setAttribute("nonce",f),P.textContent=S,this.shadowRoot.appendChild(P)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class mp extends Db{constructor(e,t,r,s,u,d,f,g){super(e,u,d,f),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=s,this.styles=g?vD(g,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class oa extends mp{constructor(e,t,r,s,u,d,f,g){const D=s+"-"+r.id;super(e,t,r,u,d,f,g,D),this.contentAttr=function fp(n){return"_ngcontent-%COMP%".replace(nc,n)}(D),this.hostAttr=function Mg(n){return"_nghost-%COMP%".replace(nc,n)}(D)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let er=(()=>{class n extends Du{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})(),sa=(()=>{class n extends Du{constructor(t){super(t),this.delegate=(0,m.WQX)(m.zAP,{optional:!0})}supports(t){return!!this.delegate&&this.delegate.supports(t)}addEventListener(t,r,s){return this.delegate.addEventListener(t,r,s)}removeEventListener(t,r,s){return this.delegate.removeEventListener(t,r,s)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();const Og=["alt","control","meta","shift"],Pg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gp={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vp=(()=>{class n extends Du{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fe().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let d="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),d="code."),Og.forEach(D=>{const S=r.indexOf(D);S>-1&&(r.splice(S,1),d+=D+".")}),d+=u,0!=r.length||0===u.length)return null;const g={};return g.domEventName=s,g.fullKey=d,g}static matchEventFullKeyCode(t,r){let s=Pg[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),Og.forEach(d=>{d!==s&&(0,gp[d])(t)&&(u+=d+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();const xb=(0,m.oH4)(m.fpN,"browser",[{provide:m.Agw,useValue:Dg},{provide:m.PLl,useValue:function Ab(){sn.makeCurrent()},multi:!0},{provide:de,useFactory:function th(){return(0,m.TL$)(document),document},deps:[]}]),Mb=new m.nKC(""),nh=[{provide:m.e01,useClass:class bb{addToWindow(e){m.JZv.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new m.wOt(5103,!1);return u},m.JZv.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.JZv.getAllAngularRootElements=()=>e.getAllRootElements(),m.JZv.frameworkStabilizers||(m.JZv.frameworkStabilizers=[]),m.JZv.frameworkStabilizers.push(r=>{const s=m.JZv.getAllAngularTestabilities();let u=s.length;const d=function(){u--,0==u&&r()};s.forEach(f=>{f.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?fe().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:m.WHO,useClass:m.NYb,deps:[m.SKi,m.giA,m.e01]},{provide:m.NYb,useClass:m.NYb,deps:[m.SKi,m.giA,m.e01]}],kg=[{provide:m.H8p,useValue:"root"},{provide:m.zcH,useFactory:function Rb(){return new m.zcH},deps:[]},{provide:Jd,useClass:er,multi:!0,deps:[de,m.SKi,m.Agw]},{provide:Jd,useClass:vp,multi:!0,deps:[de]},{provide:Jd,useClass:sa,multi:!0},pp,eh,dp,{provide:m._9s,useExisting:pp},{provide:class os{},useClass:Eb,deps:[]},[]];let _D=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.sZ2,useValue:t.appId}]}}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(Mb,12))};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({providers:[...kg,...nh],imports:[vl,m.Hbi]})}return n})(),Ob=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rh=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:function(r){let s=null;return s=r?new(r||n):m.KVO(zn),s},providedIn:"root"})}return n})(),zn=(()=>{class n extends rh{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case m.WPN.NONE:return r;case m.WPN.HTML:return(0,m.ZF7)(r,"HTML")?(0,m.rcV)(r):(0,m.h9k)(this._doc,String(r)).toString();case m.WPN.STYLE:return(0,m.ZF7)(r,"Style")?(0,m.rcV)(r):r;case m.WPN.SCRIPT:if((0,m.ZF7)(r,"Script"))return(0,m.rcV)(r);throw new m.wOt(5200,!1);case m.WPN.URL:return(0,m.ZF7)(r,"URL")?(0,m.rcV)(r):(0,m.$MX)(String(r));case m.WPN.RESOURCE_URL:if((0,m.ZF7)(r,"ResourceURL"))return(0,m.rcV)(r);throw new m.wOt(5201,!1);default:throw new m.wOt(5202,!1)}}bypassSecurityTrustHtml(t){return(0,m.Kcf)(t)}bypassSecurityTrustStyle(t){return(0,m.cWb)(t)}bypassSecurityTrustScript(t){return(0,m.UyX)(t)}bypassSecurityTrustUrl(t){return(0,m.osQ)(t)}bypassSecurityTrustResourceUrl(t){return(0,m.e5t)(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var nt=M(467),Ps=M(1985),co=M(8071),yi=M(6648),ih=M(9326);function cn(...n){const e=(0,ih.lI)(n);return(0,yi.H)(n,e)}var Di=M(4412);const{isArray:Vg}=Array,{getPrototypeOf:Bg,prototype:oh,keys:rc}=Object;function Vb(n){if(1===n.length){const e=n[0];if(Vg(e))return{args:e,keys:null};if(function jg(n){return n&&"object"==typeof n&&Bg(n)===oh}(e)){const t=rc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Lc=M(3669),kn=M(6354);const{isArray:Ug}=Array;function Bo(n){return(0,kn.T)(e=>function _p(n,e){return Ug(e)?n(...e):n(e)}(n,e))}function Ru(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}var ui=M(4360),$g=M(5225);function xu(...n){const e=(0,ih.lI)(n),t=(0,ih.ms)(n),{args:r,keys:s}=Vb(n);if(0===r.length)return(0,yi.H)([],e);const u=new Ps.c(function Hg(n,e,t=Lc.D){return r=>{Vc(e,()=>{const{length:s}=n,u=new Array(s);let d=s,f=s;for(let g=0;g<s;g++)Vc(e,()=>{const D=(0,yi.H)(n[g],e);let S=!1;D.subscribe((0,ui._)(r,P=>{u[g]=P,S||(S=!0,f--),f||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,s?d=>Ru(s,d):Lc.D));return t?u.pipe(Bo(t)):u}function Vc(n,e,t){n?(0,$g.N)(t,n,e):e()}var sh=M(9350),ah=M(8793),Sa=M(8750);function Mu(n){return new Ps.c(e=>{(0,Sa.Tg)(n()).subscribe(e)})}var zg=M(1203);function Bc(n,e){const t=(0,co.T)(n)?n:()=>n,r=s=>s.error(t());return new Ps.c(e?s=>e.schedule(r,0,s):r)}var cs=M(983),Wi=M(8359),Mi=M(9974);function yp(){return(0,Mi.N)((n,e)=>{let t=null;n._refCount++;const r=(0,ui._)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class li extends Ps.c{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Mi.S)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Wi.yU;const t=this.getSubject();e.add(this.source.subscribe((0,ui._)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Wi.yU.EMPTY)}return e}refCount(){return yp()(this)}}var Vn=M(1413);function Gi(n,e){return(0,Mi.N)((t,r)=>{let s=null,u=0,d=!1;const f=()=>d&&!s&&r.complete();t.subscribe((0,ui._)(r,g=>{s?.unsubscribe();let D=0;const S=u++;(0,Sa.Tg)(n(g,S)).subscribe(s=(0,ui._)(r,P=>r.next(e?e(g,P,S,D++):P),()=>{s=null,f()}))},()=>{d=!0,f()}))})}function Gr(n){return n<=0?()=>cs.w:(0,Mi.N)((e,t)=>{let r=0;e.subscribe((0,ui._)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}var Tl=M(9172),wr=M(5964),bi=M(1397);function ch(n){return(0,Mi.N)((e,t)=>{let r=!1;e.subscribe((0,ui._)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Kg(n=Bb){return(0,Mi.N)((e,t)=>{let r=!1;e.subscribe((0,ui._)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Bb(){return new sh.G}function Aa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?(0,wr.p)((s,u)=>n(s,u,r)):Lc.D,Gr(1),t?ch(e):Kg(()=>new sh.G))}function Ra(n,e){return(0,co.T)(e)?(0,bi.Z)(n,e,1):(0,bi.Z)(n,1)}function On(n,e,t){const r=(0,co.T)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Mi.N)((s,u)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let f=!0;s.subscribe((0,ui._)(u,g=>{var D;null===(D=r.next)||void 0===D||D.call(r,g),u.next(g)},()=>{var g;f=!1,null===(g=r.complete)||void 0===g||g.call(r),u.complete()},g=>{var D;f=!1,null===(D=r.error)||void 0===D||D.call(r,g),u.error(g)},()=>{var g,D;f&&(null===(g=r.unsubscribe)||void 0===g||g.call(r)),null===(D=r.finalize)||void 0===D||D.call(r)}))}):Lc.D}function y(n){return(0,Mi.N)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,ui._)(t,void 0,void 0,d=>{u=(0,Sa.Tg)(n(d,y(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function w(n){return n<=0?()=>cs.w:(0,Mi.N)((e,t)=>{let r=[];e.subscribe((0,ui._)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function B(n){return(0,kn.T)(()=>n)}function Y(n){return(0,Mi.N)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}var Z=M(5343);function ve(n){return(0,Mi.N)((e,t)=>{(0,Sa.Tg)(n).subscribe((0,ui._)(t,()=>t.complete(),Z.l)),!t.closed&&e.subscribe(t)})}var st=M(6365);const Se="primary",wt=Symbol("RouteTitle");class nn{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yt(n){return new nn(n)}function mn(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const d=r[u],f=n[u];if(":"===d[0])s[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function Fn(n,e){const t=n?lr(n):void 0,r=e?lr(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!di(n[s],e[s]))return!1;return!0}function lr(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function di(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function jo(n){return n.length>0?n[n.length-1]:null}function or(n){return function Lb(n){return!!n&&(n instanceof Ps.c||(0,co.T)(n.lift)&&(0,co.T)(n.subscribe))}(n)?n:(0,m.jNT)(n)?(0,yi.H)(Promise.resolve(n)):cn(n)}const uo={exact:function So(n,e,t){if(!Ns(n.segments,e.segments)||!Mr(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!So(n.children[r],e.children[r],t))return!1;return!0},subset:jc},lo={exact:function bp(n,e){return Fn(n,e)},subset:function Uo(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>di(n[t],e[t]))},ignored:()=>!0};function an(n,e,t){return uo[t.paths](n.root,e.root,t.matrixParams)&&lo[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function jc(n,e,t){return xa(n,e,e.segments,t)}function xa(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Ns(s,t)||e.hasChildren()||!Mr(s,t,r))}if(n.segments.length===t.length){if(!Ns(n.segments,t)||!Mr(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!jc(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ns(n.segments,s)&&Mr(n.segments,s,r)&&n.children[Se])&&xa(n.children[Se],e,u,r)}}function Mr(n,e,t){return e.every((r,s)=>lo[t](n[s].parameters,r.parameters))}class us{constructor(e=new Tn([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Yt(this.queryParams),this._queryParamMap}toString(){return Jx.serialize(this)}}class Tn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gg(this)}}class $r{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Yt(this.parameters),this._parameterMap}toString(){return tM(this)}}function Ns(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ao=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:()=>new Ou,providedIn:"root"})}return n})();class Ou{parse(e){const t=new DF(e);return new us(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Sl(e.root,!0)}`,r=function _F(n){const e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(s=>`${qg(t)}=${qg(s)}`).join("&"):`${qg(t)}=${qg(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function $b(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Jx=new Ou;function Gg(n){return n.segments.map(e=>tM(e)).join("/")}function Sl(n,e){if(!n.hasChildren())return Gg(n);if(e){const t=n.children[Se]?Sl(n.children[Se],!1):"",r=[];return Object.entries(n.children).forEach(([s,u])=>{s!==Se&&r.push(`${s}:${Sl(u,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Wg(n,e){let t=[];return Object.entries(n.children).forEach(([r,s])=>{r===Se&&(t=t.concat(e(s,r)))}),Object.entries(n.children).forEach(([r,s])=>{r!==Se&&(t=t.concat(e(s,r)))}),t}(n,(r,s)=>s===Se?[Sl(n.children[Se],!1)]:[`${s}:${Sl(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Se]?`${Gg(n)}/${t[0]}`:`${Gg(n)}/(${t.join("//")})`}}function Ub(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qg(n){return Ub(n).replace(/%3B/gi,";")}function CD(n){return Ub(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hb(n){return decodeURIComponent(n)}function eM(n){return Hb(n.replace(/\+/g,"%20"))}function tM(n){return`${CD(n.path)}${function vF(n){return Object.entries(n).map(([e,t])=>`;${CD(e)}=${CD(t)}`).join("")}(n.parameters)}`}const yF=/^[^\/()?;#]+/;function TD(n){const e=n.match(yF);return e?e[0]:""}const bF=/^[^\/()?;=#]+/,wF=/^[^=?&#]+/,SD=/^[^&#]+/;class DF{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Tn([],{}):new Tn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Se]=new Tn(e,t)),r}parseSegment(){const e=TD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new m.wOt(4009,!1);return this.capture(e),new $r(Hb(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function EF(n){const e=n.match(bF);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=TD(this.remaining);s&&(r=s,this.capture(r))}e[Hb(t)]=Hb(r)}parseQueryParam(e){const t=function IF(n){const e=n.match(wF);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function AD(n){const e=n.match(SD);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const s=eM(t),u=eM(r);if(e.hasOwnProperty(s)){let d=e[s];Array.isArray(d)||(d=[d],e[s]=d),d.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=TD(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new m.wOt(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Se);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Se]:new Tn([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new m.wOt(4011,!1)}}function nM(n){return n.segments.length>0?new Tn([],{[Se]:n}):n}function rM(n){const e={};for(const[r,s]of Object.entries(n.children)){const u=rM(s);if(r===Se&&0===u.segments.length&&u.hasChildren())for(const[d,f]of Object.entries(u.children))e[d]=f;else(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function CF(n){if(1===n.numberOfChildren&&n.children[Se]){const e=n.children[Se];return new Tn(n.segments.concat(e.segments),e.children)}return n}(new Tn(n.segments,e))}function Al(n){return n instanceof us}function Qg(n){let e;const s=nM(function t(u){const d={};for(const g of u.children){const D=t(g);d[g.outlet]=D}const f=new Tn(u.url,d);return u===n&&(e=f),f}(n.root));return e??s}function zb(n,e,t,r){let s=n;for(;s.parent;)s=s.parent;if(0===e.length)return Yg(s,s,s,t,r);const u=function Wb(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new xD(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const f={};return Object.entries(u.outlets).forEach(([g,D])=>{f[g]="string"==typeof D?D.split("/"):D}),[...s,{outlets:f}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===d?(u.split("/").forEach((f,g)=>{0==g&&"."===f||(0==g&&""===f?t=!0:".."===f?e++:""!=f&&s.push(f))}),s):[...s,u]},[]);return new xD(t,e,r)}(e);if(u.toRoot())return Yg(s,s,new Tn([],{}),t,r);const d=function ic(n,e,t){if(n.isAbsolute)return new Zg(e,!0,0);if(!t)return new Zg(e,!1,NaN);if(null===t.parent)return new Zg(t,!0,0);const r=Xg(n.commands[0])?0:1;return function MD(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new m.wOt(4005,!1);s=r.segments.length}return new Zg(r,!1,s-u)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(u,s,n),f=d.processChildren?Rl(d.segmentGroup,d.index,u.commands):sr(d.segmentGroup,d.index,u.commands);return Yg(s,d.segmentGroup,f,t,r)}function Xg(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Ep(n){return"object"==typeof n&&null!=n&&n.outlets}function Yg(n,e,t,r,s){let d,u={};r&&Object.entries(r).forEach(([g,D])=>{u[g]=Array.isArray(D)?D.map(S=>`${S}`):`${D}`}),d=n===e?t:Kb(n,e,t);const f=nM(rM(d));return new us(f,u,s)}function Kb(n,e,t){const r={};return Object.entries(n.children).forEach(([s,u])=>{r[s]=u===e?t:Kb(u,e,t)}),new Tn(n.segments,r)}class xD{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Xg(r[0]))throw new m.wOt(4003,!1);const s=r.find(Ep);if(s&&s!==jo(r))throw new m.wOt(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Zg{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function sr(n,e,t){if(n??=new Tn([],{}),0===n.segments.length&&n.hasChildren())return Rl(n,e,t);const r=function wp(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const d=n.segments[s],f=t[r];if(Ep(f))break;const g=`${f}`,D=r<t.length-1?t[r+1]:null;if(s>0&&void 0===g)break;if(g&&D&&"object"==typeof D&&void 0===D.outlets){if(!Pu(g,D,d))return u;r+=2}else{if(!Pu(g,{},d))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Tn(n.segments.slice(0,r.pathIndex),{});return u.children[Se]=new Tn(n.segments.slice(r.pathIndex),n.children),Rl(u,0,s)}return r.match&&0===s.length?new Tn(n.segments,{}):r.match&&!n.hasChildren()?ho(n,e,t):r.match?Rl(n,0,s):ho(n,e,t)}function Rl(n,e,t){if(0===t.length)return new Tn(n.segments,{});{const r=function OD(n){return Ep(n[0])?n[0].outlets:{[Se]:n}}(t),s={};if(Object.keys(r).some(u=>u!==Se)&&n.children[Se]&&1===n.numberOfChildren&&0===n.children[Se].segments.length){const u=Rl(n.children[Se],e,t);return new Tn(n.segments,u.children)}return Object.entries(r).forEach(([u,d])=>{"string"==typeof d&&(d=[d]),null!==d&&(s[u]=sr(n.children[u],e,d))}),Object.entries(n.children).forEach(([u,d])=>{void 0===r[u]&&(s[u]=d)}),new Tn(n.segments,s)}}function ho(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(Ep(u)){const g=iM(u.outlets);return new Tn(r,g)}if(0===s&&Xg(t[0])){r.push(new $r(n.segments[e].path,uh(t[0]))),s++;continue}const d=Ep(u)?u.outlets[Se]:`${u}`,f=s<t.length-1?t[s+1]:null;d&&f&&Xg(f)?(r.push(new $r(d,uh(f))),s+=2):(r.push(new $r(d,{})),s++)}return new Tn(r,{})}function iM(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=ho(new Tn([],{}),0,r))}),e}function uh(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function Pu(n,e,t){return n==t.path&&Fn(e,t.parameters)}const fo="imperative";var tr=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(tr||{});class aa{constructor(e,t){this.id=e,this.url=t}}class Jg extends aa{constructor(e,t,r="imperative",s=null){super(e,t),this.type=tr.NavigationStart,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ci extends aa{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=tr.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ls=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ls||{}),Ip=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ip||{});class Nu extends aa{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=tr.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class oc extends aa{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=tr.NavigationSkipped}}class Dp extends aa{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=tr.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Cp extends aa{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=tr.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ev extends aa{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=tr.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gb extends aa{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=tr.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Uc extends aa{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=tr.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xn extends aa{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=tr.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tv{constructor(e){this.route=e,this.type=tr.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class qb{constructor(e){this.route=e,this.type=tr.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class PD{constructor(e){this.snapshot=e,this.type=tr.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TF{constructor(e){this.snapshot=e,this.type=tr.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class oM{constructor(e){this.snapshot=e,this.type=tr.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sM{constructor(e){this.snapshot=e,this.type=tr.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ND{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=tr.Scroll}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class nv{}class sc{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}}function ca(n){return n.outlet||Se}function $o(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Qb{get injector(){return $o(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new xl(this.rootInjector),this.attachRef=null}}let xl=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Qb(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(m.uvJ))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class Xb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=FD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=FD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=LD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return LD(e,this._root).map(t=>t.value)}}function FD(n,e){if(n===e.value)return e;for(const t of e.children){const r=FD(n,t);if(r)return r}return null}function LD(n,e){if(n===e.value)return[e];for(const t of e.children){const r=LD(n,t);if(r.length)return r.unshift(e),r}return[]}class ua{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ml(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Yb extends Xb{constructor(e,t){super(e),this.snapshot=t,rv(this,e)}toString(){return this.snapshot.toString()}}function Ro(n){const e=function $c(n){const u=new la([],{},{},"",{},Se,n,null,{});return new VD("",new ua(u,[]))}(n),t=new Di.t([new $r("",{})]),r=new Di.t({}),s=new Di.t({}),u=new Di.t({}),d=new Di.t(""),f=new Ol(t,r,u,d,s,Se,n,e.root);return f.snapshot=e.root,new Yb(new ua(f,[]),e)}class Ol{constructor(e,t,r,s,u,d,f,g){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=s,this.dataSubject=u,this.outlet=d,this.component=f,this._futureSnapshot=g,this.title=this.dataSubject?.pipe((0,kn.T)(D=>D[wt]))??cn(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe((0,kn.T)(e=>Yt(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe((0,kn.T)(e=>Yt(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ds(n,e,t="emptyOnly"){let r;const{routeConfig:s}=n;return r=null===e||"always"!==t&&""!==s?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...n.params},data:{...n.data},resolve:{...n.data,...n._resolvedData??{}}}:{params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.data,...s?.data,...n._resolvedData}},s&&iv(s)&&(r.resolve[wt]=s.title),r}class la{get title(){return this.data?.[wt]}constructor(e,t,r,s,u,d,f,g,D){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=d,this.component=f,this.routeConfig=g,this._resolve=D}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Yt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Yt(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class VD extends Xb{constructor(e,t){super(t),this.url=e,rv(this,t)}toString(){return BD(this._root)}}function rv(n,e){e.value._routerState=n,e.children.forEach(t=>rv(n,t))}function BD(n){const e=n.children.length>0?` { ${n.children.map(BD).join(", ")} } `:"";return`${n.value}${e}`}function Zb(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Fn(e.params,t.params)||n.paramsSubject.next(t.params),function Un(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fn(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Fn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Sp(n,e){const t=Fn(n.params,e.params)&&function jb(n,e){return Ns(n,e)&&n.every((t,r)=>Fn(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Sp(n.parent,e.parent))}function iv(n){return"string"==typeof n.title||null===n.title}let Ap=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Se,this.activateEvents=new m.bkB,this.deactivateEvents=new m.bkB,this.attachEvents=new m.bkB,this.detachEvents=new m.bkB,this.parentContexts=(0,m.WQX)(xl),this.location=(0,m.WQX)(m.c1b),this.changeDetector=(0,m.WQX)(m.gRc),this.inputBinder=(0,m.WQX)(ov,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new m.wOt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new m.wOt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new m.wOt(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new m.wOt(4013,!1);this._activatedRoute=t;const s=this.location,d=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,g=new lh(t,f,s.injector);this.activated=s.createComponent(d,{index:s.length,injector:g,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=m.FsC({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[m.OA$]})}return n})();class lh{__ngOutletInjector(e){return new lh(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ol?this.route:e===xl?this.childContexts:this.parent.get(e,t)}}const ov=new m.nKC("");let Jb=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=xu([r.queryParams,r.params,r.data]).pipe(Gi(([u,d,f],g)=>(f={...u,...d,...f},0===g?cn(f):Promise.resolve(f)))).subscribe(u=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const d=(0,m.HJs)(r.component);if(d)for(const{templateName:f}of d.inputs)t.activatedComponentRef.setInput(f,u[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();function dh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function jD(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return dh(n,r,s);return dh(n,r)})}(n,e,t);return new ua(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(f=>dh(n,f)),d}}const r=function UD(n){return new Ol(new Di.t(n.url),new Di.t(n.params),new Di.t(n.queryParams),new Di.t(n.fragment),new Di.t(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>dh(n,u));return new ua(r,s)}}class sv{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}}const av="ngNavigationCancelingError";function cv(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Al(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=qi(!1,ls.Redirect);return s.url=t,s.navigationBehaviorOptions=r,s}function qi(n,e){const t=new Error(`NavigationCancelingError: ${n||""}`);return t[av]=!0,t.cancellationCode=e,t}function Fr(n){return!!n&&n[av]}class dM{constructor(e,t,r,s,u){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s,this.inputBindingEnabled=u}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Zb(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=Ml(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,s[d],r),delete s[d]}),Object.values(s).forEach(u=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const d=r.getContext(s.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Ml(e);for(const d of Object.values(u))this.deactivateRouteAndItsChildren(d,s);if(r&&r.outlet){const d=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:f})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=Ml(e);for(const d of Object.values(u))this.deactivateRouteAndItsChildren(d,s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const s=Ml(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new sM(u.value.snapshot))}),e.children.length&&this.forwardEvent(new TF(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Zb(s),s===u)if(s.component){const d=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const d=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const f=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),Zb(f.route.value),this.activateChildRoutes(e,null,d.children)}else d.attachRef=null,d.route=s,d.outlet&&d.outlet.activateWith(s,d.injector),this.activateChildRoutes(e,null,d.children)}else this.activateChildRoutes(e,null,r)}}class $D{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Rp{constructor(e,t){this.component=e,this.route=t}}function HD(n,e,t){const r=n._root;return Mp(r,e?e._root:null,t,[r.value])}function Ho(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,m.LfX)(n)?e.get(n):n:r}function Mp(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=Ml(e);return n.children.forEach(d=>{(function uv(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,f=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const g=function lv(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ns(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ns(n.url,e.url)||!Fn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Sp(n,e)||!Fn(n.queryParams,e.queryParams);default:return!Sp(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);g?s.canActivateChecks.push(new $D(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Mp(n,e,u.component?f?f.children:null:t,r,s),g&&f&&f.outlet&&f.outlet.isActivated&&s.canDeactivateChecks.push(new Rp(f.outlet.component,d))}else d&&ku(e,f,s),s.canActivateChecks.push(new $D(r)),Mp(n,null,u.component?f?f.children:null:t,r,s)})(d,u[d.value.outlet],t,r.concat([d.value]),s),delete u[d.value.outlet]}),Object.entries(u).forEach(([d,f])=>ku(f,t.getContext(d),s)),s}function ku(n,e,t){const r=Ml(n),s=n.value;Object.entries(r).forEach(([u,d])=>{ku(d,s.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Rp(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function Nl(n){return"function"==typeof n}function dv(n){return n instanceof sh.G||"EmptyError"===n?.name}const Pp=Symbol("INITIAL_VALUE");function fh(){return Gi(n=>xu(n.map(e=>e.pipe(Gr(1),(0,Tl.Z)(Pp)))).pipe((0,kn.T)(e=>{for(const t of e)if(!0!==t){if(t===Pp)return Pp;if(!1===t||pM(t))return t}return!0}),(0,wr.p)(e=>e!==Pp),Gr(1)))}function pM(n){return Al(n)||n instanceof sv}function hv(n){return(0,zg.F)(On(e=>{if("boolean"!=typeof e)throw cv(0,e)}),(0,kn.T)(e=>!0===e))}class WD{constructor(e){this.segmentGroup=e||null}}class Fp extends Error{constructor(e){super(),this.urlTree=e}}function Fl(n){return Bc(new WD(n))}class pv{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return cn(r);if(s.numberOfChildren>1||!s.children[Se])return Bc(new m.wOt(4e3,!1));s=s.children[Se]}}applyRedirectCommands(e,t,r,s,u){if("string"!=typeof t){const f=t,{queryParams:g,fragment:D,routeConfig:S,url:P,outlet:j,params:Q,data:we,title:Me}=s,Re=(0,m.N4e)(u,()=>f({params:Q,data:we,queryParams:g,fragment:D,routeConfig:S,url:P,outlet:j,title:Me}));if(Re instanceof us)throw new Fp(Re);t=Re}const d=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if("/"===t[0])throw new Fp(d);return d}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new us(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([s,u])=>{if("string"==typeof u&&":"===u[0]){const f=u.substring(1);r[s]=t[f]}else r[s]=u}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let d={};return Object.entries(t.children).forEach(([f,g])=>{d[f]=this.createSegmentGroup(e,g,r,s)}),new Tn(u,d)}createSegments(e,t,r,s){return t.map(u=>":"===u.path[0]?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new m.wOt(4001,!1);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}const Lp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function GD(n,e,t,r,s){const u=ph(n,e,t);return u.matched?(r=function aM(n,e){return n.providers&&!n._injector&&(n._injector=(0,m.Ol2)(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function fv(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?cn(s.map(d=>{const f=Ho(d,n);return or(function fM(n){return n&&Nl(n.canMatch)}(f)?f.canMatch(e,t):(0,m.N4e)(n,()=>f(e,t)))})).pipe(fh(),hv()):cn(!0)}(r,e,t).pipe((0,kn.T)(d=>!0===d?u:{...Lp}))):cn(u)}function ph(n,e,t){if("**"===e.path)return function rE(n){return{matched:!0,parameters:n.length>0?jo(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Lp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||mn)(t,n,e);if(!s)return{...Lp};const u={};Object.entries(s.posParams??{}).forEach(([f,g])=>{u[f]=g.path});const d=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:s.posParams??{}}}function qD(n,e,t,r){return t.length>0&&function YD(n,e,t){return t.some(r=>mv(n,e,r)&&ca(r)!==Se)}(n,t,r)?{segmentGroup:new Tn(e,XD(r,new Tn(t,n.children))),slicedSegments:[]}:0===t.length&&function ZD(n,e,t){return t.some(r=>mv(n,e,r))}(n,t,r)?{segmentGroup:new Tn(n.segments,QD(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Tn(n.segments,n.children),slicedSegments:t}}function QD(n,e,t,r){const s={};for(const u of t)if(mv(n,e,u)&&!r[ca(u)]){const d=new Tn([],{});s[ca(u)]=d}return{...r,...s}}function XD(n,e){const t={};t[Se]=e;for(const r of n)if(""===r.path&&ca(r)!==Se){const s=new Tn([],{});t[ca(r)]=s}return t}function mv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class _M{}class mh{constructor(e,t,r,s,u,d,f){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=s,this.urlTree=u,this.paramsInheritanceStrategy=d,this.urlSerializer=f,this.applyRedirects=new pv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new m.wOt(4002,`'${e.segmentGroup}'`)}recognize(){const e=qD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe((0,kn.T)(({children:t,rootSnapshot:r})=>{const s=new ua(r,t),u=new VD("",s),d=function RD(n,e,t=null,r=null){return zb(Qg(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,u.url=this.urlSerializer.serialize(d),{state:u,tree:d}}))}match(e){const t=new la([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),Se,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Se,t).pipe((0,kn.T)(r=>({children:r,rootSnapshot:t})),y(r=>{if(r instanceof Fp)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof WD?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,s,u){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r,u):this.processSegment(e,t,r,r.segments,s,!0,u).pipe((0,kn.T)(d=>d instanceof ua?[d]:[]))}processChildren(e,t,r,s){const u=[];for(const d of Object.keys(r.children))"primary"===d?u.unshift(d):u.push(d);return(0,yi.H)(u).pipe(Ra(d=>{const f=r.children[d],g=function Tp(n,e){const t=n.filter(r=>ca(r)===e);return t.push(...n.filter(r=>ca(r)!==e)),t}(t,d);return this.processSegmentGroup(e,g,f,d,s)}),function C(n,e){return(0,Mi.N)(function b(n,e,t,r,s){return(u,d)=>{let f=t,g=e,D=0;u.subscribe((0,ui._)(d,S=>{const P=D++;g=f?n(g,S,P):(f=!0,S),r&&d.next(g)},s&&(()=>{f&&d.next(g),d.complete()})))}}(n,e,arguments.length>=2,!0))}((d,f)=>(d.push(...f),d)),ch(null),function O(n,e){const t=arguments.length>=2;return r=>r.pipe(n?(0,wr.p)((s,u)=>n(s,u,r)):Lc.D,w(1),t?ch(e):Kg(()=>new sh.G))}(),(0,bi.Z)(d=>{if(null===d)return Fl(r);const f=tC(d);return function gh(n){n.sort((e,t)=>e.value.outlet===Se?-1:t.value.outlet===Se?1:e.value.outlet.localeCompare(t.value.outlet))}(f),cn(f)}))}processSegment(e,t,r,s,u,d,f){return(0,yi.H)(t).pipe(Ra(g=>this.processSegmentAgainstRoute(g._injector??e,t,g,r,s,u,d,f).pipe(y(D=>{if(D instanceof WD)return cn(null);throw D}))),Aa(g=>!!g),y(g=>{if(dv(g))return function Ll(n,e,t){return 0===e.length&&!n.children[t]}(r,s,u)?cn(new _M):Fl(r);throw g}))}processSegmentAgainstRoute(e,t,r,s,u,d,f,g){return function gv(n,e,t,r){return!!(ca(n)===r||r!==Se&&mv(e,t,n))&&ph(e,n,t).matched}(r,s,u,d)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,s,r,u,d,g):this.allowRedirects&&f?this.expandSegmentAgainstRouteUsingRedirect(e,s,t,r,u,d,g):Fl(s):Fl(s)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,d,f){const{matched:g,parameters:D,consumedSegments:S,positionalParamSegments:P,remainingSegments:j}=ph(t,s,u);if(!g)return Fl(t);"string"==typeof s.redirectTo&&"/"===s.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const Q=new la(u,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vv(s),ca(s),s.component??s._loadedComponent??null,s,nC(s)),we=ds(Q,f,this.paramsInheritanceStrategy);Q.params=Object.freeze(we.params),Q.data=Object.freeze(we.data);const Me=this.applyRedirects.applyRedirectCommands(S,s.redirectTo,P,Q,e);return this.applyRedirects.lineralizeSegments(s,Me).pipe((0,bi.Z)(Re=>this.processSegment(e,r,t,Re.concat(j),d,!1,f)))}matchSegmentAgainstRoute(e,t,r,s,u,d){const f=GD(t,r,s,e);return"**"===r.path&&(t.children={}),f.pipe(Gi(g=>g.matched?this.getChildConfig(e=r._injector??e,r,s).pipe(Gi(({routes:D})=>{const S=r._loadedInjector??e,{parameters:P,consumedSegments:j,remainingSegments:Q}=g,we=new la(j,P,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,vv(r),ca(r),r.component??r._loadedComponent??null,r,nC(r)),Me=ds(we,d,this.paramsInheritanceStrategy);we.params=Object.freeze(Me.params),we.data=Object.freeze(Me.data);const{segmentGroup:Re,slicedSegments:gt}=qD(t,j,Q,D);if(0===gt.length&&Re.hasChildren())return this.processChildren(S,D,Re,we).pipe((0,kn.T)(Dt=>new ua(we,Dt)));if(0===D.length&&0===gt.length)return cn(new ua(we,[]));const Et=ca(r)===u;return this.processSegment(S,D,Re,gt,Et?Se:u,!0,we).pipe((0,kn.T)(Dt=>new ua(we,Dt instanceof ua?[Dt]:[])))})):Fl(t)))}getChildConfig(e,t,r){return t.children?cn({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?cn({routes:t._loadedRoutes,injector:t._loadedInjector}):function gM(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?cn(!0):cn(s.map(d=>{const f=Ho(d,n);return or(function KD(n){return n&&Nl(n.canLoad)}(f)?f.canLoad(e,t):(0,m.N4e)(n,()=>f(e,t)))})).pipe(fh(),hv())}(e,t,r).pipe((0,bi.Z)(s=>s?this.configLoader.loadChildren(e,t).pipe(On(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function vM(n){return Bc(qi(!1,ls.GuardRejected))}())):cn({routes:[],injector:e})}}function Oi(n){const e=n.value.routeConfig;return e&&""===e.path}function tC(n){const e=[],t=new Set;for(const r of n){if(!Oi(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=tC(r.children);e.push(new ua(r.value,s))}return e.filter(r=>!t.has(r))}function vv(n){return n.data||{}}function nC(n){return n.resolve||{}}function iC(n){const e=n.children.map(t=>iC(t)).flat();return[n,...e]}function bv(n){return Gi(e=>{const t=n(e);return t?(0,yi.H)(t).pipe((0,kn.T)(()=>e)):cn(e)})}let sC=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Se);return r}getResolvedTitleForRoute(t){return t.data[wt]}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:()=>(0,m.WQX)(bM),providedIn:"root"})}return n})(),bM=(()=>{class n extends sC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(Ob))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const vh=new m.nKC("",{providedIn:"root",factory:()=>({})});let oE=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["ng-component"]],standalone:!0,features:[m.aNF],decls:1,vars:0,template:function(r,s){1&r&&m.nrm(0,"router-outlet")},dependencies:[Ap],encapsulation:2})}return n})();function sE(n){const e=n.children&&n.children.map(sE),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Se&&(t.component=oE),t}const Vl=new m.nKC("");let aE=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,m.WQX)(m.Ql9)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return cn(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=or(t.loadComponent()).pipe((0,kn.T)(cE),On(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Y(()=>{this.componentLoaders.delete(t)})),s=new li(r,()=>new Vn.B).pipe(yp());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return cn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=function EM(n,e,t,r){return or(n.loadChildren()).pipe((0,kn.T)(cE),(0,bi.Z)(s=>s instanceof m.Co$||Array.isArray(s)?cn(s):(0,yi.H)(e.compileModuleAsync(s))),(0,kn.T)(s=>{r&&r(n);let u,d,f=!1;return Array.isArray(s)?(d=s,!0):(u=s.create(t).injector,d=u.get(Vl,[],{optional:!0,self:!0}).flat()),{routes:d.map(sE),injector:u}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(Y(()=>{this.childrenLoaders.delete(r)})),d=new li(u,()=>new Vn.B).pipe(yp());return this.childrenLoaders.set(r,d),d}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function cE(n){return function NF(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ev=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:()=>(0,m.WQX)(Pi),providedIn:"root"})}return n})(),Pi=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const wM=new m.nKC(""),aC=new m.nKC("");function kF(n,e,t){const r=n.get(aC),s=n.get(de);return n.get(m.SKi).runOutsideAngular(()=>{if(!s.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(D=>setTimeout(D));let u;const d=new Promise(D=>{u=D}),f=s.startViewTransition(()=>(u(),function cC(n){return new Promise(e=>{(0,m.mal)({read:()=>setTimeout(e)},{injector:n})})}(n))),{onViewTransitionCreated:g}=r;return g&&(0,m.N4e)(n,()=>g({transition:f,from:e,to:t})),d})}const IM=new m.nKC("");let _h=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Vn.B,this.transitionAbortSubject=new Vn.B,this.configLoader=(0,m.WQX)(aE),this.environmentInjector=(0,m.WQX)(m.uvJ),this.urlSerializer=(0,m.WQX)(Ao),this.rootContexts=(0,m.WQX)(xl),this.location=(0,m.WQX)(pe),this.inputBindingEnabled=null!==(0,m.WQX)(ov,{optional:!0}),this.titleStrategy=(0,m.WQX)(sC),this.options=(0,m.WQX)(vh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=(0,m.WQX)(Ev),this.createViewTransition=(0,m.WQX)(wM,{optional:!0}),this.navigationErrorHandler=(0,m.WQX)(IM,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>cn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new qb(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new tv(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,s){return this.transitions=new Di.t({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:fo,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,wr.p)(u=>0!==u.id),(0,kn.T)(u=>({...u,extractedUrl:this.urlHandlingStrategy.extract(u.rawUrl)})),Gi(u=>{let d=!1,f=!1;return cn(u).pipe(Gi(g=>{if(this.navigationId>u.id)return this.cancelNavigationTransition(u,"",ls.SupersededByNewNavigation),cs.w;this.currentTransition=u,this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,targetBrowserUrl:"string"==typeof g.extras.browserUrl?this.urlSerializer.parse(g.extras.browserUrl):g.extras.browserUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null};const D=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!D&&"reload"!==(g.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const P="";return this.events.next(new oc(g.id,this.urlSerializer.serialize(g.rawUrl),P,Ip.IgnoredSameUrlNavigation)),g.resolve(!1),cs.w}if(this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return cn(g).pipe(Gi(P=>{const j=this.transitions?.getValue();return this.events.next(new Jg(P.id,this.urlSerializer.serialize(P.extractedUrl),P.source,P.restoredState)),j!==this.transitions?.getValue()?cs.w:Promise.resolve(P)}),function rC(n,e,t,r,s,u){return(0,bi.Z)(d=>function JD(n,e,t,r,s,u,d="emptyOnly"){return new mh(n,e,t,r,s,d,u).recognize()}(n,e,t,r,d.extractedUrl,s,u).pipe((0,kn.T)(({state:f,tree:g})=>({...d,targetSnapshot:f,urlAfterRedirects:g}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),On(P=>{u.targetSnapshot=P.targetSnapshot,u.urlAfterRedirects=P.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:P.urlAfterRedirects};const j=new Cp(P.id,this.urlSerializer.serialize(P.extractedUrl),this.urlSerializer.serialize(P.urlAfterRedirects),P.targetSnapshot);this.events.next(j)}));if(D&&this.urlHandlingStrategy.shouldProcessUrl(g.currentRawUrl)){const{id:P,extractedUrl:j,source:Q,restoredState:we,extras:Me}=g,Re=new Jg(P,this.urlSerializer.serialize(j),Q,we);this.events.next(Re);const gt=Ro(this.rootComponentType).snapshot;return this.currentTransition=u={...g,targetSnapshot:gt,urlAfterRedirects:j,extras:{...Me,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.finalUrl=j,cn(u)}{const P="";return this.events.next(new oc(g.id,this.urlSerializer.serialize(g.extractedUrl),P,Ip.IgnoredByUrlHandlingStrategy)),g.resolve(!1),cs.w}}),On(g=>{const D=new ev(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(D)}),(0,kn.T)(g=>(this.currentTransition=u={...g,guards:HD(g.targetSnapshot,g.currentSnapshot,this.rootContexts)},u)),function MF(n,e){return(0,bi.Z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?cn({...t,guardsResult:!0}):function OF(n,e,t,r){return(0,yi.H)(n).pipe((0,bi.Z)(s=>function kp(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?cn(u.map(f=>{const g=$o(e)??s,D=Ho(f,g);return or(function Op(n){return n&&Nl(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):(0,m.N4e)(g,()=>D(n,e,t,r))).pipe(Aa())})).pipe(fh()):cn(!0)}(s.component,s.route,t,e,r)),Aa(s=>!0!==s,!0))}(d,r,s,n).pipe((0,bi.Z)(f=>f&&function zD(n){return"boolean"==typeof n}(f)?function tE(n,e,t,r){return(0,yi.H)(e).pipe(Ra(s=>(0,ah.x)(function nE(n,e){return null!==n&&e&&e(new PD(n)),cn(!0)}(s.route.parent,r),function kl(n,e){return null!==n&&e&&e(new oM(n)),cn(!0)}(s.route,r),function mM(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function xp(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Mu(()=>cn(d.guards.map(g=>{const D=$o(d.node)??t,S=Ho(g,D);return or(function hh(n){return n&&Nl(n.canActivateChild)}(S)?S.canActivateChild(r,n):(0,m.N4e)(D,()=>S(r,n))).pipe(Aa())})).pipe(fh())));return cn(u).pipe(fh())}(n,s.path,t),function Np(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return cn(!0);const s=r.map(u=>Mu(()=>{const d=$o(e)??t,f=Ho(u,d);return or(function hM(n){return n&&Nl(n.canActivate)}(f)?f.canActivate(e,n):(0,m.N4e)(d,()=>f(e,n))).pipe(Aa())}));return cn(s).pipe(fh())}(n,s.route,t))),Aa(s=>!0!==s,!0))}(r,u,n,e):cn(f)),(0,kn.T)(f=>({...t,guardsResult:f})))})}(this.environmentInjector,g=>this.events.next(g)),On(g=>{if(u.guardsResult=g.guardsResult,g.guardsResult&&"boolean"!=typeof g.guardsResult)throw cv(0,g.guardsResult);const D=new Gb(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.events.next(D)}),(0,wr.p)(g=>!!g.guardsResult||(this.cancelNavigationTransition(g,"",ls.GuardRejected),!1)),bv(g=>{if(g.guards.canActivateChecks.length)return cn(g).pipe(On(D=>{const S=new Uc(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(S)}),Gi(D=>{let S=!1;return cn(D).pipe(function _v(n,e){return(0,bi.Z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return cn(t);const u=new Set(s.map(g=>g.route)),d=new Set;for(const g of u)if(!d.has(g))for(const D of iC(g))d.add(D);let f=0;return(0,yi.H)(d).pipe(Ra(g=>u.has(g)?function oC(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!iv(s)&&(u[wt]=s.title),function iE(n,e,t,r){const s=lr(n);if(0===s.length)return cn({});const u={};return(0,yi.H)(s).pipe((0,bi.Z)(d=>function yv(n,e,t,r){const s=$o(e)??r,u=Ho(n,s);return or(u.resolve?u.resolve(e,t):(0,m.N4e)(s,()=>u(e,t)))}(n[d],e,t,r).pipe(Aa(),On(f=>{if(f instanceof sv)throw cv(new Ou,f);u[d]=f}))),w(1),B(u),y(d=>dv(d)?cs.w:Bc(d)))}(u,n,e,r).pipe((0,kn.T)(d=>(n._resolvedData=d,n.data=ds(n,n.parent,t).resolve,null)))}(g,r,n,e):(g.data=ds(g,g.parent,n).resolve,cn(void 0))),On(()=>f++),w(1),(0,bi.Z)(g=>f===d.size?cn(t):cs.w))})}(this.paramsInheritanceStrategy,this.environmentInjector),On({next:()=>S=!0,complete:()=>{S||this.cancelNavigationTransition(D,"",ls.NoDataFromResolver)}}))}),On(D=>{const S=new xn(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(S)}))}),bv(g=>{const D=S=>{const P=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&P.push(this.configLoader.loadComponent(S.routeConfig).pipe(On(j=>{S.component=j}),(0,kn.T)(()=>{})));for(const j of S.children)P.push(...D(j));return P};return xu(D(g.targetSnapshot.root)).pipe(ch(null),Gr(1))}),bv(()=>this.afterPreactivation()),Gi(()=>{const{currentSnapshot:g,targetSnapshot:D}=u,S=this.createViewTransition?.(this.environmentInjector,g.root,D.root);return S?(0,yi.H)(S).pipe((0,kn.T)(()=>u)):cn(u)}),(0,kn.T)(g=>{const D=function eE(n,e,t){const r=dh(n,e._root,t?t._root:void 0);return new Yb(r,e)}(t.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return this.currentTransition=u={...g,targetRouterState:D},this.currentNavigation.targetRouterState=D,u}),On(()=>{this.events.next(new nv)}),((n,e,t,r)=>(0,kn.T)(s=>(new dM(e,s.targetRouterState,s.currentRouterState,t,r).activate(n),s)))(this.rootContexts,t.routeReuseStrategy,g=>this.events.next(g),this.inputBindingEnabled),Gr(1),On({next:g=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ci(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects))),this.titleStrategy?.updateTitle(g.targetRouterState.snapshot),g.resolve(!0)},complete:()=>{d=!0}}),ve(this.transitionAbortSubject.pipe(On(g=>{throw g}))),Y(()=>{!d&&!f&&this.cancelNavigationTransition(u,"",ls.SupersededByNewNavigation),this.currentTransition?.id===u.id&&(this.currentNavigation=null,this.currentTransition=null)}),y(g=>{if(f=!0,Fr(g))this.events.next(new Nu(u.id,this.urlSerializer.serialize(u.extractedUrl),g.message,g.cancellationCode)),function Pl(n){return Fr(n)&&Al(n.url)}(g)?this.events.next(new sc(g.url,g.navigationBehaviorOptions)):u.resolve(!1);else{const D=new Dp(u.id,this.urlSerializer.serialize(u.extractedUrl),g,u.targetSnapshot??void 0);try{const S=(0,m.N4e)(this.environmentInjector,()=>this.navigationErrorHandler?.(D));if(S instanceof sv){const{message:P,cancellationCode:j}=cv(0,S);this.events.next(new Nu(u.id,this.urlSerializer.serialize(u.extractedUrl),P,j)),this.events.next(new sc(S.redirectTo,S.navigationBehaviorOptions))}else{this.events.next(D);const P=t.errorHandler(g);u.resolve(!!P)}}catch(S){this.options.resolveNavigationPromiseOnError?u.resolve(!1):u.reject(S)}}return cs.w}))}))}cancelNavigationTransition(t,r,s){const u=new Nu(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ma(n){return n!==fo}let uC=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:()=>(0,m.WQX)(DM),providedIn:"root"})}return n})();class Vp{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let DM=(()=>{class n extends Vp{static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=m.xGo(n)))(s||n)}})();static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),lC=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:()=>(0,m.WQX)(dC),providedIn:"root"})}return n})(),dC=(()=>{class n extends lC{constructor(){super(...arguments),this.location=(0,m.WQX)(pe),this.urlSerializer=(0,m.WQX)(Ao),this.options=(0,m.WQX)(vh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=(0,m.WQX)(Ev),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new us,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ro(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Jg)this.stateMemento=this.createStateMemento();else if(t instanceof oc)this.rawUrlTree=r.initialUrl;else if(t instanceof Cp){if("eager"===this.urlUpdateStrategy&&!r.extras.skipLocationChange){const s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else t instanceof nv?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Nu&&(t.code===ls.GuardRejected||t.code===ls.NoDataFromResolver)?this.restoreHistory(r):t instanceof Dp?this.restoreHistory(r,!0):t instanceof Ci&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){const s=t instanceof us?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const d={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",d)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-this.browserPageId;0!==u?this.location.historyGo(u):this.currentUrlTree===t.finalUrl&&0===u&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static#e=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=m.xGo(n)))(s||n)}})();static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var wv=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(wv||{});function CM(n,e){n.events.pipe((0,wr.p)(t=>t instanceof Ci||t instanceof Nu||t instanceof Dp||t instanceof oc),(0,kn.T)(t=>t instanceof Ci||t instanceof oc?wv.COMPLETE:t instanceof Nu&&(t.code===ls.Redirect||t.code===ls.SupersededByNewNavigation)?wv.REDIRECTING:wv.FAILED),(0,wr.p)(t=>t!==wv.REDIRECTING),Gr(1)).subscribe(()=>{e()})}function FF(n){throw n}const LF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},VF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let cc=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=(0,m.WQX)(m.H3F),this.stateManager=(0,m.WQX)(lC),this.options=(0,m.WQX)(vh,{optional:!0})||{},this.pendingTasks=(0,m.WQX)(m.TgB),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=(0,m.WQX)(_h),this.urlSerializer=(0,m.WQX)(Ao),this.location=(0,m.WQX)(pe),this.urlHandlingStrategy=(0,m.WQX)(Ev),this._events=new Vn.B,this.errorHandler=this.options.errorHandler||FF,this.navigated=!1,this.routeReuseStrategy=(0,m.WQX)(uC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=(0,m.WQX)(Vl,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!(0,m.WQX)(ov,{optional:!0}),this.eventsSubscription=new Wi.yU,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const s=this.navigationTransitions.currentTransition,u=this.navigationTransitions.currentNavigation;if(null!==s&&null!==u)if(this.stateManager.handleRouterEvent(r,u),r instanceof Nu&&r.code!==ls.Redirect&&r.code!==ls.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ci)this.navigated=!0;else if(r instanceof sc){const d=r.navigationBehaviorOptions,f=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),g={browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||"eager"===this.urlUpdateStrategy||Ma(s.source),...d};this.scheduleNavigation(f,fo,null,g,{resolve:s.resolve,reject:s.reject,promise:s.promise})}(function Bp(n){return!(n instanceof nv||n instanceof sc)})(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},d=s?.navigationId?s:null;if(s){const g={...s};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(u.state=g)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,d,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(sE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:d,queryParamsHandling:f,preserveFragment:g}=r,D=g?this.currentUrlTree.fragment:d;let P,S=null;switch(f){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}null!==S&&(S=this.removeEmptyProps(S));try{P=Qg(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),P=this.currentUrlTree.root}return zb(P,t,S,D??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Al(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,fo,null,r)}navigate(t,r={skipLocationChange:!1}){return function yh(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new m.wOt(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let s;if(s=!0===r?{...LF}:!1===r?{...VF}:r,Al(t))return an(this.currentUrlTree,t,s);const u=this.parseUrl(t);return an(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.entries(t).reduce((r,[s,u])=>(null!=u&&(r[s]=u),r),{})}scheduleNavigation(t,r,s,u,d){if(this.disposed)return Promise.resolve(!1);let f,g,D;d?(f=d.resolve,g=d.reject,D=d.promise):D=new Promise((P,j)=>{f=P,g=j});const S=this.pendingTasks.add();return CM(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:f,reject:g,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(P=>Promise.reject(P))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jp=(()=>{class n{constructor(t,r,s,u,d,f){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=u,this.el=d,this.locationStrategy=f,this.href=null,this.onChanges=new Vn.B,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;const g=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===g||"area"===g,this.isAnchorElement?this.subscription=t.events.subscribe(D=>{D instanceof Ci&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=Al(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,s,u,d){const f=this.urlTree;return!!(null===f||this.isAnchorElement&&(0!==t||r||s||u||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(f,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.href=null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;const r=null===this.href?null:(0,m.n$t)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){const s=this.renderer,u=this.el.nativeElement;null!==r?s.setAttribute(u,t,r):s.removeAttribute(u,t)}get urlTree(){return null===this.routerLinkInput?null:Al(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static#e=this.\u0275fac=function(r){return new(r||n)(m.rXU(cc),m.rXU(Ol),m.kS0("tabindex"),m.rXU(m.sFG),m.rXU(m.aKT),m.rXU(ee))};static#t=this.\u0275dir=m.FsC({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){1&r&&m.bIt("click",function(d){return s.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),2&r&&m.BMQ("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",m.L39],skipLocationChange:[2,"skipLocationChange","skipLocationChange",m.L39],replaceUrl:[2,"replaceUrl","replaceUrl",m.L39],routerLink:"routerLink"},standalone:!0,features:[m.GFd,m.OA$]})}return n})();class hC{}let Iv=(()=>{class n{constructor(t,r,s,u,d){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe((0,wr.p)(t=>t instanceof Ci),Ra(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,m.Ol2)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,f=u._loadedInjector??d;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(d,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(f,u.children??u._loadedRoutes))}return(0,yi.H)(s).pipe((0,st.U)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):cn(null);const u=s.pipe((0,bi.Z)(d=>null===d?cn(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,yi.H)([u,d]).pipe((0,st.U)())}return u})}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(cc),m.KVO(m.Ql9),m.KVO(m.uvJ),m.KVO(hC),m.KVO(aE))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const jl=new m.nKC("");let fC=(()=>{class n{constructor(t,r,s,u,d={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=(0,m.WQX)(m.uvJ),d.scrollPositionRestoration||="disabled",d.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Jg?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ci?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof oc&&t.code===Ip.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ND&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){var s=this;this.zone.runOutsideAngular((0,nt.A)(function*(){yield new Promise(u=>{setTimeout(()=>{u()}),(0,m.mal)(()=>{u()},{injector:s.environmentInjector})}),s.zone.run(()=>{s.transitions.events.next(new ND(t,"popstate"===s.lastSource?s.store[s.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static#e=this.\u0275fac=function(r){m.QTQ()};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();function ks(n,e){return{\u0275kind:n,\u0275providers:e}}function mC(){const n=(0,m.WQX)(m.zZn);return e=>{const t=n.get(m.o8S);if(e!==t.components[0])return;const r=n.get(cc),s=n.get(lE);1===n.get(dE)&&r.initialNavigation(),n.get(hE,null,m.$GK.Optional)?.setUpPreloading(),n.get(jl,null,m.$GK.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const lE=new m.nKC("",{factory:()=>new Vn.B}),dE=new m.nKC("",{providedIn:"root",factory:()=>1}),hE=new m.nKC("");function Cv(n){return ks(0,[{provide:hE,useExisting:Iv},{provide:hC,useExisting:n}])}function vC(n){return ks(9,[{provide:wM,useValue:kF},{provide:aC,useValue:{skipNextTransition:!!n?.skipInitialTransition,...n}}])}const _C=new m.nKC("ROUTER_FORROOT_GUARD"),yC=[pe,{provide:Ao,useClass:Ou},cc,xl,{provide:Ol,useFactory:function uE(n){return n.routerState.root},deps:[cc]},aE,[]];let bC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[yC,[],{provide:Vl,multi:!0,useValue:t},{provide:_C,useFactory:xM,deps:[[cc,new m.Xx1,new m.kdw]]},{provide:vh,useValue:r||{}},r?.useHash?{provide:ee,useClass:Oe}:{provide:ee,useClass:Te},{provide:jl,useFactory:()=>{const n=(0,m.WQX)(bu),e=(0,m.WQX)(m.SKi),t=(0,m.WQX)(vh),r=(0,m.WQX)(_h),s=(0,m.WQX)(Ao);return t.scrollOffset&&n.setOffset(t.scrollOffset),new fC(s,r,n,e,t)}},r?.preloadingStrategy?Cv(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?MM(r):[],r?.bindToComponentInputs?ks(8,[Jb,{provide:ov,useExisting:Jb}]).\u0275providers:[],r?.enableViewTransitions?vC().\u0275providers:[],[{provide:IC,useFactory:mC},{provide:m.iLQ,multi:!0,useExisting:IC}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Vl,multi:!0,useValue:t}]}}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(_C,8))};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({})}return n})();function xM(n){return"guarded"}function MM(n){return["disabled"===n.initialNavigation?ks(3,[{provide:m.hnV,multi:!0,useFactory:()=>{const e=(0,m.WQX)(cc);return()=>{e.setUpLocationChangeListener()}}},{provide:dE,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?ks(2,[{provide:dE,useValue:0},{provide:m.hnV,multi:!0,deps:[m.zZn],useFactory:e=>{const t=e.get(qe,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(cc),u=e.get(lE);CM(s,()=>{r(!0)}),e.get(_h).afterPreactivation=()=>(r(!0),u.closed?cn(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const IC=new m.nKC("");var DC=M(9182),CC=M(5908),VM=M(5672),BM=M(4395),TC=M(7396),SC=M(3896),Eh=M(2284),zc=M(7650),AC={RxSchema:DC.wJ.prototype,RxDocument:CC.ky,RxQuery:VM.Mh.prototype,RxCollection:BM.wm.prototype,RxDatabase:TC.lB.prototype},pE=new Set,RC=new Set;function jM(n){if((0,Eh.Xi)("preAddRxPlugin",{plugin:n,plugins:pE}),!pE.has(n)){if(RC.has(n.name))throw(0,zc.Br)("PL3",{name:n.name,plugin:n});if(pE.add(n),RC.add(n.name),!n.rxdb)throw(0,zc.JX)("PL1",{plugin:n});n.init&&n.init(),n.prototypes&&Object.entries(n.prototypes).forEach(([e,t])=>t(AC[e])),n.overwritable&&Object.assign(SC.h,n.overwritable),n.hooks&&Object.entries(n.hooks).forEach(([e,t])=>{t.after&&Eh.r[e].push(t.after),t.before&&Eh.r[e].unshift(t.before)})}}var mE=M(5505);const gE=Symbol.for("Dexie"),wh=globalThis[gE]||(globalThis[gE]=mE);if(mE.semVer!==wh.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${mE.semVer} and ${wh.semVer}`);var MC=M(9403),Qi=M(6434),Tv=M(1744),Ko=M(7176),fs=M(1885),Kc="docs",Av="attachments",Up=new Map,Wc=new Map;function $l(){return($l=(0,nt.A)(function*(n){var e=yield n,r=Wc.get(n)-1;0===r?(e.dexieDb.close(),Wc.delete(n)):Wc.set(n,r)})).apply(this,arguments)}var $p="__";function xv(n){var e=n.split(".");if(e.length>1)return e.map(r=>xv(r)).join(".");if(n.startsWith("|")){var t=n.substring(1);return $p+t}return n}function Mv(n){var e=n.split(".");return e.length>1?e.map(r=>Mv(r)).join("."):n.startsWith($p)?"|"+n.substring($p.length):n}function Hp(n,e){return e&&(e=Ov(e=(0,Qi.FD)(e)),n.forEach(t=>{var r=(0,Tv.UU)(e,t);(0,Tv.oq)(e,t,r?"1":"0")}),e)}function OC(n,e){return e&&(e=yE(e=(0,Qi.FD)(e)),n.forEach(t=>{var r=(0,Tv.UU)(e,t);(0,Tv.oq)(e,t,"1"===r)}),e)}function Ov(n){if(!n||"string"==typeof n||"number"==typeof n||"boolean"==typeof n)return n;if(Array.isArray(n))return n.map(t=>Ov(t));if("object"==typeof n){var e={};return Object.entries(n).forEach(([t,r])=>{"object"==typeof r&&(r=Ov(r)),e[xv(t)]=r}),e}}function yE(n){if(!n||"string"==typeof n||"number"==typeof n||"boolean"==typeof n)return n;if(Array.isArray(n))return n.map(t=>yE(t));if("object"==typeof n){var e={};return Object.entries(n).forEach(([t,r])=>{("object"==typeof r||Array.isArray(n))&&(r=yE(r)),e[Mv(t)]=r}),e}}function $M(n){var e=[],t=(0,fs.xQ)(n.primaryKey);e.push([t]),e.push(["_deleted",t]),n.indexes&&n.indexes.forEach(u=>{var d=(0,Ko.$r)(u);e.push(d)}),e.push(["_meta.lwt",t]),e.push(["_meta.lwt"]);var r=(e=e.map(u=>u.map(d=>xv(d)))).map(u=>1===u.length?u[0]:"["+u.join("+")+"]");return(r=r.filter((u,d,f)=>f.indexOf(u)===d)).join(", ")}function Pv(n,e){return Nv.apply(this,arguments)}function Nv(){return(Nv=(0,nt.A)(function*(n,e){var t=yield n;return(yield t.dexieTable.bulkGet(e)).map(s=>OC(t.booleanIndexes,s))})).apply(this,arguments)}function kv(n,e){return n+"||"+e}function HM(n){var e=new Set,t=[];return n.indexes?(n.indexes.forEach(r=>{(0,Ko.$r)(r).forEach(u=>{e.has(u)||(e.add(u),"boolean"===(0,fs.nT)(n,u).type&&t.push(u))})}),t.push("_deleted"),(0,Ko.jw)(t)):t}var uc=M(4552),zp=M(7014),bE=M(6243),ii=M(8663),zM=M(997),KM=M(5365);function Dh(n){return n===zM.OK?-1/0:n}function PC(n,e,t){return n.includes(e)?t===zM.g0||!0===t?"1":"0":t}function Kp(n,e,t){if(!t){if(typeof window>"u")throw new Error("IDBKeyRange missing");t=window.IDBKeyRange}var r=e.startKeys.map((d,f)=>PC(n,e.index[f],d)).map(Dh),s=e.endKeys.map((d,f)=>PC(n,e.index[f],d)).map(Dh);return t.bound(r,s,!e.inclusiveStart,!e.inclusiveEnd)}function Fv(n,e){return Lv.apply(this,arguments)}function Lv(){return Lv=(0,nt.A)(function*(n,e){var t=yield n.internals,r=e.query,s=r.skip?r.skip:0,d=s+(r.limit?r.limit:1/0),f=e.queryPlan,g=!1;f.selectorSatisfiedByIndex||(g=(0,KM.Lr)(n.schema,e.query));var D=Kp(t.booleanIndexes,f,t.dexieDb._options.IDBKeyRange),S=f.index,P=[];if(yield t.dexieDb.transaction("r",t.dexieTable,function(){var Q=(0,nt.A)(function*(we){var Et,Re=we.idbtrans.objectStore(Kc);Et="["+S.map(Ht=>xv(Ht)).join("+")+"]";var Dt=Re.index(Et).openCursor(D);yield new Promise(Ht=>{Dt.onsuccess=function(wn){var un=wn.target.result;if(un){var Fe=OC(t.booleanIndexes,un.value);(!g||g(Fe))&&P.push(Fe),f.sortSatisfiedByIndex&&P.length===d?Ht():un.continue()}else Ht()}})});return function(we){return Q.apply(this,arguments)}}()),!f.sortSatisfiedByIndex){var j=(0,KM.Xw)(n.schema,e.query);P=P.sort(j)}return{documents:P=P.slice(s,d)}}),Lv.apply(this,arguments)}function Vv(){return Vv=(0,nt.A)(function*(n,e){var t=yield n.internals,r=e.queryPlan,s=r.index,u=Kp(t.booleanIndexes,r,t.dexieDb._options.IDBKeyRange),d=-1;return yield t.dexieDb.transaction("r",t.dexieTable,function(){var f=(0,nt.A)(function*(g){var j,S=g.idbtrans.objectStore(Kc);j="["+s.map(we=>xv(we)).join("+")+"]";var Q=S.index(j).count(u);d=yield new Promise((we,Me)=>{Q.onsuccess=function(){we(Q.result)},Q.onerror=Re=>Me(Re)})});return function(g){return f.apply(this,arguments)}}()),d}),Vv.apply(this,arguments)}var po=M(6893);const{isArray:NC}=Array;Promise.resolve(!1);var LC=Promise.resolve(!0),da=Promise.resolve();function Gc(n,e){return n||(n=0),new Promise(function(t){return setTimeout(function(){return t(e)},n)})}function Fu(){return Math.random().toString(36).substring(2)}var Gp=0;function lc(){var n=1e3*Date.now();return n<=Gp&&(n=Gp+1),Gp=n,n}var XM={create:function jv(n){var e={time:lc(),messagesCallback:null,bc:new BroadcastChannel(n),subFns:[]};return e.bc.onmessage=function(t){e.messagesCallback&&e.messagesCallback(t.data)},e},close:function EE(n){n.bc.close(),n.subFns=[]},onMessage:function jC(n,e){n.messagesCallback=e},postMessage:function BC(n,e){try{return n.bc.postMessage(e,!1),da}catch(t){return Promise.reject(t)}},canBeUsed:function UC(){if(typeof globalThis<"u"&&globalThis.Deno&&globalThis.Deno.args)return!0;if((typeof window<"u"||typeof self<"u")&&"function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1},type:"native",averageResponseTime:function Hl(){return 150},microSeconds:lc},$C=M(9556);function wE(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=JSON.parse(JSON.stringify(n));return typeof e.webWorkerSupport>"u"&&(e.webWorkerSupport=!0),e.idb||(e.idb={}),e.idb.ttl||(e.idb.ttl=45e3),e.idb.fallbackInterval||(e.idb.fallbackInterval=150),n.idb&&"function"==typeof n.idb.onclose&&(e.idb.onclose=n.idb.onclose),e.localstorage||(e.localstorage={}),e.localstorage.removeTimeout||(e.localstorage.removeTimeout=6e4),n.methods&&(e.methods=n.methods),e.node||(e.node={}),e.node.ttl||(e.node.ttl=12e4),e.node.maxParallelWrites||(e.node.maxParallelWrites=2048),typeof e.node.useFastPath>"u"&&(e.node.useFastPath=!0),e}var Ni="messages",dc={durability:"relaxed"};function HC(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Uv(n){n.commit&&n.commit()}function qp(n){n.closed||Ch(n).then(function(){return Gc(n.options.idb.fallbackInterval)}).then(function(){return qp(n)})}function Ch(n){return n.closed||!n.messagesCallback?da:function zC(n,e){var t=n.transaction(Ni,"readonly",dc),r=t.objectStore(Ni),s=[],u=IDBKeyRange.bound(e+1,1/0);if(r.getAll){var d=r.getAll(u);return new Promise(function(g,D){d.onerror=function(S){return D(S)},d.onsuccess=function(S){g(S.target.result)}})}return new Promise(function(g,D){var S=function f(){try{return u=IDBKeyRange.bound(e+1,1/0),r.openCursor(u)}catch{return r.openCursor()}}();S.onerror=function(P){return D(P)},S.onsuccess=function(P){var j=P.target.result;j?j.value.id<e+1?j.continue(e+1):(s.push(j.value),j.continue()):(Uv(t),g(s))}})}(n.db,n.lastCursorId).then(function(e){var t=e.filter(function(r){return!!r}).map(function(r){return r.id>n.lastCursorId&&(n.lastCursorId=r.id),r}).filter(function(r){return function qc(n,e){return!(n.uuid===e.uuid||e.eMIs.has(n.id)||n.data.time<e.messagesCallbackTime)}(r,n)}).sort(function(r,s){return r.time-s.time});return t.forEach(function(r){n.messagesCallback&&(n.eMIs.add(r.id),n.messagesCallback(r.data))}),da})}var JF={create:function oO(n,e){return e=wE(e),function eO(n){var r=HC().open("pubkey.broadcast-channel-0-"+n);return r.onupgradeneeded=function(s){s.target.result.createObjectStore(Ni,{keyPath:"id",autoIncrement:!0})},new Promise(function(s,u){r.onerror=function(d){return u(d)},r.onsuccess=function(){s(r.result)}})}(n).then(function(t){var r={closed:!1,lastCursorId:0,channelName:n,options:e,uuid:Fu(),eMIs:new $C.p4(2*e.idb.ttl),writeBlockPromise:da,messagesCallback:null,readQueuePromises:[],db:t};return t.onclose=function(){r.closed=!0,e.idb.onclose&&e.idb.onclose()},qp(r),r})},close:function KC(n){n.closed=!0,n.db.close()},onMessage:function GC(n,e,t){n.messagesCallbackTime=t,n.messagesCallback=e,Ch(n)},postMessage:function WC(n,e){return n.writeBlockPromise=n.writeBlockPromise.then(function(){return function tO(n,e,t){var s={uuid:e,time:Date.now(),data:t},u=n.transaction([Ni],"readwrite",dc);return new Promise(function(d,f){u.oncomplete=function(){return d()},u.onerror=function(D){return f(D)},u.objectStore(Ni).add(s),Uv(u)})}(n.db,n.uuid,e)}).then(function(){0===function VC(n,e){return Math.floor(Math.random()*(e-n+1)+n)}(0,10)&&function iO(n){return function rO(n,e){var t=Date.now()-e,r=n.transaction(Ni,"readonly",dc),s=r.objectStore(Ni),u=[];return new Promise(function(d){s.openCursor().onsuccess=function(f){var g=f.target.result;if(g){var D=g.value;D.time<t?(u.push(D),g.continue()):(Uv(r),d(u))}else d(u)}})}(n.db,n.options.idb.ttl).then(function(e){return function nO(n,e){if(n.closed)return Promise.resolve([]);var r=n.db.transaction(Ni,"readwrite",dc).objectStore(Ni);return Promise.all(e.map(function(s){var u=r.delete(s);return new Promise(function(d){u.onsuccess=function(){return d()}})}))}(n,e.map(function(t){return t.id}))})}(n)}),n.writeBlockPromise},canBeUsed:function YF(){return!!HC()},type:"idb",averageResponseTime:function ZF(n){return 2*n.idb.fallbackInterval},microSeconds:lc};function sO(){var n;if(typeof window>"u")return null;try{n=window.localStorage,n=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return n}function CE(n){return"pubkey.broadcastChannel-"+n}function TE(){var n=sO();if(!n)return!1;try{var e="__broadcastchannel_check";n.setItem(e,"works"),n.removeItem(e)}catch{return!1}return!0}var fO={create:function lO(n,e){if(e=wE(e),!TE())throw new Error("BroadcastChannel: localstorage cannot be used");var t=Fu(),r=new $C.p4(e.localstorage.removeTimeout),s={channelName:n,uuid:t,eMIs:r};return s.listener=function cO(n,e){var t=CE(n),r=function(u){u.key===t&&e(JSON.parse(u.newValue))};return window.addEventListener("storage",r),r}(n,function(u){s.messagesCallback&&u.uuid!==t&&(!u.token||r.has(u.token)||u.data.time&&u.data.time<s.messagesCallbackTime||(r.add(u.token),s.messagesCallback(u.data)))}),s},close:function dO(n){!function uO(n){window.removeEventListener("storage",n)}(n.listener)},onMessage:function qC(n,e,t){n.messagesCallbackTime=t,n.messagesCallback=e},postMessage:function aO(n,e){return new Promise(function(t){Gc().then(function(){var r=CE(n.channelName),s={token:Fu(),time:Date.now(),data:e,uuid:n.uuid},u=JSON.stringify(s);sO().setItem(r,u);var d=document.createEvent("Event");d.initEvent("storage",!0,!0),d.key=r,d.newValue=u,window.dispatchEvent(d),t()})})},canBeUsed:TE,type:"localstorage",averageResponseTime:function hO(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120},microSeconds:lc},SE=lc,Hv=new Set,vO={create:function AE(n){var e={time:SE(),name:n,messagesCallback:null};return Hv.add(e),e},close:function pO(n){Hv.delete(n)},onMessage:function gO(n,e){n.messagesCallback=e},postMessage:function mO(n,e){return new Promise(function(t){return setTimeout(function(){Array.from(Hv).forEach(function(s){s.name===n.name&&s!==n&&s.messagesCallback&&s.time<e.time&&s.messagesCallback(e)}),t()},5)})},canBeUsed:function QC(){return!0},type:"simulate",averageResponseTime:function XC(){return 5},microSeconds:SE},YC=[XM,JF,fO],ZC=new Set,JC=0,eT=function(e,t){this.id=JC++,ZC.add(this),this.name=e,this.options=wE(t),this.method=function _O(n){var e=[].concat(n.methods,YC).filter(Boolean);if(n.type){if("simulate"===n.type)return vO;var t=e.find(function(s){return s.type===n.type});if(t)return t;throw new Error("method-type "+n.type+" not found")}n.webWorkerSupport||(e=e.filter(function(s){return"idb"!==s.type}));var r=e.find(function(s){return s.canBeUsed()});if(r)return r;throw new Error("No usable method found in "+JSON.stringify(YC.map(function(s){return s.type})))}(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,function yO(n){var e=n.method.create(n.name,n.options);!function FC(n){return n&&"function"==typeof n.then}(e)?n._state=e:(n._prepP=e,e.then(function(t){n._state=t}))}(this)};function tT(n,e,t){var s={time:n.method.microSeconds(),type:e,data:t};return(n._prepP?n._prepP:da).then(function(){var d=n.method.postMessage(n._state,s);return n._uMP.add(d),d.catch().then(function(){return n._uMP.delete(d)}),d})}function RE(n){return n._addEL.message.length>0||n._addEL.internal.length>0}function nT(n,e,t){n._addEL[e].push(t),function bO(n){if(!n._iL&&RE(n)){var e=function(s){n._addEL[s.type].forEach(function(u){s.time>=u.time&&u.fn(s.data)})},t=n.method.microSeconds();n._prepP?n._prepP.then(function(){n._iL=!0,n.method.onMessage(n._state,e,t)}):(n._iL=!0,n.method.onMessage(n._state,e,t))}}(n)}function rT(n,e,t){n._addEL[e]=n._addEL[e].filter(function(r){return r!==t}),function EO(n){if(n._iL&&!RE(n)){n._iL=!1;var e=n.method.microSeconds();n.method.onMessage(n._state,null,e)}}(n)}eT._pubkey=!0,eT.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return tT(this,"message",e)},postInternal:function(e){return tT(this,"internal",e)},set onmessage(n){var t={time:this.method.microSeconds(),fn:n};rT(this,"message",this._onML),n&&"function"==typeof n?(this._onML=t,nT(this,"message",t)):this._onML=null},addEventListener:function(e,t){nT(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){rT(this,e,this._addEL[e].find(function(s){return s.fn===t}))},close:function(){var e=this;if(!this.closed){ZC.delete(this),this.closed=!0;var t=this._prepP?this._prepP:da;return this._onML=null,this._addEL.message=[],t.then(function(){return Promise.all(Array.from(e._uMP))}).then(function(){return Promise.all(e._befC.map(function(r){return r()}))}).then(function(){return e.method.close(e._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};var zv=new Map;function iT(n,e,t,r){var s=zv.get(e);return s||(s={bc:new eT(["RxDB:",n,t].join("|")),refs:new Set},zv.set(e,s)),s.refs.add(r),s.bc}function Qp(n,e){var t=zv.get(n);if(t&&(t.refs.delete(e),0===t.refs.size))return zv.delete(n),t.bc.close()}function nL(n,e,t,r){if(e.multiInstance){var s=r||iT(n,e.databaseInstanceToken,t.databaseName,t),u=new Vn.B,d=j=>{j.storageName===n&&j.databaseName===e.databaseName&&j.collectionName===e.collectionName&&j.version===e.schema.version&&u.next(j.eventBulk)};s.addEventListener("message",d);var f=t.changeStream(),g=!1,D=f.subscribe(j=>{g||s.postMessage({storageName:n,databaseName:e.databaseName,collectionName:e.collectionName,version:e.schema.version,eventBulk:j})});t.changeStream=function(){return u.asObservable().pipe(function Bv(...n){return function kC(...n){const e=(0,ih.lI)(n),t=(0,ih.R0)(n,1/0);return n=function Wp(n){return 1===n.length&&NC(n[0])?n[0]:n}(n),(0,Mi.N)((r,s)=>{(0,st.U)(t)((0,yi.H)([r,...n],e)).subscribe(s)})}(...n)}(f))};var S=t.close.bind(t);t.close=(0,nt.A)(function*(){return g=!0,D.unsubscribe(),s.removeEventListener("message",d),r||(yield Qp(e.databaseInstanceToken,t)),S()});var P=t.remove.bind(t);t.remove=(0,nt.A)(function*(){return g=!0,D.unsubscribe(),s.removeEventListener("message",d),r||(yield Qp(e.databaseInstanceToken,t)),P()})}}var rL=(0,uc.t)(),Xp=!1,iL=function(){function n(t,r,s,u,d,f,g,D){this.changes$=new Vn.B,this.instanceId=rL++,this.storage=t,this.databaseName=r,this.collectionName=s,this.schema=u,this.internals=d,this.options=f,this.settings=g,this.devMode=D,this.primaryPath=(0,fs.xQ)(this.schema.primaryKey)}var e=n.prototype;return e.bulkWrite=function(){var t=(0,nt.A)(function*(s,u){var d=this;Th(this),!Xp&&(!zp.P.premium||"string"!=typeof zp.P.premium||(yield(0,bE.V0)(zp.P.premium))!==zp.Y)&&console.warn(["-------------- RxDB Open Core RxStorage -------------------------------","You are using the free Dexie.js based RxStorage implementation from RxDB https://rxdb.info/rx-storage-dexie.html?console=dexie ","While this is a great option, we want to let you know that there are faster storage solutions available in our premium plugins.","For professional users and production environments, we highly recommend considering these premium options to enhance performance and reliability."," https://rxdb.info/premium?console=dexie ","If you already purchased premium access you can disable this log by calling the setPremiumFlag() function from rxdb-premium/plugins/shared.","---------------------------------------------------------------------"].join("\n")),Xp=!0,s.forEach(j=>{if(!j.document._rev||j.previous&&!j.previous._rev)throw(0,zc.Br)("SNH",{args:{row:j}})});var f=yield this.internals,g={error:[]};this.devMode&&(s=s.map(j=>{var Q=(0,po.C9)(j.document);return{previous:j.previous,document:Q}}));var S,D=s.map(j=>j.document[this.primaryPath]);if(yield f.dexieDb.transaction("rw",f.dexieTable,f.dexieAttachmentsTable,(0,nt.A)(function*(){var j=new Map;(yield Pv(d.internals,D)).forEach(Re=>{var gt=Re;return gt&&j.set(gt[d.primaryPath],gt),gt}),S=(0,po.gi)(d,d.primaryPath,j,s,u),g.error=S.errors;var we=[];S.bulkInsertDocs.forEach(Re=>{we.push(Re.document)}),S.bulkUpdateDocs.forEach(Re=>{we.push(Re.document)}),(we=we.map(Re=>Hp(f.booleanIndexes,Re))).length>0&&(yield f.dexieTable.bulkPut(we));var Me=[];S.attachmentsAdd.forEach(Re=>{Me.push({id:kv(Re.documentId,Re.attachmentId),data:Re.attachmentData.data})}),S.attachmentsUpdate.forEach(Re=>{Me.push({id:kv(Re.documentId,Re.attachmentId),data:Re.attachmentData.data})}),yield f.dexieAttachmentsTable.bulkPut(Me),yield f.dexieAttachmentsTable.bulkDelete(S.attachmentsRemove.map(Re=>kv(Re.documentId,Re.attachmentId)))})),(S=(0,ii.ZN)(S)).eventBulk.events.length>0){var P=(0,ii.ZN)(S.newestRow).document;S.eventBulk.checkpoint={id:P[this.primaryPath],lwt:P._meta.lwt},S.eventBulk.endTime=(0,uc.t)(),this.changes$.next(S.eventBulk)}return g});return function r(s,u){return t.apply(this,arguments)}}(),e.findDocumentsById=function(){var t=(0,nt.A)(function*(s,u){var d=this;Th(this);var f=yield this.internals,g=[];return yield f.dexieDb.transaction("r",f.dexieTable,(0,nt.A)(function*(){(yield Pv(d.internals,s)).forEach(S=>{S&&(!S._deleted||u)&&g.push(S)})})),g});return function r(s,u){return t.apply(this,arguments)}}(),e.query=function(r){return Th(this),Fv(this,r)},e.count=function(){var t=(0,nt.A)(function*(s){if(s.queryPlan.selectorSatisfiedByIndex){var u=yield function WM(n,e){return Vv.apply(this,arguments)}(this,s);return{count:u,mode:"fast"}}return{count:(yield Fv(this,s)).documents.length,mode:"slow"}});return function r(s){return t.apply(this,arguments)}}(),e.changeStream=function(){return Th(this),this.changes$.asObservable()},e.cleanup=function(){var t=(0,nt.A)(function*(s){var u=this;Th(this);var d=yield this.internals;return yield d.dexieDb.transaction("rw",d.dexieTable,(0,nt.A)(function*(){var f=(0,uc.t)()-s,g=yield d.dexieTable.where("_meta.lwt").below(f).toArray(),D=[];g.forEach(S=>{"1"===S._deleted&&D.push(S[u.primaryPath])}),yield d.dexieTable.bulkDelete(D)})),!0});return function r(s){return t.apply(this,arguments)}}(),e.getAttachmentData=function(){var t=(0,nt.A)(function*(s,u,d){Th(this);var f=yield this.internals,g=kv(s,u);return yield f.dexieDb.transaction("r",f.dexieAttachmentsTable,(0,nt.A)(function*(){var D=yield f.dexieAttachmentsTable.get(g);if(D)return D.data;throw new Error("attachment missing documentId: "+s+" attachmentId: "+u)}))});return function r(s,u,d){return t.apply(this,arguments)}}(),e.remove=function(){var t=(0,nt.A)(function*(){Th(this);var s=yield this.internals;return yield s.dexieTable.clear(),this.close()});return function r(){return t.apply(this,arguments)}}(),e.close=function(){var r=this;return this.closed||(this.closed=(0,nt.A)(function*(){r.changes$.complete(),yield function Rv(n){return $l.apply(this,arguments)}(r.internals)})()),this.closed},e.conflictResultionTasks=function(){return new Vn.B},e.resolveConflictResultionTask=function(){var t=(0,nt.A)(function*(s){});return function r(s){return t.apply(this,arguments)}}(),n}();function oT(){return(oT=(0,nt.A)(function*(n,e,t){var r=function _E(n,e,t,r){var s="rxdb-dexie-"+n+"--"+r.version+"--"+e,u=(0,MC.q)(Up,s,()=>{var d=(0,nt.A)(function*(){var f=(0,Qi.FD)(t);f.autoOpen=!1;var g=new wh(s,f),D={[Kc]:$M(r),changes:"++sequence, id",[Av]:"id"};return g.version(1).stores(D),yield g.open(),{dexieDb:g,dexieTable:g[Kc],dexieAttachmentsTable:g[Av],booleanIndexes:HM(r)}})();return Up.set(s,u),Wc.set(u,0),d});return u}(e.databaseName,e.collectionName,t,e.schema),s=new iL(n,e.databaseName,e.collectionName,e.schema,r,e.options,t,e.devMode);return yield nL("dexie",e,s),Promise.resolve(s)})).apply(this,arguments)}function Th(n){if(n.closed)throw new Error("RxStorageInstanceDexie is closed "+n.databaseName+"-"+n.collectionName)}var sL=M(6052),wO=function(){function n(t){this.name="dexie",this.rxdbVersion=sL.o,this.settings=t}return n.prototype.createStorageInstance=function(r){return(0,po.pZ)(r),function oL(n,e,t){return oT.apply(this,arguments)}(this,r,this.settings)},n}();function Kv(n={}){return new wO(n)}var Wv=M(6719),Gv=M(203);const aT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=63&s|128):55296==(64512&s)&&r+1<n.length&&56320==(64512&n.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&n.charCodeAt(++r)),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=63&s|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=63&s|128)}return e},Kl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const u=n[s],d=s+1<n.length,f=d?n[s+1]:0,g=s+2<n.length,D=g?n[s+2]:0;let j=(15&f)<<2|D>>6,Q=63&D;g||(Q=64,d||(j=64)),r.push(t[u>>2],t[(3&u)<<4|f>>4],t[j],t[Q])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(aT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const u=n[t++];e[r++]=String.fromCharCode((31&s)<<6|63&u)}else if(s>239&&s<365){const g=((7&s)<<18|(63&n[t++])<<12|(63&n[t++])<<6|63&n[t++])-65536;e[r++]=String.fromCharCode(55296+(g>>10)),e[r++]=String.fromCharCode(56320+(1023&g))}else{const u=n[t++],d=n[t++];e[r++]=String.fromCharCode((15&s)<<12|(63&u)<<6|63&d)}}return e.join("")}(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const u=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const D=s<n.length?t[n.charAt(s)]:64;++s;const P=s<n.length?t[n.charAt(s)]:64;if(++s,null==u||null==f||null==D||null==P)throw new Fs;r.push(u<<2|f>>4),64!==D&&(r.push(f<<4&240|D>>2),64!==P&&r.push(D<<6&192|P))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Fs extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Yp=function(n){return function(n){const e=aT(n);return Kl.encodeByteArray(e,!0)}(n).replace(/\./g,"")},Sh=()=>{try{return function lT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const n=process.env.__FIREBASE_DEFAULTS__;return n?JSON.parse(n):void 0})()||(()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&function(n){try{return Kl.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n[1]);return e&&JSON.parse(e)})()}catch(n){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`)}},Wl=()=>{var n;return null===(n=Sh())||void 0===n?void 0:n.config};class ME{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}class ql extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,ql.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kE.prototype.create)}}class kE{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,u=this.errors[e],d=u?function MO(n,e){return n.replace(hL,(t,r)=>{const s=e[r];return null!=s?String(s):`<${r}?>`})}(u,r):"Error";return new ql(s,`${this.serviceName}: ${d} (${s}).`,r)}}const hL=/\{\$([^}]+)}/g;function Qc(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const u=n[s],d=e[s];if(LE(u)&&LE(d)){if(!Qc(u,d))return!1}else if(u!==d)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function LE(n){return null!==n&&"object"==typeof n}function Wo(n){return n&&n._delegate?n._delegate:n}class rm{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ql="[DEFAULT]";class $O{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new ME;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e?.identifier),s=null!==(t=e?.optional)&&void 0!==t&&t;if(!this.isInitialized(r)&&!this.shouldAutoInitialize()){if(s)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:r})}catch(u){if(s)return null;throw u}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function HO(n){return"EAGER"===n.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Ql})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:s});r.resolve(u)}catch{}}}}clearInstance(e=Ql){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,nt.A)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=Ql){return this.instances.has(e)}getOptions(e=Ql){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[u,d]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(u)&&d.resolve(s);return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),u=null!==(r=this.onInitCallbacks.get(s))&&void 0!==r?r:new Set;u.add(e),this.onInitCallbacks.set(s,u);const d=this.instances.get(s);return d&&e(d,s),()=>{u.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e,n===Ql?void 0:n),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}var n;return r||null}normalizeInstanceIdentifier(e=Ql){return this.component?this.component.multipleInstances?e:Ql:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class zO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new $O(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const $E=[];var ar=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ar||{});const HE={debug:ar.DEBUG,verbose:ar.VERBOSE,info:ar.INFO,warn:ar.WARN,error:ar.ERROR,silent:ar.SILENT},TT=ar.INFO,KO={[ar.DEBUG]:"log",[ar.VERBOSE]:"log",[ar.INFO]:"info",[ar.WARN]:"warn",[ar.ERROR]:"error"},WO=(n,e,...t)=>{if(e<n.logLevel)return;const r=(new Date).toISOString(),s=KO[e];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[s](`[${r}]  ${n.name}:`,...t)};class Go{constructor(e){this.name=e,this._logLevel=TT,this._logHandler=WO,this._userLogHandler=null,$E.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ar))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?HE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ar.DEBUG,...e),this._logHandler(this,ar.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ar.VERBOSE,...e),this._logHandler(this,ar.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ar.INFO,...e),this._logHandler(this,ar.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ar.WARN,...e),this._logHandler(this,ar.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ar.ERROR,...e),this._logHandler(this,ar.ERROR,...e)}}const bL=(n,e)=>e.some(t=>n instanceof t);let Zv,zE;const ST=new WeakMap,Jv=new WeakMap,AT=new WeakMap,KE=new WeakMap,im=new WeakMap;let WE={get(n,e,t){if(n instanceof IDBTransaction){if("done"===e)return Jv.get(n);if("objectStoreNames"===e)return n.objectStoreNames||AT.get(n);if("store"===e)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return fc(n[e])},set:(n,e,t)=>(n[e]=t,!0),has:(n,e)=>n instanceof IDBTransaction&&("done"===e||"store"===e)||e in n};function hc(n){return"function"==typeof n?function ZO(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function qO(){return zE||(zE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(n)?function(...e){return n.apply(GE(this),e),fc(ST.get(this))}:function(...e){return fc(n.apply(GE(this),e))}:function(e,...t){const r=n.call(GE(this),e,...t);return AT.set(r,e.sort?e.sort():[e]),fc(r)}}(n):(n instanceof IDBTransaction&&function XO(n){if(Jv.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",u),n.removeEventListener("error",d),n.removeEventListener("abort",d)},u=()=>{t(),s()},d=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",u),n.addEventListener("error",d),n.addEventListener("abort",d)});Jv.set(n,e)}(n),bL(n,function GO(){return Zv||(Zv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(n,WE):n)}function fc(n){if(n instanceof IDBRequest)return function QO(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",u),n.removeEventListener("error",d)},u=()=>{t(fc(n.result)),s()},d=()=>{r(n.error),s()};n.addEventListener("success",u),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&ST.set(t,n)}).catch(()=>{}),im.set(e,n),e}(n);if(KE.has(n))return KE.get(n);const e=hc(n);return e!==n&&(KE.set(n,e),im.set(e,n)),e}const GE=n=>im.get(n),RT=["get","getKey","getAll","getAllKeys","count"],e_=["put","add","delete","clear"],om=new Map;function tP(n,e){if(!(n instanceof IDBDatabase)||e in n||"string"!=typeof e)return;if(om.get(e))return om.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=e_.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!RT.includes(t))return;const u=function(){var d=(0,nt.A)(function*(f,...g){const D=this.transaction(f,s?"readwrite":"readonly");let S=D.store;return r&&(S=S.index(g.shift())),(yield Promise.all([S[t](...g),s&&D.done]))[0]});return function(g){return d.apply(this,arguments)}}();return om.set(e,u),u}!function YO(n){WE=n(WE)}(n=>({...n,get:(e,t,r)=>tP(e,t)||n.get(e,t,r),has:(e,t)=>!!tP(e,t)||n.has(e,t)}));class xT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(function MT(n){const e=n.getComponent();return"VERSION"===e?.type}(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}return null}).filter(t=>t).join(" ")}}const sm="@firebase/app",Xc=new Go("@firebase/app"),n_="[DEFAULT]",pP={[sm]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/vertexai-preview":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},Vu=new Map,Yl=new Map,Oh=new Map;function Ph(n,e){try{n.container.addComponent(e)}catch(t){Xc.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Bu(n){const e=n.name;if(Oh.has(e))return Xc.debug(`There were multiple attempts to register component ${e}.`),!1;Oh.set(e,n);for(const t of Vu.values())Ph(t,n);for(const t of Yl.values())Ph(t,n);return!0}const Pa=new kE("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class vP{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rm("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pa.create("app-deleted",{appName:this._name})}}function bP(n,e={}){let t=n;"object"!=typeof e&&(e={name:e});const r=Object.assign({name:n_,automaticDataCollectionEnabled:!1},e),s=r.name;if("string"!=typeof s||!s)throw Pa.create("bad-app-name",{appName:String(s)});if(t||(t=Wl()),!t)throw Pa.create("no-options");const u=Vu.get(s);if(u){if(Qc(t,u.options)&&Qc(r,u.config))return u;throw Pa.create("duplicate-app",{appName:s})}const d=new zO(s);for(const g of Oh.values())d.addComponent(g);const f=new vP(t,r,d);return Vu.set(s,f),f}function Zc(n,e,t){var r;let s=null!==(r=pP[n])&&void 0!==r?r:n;t&&(s+=`-${t}`);const u=s.match(/\s|\//),d=e.match(/\s|\//);if(u||d){const f=[`Unable to register library "${s}" with version "${e}":`];return u&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),u&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void Xc.warn(f.join(" "))}Bu(new rm(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const o_="firebase-heartbeat-database",UT=1,Jc="firebase-heartbeat-store";let s_=null;function $T(){return s_||(s_=function JO(n,e,{blocked:t,upgrade:r,blocking:s,terminated:u}={}){const d=indexedDB.open(n,e),f=fc(d);return r&&d.addEventListener("upgradeneeded",g=>{r(fc(d.result),g.oldVersion,g.newVersion,fc(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{u&&g.addEventListener("close",()=>u()),s&&g.addEventListener("versionchange",D=>s(D.oldVersion,D.newVersion,D))}).catch(()=>{}),f}(o_,UT,{upgrade:(n,e)=>{if(0===e)try{n.createObjectStore(Jc)}catch(t){console.warn(t)}}}).catch(n=>{throw Pa.create("idb-open",{originalErrorMessage:n.message})})),s_}function a_(){return(a_=(0,nt.A)(function*(n){try{const t=(yield $T()).transaction(Jc),r=yield t.objectStore(Jc).get(JE(n));return yield t.done,r}catch(e){if(e instanceof ql)Xc.warn(e.message);else{const t=Pa.create("idb-get",{originalErrorMessage:e?.message});Xc.warn(t.message)}}})).apply(this,arguments)}function ZE(n,e){return c_.apply(this,arguments)}function c_(){return(c_=(0,nt.A)(function*(n,e){try{const r=(yield $T()).transaction(Jc,"readwrite");yield r.objectStore(Jc).put(e,JE(n)),yield r.done}catch(t){if(t instanceof ql)Xc.warn(t.message);else{const r=Pa.create("idb-set",{originalErrorMessage:t?.message});Xc.warn(r.message)}}})).apply(this,arguments)}function JE(n){return`${n.name}!${n.options.appId}`}class DP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new TP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){var e=this;return(0,nt.A)(function*(){var t,r;const u=e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=Nh();if((null!=(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(e._heartbeatsCache=yield e._heartbeatsCachePromise,null!=(null===(r=e._heartbeatsCache)||void 0===r?void 0:r.heartbeats)))&&e._heartbeatsCache.lastSentHeartbeatDate!==d&&!e._heartbeatsCache.heartbeats.some(f=>f.date===d))return e._heartbeatsCache.heartbeats.push({date:d,agent:u}),e._heartbeatsCache.heartbeats=e._heartbeatsCache.heartbeats.filter(f=>{const g=new Date(f.date).valueOf();return Date.now()-g<=2592e6}),e._storage.overwrite(e._heartbeatsCache)})()}getHeartbeatsHeader(){var e=this;return(0,nt.A)(function*(){var t;if(null===e._heartbeatsCache&&(yield e._heartbeatsCachePromise),null==(null===(t=e._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===e._heartbeatsCache.heartbeats.length)return"";const r=Nh(),{heartbeatsToSend:s,unsentEntries:u}=function CP(n,e=1024){const t=[];let r=n.slice();for(const s of n){const u=t.find(d=>d.agent===s.agent);if(u){if(u.dates.push(s.date),HT(t)>e){u.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),HT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}(e._heartbeatsCache.heartbeats),d=Yp(JSON.stringify({version:2,heartbeats:s}));return e._heartbeatsCache.lastSentHeartbeatDate=r,u.length>0?(e._heartbeatsCache.heartbeats=u,yield e._storage.overwrite(e._heartbeatsCache)):(e._heartbeatsCache.heartbeats=[],e._storage.overwrite(e._heartbeatsCache)),d})()}}function Nh(){return(new Date).toISOString().substring(0,10)}class TP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,nt.A)(function*(){return!!function gT(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function NE(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var u;e((null===(u=s.error)||void 0===u?void 0:u.message)||"")}}catch(t){e(t)}})}().then(()=>!0).catch(()=>!1)})()}read(){var e=this;return(0,nt.A)(function*(){if(yield e._canUseIndexedDBPromise){const r=yield function cm(n){return a_.apply(this,arguments)}(e.app);return r?.heartbeats?r:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(e){var t=this;return(0,nt.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const u=yield t.read();return ZE(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:u.lastSentHeartbeatDate,heartbeats:e.heartbeats})}})()}add(e){var t=this;return(0,nt.A)(function*(){var r;if(yield t._canUseIndexedDBPromise){const u=yield t.read();return ZE(t.app,{lastSentHeartbeatDate:null!==(r=e.lastSentHeartbeatDate)&&void 0!==r?r:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...e.heartbeats]})}})()}}function HT(n){return Yp(JSON.stringify({version:2,heartbeats:n})).length}!function u_(n){Bu(new rm("platform-logger",e=>new xT(e),"PRIVATE")),Bu(new rm("heartbeat",e=>new DP(e),"PRIVATE")),Zc(sm,"0.10.7",n),Zc(sm,"0.10.7","esm2017"),Zc("fire-js","")}("");var ju,zT,e0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t0={};(function(){var n;function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function s(Fe,ue,Ie){Ie||(Ie=0);var Le=Array(16);if("string"==typeof ue)for(var ze=0;16>ze;++ze)Le[ze]=ue.charCodeAt(Ie++)|ue.charCodeAt(Ie++)<<8|ue.charCodeAt(Ie++)<<16|ue.charCodeAt(Ie++)<<24;else for(ze=0;16>ze;++ze)Le[ze]=ue[Ie++]|ue[Ie++]<<8|ue[Ie++]<<16|ue[Ie++]<<24;var it=Fe.g[3],Ee=(ue=Fe.g[0])+(it^(Ie=Fe.g[1])&((ze=Fe.g[2])^it))+Le[0]+3614090360&4294967295;Ee=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=(Ie=(ze=(it=(ue=Ie+(Ee<<7&4294967295|Ee>>>25))+((Ee=it+(ze^ue&(Ie^ze))+Le[1]+3905402710&4294967295)<<12&4294967295|Ee>>>20))+((Ee=ze+(Ie^it&(ue^Ie))+Le[2]+606105819&4294967295)<<17&4294967295|Ee>>>15))+((Ee=Ie+(ue^ze&(it^ue))+Le[3]+3250441966&4294967295)<<22&4294967295|Ee>>>10))+((Ee=ue+(it^Ie&(ze^it))+Le[4]+4118548399&4294967295)<<7&4294967295|Ee>>>25))+((Ee=it+(ze^ue&(Ie^ze))+Le[5]+1200080426&4294967295)<<12&4294967295|Ee>>>20))+((Ee=ze+(Ie^it&(ue^Ie))+Le[6]+2821735955&4294967295)<<17&4294967295|Ee>>>15))+((Ee=Ie+(ue^ze&(it^ue))+Le[7]+4249261313&4294967295)<<22&4294967295|Ee>>>10))+((Ee=ue+(it^Ie&(ze^it))+Le[8]+1770035416&4294967295)<<7&4294967295|Ee>>>25))+((Ee=it+(ze^ue&(Ie^ze))+Le[9]+2336552879&4294967295)<<12&4294967295|Ee>>>20))+((Ee=ze+(Ie^it&(ue^Ie))+Le[10]+4294925233&4294967295)<<17&4294967295|Ee>>>15))+((Ee=Ie+(ue^ze&(it^ue))+Le[11]+2304563134&4294967295)<<22&4294967295|Ee>>>10))+((Ee=ue+(it^Ie&(ze^it))+Le[12]+1804603682&4294967295)<<7&4294967295|Ee>>>25))+((Ee=it+(ze^ue&(Ie^ze))+Le[13]+4254626195&4294967295)<<12&4294967295|Ee>>>20))+((Ee=ze+(Ie^it&(ue^Ie))+Le[14]+2792965006&4294967295)<<17&4294967295|Ee>>>15))+((Ee=Ie+(ue^ze&(it^ue))+Le[15]+1236535329&4294967295)<<22&4294967295|Ee>>>10))+((Ee=ue+(ze^it&(Ie^ze))+Le[1]+4129170786&4294967295)<<5&4294967295|Ee>>>27))+((Ee=it+(Ie^ze&(ue^Ie))+Le[6]+3225465664&4294967295)<<9&4294967295|Ee>>>23))+((Ee=ze+(ue^Ie&(it^ue))+Le[11]+643717713&4294967295)<<14&4294967295|Ee>>>18))+((Ee=Ie+(it^ue&(ze^it))+Le[0]+3921069994&4294967295)<<20&4294967295|Ee>>>12))+((Ee=ue+(ze^it&(Ie^ze))+Le[5]+3593408605&4294967295)<<5&4294967295|Ee>>>27))+((Ee=it+(Ie^ze&(ue^Ie))+Le[10]+38016083&4294967295)<<9&4294967295|Ee>>>23))+((Ee=ze+(ue^Ie&(it^ue))+Le[15]+3634488961&4294967295)<<14&4294967295|Ee>>>18))+((Ee=Ie+(it^ue&(ze^it))+Le[4]+3889429448&4294967295)<<20&4294967295|Ee>>>12))+((Ee=ue+(ze^it&(Ie^ze))+Le[9]+568446438&4294967295)<<5&4294967295|Ee>>>27))+((Ee=it+(Ie^ze&(ue^Ie))+Le[14]+3275163606&4294967295)<<9&4294967295|Ee>>>23))+((Ee=ze+(ue^Ie&(it^ue))+Le[3]+4107603335&4294967295)<<14&4294967295|Ee>>>18))+((Ee=Ie+(it^ue&(ze^it))+Le[8]+1163531501&4294967295)<<20&4294967295|Ee>>>12))+((Ee=ue+(ze^it&(Ie^ze))+Le[13]+2850285829&4294967295)<<5&4294967295|Ee>>>27))+((Ee=it+(Ie^ze&(ue^Ie))+Le[2]+4243563512&4294967295)<<9&4294967295|Ee>>>23))+((Ee=ze+(ue^Ie&(it^ue))+Le[7]+1735328473&4294967295)<<14&4294967295|Ee>>>18))+((Ee=Ie+(it^ue&(ze^it))+Le[12]+2368359562&4294967295)<<20&4294967295|Ee>>>12))+((Ee=ue+(Ie^ze^it)+Le[5]+4294588738&4294967295)<<4&4294967295|Ee>>>28))+((Ee=it+(ue^Ie^ze)+Le[8]+2272392833&4294967295)<<11&4294967295|Ee>>>21))+((Ee=ze+(it^ue^Ie)+Le[11]+1839030562&4294967295)<<16&4294967295|Ee>>>16))+((Ee=Ie+(ze^it^ue)+Le[14]+4259657740&4294967295)<<23&4294967295|Ee>>>9))+((Ee=ue+(Ie^ze^it)+Le[1]+2763975236&4294967295)<<4&4294967295|Ee>>>28))+((Ee=it+(ue^Ie^ze)+Le[4]+1272893353&4294967295)<<11&4294967295|Ee>>>21))+((Ee=ze+(it^ue^Ie)+Le[7]+4139469664&4294967295)<<16&4294967295|Ee>>>16))+((Ee=Ie+(ze^it^ue)+Le[10]+3200236656&4294967295)<<23&4294967295|Ee>>>9))+((Ee=ue+(Ie^ze^it)+Le[13]+681279174&4294967295)<<4&4294967295|Ee>>>28))+((Ee=it+(ue^Ie^ze)+Le[0]+3936430074&4294967295)<<11&4294967295|Ee>>>21))+((Ee=ze+(it^ue^Ie)+Le[3]+3572445317&4294967295)<<16&4294967295|Ee>>>16))+((Ee=Ie+(ze^it^ue)+Le[6]+76029189&4294967295)<<23&4294967295|Ee>>>9))+((Ee=ue+(Ie^ze^it)+Le[9]+3654602809&4294967295)<<4&4294967295|Ee>>>28))+((Ee=it+(ue^Ie^ze)+Le[12]+3873151461&4294967295)<<11&4294967295|Ee>>>21))+((Ee=ze+(it^ue^Ie)+Le[15]+530742520&4294967295)<<16&4294967295|Ee>>>16))+((Ee=Ie+(ze^it^ue)+Le[2]+3299628645&4294967295)<<23&4294967295|Ee>>>9))+((Ee=ue+(ze^(Ie|~it))+Le[0]+4096336452&4294967295)<<6&4294967295|Ee>>>26))+((Ee=it+(Ie^(ue|~ze))+Le[7]+1126891415&4294967295)<<10&4294967295|Ee>>>22))+((Ee=ze+(ue^(it|~Ie))+Le[14]+2878612391&4294967295)<<15&4294967295|Ee>>>17))+((Ee=Ie+(it^(ze|~ue))+Le[5]+4237533241&4294967295)<<21&4294967295|Ee>>>11))+((Ee=ue+(ze^(Ie|~it))+Le[12]+1700485571&4294967295)<<6&4294967295|Ee>>>26))+((Ee=it+(Ie^(ue|~ze))+Le[3]+2399980690&4294967295)<<10&4294967295|Ee>>>22))+((Ee=ze+(ue^(it|~Ie))+Le[10]+4293915773&4294967295)<<15&4294967295|Ee>>>17))+((Ee=Ie+(it^(ze|~ue))+Le[1]+2240044497&4294967295)<<21&4294967295|Ee>>>11))+((Ee=ue+(ze^(Ie|~it))+Le[8]+1873313359&4294967295)<<6&4294967295|Ee>>>26))+((Ee=it+(Ie^(ue|~ze))+Le[15]+4264355552&4294967295)<<10&4294967295|Ee>>>22))+((Ee=ze+(ue^(it|~Ie))+Le[6]+2734768916&4294967295)<<15&4294967295|Ee>>>17))+((Ee=Ie+(it^(ze|~ue))+Le[13]+1309151649&4294967295)<<21&4294967295|Ee>>>11))+((it=(ue=Ie+((Ee=ue+(ze^(Ie|~it))+Le[4]+4149444226&4294967295)<<6&4294967295|Ee>>>26))+((Ee=it+(Ie^(ue|~ze))+Le[11]+3174756917&4294967295)<<10&4294967295|Ee>>>22))^((ze=it+((Ee=ze+(ue^(it|~Ie))+Le[2]+718787259&4294967295)<<15&4294967295|Ee>>>17))|~ue))+Le[9]+3951481745&4294967295,Fe.g[0]=Fe.g[0]+ue&4294967295,Fe.g[1]=Fe.g[1]+(ze+(Ee<<21&4294967295|Ee>>>11))&4294967295,Fe.g[2]=Fe.g[2]+ze&4294967295,Fe.g[3]=Fe.g[3]+it&4294967295}function d(Fe,ue){this.h=ue;for(var Ie=[],Le=!0,ze=Fe.length-1;0<=ze;ze--){var it=0|Fe[ze];Le&&it==ue||(Ie[ze]=it,Le=!1)}this.g=Ie}(function e(Fe,ue){function Ie(){}Ie.prototype=ue.prototype,Fe.D=ue.prototype,Fe.prototype=new Ie,Fe.prototype.constructor=Fe,Fe.C=function(Le,ze,it){for(var Ee=Array(arguments.length-2),pr=2;pr<arguments.length;pr++)Ee[pr-2]=arguments[pr];return ue.prototype[ze].apply(Le,Ee)}})(r,function t(){this.blockSize=-1}),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},r.prototype.u=function(Fe,ue){void 0===ue&&(ue=Fe.length);for(var Ie=ue-this.blockSize,Le=this.B,ze=this.h,it=0;it<ue;){if(0==ze)for(;it<=Ie;)s(this,Fe,it),it+=this.blockSize;if("string"==typeof Fe){for(;it<ue;)if(Le[ze++]=Fe.charCodeAt(it++),ze==this.blockSize){s(this,Le),ze=0;break}}else for(;it<ue;)if(Le[ze++]=Fe[it++],ze==this.blockSize){s(this,Le),ze=0;break}}this.h=ze,this.o+=ue},r.prototype.v=function(){var Fe=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);Fe[0]=128;for(var ue=1;ue<Fe.length-8;++ue)Fe[ue]=0;var Ie=8*this.o;for(ue=Fe.length-8;ue<Fe.length;++ue)Fe[ue]=255&Ie,Ie/=256;for(this.u(Fe),Fe=Array(16),ue=Ie=0;4>ue;++ue)for(var Le=0;32>Le;Le+=8)Fe[Ie++]=this.g[ue]>>>Le&255;return Fe};var f={};function g(Fe){return-128<=Fe&&128>Fe?function u(Fe,ue){var Ie=f;return Object.prototype.hasOwnProperty.call(Ie,Fe)?Ie[Fe]:Ie[Fe]=ue(Fe)}(Fe,function(ue){return new d([0|ue],0>ue?-1:0)}):new d([0|Fe],0>Fe?-1:0)}function D(Fe){if(isNaN(Fe)||!isFinite(Fe))return P;if(0>Fe)return Re(D(-Fe));for(var ue=[],Ie=1,Le=0;Fe>=Ie;Le++)ue[Le]=Fe/Ie|0,Ie*=4294967296;return new d(ue,0)}var P=g(0),j=g(1),Q=g(16777216);function we(Fe){if(0!=Fe.h)return!1;for(var ue=0;ue<Fe.g.length;ue++)if(0!=Fe.g[ue])return!1;return!0}function Me(Fe){return-1==Fe.h}function Re(Fe){for(var ue=Fe.g.length,Ie=[],Le=0;Le<ue;Le++)Ie[Le]=~Fe.g[Le];return new d(Ie,~Fe.h).add(j)}function gt(Fe,ue){return Fe.add(Re(ue))}function Et(Fe,ue){for(;(65535&Fe[ue])!=Fe[ue];)Fe[ue+1]+=Fe[ue]>>>16,Fe[ue]&=65535,ue++}function Dt(Fe,ue){this.g=Fe,this.h=ue}function Ht(Fe,ue){if(we(ue))throw Error("division by zero");if(we(Fe))return new Dt(P,P);if(Me(Fe))return ue=Ht(Re(Fe),ue),new Dt(Re(ue.g),Re(ue.h));if(Me(ue))return ue=Ht(Fe,Re(ue)),new Dt(Re(ue.g),ue.h);if(30<Fe.g.length){if(Me(Fe)||Me(ue))throw Error("slowDivide_ only works with positive integers.");for(var Ie=j,Le=ue;0>=Le.l(Fe);)Ie=wn(Ie),Le=wn(Le);var ze=un(Ie,1),it=un(Le,1);for(Le=un(Le,2),Ie=un(Ie,2);!we(Le);){var Ee=it.add(Le);0>=Ee.l(Fe)&&(ze=ze.add(Ie),it=Ee),Le=un(Le,1),Ie=un(Ie,1)}return ue=gt(Fe,ze.j(ue)),new Dt(ze,ue)}for(ze=P;0<=Fe.l(ue);){for(Ie=Math.max(1,Math.floor(Fe.m()/ue.m())),Le=48>=(Le=Math.ceil(Math.log(Ie)/Math.LN2))?1:Math.pow(2,Le-48),Ee=(it=D(Ie)).j(ue);Me(Ee)||0<Ee.l(Fe);)Ee=(it=D(Ie-=Le)).j(ue);we(it)&&(it=j),ze=ze.add(it),Fe=gt(Fe,Ee)}return new Dt(ze,Fe)}function wn(Fe){for(var ue=Fe.g.length+1,Ie=[],Le=0;Le<ue;Le++)Ie[Le]=Fe.i(Le)<<1|Fe.i(Le-1)>>>31;return new d(Ie,Fe.h)}function un(Fe,ue){var Ie=ue>>5;ue%=32;for(var Le=Fe.g.length-Ie,ze=[],it=0;it<Le;it++)ze[it]=0<ue?Fe.i(it+Ie)>>>ue|Fe.i(it+Ie+1)<<32-ue:Fe.i(it+Ie);return new d(ze,Fe.h)}(n=d.prototype).m=function(){if(Me(this))return-Re(this).m();for(var Fe=0,ue=1,Ie=0;Ie<this.g.length;Ie++){var Le=this.i(Ie);Fe+=(0<=Le?Le:4294967296+Le)*ue,ue*=4294967296}return Fe},n.toString=function(Fe){if(2>(Fe=Fe||10)||36<Fe)throw Error("radix out of range: "+Fe);if(we(this))return"0";if(Me(this))return"-"+Re(this).toString(Fe);for(var ue=D(Math.pow(Fe,6)),Ie=this,Le="";;){var ze=Ht(Ie,ue).g,it=((0<(Ie=gt(Ie,ze.j(ue))).g.length?Ie.g[0]:Ie.h)>>>0).toString(Fe);if(we(Ie=ze))return it+Le;for(;6>it.length;)it="0"+it;Le=it+Le}},n.i=function(Fe){return 0>Fe?0:Fe<this.g.length?this.g[Fe]:this.h},n.l=function(Fe){return Me(Fe=gt(this,Fe))?-1:we(Fe)?0:1},n.abs=function(){return Me(this)?Re(this):this},n.add=function(Fe){for(var ue=Math.max(this.g.length,Fe.g.length),Ie=[],Le=0,ze=0;ze<=ue;ze++){var it=Le+(65535&this.i(ze))+(65535&Fe.i(ze)),Ee=(it>>>16)+(this.i(ze)>>>16)+(Fe.i(ze)>>>16);Le=Ee>>>16,Ie[ze]=(Ee&=65535)<<16|(it&=65535)}return new d(Ie,-2147483648&Ie[Ie.length-1]?-1:0)},n.j=function(Fe){if(we(this)||we(Fe))return P;if(Me(this))return Me(Fe)?Re(this).j(Re(Fe)):Re(Re(this).j(Fe));if(Me(Fe))return Re(this.j(Re(Fe)));if(0>this.l(Q)&&0>Fe.l(Q))return D(this.m()*Fe.m());for(var ue=this.g.length+Fe.g.length,Ie=[],Le=0;Le<2*ue;Le++)Ie[Le]=0;for(Le=0;Le<this.g.length;Le++)for(var ze=0;ze<Fe.g.length;ze++){var it=this.i(Le)>>>16,Ee=65535&this.i(Le),pr=Fe.i(ze)>>>16,bs=65535&Fe.i(ze);Ie[2*Le+2*ze]+=Ee*bs,Et(Ie,2*Le+2*ze),Ie[2*Le+2*ze+1]+=it*bs,Et(Ie,2*Le+2*ze+1),Ie[2*Le+2*ze+1]+=Ee*pr,Et(Ie,2*Le+2*ze+1),Ie[2*Le+2*ze+2]+=it*pr,Et(Ie,2*Le+2*ze+2)}for(Le=0;Le<ue;Le++)Ie[Le]=Ie[2*Le+1]<<16|Ie[2*Le];for(Le=ue;Le<2*ue;Le++)Ie[Le]=0;return new d(Ie,0)},n.A=function(Fe){return Ht(this,Fe).h},n.and=function(Fe){for(var ue=Math.max(this.g.length,Fe.g.length),Ie=[],Le=0;Le<ue;Le++)Ie[Le]=this.i(Le)&Fe.i(Le);return new d(Ie,this.h&Fe.h)},n.or=function(Fe){for(var ue=Math.max(this.g.length,Fe.g.length),Ie=[],Le=0;Le<ue;Le++)Ie[Le]=this.i(Le)|Fe.i(Le);return new d(Ie,this.h|Fe.h)},n.xor=function(Fe){for(var ue=Math.max(this.g.length,Fe.g.length),Ie=[],Le=0;Le<ue;Le++)Ie[Le]=this.i(Le)^Fe.i(Le);return new d(Ie,this.h^Fe.h)},r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,zT=t0.Md5=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=D,d.fromString=function S(Fe,ue){if(0==Fe.length)throw Error("number format error: empty string");if(2>(ue=ue||10)||36<ue)throw Error("radix out of range: "+ue);if("-"==Fe.charAt(0))return Re(S(Fe.substring(1),ue));if(0<=Fe.indexOf("-"))throw Error('number format error: interior "-" character');for(var Ie=D(Math.pow(ue,8)),Le=P,ze=0;ze<Fe.length;ze+=8){var it=Math.min(8,Fe.length-ze),Ee=parseInt(Fe.substring(ze,ze+it),ue);8>it?(it=D(Math.pow(ue,it)),Le=Le.j(it).add(D(Ee))):Le=(Le=Le.j(Ie)).add(D(Ee))}return Le},ju=t0.Integer=d}).apply(typeof e0<"u"?e0:typeof self<"u"?self:typeof window<"u"?window:{});var lm,KT,dm,WT,l_,n0,GT,d_,kh,um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Na={};(function(){var n,e="function"==typeof Object.defineProperties?Object.defineProperty:function(v,R,F){return v==Array.prototype||v==Object.prototype||(v[R]=F.value),v},r=function t(v){v=["object"==typeof globalThis&&globalThis,v,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof um&&um];for(var R=0;R<v.length;++R){var F=v[R];if(F&&F.Math==Math)return F}throw Error("Cannot find global object")}(this);!function s(v,R){if(R)e:{var F=r;v=v.split(".");for(var G=0;G<v.length-1;G++){var ut=v[G];if(!(ut in F))break e;F=F[ut]}(R=R(G=F[v=v[v.length-1]]))!=G&&null!=R&&e(F,v,{configurable:!0,writable:!0,value:R})}}("Array.prototype.values",function(v){return v||function(){return function u(v,R){v instanceof String&&(v+="");var F=0,G=!1,ut={next:function(){if(!G&&F<v.length){var vt=F++;return{value:R(vt,v[vt]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ut[Symbol.iterator]=function(){return ut},ut}(this,function(R,F){return F})}});var d=d||{},f=this||self;function g(v){var R=typeof v;return"array"==(R="object"!=R?R:v?Array.isArray(v)?"array":R:"null")||"object"==R&&"number"==typeof v.length}function D(v){var R=typeof v;return"object"==R&&null!=v||"function"==R}function S(v,R,F){return v.call.apply(v.bind,arguments)}function P(v,R,F){if(!v)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ut=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ut,G),v.apply(R,ut)}}return function(){return v.apply(R,arguments)}}function j(v,R,F){return(j=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?S:P).apply(null,arguments)}function Q(v,R){var F=Array.prototype.slice.call(arguments,1);return function(){var G=F.slice();return G.push.apply(G,arguments),v.apply(this,G)}}function we(v,R){function F(){}F.prototype=R.prototype,v.aa=R.prototype,v.prototype=new F,v.prototype.constructor=v,v.Qb=function(G,ut,vt){for(var Qt=Array(arguments.length-2),zr=2;zr<arguments.length;zr++)Qt[zr-2]=arguments[zr];return R.prototype[ut].apply(G,Qt)}}function Me(v){const R=v.length;if(0<R){const F=Array(R);for(let G=0;G<R;G++)F[G]=v[G];return F}return[]}function Re(v,R){for(let F=1;F<arguments.length;F++){const G=arguments[F];if(g(G)){const ut=v.length||0,vt=G.length||0;v.length=ut+vt;for(let Qt=0;Qt<vt;Qt++)v[ut+Qt]=G[Qt]}else v.push(G)}}function Et(v){return/^[\s\xa0]*$/.test(v)}function Dt(){var v=f.navigator;return v&&(v=v.userAgent)?v:""}function Ht(v){return Ht[" "](v),v}Ht[" "]=function(){};var wn=!(-1==Dt().indexOf("Gecko")||-1!=Dt().toLowerCase().indexOf("webkit")&&-1==Dt().indexOf("Edge")||-1!=Dt().indexOf("Trident")||-1!=Dt().indexOf("MSIE")||-1!=Dt().indexOf("Edge"));function un(v,R,F){for(const G in v)R.call(F,v[G],G,v)}function ue(v){const R={};for(const F in v)R[F]=v[F];return R}const Ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Le(v,R){let F,G;for(let ut=1;ut<arguments.length;ut++){for(F in G=arguments[ut],G)v[F]=G[F];for(let vt=0;vt<Ie.length;vt++)F=Ie[vt],Object.prototype.hasOwnProperty.call(G,F)&&(v[F]=G[F])}}function ze(v){var R=1;v=v.split(":");const F=[];for(;0<R&&v.length;)F.push(v.shift()),R--;return v.length&&F.push(v.join(":")),F}function it(v){f.setTimeout(()=>{throw v},0)}function Ee(){var v=Ai;let R=null;return v.g&&(R=v.g,v.g=v.g.next,v.g||(v.h=null),R.next=null),R}var bs=new class gt{constructor(R,F){this.i=R,this.j=F,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}(()=>new Yo,v=>v.reset());class Yo{constructor(){this.next=this.g=this.h=null}set(R,F){this.h=R,this.g=F,this.next=null}reset(){this.next=this.g=this.h=null}}let ji,ei=!1,Ai=new class pr{constructor(){this.h=this.g=null}add(R,F){const G=bs.get();G.set(R,F),this.h?this.h.next=G:this.g=G,this.h=G}},Oo=()=>{const v=f.Promise.resolve(void 0);ji=()=>{v.then(zs)}};var zs=()=>{for(var v;v=Ee();){try{v.h.call(v.g)}catch(F){it(F)}var R=bs;R.j(v),100>R.h&&(R.h++,v.next=R.g,R.g=v)}ei=!1};function dr(){this.s=this.s,this.C=this.C}function ti(v,R){this.type=v,this.g=this.target=R,this.defaultPrevented=!1}dr.prototype.s=!1,dr.prototype.ma=function(){this.s||(this.s=!0,this.N())},dr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},ti.prototype.h=function(){this.defaultPrevented=!0};var Cx=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var v=!1,R=Object.defineProperty({},"passive",{get:function(){v=!0}});try{const F=()=>{};f.addEventListener("test",F,R),f.removeEventListener("test",F,R)}catch{}return v}();function tD(v,R){if(ti.call(this,v?v.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,v){var F=this.type=v.type,G=v.changedTouches&&v.changedTouches.length?v.changedTouches[0]:null;if(this.target=v.target||v.srcElement,this.g=R,R=v.relatedTarget){if(wn){e:{try{Ht(R.nodeName);var ut=!0;break e}catch{}ut=!1}ut||(R=null)}}else"mouseover"==F?R=v.fromElement:"mouseout"==F&&(R=v.toElement);this.relatedTarget=R,G?(this.clientX=void 0!==G.clientX?G.clientX:G.pageX,this.clientY=void 0!==G.clientY?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=void 0!==v.clientX?v.clientX:v.pageX,this.clientY=void 0!==v.clientY?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0),this.button=v.button,this.key=v.key||"",this.ctrlKey=v.ctrlKey,this.altKey=v.altKey,this.shiftKey=v.shiftKey,this.metaKey=v.metaKey,this.pointerId=v.pointerId||0,this.pointerType="string"==typeof v.pointerType?v.pointerType:NH[v.pointerType]||"",this.state=v.state,this.i=v,v.defaultPrevented&&tD.aa.h.call(this)}}we(tD,ti);var NH={2:"touch",3:"pen",4:"mouse"};tD.prototype.h=function(){tD.aa.h.call(this);var v=this.i;v.preventDefault?v.preventDefault():v.returnValue=!1};var nD="closure_listenable_"+(1e6*Math.random()|0),kH=0;function FH(v,R,F,G,ut){this.listener=v,this.proxy=null,this.src=R,this.type=F,this.capture=!!G,this.ha=ut,this.key=++kH,this.da=this.fa=!1}function Tx(v){v.da=!0,v.listener=null,v.proxy=null,v.src=null,v.ha=null}function Sx(v){this.src=v,this.g={},this.h=0}function G1(v,R){var F=R.type;if(F in v.g){var vt,G=v.g[F],ut=Array.prototype.indexOf.call(G,R,void 0);(vt=0<=ut)&&Array.prototype.splice.call(G,ut,1),vt&&(Tx(R),0==v.g[F].length&&(delete v.g[F],v.h--))}}function q1(v,R,F,G){for(var ut=0;ut<v.length;++ut){var vt=v[ut];if(!vt.da&&vt.listener==R&&vt.capture==!!F&&vt.ha==G)return ut}return-1}Sx.prototype.add=function(v,R,F,G,ut){var vt=v.toString();(v=this.g[vt])||(v=this.g[vt]=[],this.h++);var Qt=q1(v,R,G,ut);return-1<Qt?(R=v[Qt],F||(R.fa=!1)):((R=new FH(R,this.src,vt,!!G,ut)).fa=F,v.push(R)),R};var Q1="closure_lm_"+(1e6*Math.random()|0),X1={};function yB(v,R,F,G,ut){if(G&&G.once)return EB(v,R,F,G,ut);if(Array.isArray(R)){for(var vt=0;vt<R.length;vt++)yB(v,R[vt],F,G,ut);return null}return F=eF(F),v&&v[nD]?v.K(R,F,D(G)?!!G.capture:!!G,ut):bB(v,R,F,!1,G,ut)}function bB(v,R,F,G,ut,vt){if(!R)throw Error("Invalid event type");var Qt=D(ut)?!!ut.capture:!!ut,zr=Z1(v);if(zr||(v[Q1]=zr=new Sx(v)),(F=zr.add(R,F,G,Qt,vt)).proxy)return F;if(G=function LH(){const R=VH;return function v(F){return R.call(v.src,v.listener,F)}}(),F.proxy=G,G.src=v,G.listener=F,v.addEventListener)Cx||(ut=Qt),void 0===ut&&(ut=!1),v.addEventListener(R.toString(),G,ut);else if(v.attachEvent)v.attachEvent(IB(R.toString()),G);else{if(!v.addListener||!v.removeListener)throw Error("addEventListener and attachEvent are unavailable.");v.addListener(G)}return F}function EB(v,R,F,G,ut){if(Array.isArray(R)){for(var vt=0;vt<R.length;vt++)EB(v,R[vt],F,G,ut);return null}return F=eF(F),v&&v[nD]?v.L(R,F,D(G)?!!G.capture:!!G,ut):bB(v,R,F,!0,G,ut)}function wB(v,R,F,G,ut){if(Array.isArray(R))for(var vt=0;vt<R.length;vt++)wB(v,R[vt],F,G,ut);else G=D(G)?!!G.capture:!!G,F=eF(F),v&&v[nD]?(v=v.i,(R=String(R).toString())in v.g&&-1<(F=q1(vt=v.g[R],F,G,ut))&&(Tx(vt[F]),Array.prototype.splice.call(vt,F,1),0==vt.length&&(delete v.g[R],v.h--))):v&&(v=Z1(v))&&(R=v.g[R.toString()],v=-1,R&&(v=q1(R,F,G,ut)),(F=-1<v?R[v]:null)&&Y1(F))}function Y1(v){if("number"!=typeof v&&v&&!v.da){var R=v.src;if(R&&R[nD])G1(R.i,v);else{var F=v.type,G=v.proxy;R.removeEventListener?R.removeEventListener(F,G,v.capture):R.detachEvent?R.detachEvent(IB(F),G):R.addListener&&R.removeListener&&R.removeListener(G),(F=Z1(R))?(G1(F,v),0==F.h&&(F.src=null,R[Q1]=null)):Tx(v)}}}function IB(v){return v in X1?X1[v]:X1[v]="on"+v}function VH(v,R){if(v.da)v=!0;else{R=new tD(R,this);var F=v.listener,G=v.ha||v.src;v.fa&&Y1(v),v=F.call(G,R)}return v}function Z1(v){return(v=v[Q1])instanceof Sx?v:null}var J1="__closure_events_fn_"+(1e9*Math.random()>>>0);function eF(v){return"function"==typeof v?v:(v[J1]||(v[J1]=function(R){return v.handleEvent(R)}),v[J1])}function Es(){dr.call(this),this.i=new Sx(this),this.M=this,this.F=null}function Ks(v,R){var F,G=v.F;if(G)for(F=[];G;G=G.F)F.push(G);if(v=v.M,G=R.type||R,"string"==typeof R)R=new ti(R,v);else if(R instanceof ti)R.target=R.target||v;else{var ut=R;Le(R=new ti(G,v),ut)}if(ut=!0,F)for(var vt=F.length-1;0<=vt;vt--){var Qt=R.g=F[vt];ut=Ax(Qt,G,!0,R)&&ut}if(ut=Ax(Qt=R.g=v,G,!0,R)&&ut,ut=Ax(Qt,G,!1,R)&&ut,F)for(vt=0;vt<F.length;vt++)ut=Ax(Qt=R.g=F[vt],G,!1,R)&&ut}function Ax(v,R,F,G){if(!(R=v.i.g[String(R)]))return!0;R=R.concat();for(var ut=!0,vt=0;vt<R.length;++vt){var Qt=R[vt];if(Qt&&!Qt.da&&Qt.capture==F){var zr=Qt.listener,Zo=Qt.ha||Qt.src;Qt.fa&&G1(v.i,Qt),ut=!1!==zr.call(Zo,G)&&ut}}return ut&&!G.defaultPrevented}function DB(v,R,F){if("function"==typeof v)F&&(v=j(v,F));else{if(!v||"function"!=typeof v.handleEvent)throw Error("Invalid listener argument");v=j(v.handleEvent,v)}return 2147483647<Number(R)?-1:f.setTimeout(v,R||0)}function CB(v){v.g=DB(()=>{v.g=null,v.i&&(v.i=!1,CB(v))},v.l);const R=v.h;v.h=null,v.m.apply(null,R)}we(Es,dr),Es.prototype[nD]=!0,Es.prototype.removeEventListener=function(v,R,F,G){wB(this,v,R,F,G)},Es.prototype.N=function(){if(Es.aa.N.call(this),this.i){var R,v=this.i;for(R in v.g){for(var F=v.g[R],G=0;G<F.length;G++)Tx(F[G]);delete v.g[R],v.h--}}this.F=null},Es.prototype.K=function(v,R,F,G){return this.i.add(String(v),R,!1,F,G)},Es.prototype.L=function(v,R,F,G){return this.i.add(String(v),R,!0,F,G)};class BH extends dr{constructor(R,F){super(),this.m=R,this.l=F,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:CB(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rD(v){dr.call(this),this.h=v,this.g={}}we(rD,dr);var TB=[];function SB(v){un(v.g,function(R,F){this.g.hasOwnProperty(F)&&Y1(R)},v),v.g={}}rD.prototype.N=function(){rD.aa.N.call(this),SB(this)},rD.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tF=f.JSON.stringify,jH=f.JSON.parse,UH=class{stringify(v){return f.JSON.stringify(v,void 0)}parse(v){return f.JSON.parse(v,void 0)}};function nF(){}function RB(){}nF.prototype.h=null;var iD={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rF(){ti.call(this,"d")}function iF(){ti.call(this,"c")}we(rF,ti),we(iF,ti);var yg={},xB=null;function Rx(){return xB=xB||new Es}function MB(v){ti.call(this,yg.La,v)}function oD(v){const R=Rx();Ks(R,new MB(R))}function OB(v,R){ti.call(this,yg.STAT_EVENT,v),this.stat=R}function Ws(v){const R=Rx();Ks(R,new OB(R,v))}function PB(v,R){ti.call(this,yg.Ma,v),this.size=R}function sD(v,R){if("function"!=typeof v)throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){v()},R)}function aD(){this.g=!0}function db(v,R,F,G){v.info(function(){return"XMLHTTP TEXT ("+R+"): "+function KH(v,R){if(!v.g)return R;if(!R)return null;try{var F=JSON.parse(R);if(F)for(v=0;v<F.length;v++)if(Array.isArray(F[v])){var G=F[v];if(!(2>G.length)){var ut=G[1];if(Array.isArray(ut)&&!(1>ut.length)){var vt=ut[0];if("noop"!=vt&&"stop"!=vt&&"close"!=vt)for(var Qt=1;Qt<ut.length;Qt++)ut[Qt]=""}}}return tF(F)}catch{return R}}(v,F)+(G?" "+G:"")})}yg.La="serverreachability",we(MB,ti),yg.STAT_EVENT="statevent",we(OB,ti),yg.Ma="timingevent",we(PB,ti),aD.prototype.xa=function(){this.g=!1},aD.prototype.info=function(){};var oF,xx={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},NB={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Mx(){}function Xf(v,R,F,G){this.j=v,this.i=R,this.l=F,this.R=G||1,this.U=new rD(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kB}function kB(){this.i=null,this.g="",this.h=!1}we(Mx,nF),Mx.prototype.g=function(){return new XMLHttpRequest},Mx.prototype.i=function(){return{}},oF=new Mx;var FB={},sF={};function aF(v,R,F){v.L=1,v.v=kx(Kd(R)),v.m=F,v.P=!0,LB(v,null)}function LB(v,R){v.F=Date.now(),Ox(v),v.A=Kd(v.v);var F=v.A,G=v.R;Array.isArray(G)||(G=[String(G)]),YB(F.i,"t",G),v.C=0,F=v.j.J,v.h=new kB,v.g=mj(v.j,F?R:null,!v.m),0<v.O&&(v.M=new BH(j(v.Y,v,v.g),v.O)),R=v.U,F=v.g,G=v.ca;var ut="readystatechange";Array.isArray(ut)||(ut&&(TB[0]=ut.toString()),ut=TB);for(var vt=0;vt<ut.length;vt++){var Qt=yB(F,ut[vt],G||R.handleEvent,!1,R.h||R);if(!Qt)break;R.g[Qt.key]=Qt}R=v.H?ue(v.H):{},v.m?(v.u||(v.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",v.g.ea(v.A,v.u,v.m,R)):(v.u="GET",v.g.ea(v.A,v.u,null,R)),oD(),function $H(v,R,F,G,ut,vt){v.info(function(){if(v.g)if(vt)for(var Qt="",zr=vt.split("&"),Zo=0;Zo<zr.length;Zo++){var Ir=zr[Zo].split("=");if(1<Ir.length){var ws=Ir[0];Ir=Ir[1];var Is=ws.split("_");Qt=2<=Is.length&&"type"==Is[1]?Qt+(ws+"=")+Ir+"&":Qt+(ws+"=redacted&")}}else Qt=null;else Qt=vt;return"XMLHTTP REQ ("+G+") [attempt "+ut+"]: "+R+"\n"+F+"\n"+Qt})}(v.i,v.u,v.A,v.l,v.R,v.m)}function VB(v){return!!v.g&&"GET"==v.u&&2!=v.L&&v.j.Ca}function WH(v,R){var F=v.C,G=R.indexOf("\n",F);return-1==G?sF:(F=Number(R.substring(F,G)),isNaN(F)?FB:(G+=1)+F>R.length?sF:(R=R.slice(G,G+F),v.C=G+F,R))}function Ox(v){v.S=Date.now()+v.I,BB(v,v.I)}function BB(v,R){if(null!=v.B)throw Error("WatchDog timer not null");v.B=sD(j(v.ba,v),R)}function cF(v){v.B&&(f.clearTimeout(v.B),v.B=null)}function cD(v){0==v.j.G||v.J||dj(v.j,v)}function bg(v){cF(v);var R=v.M;R&&"function"==typeof R.ma&&R.ma(),v.M=null,SB(v.U),v.g&&(R=v.g,v.g=null,R.abort(),R.ma())}function uF(v,R){try{var F=v.j;if(0!=F.G&&(F.g==v||lF(F.h,v)))if(!v.K&&lF(F.h,v)&&3==F.G){try{var G=F.Da.g.parse(R)}catch{G=null}if(Array.isArray(G)&&3==G.length){var ut=G;if(0==ut[0]){e:if(!F.u){if(F.g){if(!(F.g.F+3e3<v.F))break e;jx(F),Vx(F)}pF(F),Ws(18)}}else F.za=ut[1],0<F.za-F.T&&37500>ut[2]&&F.F&&0==F.v&&!F.C&&(F.C=sD(j(F.Za,F),6e3));if(1>=$B(F.h)&&F.ca){try{F.ca()}catch{}F.ca=void 0}}else wg(F,11)}else if((v.K||F.g==v)&&jx(F),!Et(R))for(ut=F.Da.g.parse(R),R=0;R<ut.length;R++){let Ir=ut[R];if(F.T=Ir[0],Ir=Ir[1],2==F.G)if("c"==Ir[0]){F.K=Ir[1],F.ia=Ir[2];const ws=Ir[3];null!=ws&&(F.la=ws,F.j.info("VER="+F.la));const Is=Ir[4];null!=Is&&(F.Aa=Is,F.j.info("SVER="+F.Aa));const pb=Ir[5];null!=pb&&"number"==typeof pb&&0<pb&&(F.L=G=1.5*pb,F.j.info("backChannelRequestTimeoutMs_="+G)),G=F;const vu=v.g;if(vu){const $x=vu.g?vu.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($x){var vt=G.h;vt.g||-1==$x.indexOf("spdy")&&-1==$x.indexOf("quic")&&-1==$x.indexOf("h2")||(vt.j=vt.l,vt.g=new Set,vt.h&&(dF(vt,vt.h),vt.h=null))}if(G.D){const gF=vu.g?vu.g.getResponseHeader("X-HTTP-Session-Id"):null;gF&&(G.ya=gF,oi(G.I,G.D,gF))}}F.G=3,F.l&&F.l.ua(),F.ba&&(F.R=Date.now()-v.F,F.j.info("Handshake RTT: "+F.R+"ms"));var Qt=v;if((G=F).qa=pj(G,G.J?G.ia:null,G.W),Qt.K){HB(G.h,Qt);var zr=Qt,Zo=G.L;Zo&&(zr.I=Zo),zr.B&&(cF(zr),Ox(zr)),G.g=Qt}else uj(G);0<F.i.length&&Bx(F)}else"stop"!=Ir[0]&&"close"!=Ir[0]||wg(F,7);else 3==F.G&&("stop"==Ir[0]||"close"==Ir[0]?"stop"==Ir[0]?wg(F,7):fF(F):"noop"!=Ir[0]&&F.l&&F.l.ta(Ir),F.v=0)}oD()}catch{}}Xf.prototype.ca=function(v){v=v.target;const R=this.M;R&&3==Wd(v)?R.j():this.Y(v)},Xf.prototype.Y=function(v){try{if(v==this.g)e:{const Is=Wd(this.g);var R=this.g.Ba();if(this.g.Z(),!(3>Is)&&(3!=Is||this.g&&(this.h.h||this.g.oa()||ij(this.g)))){this.J||4!=Is||7==R||oD(),cF(this);var F=this.g.Z();this.X=F;t:if(VB(this)){var G=ij(this.g);v="";var ut=G.length,vt=4==Wd(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){bg(this),cD(this);var Qt="";break t}this.h.i=new f.TextDecoder}for(R=0;R<ut;R++)this.h.h=!0,v+=this.h.i.decode(G[R],{stream:!(vt&&R==ut-1)});G.length=0,this.h.g+=v,this.C=0,Qt=this.h.g}else Qt=this.g.oa();if(this.o=200==F,function HH(v,R,F,G,ut,vt,Qt){v.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ut+"]: "+R+"\n"+F+"\n"+vt+" "+Qt})}(this.i,this.u,this.A,this.l,this.R,Is,F),this.o){if(this.T&&!this.K){t:{if(this.g){var zr,Zo=this.g;if((zr=Zo.g?Zo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Et(zr)){var Ir=zr;break t}}Ir=null}if(!(F=Ir)){this.o=!1,this.s=3,Ws(12),bg(this),cD(this);break e}db(this.i,this.l,F,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,uF(this,F)}if(this.P){let vu;for(F=!0;!this.J&&this.C<Qt.length;){if(vu=WH(this,Qt),vu==sF){4==Is&&(this.s=4,Ws(14),F=!1),db(this.i,this.l,null,"[Incomplete Response]");break}if(vu==FB){this.s=4,Ws(15),db(this.i,this.l,Qt,"[Invalid Chunk]"),F=!1;break}db(this.i,this.l,vu,null),uF(this,vu)}if(VB(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=Is||0!=Qt.length||this.h.h||(this.s=1,Ws(16),F=!1),this.o=this.o&&F,F){if(0<Qt.length&&!this.W){this.W=!0;var ws=this.j;ws.g==this&&ws.ba&&!ws.M&&(ws.j.info("Great, no buffering proxy detected. Bytes received: "+Qt.length),mF(ws),ws.M=!0,Ws(11))}}else db(this.i,this.l,Qt,"[Invalid Chunked Response]"),bg(this),cD(this)}else db(this.i,this.l,Qt,null),uF(this,Qt);4==Is&&bg(this),this.o&&!this.J&&(4==Is?dj(this.j,this):(this.o=!1,Ox(this)))}else(function u4(v){const R={};v=(v.g&&2<=Wd(v)&&v.g.getAllResponseHeaders()||"").split("\r\n");for(let G=0;G<v.length;G++){if(Et(v[G]))continue;var F=ze(v[G]);const ut=F[0];if("string"!=typeof(F=F[1]))continue;F=F.trim();const vt=R[ut]||[];R[ut]=vt,vt.push(F)}!function Fe(v,R){for(const F in v)R.call(void 0,v[F],F,v)}(R,function(G){return G.join(", ")})})(this.g),400==F&&0<Qt.indexOf("Unknown SID")?(this.s=3,Ws(12)):(this.s=0,Ws(13)),bg(this),cD(this)}}}catch{}},Xf.prototype.cancel=function(){this.J=!0,bg(this)},Xf.prototype.ba=function(){this.B=null;const v=Date.now();0<=v-this.S?(function zH(v,R){v.info(function(){return"TIMEOUT: "+R})}(this.i,this.A),2!=this.L&&(oD(),Ws(17)),bg(this),this.s=2,cD(this)):BB(this,this.S-v)};var GH=class{constructor(v,R){this.g=v,this.map=R}};function jB(v){this.l=v||10,v=f.PerformanceNavigationTiming?0<(v=f.performance.getEntriesByType("navigation")).length&&("hq"==v[0].nextHopProtocol||"h2"==v[0].nextHopProtocol):!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=v?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function UB(v){return!!v.h||!!v.g&&v.g.size>=v.j}function $B(v){return v.h?1:v.g?v.g.size:0}function lF(v,R){return v.h?v.h==R:!!v.g&&v.g.has(R)}function dF(v,R){v.g?v.g.add(R):v.h=R}function HB(v,R){v.h&&v.h==R?v.h=null:v.g&&v.g.has(R)&&v.g.delete(R)}function zB(v){if(null!=v.h)return v.i.concat(v.h.D);if(null!=v.g&&0!==v.g.size){let R=v.i;for(const F of v.g.values())R=R.concat(F.D);return R}return Me(v.i)}function KB(v,R){if(v.forEach&&"function"==typeof v.forEach)v.forEach(R,void 0);else if(g(v)||"string"==typeof v)Array.prototype.forEach.call(v,R,void 0);else for(var F=function QH(v){if(v.na&&"function"==typeof v.na)return v.na();if(!v.V||"function"!=typeof v.V){if(typeof Map<"u"&&v instanceof Map)return Array.from(v.keys());if(!(typeof Set<"u"&&v instanceof Set)){if(g(v)||"string"==typeof v){var R=[];v=v.length;for(var F=0;F<v;F++)R.push(F);return R}R=[],F=0;for(const G in v)R[F++]=G;return R}}}(v),G=function qH(v){if(v.V&&"function"==typeof v.V)return v.V();if(typeof Map<"u"&&v instanceof Map||typeof Set<"u"&&v instanceof Set)return Array.from(v.values());if("string"==typeof v)return v.split("");if(g(v)){for(var R=[],F=v.length,G=0;G<F;G++)R.push(v[G]);return R}for(G in R=[],F=0,v)R[F++]=v[G];return R}(v),ut=G.length,vt=0;vt<ut;vt++)R.call(void 0,G[vt],F&&F[vt],v)}jB.prototype.cancel=function(){if(this.i=zB(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const v of this.g.values())v.cancel();this.g.clear()}};var WB=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eg(v){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,v instanceof Eg){this.h=v.h,Px(this,v.j),this.o=v.o,this.g=v.g,Nx(this,v.s),this.l=v.l;var R=v.i,F=new dD;F.i=R.i,R.g&&(F.g=new Map(R.g),F.h=R.h),GB(this,F),this.m=v.m}else v&&(R=String(v).match(WB))?(this.h=!1,Px(this,R[1]||"",!0),this.o=uD(R[2]||""),this.g=uD(R[3]||"",!0),Nx(this,R[4]),this.l=uD(R[5]||"",!0),GB(this,R[6]||"",!0),this.m=uD(R[7]||"")):(this.h=!1,this.i=new dD(null,this.h))}function Kd(v){return new Eg(v)}function Px(v,R,F){v.j=F?uD(R,!0):R,v.j&&(v.j=v.j.replace(/:$/,""))}function Nx(v,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);v.s=R}else v.s=null}function GB(v,R,F){R instanceof dD?(v.i=R,function n4(v,R){R&&!v.j&&(Yf(v),v.i=null,v.g.forEach(function(F,G){var ut=G.toLowerCase();G!=ut&&(QB(this,G),YB(this,ut,F))},v)),v.j=R}(v.i,v.h)):(F||(R=lD(R,e4)),v.i=new dD(R,v.h))}function oi(v,R,F){v.i.set(R,F)}function kx(v){return oi(v,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),v}function uD(v,R){return v?R?decodeURI(v.replace(/%25/g,"%2525")):decodeURIComponent(v):""}function lD(v,R,F){return"string"==typeof v?(v=encodeURI(v).replace(R,YH),F&&(v=v.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v):null}function YH(v){return"%"+((v=v.charCodeAt(0))>>4&15).toString(16)+(15&v).toString(16)}Eg.prototype.toString=function(){var v=[],R=this.j;R&&v.push(lD(R,qB,!0),":");var F=this.g;return(F||"file"==R)&&(v.push("//"),(R=this.o)&&v.push(lD(R,qB,!0),"@"),v.push(encodeURIComponent(String(F)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(F=this.s)&&v.push(":",String(F))),(F=this.l)&&(this.g&&"/"!=F.charAt(0)&&v.push("/"),v.push(lD(F,"/"==F.charAt(0)?JH:ZH,!0))),(F=this.i.toString())&&v.push("?",F),(F=this.m)&&v.push("#",lD(F,t4)),v.join("")};var qB=/[#\/\?@]/g,ZH=/[#\?:]/g,JH=/[#\?]/g,e4=/[#\?@]/g,t4=/#/g;function dD(v,R){this.h=this.g=null,this.i=v||null,this.j=!!R}function Yf(v){v.g||(v.g=new Map,v.h=0,v.i&&function XH(v,R){if(v){v=v.split("&");for(var F=0;F<v.length;F++){var G=v[F].indexOf("="),ut=null;if(0<=G){var vt=v[F].substring(0,G);ut=v[F].substring(G+1)}else vt=v[F];R(vt,ut?decodeURIComponent(ut.replace(/\+/g," ")):"")}}}(v.i,function(R,F){v.add(decodeURIComponent(R.replace(/\+/g," ")),F)}))}function QB(v,R){Yf(v),R=hb(v,R),v.g.has(R)&&(v.i=null,v.h-=v.g.get(R).length,v.g.delete(R))}function XB(v,R){return Yf(v),R=hb(v,R),v.g.has(R)}function YB(v,R,F){QB(v,R),0<F.length&&(v.i=null,v.g.set(hb(v,R),Me(F)),v.h+=F.length)}function hb(v,R){return R=String(R),v.j&&(R=R.toLowerCase()),R}function Zf(v,R,F,G,ut){try{ut&&(ut.onload=null,ut.onerror=null,ut.onabort=null,ut.ontimeout=null),G(F)}catch{}}function o4(){this.g=new UH}function s4(v,R,F){const G=F||"";try{KB(v,function(ut,vt){let Qt=ut;D(ut)&&(Qt=tF(ut)),R.push(G+vt+"="+encodeURIComponent(Qt))})}catch(ut){throw R.push(G+"type="+encodeURIComponent("_badmap")),ut}}function hD(v){this.l=v.Ub||null,this.j=v.eb||!1}function Fx(v,R){Es.call(this),this.D=v,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function ZB(v){v.j.read().then(v.Pa.bind(v)).catch(v.ga.bind(v))}function fD(v){v.readyState=4,v.l=null,v.j=null,v.v=null,pD(v)}function pD(v){v.onreadystatechange&&v.onreadystatechange.call(v)}function JB(v){let R="";return un(v,function(F,G){R+=G,R+=":",R+=F,R+="\r\n"}),R}function hF(v,R,F){e:{for(G in F){var G=!1;break e}G=!0}G||(F=JB(F),"string"==typeof v?null!=F&&encodeURIComponent(String(F)):oi(v,R,F))}function Ri(v){Es.call(this),this.headers=new Map,this.o=v||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(n=dD.prototype).add=function(v,R){Yf(this),this.i=null,v=hb(this,v);var F=this.g.get(v);return F||this.g.set(v,F=[]),F.push(R),this.h+=1,this},n.forEach=function(v,R){Yf(this),this.g.forEach(function(F,G){F.forEach(function(ut){v.call(R,ut,G,this)},this)},this)},n.na=function(){Yf(this);const v=Array.from(this.g.values()),R=Array.from(this.g.keys()),F=[];for(let G=0;G<R.length;G++){const ut=v[G];for(let vt=0;vt<ut.length;vt++)F.push(R[G])}return F},n.V=function(v){Yf(this);let R=[];if("string"==typeof v)XB(this,v)&&(R=R.concat(this.g.get(hb(this,v))));else{v=Array.from(this.g.values());for(let F=0;F<v.length;F++)R=R.concat(v[F])}return R},n.set=function(v,R){return Yf(this),this.i=null,XB(this,v=hb(this,v))&&(this.h-=this.g.get(v).length),this.g.set(v,[R]),this.h+=1,this},n.get=function(v,R){return v&&0<(v=this.V(v)).length?String(v[0]):R},n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const v=[],R=Array.from(this.g.keys());for(var F=0;F<R.length;F++){var G=R[F];const vt=encodeURIComponent(String(G)),Qt=this.V(G);for(G=0;G<Qt.length;G++){var ut=vt;""!==Qt[G]&&(ut+="="+encodeURIComponent(String(Qt[G]))),v.push(ut)}}return this.i=v.join("&")},we(hD,nF),hD.prototype.g=function(){return new Fx(this.l,this.j)},hD.prototype.i=function(v){return function(){return v}}({}),we(Fx,Es),(n=Fx.prototype).open=function(v,R){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=v,this.A=R,this.readyState=1,pD(this)},n.send=function(v){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};v&&(R.body=v),(this.D||f).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fD(this)),this.readyState=0},n.Sa=function(v){if(this.g&&(this.l=v,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=v.headers,this.readyState=2,pD(this)),this.g&&(this.readyState=3,pD(this),this.g)))if("arraybuffer"===this.responseType)v.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in v){if(this.j=v.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ZB(this)}else v.text().then(this.Ra.bind(this),this.ga.bind(this))},n.Pa=function(v){if(this.g){if(this.o&&v.value)this.response.push(v.value);else if(!this.o){var R=v.value?v.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!v.done}))&&(this.response=this.responseText+=R)}v.done?fD(this):pD(this),3==this.readyState&&ZB(this)}},n.Ra=function(v){this.g&&(this.response=this.responseText=v,fD(this))},n.Qa=function(v){this.g&&(this.response=v,fD(this))},n.ga=function(){this.g&&fD(this)},n.setRequestHeader=function(v,R){this.u.append(v,R)},n.getResponseHeader=function(v){return this.h&&this.h.get(v.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const v=[],R=this.h.entries();for(var F=R.next();!F.done;)v.push((F=F.value)[0]+": "+F[1]),F=R.next();return v.join("\r\n")},Object.defineProperty(Fx.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(v){this.m=v?"include":"same-origin"}}),we(Ri,Es);var a4=/^https?$/i,c4=["POST","PUT"];function ej(v,R){v.h=!1,v.g&&(v.j=!0,v.g.abort(),v.j=!1),v.l=R,v.m=5,tj(v),Lx(v)}function tj(v){v.A||(v.A=!0,Ks(v,"complete"),Ks(v,"error"))}function nj(v){if(v.h&&typeof d<"u"&&(!v.v[1]||4!=Wd(v)||2!=v.Z()))if(v.u&&4==Wd(v))DB(v.Ea,0,v);else if(Ks(v,"readystatechange"),4==Wd(v)){v.h=!1;try{const Qt=v.Z();e:switch(Qt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var F;if(!(F=R)){var G;if(G=0===Qt){var ut=String(v.D).match(WB)[1]||null;!ut&&f.self&&f.self.location&&(ut=f.self.location.protocol.slice(0,-1)),G=!a4.test(ut?ut.toLowerCase():"")}F=G}if(F)Ks(v,"complete"),Ks(v,"success");else{v.m=6;try{var vt=2<Wd(v)?v.g.statusText:""}catch{vt=""}v.l=vt+" ["+v.Z()+"]",tj(v)}}finally{Lx(v)}}}function Lx(v,R){if(v.g){rj(v);const F=v.g,G=v.v[0]?()=>{}:null;v.g=null,v.v=null,R||Ks(v,"ready");try{F.onreadystatechange=G}catch{}}}function rj(v){v.I&&(f.clearTimeout(v.I),v.I=null)}function Wd(v){return v.g?v.g.readyState:0}function ij(v){try{if(!v.g)return null;if("response"in v.g)return v.g.response;switch(v.H){case"":case"text":return v.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in v.g)return v.g.mozResponseArrayBuffer}return null}catch{return null}}function mD(v,R,F){return F&&F.internalChannelParams&&F.internalChannelParams[v]||R}function oj(v){this.Aa=0,this.i=[],this.j=new aD,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=mD("failFast",!1,v),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=mD("baseRetryDelayMs",5e3,v),this.cb=mD("retryDelaySeedMs",1e4,v),this.Wa=mD("forwardChannelMaxRetries",2,v),this.wa=mD("forwardChannelRequestTimeoutMs",2e4,v),this.pa=v&&v.xmlHttpFactory||void 0,this.Xa=v&&v.Tb||void 0,this.Ca=v&&v.useFetchStreams||!1,this.L=void 0,this.J=v&&v.supportsCrossDomainXhr||!1,this.K="",this.h=new jB(v&&v.concurrentRequestLimit),this.Da=new o4,this.P=v&&v.fastHandshake||!1,this.O=v&&v.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=v&&v.Rb||!1,v&&v.xa&&this.j.xa(),v&&v.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&v&&v.detectBufferingProxy||!1,this.ja=void 0,v&&v.longPollingTimeout&&0<v.longPollingTimeout&&(this.ja=v.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function fF(v){if(sj(v),3==v.G){var R=v.U++,F=Kd(v.I);if(oi(F,"SID",v.K),oi(F,"RID",R),oi(F,"TYPE","terminate"),gD(v,F),(R=new Xf(v,v.j,R)).L=2,R.v=kx(Kd(F)),F=!1,f.navigator&&f.navigator.sendBeacon)try{F=f.navigator.sendBeacon(R.v.toString(),"")}catch{}!F&&f.Image&&((new Image).src=R.v,F=!0),F||(R.g=mj(R.j,null),R.g.ea(R.v)),R.F=Date.now(),Ox(R)}fj(v)}function Vx(v){v.g&&(mF(v),v.g.cancel(),v.g=null)}function sj(v){Vx(v),v.u&&(f.clearTimeout(v.u),v.u=null),jx(v),v.h.cancel(),v.s&&("number"==typeof v.s&&f.clearTimeout(v.s),v.s=null)}function Bx(v){if(!UB(v.h)&&!v.s){v.s=!0;var R=v.Ga;ji||Oo(),ei||(ji(),ei=!0),Ai.add(R,v),v.B=0}}function aj(v,R){var F;F=R?R.l:v.U++;const G=Kd(v.I);oi(G,"SID",v.K),oi(G,"RID",F),oi(G,"AID",v.T),gD(v,G),v.m&&v.o&&hF(G,v.m,v.o),F=new Xf(v,v.j,F,v.B+1),null===v.m&&(F.H=v.o),R&&(v.i=R.D.concat(v.i)),R=cj(v,F,1e3),F.I=Math.round(.5*v.wa)+Math.round(.5*v.wa*Math.random()),dF(v.h,F),aF(F,G,R)}function gD(v,R){v.H&&un(v.H,function(F,G){oi(R,G,F)}),v.l&&KB({},function(F,G){oi(R,G,F)})}function cj(v,R,F){F=Math.min(v.i.length,F);var G=v.l?j(v.l.Na,v.l,v):null;e:{var ut=v.i;let vt=-1;for(;;){const Qt=["count="+F];-1==vt?0<F?(vt=ut[0].g,Qt.push("ofs="+vt)):vt=0:Qt.push("ofs="+vt);let zr=!0;for(let Zo=0;Zo<F;Zo++){let Ir=ut[Zo].g;const ws=ut[Zo].map;if(Ir-=vt,0>Ir)vt=Math.max(0,ut[Zo].g-100),zr=!1;else try{s4(ws,Qt,"req"+Ir+"_")}catch{G&&G(ws)}}if(zr){G=Qt.join("&");break e}}}return v=v.i.splice(0,F),R.D=v,G}function uj(v){if(!v.g&&!v.u){v.Y=1;var R=v.Fa;ji||Oo(),ei||(ji(),ei=!0),Ai.add(R,v),v.v=0}}function pF(v){return!(v.g||v.u||3<=v.v||(v.Y++,v.u=sD(j(v.Fa,v),hj(v,v.v)),v.v++,0))}function mF(v){null!=v.A&&(f.clearTimeout(v.A),v.A=null)}function lj(v){v.g=new Xf(v,v.j,"rpc",v.Y),null===v.m&&(v.g.H=v.o),v.g.O=0;var R=Kd(v.qa);oi(R,"RID","rpc"),oi(R,"SID",v.K),oi(R,"AID",v.T),oi(R,"CI",v.F?"0":"1"),!v.F&&v.ja&&oi(R,"TO",v.ja),oi(R,"TYPE","xmlhttp"),gD(v,R),v.m&&v.o&&hF(R,v.m,v.o),v.L&&(v.g.I=v.L);var F=v.g;v=v.ia,F.L=1,F.v=kx(Kd(R)),F.m=null,F.P=!0,LB(F,v)}function jx(v){null!=v.C&&(f.clearTimeout(v.C),v.C=null)}function dj(v,R){var F=null;if(v.g==R){jx(v),mF(v),v.g=null;var G=2}else{if(!lF(v.h,R))return;F=R.D,HB(v.h,R),G=1}if(0!=v.G)if(R.o)if(1==G){F=R.m?R.m.length:0,R=Date.now()-R.F;var ut=v.B;Ks(G=Rx(),new PB(G,F)),Bx(v)}else uj(v);else if(3==(ut=R.s)||0==ut&&0<R.X||!(1==G&&function l4(v,R){return!($B(v.h)>=v.h.j-(v.s?1:0)||(v.s?(v.i=R.D.concat(v.i),0):1==v.G||2==v.G||v.B>=(v.Va?0:v.Wa)||(v.s=sD(j(v.Ga,v,R),hj(v,v.B)),v.B++,0)))}(v,R)||2==G&&pF(v)))switch(F&&0<F.length&&(R=v.h,R.i=R.i.concat(F)),ut){case 1:wg(v,5);break;case 4:wg(v,10);break;case 3:wg(v,6);break;default:wg(v,2)}}function hj(v,R){let F=v.Ta+Math.floor(Math.random()*v.cb);return v.isActive()||(F*=2),F*R}function wg(v,R){if(v.j.info("Error code "+R),2==R){var F=j(v.fb,v),G=v.Xa;const ut=!G;G=new Eg(G||"//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||Px(G,"https"),kx(G),ut?function r4(v,R){const F=new aD;if(f.Image){const G=new Image;G.onload=Q(Zf,F,"TestLoadImage: loaded",!0,R,G),G.onerror=Q(Zf,F,"TestLoadImage: error",!1,R,G),G.onabort=Q(Zf,F,"TestLoadImage: abort",!1,R,G),G.ontimeout=Q(Zf,F,"TestLoadImage: timeout",!1,R,G),f.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=v}else R(!1)}(G.toString(),F):function i4(v,R){new aD;const G=new AbortController,ut=setTimeout(()=>{G.abort(),Zf(0,0,!1,R)},1e4);fetch(v,{signal:G.signal}).then(vt=>{clearTimeout(ut),Zf(0,0,!!vt.ok,R)}).catch(()=>{clearTimeout(ut),Zf(0,0,!1,R)})}(G.toString(),F)}else Ws(2);v.G=0,v.l&&v.l.sa(R),fj(v),sj(v)}function fj(v){if(v.G=0,v.ka=[],v.l){const R=zB(v.h);(0!=R.length||0!=v.i.length)&&(Re(v.ka,R),Re(v.ka,v.i),v.h.i.length=0,Me(v.i),v.i.length=0),v.l.ra()}}function pj(v,R,F){var G=F instanceof Eg?Kd(F):new Eg(F);if(""!=G.g)R&&(G.g=R+"."+G.g),Nx(G,G.s);else{var ut=f.location;G=ut.protocol,R=R?R+"."+ut.hostname:ut.hostname,ut=+ut.port;var vt=new Eg(null);G&&Px(vt,G),R&&(vt.g=R),ut&&Nx(vt,ut),F&&(vt.l=F),G=vt}return R=v.ya,(F=v.D)&&R&&oi(G,F,R),oi(G,"VER",v.la),gD(v,G),G}function mj(v,R,F){if(R&&!v.J)throw Error("Can't create secondary domain capable XhrIo object.");return(R=new Ri(v.Ca&&!v.pa?new hD({eb:F}):v.pa)).Ha(v.J),R}function gj(){}function Ux(){}function Ka(v,R){Es.call(this),this.g=new oj(R),this.l=v,this.h=R&&R.messageUrlParams||null,v=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(v?v["X-Client-Protocol"]="webchannel":v={"X-Client-Protocol":"webchannel"}),this.g.o=v,v=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(v?v["X-WebChannel-Content-Type"]=R.messageContentType:v={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(v?v["X-WebChannel-Client-Profile"]=R.va:v={"X-WebChannel-Client-Profile":R.va}),this.g.S=v,(v=R&&R.Sb)&&!Et(v)&&(this.g.m=v),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!Et(R)&&(this.g.D=R,null!==(v=this.h)&&R in v&&R in(v=this.h)&&delete v[R]),this.j=new fb(this)}function vj(v){rF.call(this),v.__headers__&&(this.headers=v.__headers__,this.statusCode=v.__status__,delete v.__headers__,delete v.__status__);var R=v.__sm__;if(R){e:{for(const F in R){v=F;break e}v=void 0}(this.i=v)&&(v=this.i,R=null!==R&&v in R?R[v]:void 0),this.data=R}else this.data=v}function _j(){iF.call(this),this.status=1}function fb(v){this.g=v}(n=Ri.prototype).Ha=function(v){this.J=v},n.ea=function(v,R,F,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+v);R=R?R.toUpperCase():"GET",this.D=v,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():oF.g(),this.v=function AB(v){return v.h||(v.h=v.i())}(this.o?this.o:oF),this.g.onreadystatechange=j(this.Ea,this);try{this.B=!0,this.g.open(R,String(v),!0),this.B=!1}catch(vt){return void ej(this,vt)}if(v=F||"",F=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ut in G)F.set(ut,G[ut]);else{if("function"!=typeof G.keys||"function"!=typeof G.get)throw Error("Unknown input type for opt_headers: "+String(G));for(const vt of G.keys())F.set(vt,G.get(vt))}G=Array.from(F.keys()).find(vt=>"content-type"==vt.toLowerCase()),ut=f.FormData&&v instanceof f.FormData,!(0<=Array.prototype.indexOf.call(c4,R,void 0))||G||ut||F.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[vt,Qt]of F)this.g.setRequestHeader(vt,Qt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rj(this),this.u=!0,this.g.send(v),this.u=!1}catch(vt){ej(this,vt)}},n.abort=function(v){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=v||7,Ks(this,"complete"),Ks(this,"abort"),Lx(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Lx(this,!0)),Ri.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?nj(this):this.bb())},n.bb=function(){nj(this)},n.isActive=function(){return!!this.g},n.Z=function(){try{return 2<Wd(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(v){if(this.g){var R=this.g.responseText;return v&&0==R.indexOf(v)&&(R=R.substring(v.length)),jH(R)}},n.Ba=function(){return this.m},n.Ka=function(){return"string"==typeof this.l?this.l:String(this.l)},(n=oj.prototype).la=8,n.G=1,n.connect=function(v,R,F,G){Ws(0),this.W=v,this.H=R||{},F&&void 0!==G&&(this.H.OSID=F,this.H.OAID=G),this.F=this.X,this.I=pj(this,null,this.W),Bx(this)},n.Ga=function(v){if(this.s)if(this.s=null,1==this.G){if(!v){this.U=Math.floor(1e5*Math.random()),v=this.U++;const ut=new Xf(this,this.j,v);let vt=this.o;if(this.S&&(vt?(vt=ue(vt),Le(vt,this.S)):vt=this.S),null!==this.m||this.O||(ut.H=vt,vt=null),this.P)e:{for(var R=0,F=0;F<this.i.length;F++){var G=this.i[F];if(void 0===(G="__data__"in G.map&&"string"==typeof(G=G.map.__data__)?G.length:void 0))break;if(4096<(R+=G)){R=F;break e}if(4096===R||F===this.i.length-1){R=F+1;break e}}R=1e3}else R=1e3;R=cj(this,ut,R),oi(F=Kd(this.I),"RID",v),oi(F,"CVER",22),this.D&&oi(F,"X-HTTP-Session-Id",this.D),gD(this,F),vt&&(this.O?R="headers="+encodeURIComponent(String(JB(vt)))+"&"+R:this.m&&hF(F,this.m,vt)),dF(this.h,ut),this.Ua&&oi(F,"TYPE","init"),this.P?(oi(F,"$req",R),oi(F,"SID","null"),ut.T=!0,aF(ut,F,null)):aF(ut,F,R),this.G=2}}else 3==this.G&&(v?aj(this,v):0==this.i.length||UB(this.h)||aj(this))},n.Fa=function(){if(this.u=null,lj(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var v=2*this.R;this.j.info("BP detection timer enabled: "+v),this.A=sD(j(this.ab,this),v)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ws(10),Vx(this),lj(this))},n.Za=function(){null!=this.C&&(this.C=null,Vx(this),pF(this),Ws(19))},n.fb=function(v){v?(this.j.info("Successfully pinged google.com"),Ws(2)):(this.j.info("Failed to ping google.com"),Ws(1))},n.isActive=function(){return!!this.l&&this.l.isActive(this)},(n=gj.prototype).ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){},Ux.prototype.g=function(v,R){return new Ka(v,R)},we(Ka,Es),Ka.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ka.prototype.close=function(){fF(this.g)},Ka.prototype.o=function(v){var R=this.g;if("string"==typeof v){var F={};F.__data__=v,v=F}else this.u&&((F={}).__data__=tF(v),v=F);R.i.push(new GH(R.Ya++,v)),3==R.G&&Bx(R)},Ka.prototype.N=function(){this.g.l=null,delete this.j,fF(this.g),delete this.g,Ka.aa.N.call(this)},we(vj,rF),we(_j,iF),we(fb,gj),fb.prototype.ua=function(){Ks(this.g,"a")},fb.prototype.ta=function(v){Ks(this.g,new vj(v))},fb.prototype.sa=function(v){Ks(this.g,new _j)},fb.prototype.ra=function(){Ks(this.g,"b")},Ux.prototype.createWebChannel=Ux.prototype.g,Ka.prototype.send=Ka.prototype.o,Ka.prototype.open=Ka.prototype.m,Ka.prototype.close=Ka.prototype.close,kh=Na.createWebChannelTransport=function(){return new Ux},d_=Na.getStatEventTarget=function(){return Rx()},GT=Na.Event=yg,n0=Na.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},xx.NO_ERROR=0,xx.TIMEOUT=8,xx.HTTP_ERROR=6,l_=Na.ErrorCode=xx,NB.COMPLETE="complete",WT=Na.EventType=NB,RB.EventType=iD,iD.OPEN="a",iD.CLOSE="b",iD.ERROR="c",iD.MESSAGE="d",Es.prototype.listen=Es.prototype.K,dm=Na.WebChannel=RB,KT=Na.FetchXmlHttpFactory=hD,Ri.prototype.listenOnce=Ri.prototype.L,Ri.prototype.getLastError=Ri.prototype.Ka,Ri.prototype.getLastErrorCode=Ri.prototype.Ba,Ri.prototype.getStatus=Ri.prototype.Z,Ri.prototype.getResponseJson=Ri.prototype.Oa,Ri.prototype.getResponseText=Ri.prototype.oa,Ri.prototype.send=Ri.prototype.ea,Ri.prototype.setWithCredentials=Ri.prototype.Ha,lm=Na.XhrIo=Ri}).apply(typeof um<"u"?um:typeof self<"u"?self:typeof window<"u"?window:{});const r0="@firebase/firestore";class ki{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ki.UNAUTHENTICATED=new ki(null),ki.GOOGLE_CREDENTIALS=new ki("google-credentials-uid"),ki.FIRST_PARTY=new ki("first-party-uid"),ki.MOCK_USER=new ki("mock-user");let Fh="10.12.3";const ha=new Go("@firebase/firestore");function eu(){return ha.logLevel}function Ot(n,...e){if(ha.logLevel<=ar.DEBUG){const t=e.map(o0);ha.debug(`Firestore (${Fh}): ${n}`,...t)}}function hi(n,...e){if(ha.logLevel<=ar.ERROR){const t=e.map(o0);ha.error(`Firestore (${Fh}): ${n}`,...t)}}function qo(n,...e){if(ha.logLevel<=ar.WARN){const t=e.map(o0);ha.warn(`Firestore (${Fh}): ${n}`,...t)}}function o0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Jt(n="Unexpected state"){const e=`FIRESTORE (${Fh}) INTERNAL ASSERTION FAILED: `+n;throw hi(e),new Error(e)}function dn(n,e){n||Jt()}function Gt(n,e){return n}const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends ql{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Fi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class qT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class AP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ki.UNAUTHENTICATED))}shutdown(){}}class RP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class xP{constructor(e){this.t=e,this.currentUser=ki.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let s=this.i;const u=D=>this.i!==s?(s=this.i,t(D)):Promise.resolve();let d=new Fi;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new Fi,e.enqueueRetryable(()=>u(this.currentUser))};const f=()=>{const D=d;e.enqueueRetryable((0,nt.A)(function*(){yield D.promise,yield u(r.currentUser)}))},g=D=>{Ot("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),f()};this.t.onInit(D=>g(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?g(D):(Ot("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new Fi)}},0),f()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ot("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dn("string"==typeof r.accessToken),new qT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dn(null===e||"string"==typeof e),new ki(e)}}class MP{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ki.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class s0{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new MP(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OP{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=u=>{null!=u.error&&Ot("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.R;return this.R=u.token,Ot("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const s=u=>{Ot("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.A.onInit(u=>s(u)),setTimeout(()=>{if(!this.appCheck){const u=this.A.getImmediate({optional:!0});u?s(u):Ot("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dn("string"==typeof t.token),this.R=t.token,new QT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Zl(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Lh{static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const s=Zl(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(s[u]%62))}return r}}function Mn(n,e){return n<e?-1:n>e?1:0}function Uu(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}class Sr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Rt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Rt(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Rt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Rt(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Sr.fromMillis(Date.now())}static fromDate(e){return Sr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Sr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mn(this.nanoseconds,e.nanoseconds):Mn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fn(e)}static min(){return new fn(new Sr(0,0))}static max(){return new fn(new Sr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class hm{constructor(e,t,r){void 0===t?t=0:t>e.length&&Jt(),void 0===r?r=e.length-t:r>e.length-t&&Jt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===hm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof hm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),d=t.get(s);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jn extends hm{construct(e,t,r){return new Jn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Rt(mt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new Jn(t)}static emptyPath(){return new Jn([])}}const PP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends hm{construct(e,t,r){return new qr(e,t,r)}static isValidIdentifier(e){return PP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Rt(mt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;s<e.length;){const f=e[s];if("\\"===f){if(s+1===e.length)throw new Rt(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[s+1];if("\\"!==g&&"."!==g&&"`"!==g)throw new Rt(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=g,s+=2}else"`"===f?(d=!d,s++):"."!==f||d?(r+=f,s++):(u(),s++)}if(u(),d)throw new Rt(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(t)}static emptyPath(){return new qr([])}}class Xt{constructor(e){this.path=e}static fromPath(e){return new Xt(Jn.fromString(e))}static fromName(e){return new Xt(Jn.fromString(e).popFirst(5))}static empty(){return new Xt(Jn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xt(new Jn(e.slice()))}}class Li{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Li(fn.min(),Xt.empty(),-1)}static max(){return new Li(fn.max(),Xt.empty(),-1)}}function tu(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xt.comparator(n.documentKey,e.documentKey),0!==t?t:Mn(n.largestBatchId,e.largestBatchId))}const Vh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function nu(n){return c0.apply(this,arguments)}function c0(){return(c0=(0,nt.A)(function*(n){if(n.code!==mt.FAILED_PRECONDITION||n.message!==Vh)throw n;Ot("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class ct{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Jt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ct((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ct?t:ct.resolve(t)}catch(t){return ct.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ct.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ct.reject(t)}static resolve(e){return new ct((t,r)=>{t(e)})}static reject(e){return new ct((t,r)=>{r(e)})}static waitFor(e){return new ct((t,r)=>{let s=0,u=0,d=!1;e.forEach(f=>{++s,f.next(()=>{++u,d&&u===s&&t()},g=>r(g))}),d=!0,u===s&&t()})}static or(e){let t=ct.resolve(!1);for(const r of e)t=t.next(s=>s?ct.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new ct((r,s)=>{const u=e.length,d=new Array(u);let f=0;for(let g=0;g<u;g++){const D=g;t(e[D]).next(S=>{d[D]=S,++f,f===u&&r(d)},S=>s(S))}})}static doWhile(e,t){return new ct((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}function pc(n){return"IndexedDbTransactionError"===n.name}let ms=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ie(s),this.se=s=>r.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Bh(n){return null==n}function jh(n){return 0===n&&1/n==-1/0}function m_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ou(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $h(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Hr{constructor(e,t){this.comparator=e,this.root=t||Yi.EMPTY}insert(e,t){return new Hr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new Hr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rd(this.root,e,this.comparator,!1)}getReverseIterator(){return new rd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rd(this.root,e,this.comparator,!0)}}class rd{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yi{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Yi.RED,this.left=s??Yi.EMPTY,this.right=u??Yi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Yi(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Yi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Yi.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Jt();const e=this.left.check();if(e!==this.right.check())throw Jt();return e+(this.isRed()?0:1)}}Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1,Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw Jt()}get value(){throw Jt()}get color(){throw Jt()}get left(){throw Jt()}get right(){throw Jt()}copy(e,t,r,s,u){return this}insert(e,t,r){return new Yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ar{constructor(e){this.comparator=e,this.data=new Hr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new uS(this.data.getIterator())}getIteratorFrom(e){return new uS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ar)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ar(this.comparator);return t.data=e,t}}class uS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gs{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new gs([])}unionWith(e){let t=new Ar(qr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new gs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uu(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class lS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Vi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new lS("Invalid base64 string: "+u):u}}(e);return new Vi(t)}static fromUint8Array(e){const t=function(s){let u="";for(let d=0;d<s.length;++d)u+=String.fromCharCode(s[d]);return u}(e);return new Vi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vi.EMPTY_BYTE_STRING=new Vi("");const GP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function au(n){if(dn(!!n),"string"==typeof n){let e=0;const t=GP.exec(n);if(dn(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fi(n.seconds),nanos:fi(n.nanos)}}function fi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function cu(n){return"string"==typeof n?Vi.fromBase64String(n):Vi.fromUint8Array(n)}function id(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function g_(n){const e=n.mapValue.fields.__previous_value__;return id(e)?g_(e):e}function gm(n){const e=au(n.mapValue.fields.__local_write_time__.timestampValue);return new Sr(e.seconds,e.nanos)}class dS{constructor(e,t,r,s,u,d,f,g,D){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=D}}class Hu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Hu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Hu&&e.projectId===this.projectId&&e.database===this.database}}const vc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function zu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?id(n)?4:hS(n)?9007199254740991:10:Jt()}function Fa(n,e){if(n===e)return!0;const t=zu(n);if(t!==zu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gm(n).isEqual(gm(e));case 3:return function(s,u){if("string"==typeof s.timestampValue&&"string"==typeof u.timestampValue&&s.timestampValue.length===u.timestampValue.length)return s.timestampValue===u.timestampValue;const d=au(s.timestampValue),f=au(u.timestampValue);return d.seconds===f.seconds&&d.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return u=e,cu(n.bytesValue).isEqual(cu(u.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,u){return fi(s.geoPointValue.latitude)===fi(u.geoPointValue.latitude)&&fi(s.geoPointValue.longitude)===fi(u.geoPointValue.longitude)}(n,e);case 2:return function(s,u){if("integerValue"in s&&"integerValue"in u)return fi(s.integerValue)===fi(u.integerValue);if("doubleValue"in s&&"doubleValue"in u){const d=fi(s.doubleValue),f=fi(u.doubleValue);return d===f?jh(d)===jh(f):isNaN(d)&&isNaN(f)}return!1}(n,e);case 9:return Uu(n.arrayValue.values||[],e.arrayValue.values||[],Fa);case 10:return function(s,u){const d=s.mapValue.fields||{},f=u.mapValue.fields||{};if(m_(d)!==m_(f))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(void 0===f[g]||!Fa(d[g],f[g])))return!1;return!0}(n,e);default:return Jt()}var u}function od(n,e){return void 0!==(n.values||[]).find(t=>Fa(t,e))}function uu(n,e){if(n===e)return 0;const t=zu(n),r=zu(e);if(t!==r)return Mn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mn(n.booleanValue,e.booleanValue);case 2:return function(u,d){const f=fi(u.integerValue||u.doubleValue),g=fi(d.integerValue||d.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1}(n,e);case 3:return m0(n.timestampValue,e.timestampValue);case 4:return m0(gm(n),gm(e));case 5:return Mn(n.stringValue,e.stringValue);case 6:return function(u,d){const f=cu(u),g=cu(d);return f.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(u,d){const f=u.split("/"),g=d.split("/");for(let D=0;D<f.length&&D<g.length;D++){const S=Mn(f[D],g[D]);if(0!==S)return S}return Mn(f.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(u,d){const f=Mn(fi(u.latitude),fi(d.latitude));return 0!==f?f:Mn(fi(u.longitude),fi(d.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(u,d){const f=u.values||[],g=d.values||[];for(let D=0;D<f.length&&D<g.length;++D){const S=uu(f[D],g[D]);if(S)return S}return Mn(f.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(u,d){if(u===vc.mapValue&&d===vc.mapValue)return 0;if(u===vc.mapValue)return 1;if(d===vc.mapValue)return-1;const f=u.fields||{},g=Object.keys(f),D=d.fields||{},S=Object.keys(D);g.sort(),S.sort();for(let P=0;P<g.length&&P<S.length;++P){const j=Mn(g[P],S[P]);if(0!==j)return j;const Q=uu(f[g[P]],D[S[P]]);if(0!==Q)return Q}return Mn(g.length,S.length)}(n.mapValue,e.mapValue);default:throw Jt()}}function m0(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mn(n,e);const t=au(n),r=au(e),s=Mn(t.seconds,r.seconds);return 0!==s?s:Mn(t.nanos,r.nanos)}function Hh(n){return g0(n)}function g0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=au(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?cu(n.bytesValue).toBase64():"referenceValue"in n?Xt.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const u of t.values||[])s?s=!1:r+=",",r+=g0(u);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",u=!0;for(const d of r)u?u=!1:s+=",",s+=`${d}:${g0(t.fields[d])}`;return s+"}"}(n.mapValue):Jt()}function lu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function _m(n){return!!n&&"integerValue"in n}function zh(n){return!!n&&"arrayValue"in n}function __(n){return!!n&&"nullValue"in n}function y_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function b_(n){return!!n&&"mapValue"in n}function ym(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return ou(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ym(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ym(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hS(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class Zi{constructor(e){this.value=e}static empty(){return new Zi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!b_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ym(t)}setAll(e){let t=qr.emptyPath(),r={},s=[];e.forEach((d,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,r,s),r={},s=[],t=f.popLast()}d?r[f.lastSegment()]=ym(d):s.push(f.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());b_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];b_(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){ou(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new Zi(ym(this.value))}}function v0(n){const e=[];return ou(n.fields,(t,r)=>{const s=new qr([t]);if(b_(r)){const u=v0(r.mapValue).fields;if(0===u.length)e.push(s);else for(const d of u)e.push(s.child(d))}else e.push(s)}),new gs(e)}class Br{constructor(e,t,r,s,u,d,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=d,this.documentState=f}static newInvalidDocument(e){return new Br(e,0,fn.min(),fn.min(),fn.min(),Zi.empty(),0)}static newFoundDocument(e,t,r,s){return new Br(e,1,t,fn.min(),r,s,0)}static newNoDocument(e,t){return new Br(e,2,t,fn.min(),fn.min(),Zi.empty(),0)}static newUnknownDocument(e,t){return new Br(e,3,t,fn.min(),fn.min(),Zi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ku{constructor(e,t){this.position=e,this.inclusive=t}}function _0(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],d=n.position[s];if(r=u.field.isKeyField()?Xt.comparator(Xt.fromName(d.referenceValue),t.key):uu(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function pS(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fa(n.position[t],e.position[t]))return!1;return!0}class sd{constructor(e,t="asc"){this.field=e,this.dir=t}}function mS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class I_{}class nr extends I_{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new QP(e,t,r):"array-contains"===t?new RL(e,r):"in"===t?new YP(e,r):"not-in"===t?new xL(e,r):"array-contains-any"===t?new ML(e,r):new nr(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new SL(e,r):new AL(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(uu(t,this.value)):null!==t&&zu(this.value)===zu(t)&&this.matchesComparison(uu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Jt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Or extends I_{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Or(e,t)}matches(e){return Kh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Kh(n){return"and"===n.op}function C_(n){return function T_(n){for(const e of n.filters)if(e instanceof Or)return!1;return!0}(n)&&Kh(n)}function S_(n){if(n instanceof nr)return n.field.canonicalString()+n.op.toString()+Hh(n.value);if(C_(n))return n.filters.map(e=>S_(e)).join(",");{const e=n.filters.map(t=>S_(t)).join(",");return`${n.op}(${e})`}}function y0(n,e){return n instanceof nr?(r=n,(s=e)instanceof nr&&r.op===s.op&&r.field.isEqual(s.field)&&Fa(r.value,s.value)):n instanceof Or?function(r,s){return s instanceof Or&&r.op===s.op&&r.filters.length===s.filters.length&&r.filters.reduce((u,d,f)=>u&&y0(d,s.filters[f]),!0)}(n,e):void Jt();var r,s}function E0(n){return n instanceof nr?`${(t=n).field.canonicalString()} ${t.op} ${Hh(t.value)}`:n instanceof Or?function(t){return t.op.toString()+" {"+t.getFilters().map(E0).join(" ,")+"}"}(n):"Filter";var t}class QP extends nr{constructor(e,t,r){super(e,t,r),this.key=Xt.fromName(r.referenceValue)}matches(e){const t=Xt.comparator(e.key,this.key);return this.matchesComparison(t)}}class SL extends nr{constructor(e,t){super(e,"in",t),this.keys=XP(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class AL extends nr{constructor(e,t){super(e,"not-in",t),this.keys=XP(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function XP(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xt.fromName(r.referenceValue))}class RL extends nr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zh(t)&&od(t.arrayValue,this.value)}}class YP extends nr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&od(this.value.arrayValue,t)}}class xL extends nr{constructor(e,t){super(e,"not-in",t)}matches(e){if(od(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!od(this.value.arrayValue,t)}}class ML extends nr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>od(this.value.arrayValue,r))}}class OL{constructor(e,t=null,r=[],s=[],u=null,d=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=d,this.endAt=f,this.ue=null}}function A_(n,e=null,t=[],r=[],s=null,u=null,d=null){return new OL(n,e,t,r,s,u,d)}function Wu(n){const e=Gt(n);if(null===e.ue){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>S_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(u=r).field.canonicalString()+u.dir;var u}).join(","),Bh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hh(r)).join(",")),e.ue=t}return e.ue}function R_(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!y0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pS(n.startAt,e.startAt)&&pS(n.endAt,e.endAt)}function w0(n){return Xt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Gu{constructor(e,t=null,r=[],s=[],u=null,d="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=d,this.startAt=f,this.endAt=g,this.ce=null,this.le=null,this.he=null}}function bm(n){return new Gu(n)}function tN(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function D0(n){return null!==n.collectionGroup}function La(n){const e=Gt(n);if(null===e.ce){e.ce=[];const t=new Set;for(const u of e.explicitOrderBy)e.ce.push(u),t.add(u.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let f=new Ar(qr.comparator);return d.filters.forEach(g=>{g.getFlattenedFilters().forEach(D=>{D.isInequality()&&(f=f.add(D.field))})}),f})(e).forEach(u=>{t.has(u.canonicalString())||u.isKeyField()||e.ce.push(new sd(u,r))}),t.has(qr.keyField().canonicalString())||e.ce.push(new sd(qr.keyField(),r))}return e.ce}function Ti(n){const e=Gt(n);return e.le||(e.le=function nN(n,e){if("F"===n.limitType)return A_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>new sd(s.field,"desc"===s.dir?"asc":"desc"));const t=n.endAt?new Ku(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ku(n.startAt.position,n.startAt.inclusive):null;return A_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,La(n))),e.le}function x_(n,e){const t=n.filters.concat([e]);return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function M_(n,e,t){return new Gu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function O_(n,e){return R_(Ti(n),Ti(e))&&n.limitType===e.limitType}function vS(n){return`${Wu(Ti(n))}|lt:${n.limitType}`}function Wh(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>E0(s)).join(", ")}]`),Bh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>{return`${(d=s).field.canonicalString()} (${d.dir})`;var d}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Hh(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Hh(s)).join(",")),`Target(${r})`}(Ti(n))}; limitType=${n.limitType})`}function Em(n,e){return e.isFoundDocument()&&function(r,s){const u=s.key.path;return null!==r.collectionGroup?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):Xt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)}(n,e)&&function(r,s){for(const u of La(r))if(!u.field.isKeyField()&&null===s.data.field(u.field))return!1;return!0}(n,e)&&function(r,s){for(const u of r.filters)if(!u.matches(s))return!1;return!0}(n,e)&&(s=e,!((r=n).startAt&&!function(d,f,g){const D=_0(d,f,g);return d.inclusive?D<=0:D<0}(r.startAt,La(r),s)||r.endAt&&!function(d,f,g){const D=_0(d,f,g);return d.inclusive?D>=0:D>0}(r.endAt,La(r),s)));var r,s}function C0(n){return(e,t)=>{let r=!1;for(const s of La(n)){const u=rN(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function rN(n,e,t){const r=n.field.isKeyField()?Xt.comparator(e.key,t.key):function(u,d,f){const g=d.data.field(u),D=f.data.field(u);return null!==g&&null!==D?uu(g,D):Jt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Jt()}}class _c{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ou(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return $h(this.inner)}size(){return this.innerSize}}const PL=new Hr(Xt.comparator);function Xo(){return PL}const iN=new Hr(Xt.comparator);function Im(...n){let e=iN;for(const t of n)e=e.insert(t.key,t);return e}function T0(n){let e=iN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function fa(){return Dm()}function _S(){return Dm()}function Dm(){return new _c(n=>n.toString(),(n,e)=>n.isEqual(e))}const P_=new Hr(Xt.comparator),oN=new Ar(Xt.comparator);function Bn(...n){let e=oN;for(const t of n)e=e.add(t);return e}const sN=new Ar(Mn);function yS(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jh(e)?"-0":e}}function bS(n){return{integerValue:""+n}}function ES(n,e){return function BP(n){return"number"==typeof n&&Number.isInteger(n)&&!jh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?bS(e):yS(n,e)}class Cm{constructor(){this._=void 0}}function wS(n,e,t){return n instanceof ad?function(s,u){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return u&&id(u)&&(u=g_(u)),u&&(d.fields.__previous_value__=u),{mapValue:d}}(t,e):n instanceof qu?Qu(n,e):n instanceof Xu?IS(n,e):function(s,u){const d=cN(s,u),f=N_(d)+N_(s.Pe);return _m(d)&&_m(s.Pe)?bS(f):yS(s.serializer,f)}(n,e)}function aN(n,e,t){return n instanceof qu?Qu(n,e):n instanceof Xu?IS(n,e):t}function cN(n,e){return n instanceof Tm?_m(r=e)||(u=r)&&"doubleValue"in u?e:{integerValue:0}:null;var r,u}class ad extends Cm{}class qu extends Cm{constructor(e){super(),this.elements=e}}function Qu(n,e){const t=k_(e);for(const r of n.elements)t.some(s=>Fa(s,r))||t.push(r);return{arrayValue:{values:t}}}class Xu extends Cm{constructor(e){super(),this.elements=e}}function IS(n,e){let t=k_(e);for(const r of n.elements)t=t.filter(s=>!Fa(s,r));return{arrayValue:{values:t}}}class Tm extends Cm{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function N_(n){return fi(n.integerValue||n.doubleValue)}function k_(n){return zh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Sm{constructor(e,t){this.field=e,this.transform=t}}class A0{constructor(e,t){this.version=e,this.transformResults=t}}class Qr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qr}static exists(e){return new Qr(void 0,e)}static updateTime(e){return new Qr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function R0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cd{}function CS(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Ba(n.key,Qr.none()):new yc(n.key,n.data,Qr.none());{const t=n.data,r=Zi.empty();let s=new Ar(qr.comparator);for(let u of e.fields)if(!s.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),s=s.add(u)}return new Rr(n.key,r,new gs(s.toArray()),Qr.none())}}function uN(n,e,t){n instanceof yc?function(s,u,d){const f=s.value.clone(),g=Am(s.fieldTransforms,u,d.transformResults);f.setAll(g),u.convertToFoundDocument(d.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Rr?function(s,u,d){if(!R0(s.precondition,u))return void u.convertToUnknownDocument(d.version);const f=Am(s.fieldTransforms,u,d.transformResults),g=u.data;g.setAll(Yu(s)),g.setAll(f),u.convertToFoundDocument(d.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function ud(n,e,t,r){return n instanceof yc?function(u,d,f,g){if(!R0(u.precondition,d))return f;const D=u.value.clone(),S=Ls(u.fieldTransforms,g,d);return D.setAll(S),d.convertToFoundDocument(d.version,D).setHasLocalMutations(),null}(n,e,t,r):n instanceof Rr?function(u,d,f,g){if(!R0(u.precondition,d))return f;const D=Ls(u.fieldTransforms,g,d),S=d.data;return S.setAll(Yu(u)),S.setAll(D),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),null===f?null:f.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map(P=>P.field))}(n,e,t,r):(f=t,R0(n.precondition,d=e)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):f);var d,f}function lN(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=cN(r.transform,s||null);null!=u&&(null===t&&(t=Zi.empty()),t.set(r.field,u))}return t||null}function Va(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(s=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===s||r&&s&&Uu(r,s,(u,d)=>function DS(n,e){return n.field.isEqual(e.field)&&(s=e.transform,(r=n.transform)instanceof qu&&s instanceof qu||r instanceof Xu&&s instanceof Xu?Uu(r.elements,s.elements,Fa):r instanceof Tm&&s instanceof Tm?Fa(r.Pe,s.Pe):r instanceof ad&&s instanceof ad);var r,s}(u,d))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,s}class yc extends cd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rr extends cd{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Yu(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Am(n,e,t){const r=new Map;dn(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],d=u.transform,f=e.data.field(u.field);r.set(u.field,aN(d,f,t[s]))}return r}function Ls(n,e,t){const r=new Map;for(const s of n){const u=s.transform,d=t.data.field(s.field);r.set(s.field,wS(u,d,e))}return r}class Ba extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class x0 extends cd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class ld{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&uN(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=ud(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=ud(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=_S();return this.mutations.forEach(s=>{const u=e.get(s.key),d=u.overlayedDocument;let f=this.applyToLocalView(d,u.mutatedFields);f=t.has(s.key)?null:f;const g=CS(d,f);null!==g&&r.set(s.key,g),d.isValidDocument()||d.convertToNoDocument(fn.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Bn())}isEqual(e){return this.batchId===e.batchId&&Uu(this.mutations,e.mutations,(t,r)=>Va(t,r))&&Uu(this.baseMutations,e.baseMutations,(t,r)=>Va(t,r))}}class Rm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){dn(e.mutations.length===r.length);let s=function(){return P_}();const u=e.mutations;for(let d=0;d<u.length;d++)s=s.insert(u[d].key,r[d].version);return new Rm(e,t,r,s)}}class F_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class dN{constructor(e,t){this.count=e,this.unchangedNames=t}}var Si,En;function O0(n){switch(n){default:return Jt();case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0}}function TS(n){if(void 0===n)return hi("GRPC error has no .code"),mt.UNKNOWN;switch(n){case Si.OK:return mt.OK;case Si.CANCELLED:return mt.CANCELLED;case Si.UNKNOWN:return mt.UNKNOWN;case Si.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case Si.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case Si.INTERNAL:return mt.INTERNAL;case Si.UNAVAILABLE:return mt.UNAVAILABLE;case Si.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case Si.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case Si.NOT_FOUND:return mt.NOT_FOUND;case Si.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case Si.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case Si.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case Si.ABORTED:return mt.ABORTED;case Si.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case Si.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case Si.DATA_LOSS:return mt.DATA_LOSS;default:return Jt()}}(En=Si||(Si={}))[En.OK=0]="OK",En[En.CANCELLED=1]="CANCELLED",En[En.UNKNOWN=2]="UNKNOWN",En[En.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",En[En.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",En[En.NOT_FOUND=5]="NOT_FOUND",En[En.ALREADY_EXISTS=6]="ALREADY_EXISTS",En[En.PERMISSION_DENIED=7]="PERMISSION_DENIED",En[En.UNAUTHENTICATED=16]="UNAUTHENTICATED",En[En.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",En[En.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",En[En.ABORTED=10]="ABORTED",En[En.OUT_OF_RANGE=11]="OUT_OF_RANGE",En[En.UNIMPLEMENTED=12]="UNIMPLEMENTED",En[En.INTERNAL=13]="INTERNAL",En[En.UNAVAILABLE=14]="UNAVAILABLE",En[En.DATA_LOSS=15]="DATA_LOSS";const qh=new ju([4294967295,4294967295],0);function xm(n){const e=function Gh(){return new TextEncoder}().encode(n),t=new zT;return t.update(e),new Uint8Array(t.digest())}function Qh(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new ju([t,r],0),new ju([s,u],0)]}class Xh{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Yh(`Invalid padding: ${t}`);if(r<0)throw new Yh(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Yh(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Yh(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ju.fromNumber(this.Ie)}Ee(e,t,r){let s=e.add(t.multiply(ju.fromNumber(r)));return 1===s.compare(qh)&&(s=new ju([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Ie)return!1;const t=xm(e),[r,s]=Qh(t);for(let u=0;u<this.hashCount;u++){const d=this.Ee(r,s,u);if(!this.de(d))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),d=new Xh(u,s,t);return r.forEach(f=>d.insert(f)),d}insert(e){if(0===this.Ie)return;const t=xm(e),[r,s]=Qh(t);for(let u=0;u<this.hashCount;u++){const d=this.Ee(r,s,u);this.Ae(d)}}Ae(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Yh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Zh{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zh(fn.min(),s,new Hr(Mn),Xo(),Bn())}}class Jh{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jh(r,t,Bn(),Bn(),Bn())}}class dd{constructor(e,t,r,s){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=s}}class L_{constructor(e,t){this.targetId=e,this.me=t}}class P0{constructor(e,t,r=Vi.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Mm{constructor(){this.fe=0,this.ge=vs(),this.pe=Vi.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=Bn(),t=Bn(),r=Bn();return this.ge.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Jt()}}),new Jh(this.pe,this.ye,e,t,r)}ve(){this.we=!1,this.ge=vs()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,dn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hd{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xo(),this.qe=SS(),this.Qe=new Hr(Mn)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:Jt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,s)=>{this.ze(s)&&t(s)})}He(e){const t=e.targetId,r=e.me.count,s=this.Je(t);if(s){const u=s.target;if(w0(u))if(0===r){const d=new Xt(u.path);this.Ue(t,d,Br.newNoDocument(d,fn.min()))}else dn(1===r);else{const d=this.Ye(t);if(d!==r){const f=this.Ze(e),g=f?this.Xe(f,e,d):1;0!==g&&(this.je(t),this.Qe=this.Qe.insert(t,2===g?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:u=0}=t;let d,f;try{d=cu(r).toUint8Array()}catch(g){if(g instanceof lS)return qo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new Xh(d,s,u)}catch(g){return qo(g instanceof Yh?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return 0===f.Ie?null:f}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let s=0;return r.forEach(u=>{const d=this.Le.tt(),f=`projects/${d.projectId}/databases/${d.database}/documents/${u.path.canonicalString()}`;e.mightContain(f)||(this.Ue(t,u,null),s++)}),s}rt(e){const t=new Map;this.Be.forEach((u,d)=>{const f=this.Je(d);if(f){if(u.current&&w0(f.target)){const g=new Xt(f.target.path);null!==this.ke.get(g)||this.it(d,g)||this.Ue(d,g,Br.newNoDocument(g,e))}u.be&&(t.set(d,u.Ce()),u.ve())}});let r=Bn();this.qe.forEach((u,d)=>{let f=!0;d.forEachWhile(g=>{const D=this.Je(g);return!D||"TargetPurposeLimboResolution"===D.purpose||(f=!1,!1)}),f&&(r=r.add(u))}),this.ke.forEach((u,d)=>d.setReadTime(e));const s=new Zh(e,t,this.Qe,this.ke,r);return this.ke=Xo(),this.qe=SS(),this.Qe=new Hr(Mn),s}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,t)?s.Fe(t,1):s.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Mm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Ar(Mn),this.qe=this.qe.insert(e,t)),t}ze(e){const t=null!==this.Je(e);return t||Ot("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Mm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function SS(){return new Hr(Xt.comparator)}function vs(){return new Hr(Xt.comparator)}const hN={asc:"ASCENDING",desc:"DESCENDING"},fN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},N0={and:"AND",or:"OR"};class AS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function V_(n,e){return n.useProto3Json||Bh(e)?e:{value:e}}function ef(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function mN(n,e){return ef(n,e.toTimestamp())}function Yr(n){return dn(!!n),fn.fromTimestamp(function(t){const r=au(t);return new Sr(r.seconds,r.nanos)}(n))}function Om(n,e){return Pm(n,e).canonicalString()}function Pm(n,e){const t=(s=n,new Jn(["projects",s.projectId,"databases",s.database])).child("documents");var s;return void 0===e?t:t.child(e)}function fd(n){const e=Jn.fromString(n);return dn(MS(e)),e}function tf(n,e){return Om(n.databaseId,e.path)}function ja(n,e){const t=fd(e);if(t.get(1)!==n.databaseId.projectId)throw new Rt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Rt(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xt(k0(t))}function pd(n,e){return Om(n.databaseId,e)}function Nm(n){return new Jn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function k0(n){return dn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function F0(n,e,t){return{name:tf(n,e),fields:t.value.mapValue.fields}}function bc(n,e){let t;if(e instanceof yc)t={update:F0(n,e.key,e.value)};else if(e instanceof Ba)t={delete:tf(n,e.key)};else if(e instanceof Rr)t={update:F0(n,e.key,e.data),updateMask:wN(e.fieldMask)};else{if(!(e instanceof x0))return Jt();t={verify:tf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(u,d){const f=d.transform;if(f instanceof ad)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof qu)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Xu)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Tm)return{fieldPath:d.field.canonicalString(),increment:f.Pe};throw Jt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:mN(n,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:Jt()),t;var u}function RS(n,e){return{documents:[pd(n,e.path)]}}function U_(n,e){const t={structuredQuery:{}},r=e.path;let s;null!==e.collectionGroup?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=pd(n,s);const u=function(D){if(0!==D.length)return xS(Or.create(D,"and"))}(e.filters);u&&(t.structuredQuery.where=u);const d=function(D){if(0!==D.length)return D.map(S=>{return{field:Zu((j=S).field),direction:EN(j.dir)};var j})}(e.orderBy);d&&(t.structuredQuery.orderBy=d);const f=V_(n,e.limit);return null!==f&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt={before:(D=e.startAt).inclusive,values:D.position}),e.endAt&&(t.structuredQuery.endAt=function(D){return{before:!D.inclusive,values:D.position}}(e.endAt)),{_t:t,parent:s};var D}function B0(n){let e=function B_(n){const e=fd(n);return 4===e.length?Jn.emptyPath():k0(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){dn(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(P){const j=bN(P);return j instanceof Or&&C_(j)?j.getFilters():[j]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(j=>{return new sd(nf((we=j).field),function(Re){switch(Re){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(we.direction));var we}));let f=null;t.limit&&(f=function(P){let j;return j="object"==typeof P?P.value:P,Bh(j)?null:j}(t.limit));let g=null;var P;t.startAt&&(g=new Ku((P=t.startAt).values||[],!!P.before));let D=null;return t.endAt&&(D=function(P){return new Ku(P.values||[],!P.before)}(t.endAt)),function eN(n,e,t,r,s,u,d,f){return new Gu(n,e,t,r,s,u,d,f)}(e,s,d,u,f,"F",g,D)}function bN(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=nf(t.unaryFilter.field);return nr.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=nf(t.unaryFilter.field);return nr.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=nf(t.unaryFilter.field);return nr.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=nf(t.unaryFilter.field);return nr.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Jt()}}(n):void 0!==n.fieldFilter?nr.create(nf((t=n).fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Jt()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Or.create(t.compositeFilter.filters.map(r=>bN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Jt()}}(t.compositeFilter.op))}(n):Jt();var t}function EN(n){return hN[n]}function j0(n){return fN[n]}function U0(n){return N0[n]}function Zu(n){return{fieldPath:n.canonicalString()}}function nf(n){return qr.fromServerFormat(n.fieldPath)}function xS(n){return n instanceof nr?function(t){if("=="===t.op){if(y_(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NAN"}};if(__(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(y_(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NOT_NAN"}};if(__(t.value))return{unaryFilter:{field:Zu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zu(t.field),op:j0(t.op),value:t.value}}}(n):n instanceof Or?function(t){const r=t.getFilters().map(s=>xS(s));return 1===r.length?r[0]:{compositeFilter:{op:U0(t.op),filters:r}}}(n):Jt()}function wN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function MS(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class du{constructor(e,t,r,s,u=fn.min(),d=fn.min(),f=Vi.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new du(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class OS{constructor(e){this.ct=e}}function $0(n){const e=B0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?M_(e,e.limit,"L"):e}class Ju{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(fi(e.integerValue));else if("doubleValue"in e){const r=fi(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),jh(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(t,20),"string"==typeof r&&(r=au(r)),t.At(`${r.seconds||""}`),t.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(cu(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?hS(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Jt()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const s of Object.keys(r))this.Rt(s,t),this.It(r[s],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const s of r)this.It(s,t)}gt(e,t){this.Et(t,37),Xt.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}Ju.bt=new Ju;class LS{constructor(){this._n=new q_}addToCollectionParentIndex(e,t){return this._n.add(t),ct.resolve()}getCollectionParents(e,t){return ct.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return ct.resolve()}deleteFieldIndex(e,t){return ct.resolve()}deleteAllFieldIndexes(e){return ct.resolve()}createTargetIndexes(e,t){return ct.resolve()}getDocumentsMatchingTarget(e,t){return ct.resolve(null)}getIndexType(e,t){return ct.resolve(0)}getFieldIndexes(e,t){return ct.resolve([])}getNextCollectionGroupToUpdate(e){return ct.resolve(null)}getMinOffset(e,t){return ct.resolve(Li.min())}getMinOffsetFromCollectionGroup(e,t){return ct.resolve(Li.min())}updateCollectionGroup(e,t,r){return ct.resolve()}updateIndexEntries(e,t){return ct.resolve()}}class q_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ar(Jn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ar(Jn.comparator)).toArray()}}new Uint8Array(0);class pi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new pi(e,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}pi.DEFAULT_COLLECTION_PERCENTILE=10,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pi.DEFAULT=new pi(41943040,pi.DEFAULT_COLLECTION_PERCENTILE,pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pi.DISABLED=new pi(-1,0,0);class nl{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new nl(0)}static Ln(){return new nl(-1)}}class KS{constructor(){this.changes=new _c(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Br.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ct.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ec{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class QS{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&ud(r.mutation,s,gs.empty(),Sr.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Bn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Bn()){const s=fa();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let d=Im();return u.forEach((f,g)=>{d=d.insert(f,g.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=fa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Bn()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((d,f)=>{t.set(d,f)})})}computeViews(e,t,r,s){let u=Xo();const d=Dm(),f=Dm();return t.forEach((g,D)=>{const S=r.get(D.key);s.has(D.key)&&(void 0===S||S.mutation instanceof Rr)?u=u.insert(D.key,D):void 0!==S?(d.set(D.key,S.mutation.getFieldMask()),ud(S.mutation,D,S.mutation.getFieldMask(),Sr.now())):d.set(D.key,gs.empty())}),this.recalculateAndSaveOverlays(e,u).next(g=>(g.forEach((D,S)=>d.set(D,S)),t.forEach((D,S)=>{var P;return f.set(D,new Ec(S,null!==(P=d.get(D))&&void 0!==P?P:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Dm();let s=new Hr((d,f)=>d-f),u=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const f of d)f.keys().forEach(g=>{const D=t.get(g);if(null===D)return;let S=r.get(g)||gs.empty();S=f.applyToLocalView(D,S),r.set(g,S);const P=(s.get(f.batchId)||Bn()).add(g);s=s.insert(f.batchId,P)})}).next(()=>{const d=[],f=s.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),D=g.key,S=g.value,P=_S();S.forEach(j=>{if(!u.has(j)){const Q=CS(t.get(j),r.get(j));null!==Q&&P.set(j,Q),u=u.add(j)}}),d.push(this.documentOverlayCache.saveOverlays(e,D,P))}return ct.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return Xt.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):D0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s);var d}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const d=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):ct.resolve(fa());let f=-1,g=u;return d.next(D=>ct.forEach(D,(S,P)=>(f<P.largestBatchId&&(f=P.largestBatchId),u.get(S)?ct.resolve():this.remoteDocumentCache.getEntry(e,S).next(j=>{g=g.insert(S,j)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,g,D,Bn())).next(S=>({batchId:f,changes:T0(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xt(t)).next(r=>{let s=Im();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const u=t.collectionGroup;let d=Im();return this.indexManager.getCollectionParents(e,u).next(f=>ct.forEach(f,g=>{const D=(P=t,j=g.child(u),new Gu(j,null,P.explicitOrderBy.slice(),P.filters.slice(),P.limit,P.limitType,P.startAt,P.endAt));var P,j;return this.getDocumentsMatchingCollectionQuery(e,D,r,s).next(S=>{S.forEach((P,j)=>{d=d.insert(P,j)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,t,r,s){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(d=>(u=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,u,s))).next(d=>{u.forEach((g,D)=>{const S=D.getKey();null===d.get(S)&&(d=d.insert(S,Br.newInvalidDocument(S)))});let f=Im();return d.forEach((g,D)=>{const S=u.get(g);void 0!==S&&ud(S.mutation,D,gs.empty(),Sr.now()),Em(t,D)&&(f=f.insert(g,D))}),f})}}class XS{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return ct.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(s=t).id,version:s.version,createTime:Yr(s.createTime)}),ct.resolve();var s}getNamedQuery(e,t){return ct.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(s=t).name,query:$0(s.bundledQuery),readTime:Yr(s.readTime)}),ct.resolve();var s}}class wc{constructor(){this.overlays=new Hr(Xt.comparator),this.hr=new Map}getOverlay(e,t){return ct.resolve(this.overlays.get(t))}getOverlays(e,t){const r=fa();return ct.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.ht(e,t,u)}),ct.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.hr.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.hr.delete(r)),ct.resolve()}getOverlaysForCollection(e,t,r){const s=fa(),u=t.length+1,d=new Xt(t.child("")),f=this.overlays.getIteratorFrom(d);for(;f.hasNext();){const g=f.getNext().value,D=g.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&g.largestBatchId>r&&s.set(g.getKey(),g)}return ct.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Hr((D,S)=>D-S);const d=this.overlays.getIterator();for(;d.hasNext();){const D=d.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let S=u.get(D.largestBatchId);null===S&&(S=fa(),u=u.insert(D.largestBatchId,S)),S.set(D.getKey(),D)}}const f=fa(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach((D,S)=>f.set(D,S)),!(f.size()>=s)););return ct.resolve(f)}ht(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const d=this.hr.get(s.largestBatchId).delete(r.key);this.hr.set(s.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new F_(t,r));let u=this.hr.get(t);void 0===u&&(u=Bn(),this.hr.set(t,u)),this.hr.set(t,u.add(r.key))}}class Bs{constructor(){this.Pr=new Ar(Pr.Ir),this.Tr=new Ar(Pr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Pr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Pr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new Xt(new Jn([])),r=new Pr(t,e),s=new Pr(t,e+1),u=[];return this.Tr.forEachInRange([r,s],d=>{this.Ar(d),u.push(d.key)}),u}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new Xt(new Jn([])),r=new Pr(t,e),s=new Pr(t,e+1);let u=Bn();return this.Tr.forEachInRange([r,s],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Pr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Pr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return Xt.comparator(e.key,t.key)||Mn(e.pr,t.pr)}static Er(e,t){return Mn(e.pr,t.pr)||Xt.comparator(e.key,t.key)}}class YS{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Ar(Pr.Ir)}checkEmpty(e){return ct.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.yr;this.yr++;const d=new ld(u,t,r,s);this.mutationQueue.push(d);for(const f of s)this.wr=this.wr.add(new Pr(f.key,u)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ct.resolve(d)}lookupMutationBatch(e,t){return ct.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.br(t+1),u=s<0?0:s;return ct.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ct.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return ct.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Pr(t,0),s=new Pr(t,Number.POSITIVE_INFINITY),u=[];return this.wr.forEachInRange([r,s],d=>{const f=this.Sr(d.pr);u.push(f)}),ct.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ar(Mn);return t.forEach(s=>{const u=new Pr(s,0),d=new Pr(s,Number.POSITIVE_INFINITY);this.wr.forEachInRange([u,d],f=>{r=r.add(f.pr)})}),ct.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;Xt.isDocumentKey(u)||(u=u.child(""));const d=new Pr(new Xt(u),0);let f=new Ar(Mn);return this.wr.forEachWhile(g=>{const D=g.key.path;return!!r.isPrefixOf(D)&&(D.length===s&&(f=f.add(g.pr)),!0)},d),ct.resolve(this.Dr(f))}Dr(e){const t=[];return e.forEach(r=>{const s=this.Sr(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){dn(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return ct.forEach(t.mutations,s=>{const u=new Pr(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Pr(t,0),s=this.wr.firstAfterOrEqual(r);return ct.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return ct.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZS{constructor(e){this.vr=e,this.docs=new Hr(Xt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,d=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ct.resolve(r?r.document.mutableCopy():Br.newInvalidDocument(t))}getEntries(e,t){let r=Xo();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Br.newInvalidDocument(s))}),ct.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Xo();const d=t.path,f=new Xt(d.child("")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:D,value:{document:S}}=g.getNext();if(!d.isPrefixOf(D.path))break;D.path.length>d.length+1||tu(new Li((n=S).readTime,n.key,-1),r)<=0||(s.has(S.key)||Em(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}var n;return ct.resolve(u)}getAllFromCollectionGroup(e,t,r,s){Jt()}Fr(e,t){return ct.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new SN(this)}getSize(e){return ct.resolve(this.size)}}class SN extends KS{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.ar.addEntry(e,s)):this.ar.removeEntry(r)}),ct.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class AN{constructor(e){this.persistence=e,this.Mr=new _c(t=>Wu(t),R_),this.lastRemoteSnapshotVersion=fn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Bs,this.targetCount=0,this.Lr=nl.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,s)=>t(s)),ct.resolve()}getLastRemoteSnapshotVersion(e){return ct.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ct.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),ct.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),ct.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new nl(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,ct.resolve()}updateTargetData(e,t){return this.qn(t),ct.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,ct.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.Mr.forEach((d,f)=>{f.sequenceNumber<=t&&null===r.get(f.targetId)&&(this.Mr.delete(d),u.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)}),ct.waitFor(u).next(()=>s)}getTargetCount(e){return ct.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return ct.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),ct.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(d=>{u.push(s.markPotentiallyOrphaned(e,d))}),ct.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),ct.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return ct.resolve(r)}containsKey(e,t){return ct.resolve(this.Nr.containsKey(t))}}class Y0{constructor(e,t){this.Br={},this.overlays={},this.kr=new ms(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new AN(this),this.indexManager=new LS,this.remoteDocumentCache=new ZS(r=>this.referenceDelegate.Kr(r)),this.serializer=new OS(t),this.$r=new XS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new wc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Br[e.toKey()];return r||(r=new YS(t,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){Ot("MemoryPersistence","Starting transaction:",e);const s=new RN(this.kr.next());return this.referenceDelegate.Ur(),r(s).next(u=>this.referenceDelegate.Wr(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gr(e,t){return ct.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,t)))}}class RN extends kP{constructor(e){super(),this.currentSequenceNumber=e}}class ff{constructor(e){this.persistence=e,this.zr=new Bs,this.jr=null}static Hr(e){return new ff(e)}get Jr(){if(this.jr)return this.jr;throw Jt()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),ct.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),ct.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),ct.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(s=>this.Jr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Jr.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ct.forEach(this.Jr,r=>{const s=Xt.fromPath(r);return this.Yr(e,s).next(u=>{u||t.removeEntry(s,fn.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return ct.or([()=>ct.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class tw{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=s}static Ki(e,t){let r=Bn(),s=Bn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new tw(e,t.fromCache,r,s)}}class JS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class eA{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function mT(){return!function TO(){var n;const e=null===(n=Sh())||void 0===n?void 0:n.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}()?8:function FP(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}(function Oa(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,s){const u={result:null};return this.ji(e,t).next(d=>{u.result=d}).next(()=>{if(!u.result)return this.Hi(e,t,s,r).next(d=>{u.result=d})}).next(()=>{if(u.result)return;const d=new JS;return this.Ji(e,t,d).next(f=>{if(u.result=f,this.Ui)return this.Yi(e,t,d,f.size)})}).next(()=>u.result)}Yi(e,t,r,s){return r.documentReadCount<this.Wi?(eu()<=ar.DEBUG&&Ot("QueryEngine","SDK will not create cache indexes for query:",Wh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),ct.resolve()):(eu()<=ar.DEBUG&&Ot("QueryEngine","Query:",Wh(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Gi*s?(eu()<=ar.DEBUG&&Ot("QueryEngine","The SDK decides to create cache indexes for query:",Wh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ti(t))):ct.resolve())}ji(e,t){if(tN(t))return ct.resolve(null);let r=Ti(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=M_(t,null,"F"),r=Ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=Bn(...u);return this.zi.getDocuments(e,d).next(f=>this.indexManager.getMinOffset(e,r).next(g=>{const D=this.Zi(t,f);return this.Xi(t,D,d,g.readTime)?this.ji(e,M_(t,null,"F")):this.es(e,D,t,g)}))})))}Hi(e,t,r,s){return tN(t)||s.isEqual(fn.min())?ct.resolve(null):this.zi.getDocuments(e,r).next(u=>{const d=this.Zi(t,u);return this.Xi(t,d,r,s)?ct.resolve(null):(eu()<=ar.DEBUG&&Ot("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Wh(t)),this.es(e,d,t,function YT(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=fn.fromTimestamp(1e9===r?new Sr(t+1,0):new Sr(t,r));return new Li(s,Xt.empty(),e)}(s,-1)).next(f=>f))})}Zi(e,t){let r=new Ar(C0(e));return t.forEach((s,u)=>{Em(e,u)&&(r=r.add(u))}),r}Xi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Ji(e,t,r){return eu()<=ar.DEBUG&&Ot("QueryEngine","Using full collection scan to execute query:",Wh(t)),this.zi.getDocumentsMatchingQuery(e,t,Li.min(),r)}es(e,t,r,s){return this.zi.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class MN{constructor(e,t,r,s){this.persistence=e,this.ts=t,this.serializer=s,this.ns=new Hr(Mn),this.rs=new _c(u=>Wu(u),R_),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QS(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function nA(n,e){return nw.apply(this,arguments)}function nw(){return(nw=(0,nt.A)(function*(n,e){const t=Gt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],f=[];let g=Bn();for(const D of s){d.push(D.batchId);for(const S of D.mutations)g=g.add(S.key)}for(const D of u){f.push(D.batchId);for(const S of D.mutations)g=g.add(S.key)}return t.localDocuments.getDocuments(r,g).next(D=>({us:D,removedBatchIds:d,addedBatchIds:f}))})})})).apply(this,arguments)}function rA(n){const e=Gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function NN(n,e){const t=Gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ol(n,e,t){return oA.apply(this,arguments)}function oA(){return(oA=(0,nt.A)(function*(n,e,t){const r=Gt(n),s=r.ns.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,s)))}catch(d){if(!pc(d))throw d;Ot("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ns=r.ns.remove(e),r.rs.delete(s.target)})).apply(this,arguments)}function ey(n,e,t){const r=Gt(n);let s=fn.min(),u=Bn();return r.persistence.runTransaction("Execute query","readwrite",d=>function(g,D,S){const P=Gt(g),j=P.rs.get(S);return void 0!==j?ct.resolve(P.ns.get(j)):P.Qr.getTargetData(D,S)}(r,d,Ti(e)).next(f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(d,f.targetId).next(g=>{u=g})}).next(()=>r.ts.getDocumentsMatchingQuery(d,e,t?s:fn.min(),t?u:Bn())).next(f=>(function iw(n,e,t){let r=n.ss.get(e)||fn.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.ss.set(e,r)}(r,function wm(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),f),{documents:f,hs:u})))}class vf{constructor(){this.activeTargetIds=function S0(){return sN}()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uA{constructor(){this.no=new vf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new vf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class lw{io(e){}shutdown(){}}class lA{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ot("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ot("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Cd=null;function _f(){return null===Cd?Cd=268435456+Math.round(2147483648*Math.random()):Cd++,"0x"+Cd.toString(16)}const dw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dA{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}}const Mo="WebChannelConnection";class FN extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),u=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+t.host,this.So=`projects/${s}/databases/${u}`,this.bo="(default)"===this.databaseId.database?`project_id=${s}`:`project_id=${s}&database_id=${u}`}get Do(){return!1}Co(t,r,s,u,d){const f=_f(),g=this.vo(t,r.toUriEncodedString());Ot("RestConnection",`Sending RPC '${t}' ${f}:`,g,s);const D={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(D,u,d),this.Mo(t,g,D,s).then(S=>(Ot("RestConnection",`Received RPC '${t}' ${f}: `,S),S),S=>{throw qo("RestConnection",`RPC '${t}' ${f} failed with error: `,S,"url: ",g,"request:",s),S})}xo(t,r,s,u,d,f){return this.Co(t,r,s,u,d)}Fo(t,r,s){t["X-Goog-Api-Client"]="gl-js/ fire/"+Fh,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((u,d)=>t[d]=u),s&&s.headers.forEach((u,d)=>t[d]=u)}vo(t,r){return`${this.wo}/v1/${r}:${dw[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,t,r,s){const u=_f();return new Promise((d,f)=>{const g=new lm;g.setWithCredentials(!0),g.listenOnce(WT.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case l_.NO_ERROR:const S=g.getResponseJson();Ot(Mo,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),d(S);break;case l_.TIMEOUT:Ot(Mo,`RPC '${e}' ${u} timed out`),f(new Rt(mt.DEADLINE_EXCEEDED,"Request time out"));break;case l_.HTTP_ERROR:const P=g.getStatus();if(Ot(Mo,`RPC '${e}' ${u} failed with status:`,P,"response text:",g.getResponseText()),P>0){let j=g.getResponseJson();Array.isArray(j)&&(j=j[0]);const Q=j?.error;if(Q&&Q.status&&Q.message){const we=function(Re){const gt=Re.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(gt)>=0?gt:mt.UNKNOWN}(Q.status);f(new Rt(we,Q.message))}else f(new Rt(mt.UNKNOWN,"Server responded with status "+g.getStatus()))}else f(new Rt(mt.UNAVAILABLE,"Connection failed."));break;default:Jt()}}finally{Ot(Mo,`RPC '${e}' ${u} completed.`)}});const D=JSON.stringify(s);Ot(Mo,`RPC '${e}' ${u} sending request:`,s),g.send(t,"POST",D,r,15)})}Oo(e,t,r){const s=_f(),u=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=kh(),f=d_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},D=this.longPollingOptions.timeoutSeconds;void 0!==D&&(g.longPollingTimeout=Math.round(1e3*D)),this.useFetchStreams&&(g.xmlHttpFactory=new KT({})),this.Fo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const S=u.join("");Ot(Mo,`Creating RPC '${e}' stream ${s}: ${S}`,g);const P=d.createWebChannel(S,g);let j=!1,Q=!1;const we=new dA({lo:Re=>{Q?Ot(Mo,`Not sending because RPC '${e}' stream ${s} is closed:`,Re):(j||(Ot(Mo,`Opening RPC '${e}' stream ${s} transport.`),P.open(),j=!0),Ot(Mo,`RPC '${e}' stream ${s} sending:`,Re),P.send(Re))},ho:()=>P.close()}),Me=(Re,gt,Et)=>{Re.listen(gt,Dt=>{try{Et(Dt)}catch(Ht){setTimeout(()=>{throw Ht},0)}})};return Me(P,dm.EventType.OPEN,()=>{Q||(Ot(Mo,`RPC '${e}' stream ${s} transport opened.`),we.mo())}),Me(P,dm.EventType.CLOSE,()=>{Q||(Q=!0,Ot(Mo,`RPC '${e}' stream ${s} transport closed`),we.po())}),Me(P,dm.EventType.ERROR,Re=>{Q||(Q=!0,qo(Mo,`RPC '${e}' stream ${s} transport errored:`,Re),we.po(new Rt(mt.UNAVAILABLE,"The operation could not be completed")))}),Me(P,dm.EventType.MESSAGE,Re=>{var gt;if(!Q){const Et=Re.data[0];dn(!!Et);const Ht=Et.error||(null===(gt=Et[0])||void 0===gt?void 0:gt.error);if(Ht){Ot(Mo,`RPC '${e}' stream ${s} received error:`,Ht);const wn=Ht.status;let un=function(Ie){const Le=Si[Ie];if(void 0!==Le)return TS(Le)}(wn),Fe=Ht.message;void 0===un&&(un=mt.INTERNAL,Fe="Unknown error status: "+wn+" with message "+Ht.message),Q=!0,we.po(new Rt(un,Fe)),P.close()}else Ot(Mo,`RPC '${e}' stream ${s} received:`,Et),we.yo(Et)}}),Me(f,GT.STAT_EVENT,Re=>{Re.stat===n0.PROXY?Ot(Mo,`RPC '${e}' stream ${s} detected buffering proxy`):Re.stat===n0.NOPROXY&&Ot(Mo,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{we.fo()},0),we}}function yf(){return typeof document<"u"?document:null}function Td(n){return new AS(n,!0)}class oy{constructor(e,t,r=1e3,s=1.5,u=6e4){this.oi=e,this.timerId=t,this.No=r,this.Lo=s,this.Bo=u,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();const t=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),s=Math.max(0,t-r);s>0&&Ot("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,s,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){null!==this.qo&&(this.qo.skipDelay(),this.qo=null)}cancel(){null!==this.qo&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}class hw{constructor(e,t,r,s,u,d,f,g){this.oi=e,this.Go=r,this.zo=s,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new oy(e,t)}Zo(){return 1===this.state||5===this.state||this.Xo()}Xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.e_()}stop(){var e=this;return(0,nt.A)(function*(){e.Zo()&&(yield e.close(0))})()}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&null===this.Ho&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){var e=this;return(0,nt.A)(function*(){if(e.Xo())return e.close(0)})()}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,t){var r=this;return(0,nt.A)(function*(){r.s_(),r.o_(),r.Yo.cancel(),r.jo++,4!==e?r.Yo.reset():t&&t.code===mt.RESOURCE_EXHAUSTED?(hi(t.toString()),hi("Using maximum backoff delay to prevent overloading the backend."),r.Yo.Ko()):t&&t.code===mt.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.__(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ao(t)})()}__(){}auth(){this.state=1;const e=this.a_(this.jo),t=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.jo===t&&this.u_(r,s)},r=>{e(()=>{const s=new Rt(mt.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(s)})})}u_(e,t){const r=this.a_(this.jo);this.stream=this.l_(e,t),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(s=>{r(()=>this.c_(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}e_(){var e=this;this.state=5,this.Yo.$o((0,nt.A)(function*(){e.state=0,e.start()}))}c_(e){return Ot("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return t=>{this.oi.enqueueAndForget(()=>this.jo===e?t():(Ot("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LN extends hw{constructor(e,t,r,s,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,d),this.serializer=u}l_(e,t){return this.connection.Oo("Listen",e,t)}onMessage(e){this.Yo.reset();const t=function vN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(D=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:Jt(),s=e.targetChange.targetIds||[],u=function(D,S){return D.useProto3Json?(dn(void 0===S||"string"==typeof S),Vi.fromBase64String(S||"")):(dn(void 0===S||S instanceof Buffer||S instanceof Uint8Array),Vi.fromUint8Array(S||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,f=d&&function(D){const S=void 0===D.code?mt.UNKNOWN:TS(D.code);return new Rt(S,D.message||"")}(d);t=new P0(r,s,u,f||null)}else if("documentChange"in e){const r=e.documentChange,s=ja(n,r.document.name),u=Yr(r.document.updateTime),d=r.document.createTime?Yr(r.document.createTime):fn.min(),f=new Zi({mapValue:{fields:r.document.fields}}),g=Br.newFoundDocument(s,u,d,f);t=new dd(r.targetIds||[],r.removedTargetIds||[],g.key,g)}else if("documentDelete"in e){const r=e.documentDelete,s=ja(n,r.document),u=r.readTime?Yr(r.readTime):fn.min(),d=Br.newNoDocument(s,u);t=new dd([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,s=ja(n,r.document);t=new dd([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return Jt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,d=new dN(s,u);t=new L_(r.targetId,d)}}var D;return t}(this.serializer,e),r=function(u){if(!("targetChange"in u))return fn.min();const d=u.targetChange;return d.targetIds&&d.targetIds.length?fn.min():d.readTime?Yr(d.readTime):fn.min()}(e);return this.listener.h_(t,r)}P_(e){const t={};t.database=Nm(this.serializer),t.addTarget=function(u,d){let f;const g=d.target;if(f=w0(g)?{documents:RS(u,g)}:{query:U_(u,g)._t},f.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){f.resumeToken=pN(u,d.resumeToken);const D=V_(u,d.expectedCount);null!==D&&(f.expectedCount=D)}else if(d.snapshotVersion.compareTo(fn.min())>0){f.readTime=ef(u,d.snapshotVersion.toTimestamp());const D=V_(u,d.expectedCount);null!==D&&(f.expectedCount=D)}return f}(this.serializer,e);const r=function yN(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Jt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.i_(t)}I_(e){const t={};t.database=Nm(this.serializer),t.removeTarget=e,this.i_(t)}}class VN extends hw{constructor(e,t,r,s,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,d),this.serializer=u,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,t){return this.connection.Oo("Write",e,t)}onMessage(e){if(dn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();const t=function _N(n,e){return n&&n.length>0?(dn(void 0!==e),n.map(t=>function(s,u){let d=Yr(s.updateTime?s.updateTime:u);return d.isEqual(fn.min())&&(d=Yr(u)),new A0(d,s.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.A_(r,t)}return dn(!e.writeResults||0===e.writeResults.length),this.T_=!0,this.listener.R_()}V_(){const e={};e.database=Nm(this.serializer),this.i_(e)}d_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>bc(this.serializer,r))};this.i_(t)}}class fA extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.m_=!1}f_(){if(this.m_)throw new Rt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,t,r,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection.Co(e,Pm(t,r),s,u,d)).catch(u=>{throw"FirebaseError"===u.name?(u.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Rt(mt.UNKNOWN,u.toString())})}xo(e,t,r,s,u){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,f])=>this.connection.xo(e,Pm(t,r),s,d,f,u)).catch(d=>{throw"FirebaseError"===d.name?(d.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Rt(mt.UNKNOWN,d.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class pA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){0===this.g_&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){"Online"===this.state?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,"Online"===e&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(hi(t),this.y_=!1):Ot("OnlineStateTracker",t)}C_(){null!==this.p_&&(this.p_.cancel(),this.p_=null)}}class mA{constructor(e,t,r,s,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=u,this.O_.io(f=>{r.enqueueAndForget((0,nt.A)(function*(){var g;js(d)&&(Ot("RemoteStore","Restarting streams for network reachability change."),yield(g=(0,nt.A)(function*(S){const P=Gt(S);P.M_.add(4),yield bf(P),P.N_.set("Unknown"),P.M_.delete(4),yield Ua(P)}),function D(S){return g.apply(this,arguments)})(d))}))}),this.N_=new pA(r,s)}}function Ua(n){return fw.apply(this,arguments)}function fw(){return(fw=(0,nt.A)(function*(n){if(js(n))for(const e of n.x_)yield e(!0)})).apply(this,arguments)}function bf(n){return sl.apply(this,arguments)}function sl(){return(sl=(0,nt.A)(function*(n){for(const e of n.x_)yield e(!1)})).apply(this,arguments)}function pw(n,e){const t=Gt(n);t.F_.has(e.targetId)||(t.F_.set(e.targetId,e),vA(t)?sy(t):Sd(t).Xo()&&gA(t,e))}function al(n,e){const t=Gt(n),r=Sd(t);t.F_.delete(e),r.Xo()&&mw(t,e),0===t.F_.size&&(r.Xo()?r.n_():js(t)&&t.N_.set("Unknown"))}function gA(n,e){if(n.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Sd(n).P_(e)}function mw(n,e){n.L_.xe(e),Sd(n).I_(e)}function sy(n){n.L_=new hd({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.F_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Sd(n).start(),n.N_.w_()}function vA(n){return js(n)&&!Sd(n).Zo()&&n.F_.size>0}function js(n){return 0===Gt(n).M_.size}function _A(n){n.L_=void 0}function BN(n){return gw.apply(this,arguments)}function gw(){return(gw=(0,nt.A)(function*(n){n.N_.set("Online")})).apply(this,arguments)}function Ef(n){return vw.apply(this,arguments)}function vw(){return(vw=(0,nt.A)(function*(n){n.F_.forEach((e,t)=>{gA(n,e)})})).apply(this,arguments)}function ay(n,e){return wf.apply(this,arguments)}function wf(){return(wf=(0,nt.A)(function*(n,e){_A(n),vA(n)?(n.N_.D_(e),sy(n)):n.N_.set("Unknown")})).apply(this,arguments)}function _s(n,e,t){return cy.apply(this,arguments)}function cy(){return cy=(0,nt.A)(function*(n,e,t){if(n.N_.set("Online"),e instanceof P0&&2===e.state&&e.cause)try{yield(r=(0,nt.A)(function*(u,d){const f=d.cause;for(const g of d.targetIds)u.F_.has(g)&&(yield u.remoteSyncer.rejectListen(g,f),u.F_.delete(g),u.L_.removeTarget(g))}),function s(u,d){return r.apply(this,arguments)})(n,e)}catch(r){Ot("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield jm(n,r)}else if(e instanceof dd?n.L_.Ke(e):e instanceof L_?n.L_.He(e):n.L_.We(e),!t.isEqual(fn.min()))try{const r=yield rA(n.localStore);t.compareTo(r)>=0&&(yield function(u,d){const f=u.L_.rt(d);return f.targetChanges.forEach((g,D)=>{if(g.resumeToken.approximateByteSize()>0){const S=u.F_.get(D);S&&u.F_.set(D,S.withResumeToken(g.resumeToken,d))}}),f.targetMismatches.forEach((g,D)=>{const S=u.F_.get(g);if(!S)return;u.F_.set(g,S.withResumeToken(Vi.EMPTY_BYTE_STRING,S.snapshotVersion)),mw(u,g);const P=new du(S.target,g,D,S.sequenceNumber);gA(u,P)}),u.remoteSyncer.applyRemoteEvent(f)}(n,t))}catch(r){Ot("RemoteStore","Failed to raise snapshot:",r),yield jm(n,r)}var r}),cy.apply(this,arguments)}function jm(n,e,t){return _w.apply(this,arguments)}function _w(){return(_w=(0,nt.A)(function*(n,e,t){if(!pc(e))throw e;n.M_.add(1),yield bf(n),n.N_.set("Offline"),t||(t=()=>rA(n.localStore)),n.asyncQueue.enqueueRetryable((0,nt.A)(function*(){Ot("RemoteStore","Retrying IndexedDB access"),yield t(),n.M_.delete(1),yield Ua(n)}))})).apply(this,arguments)}function If(n,e){return e().catch(t=>jm(n,t,e))}function Ic(n){return yw.apply(this,arguments)}function yw(){return(yw=(0,nt.A)(function*(n){const e=Gt(n),t=$a(e);let r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;jN(e);)try{const s=yield NN(e.localStore,r);if(null===s){0===e.v_.length&&t.n_();break}r=s.batchId,yA(e,s)}catch(s){yield jm(e,s)}Df(e)&&bA(e)})).apply(this,arguments)}function jN(n){return js(n)&&n.v_.length<10}function yA(n,e){n.v_.push(e);const t=$a(n);t.Xo()&&t.E_&&t.d_(e.mutations)}function Df(n){return js(n)&&!$a(n).Zo()&&n.v_.length>0}function bA(n){$a(n).start()}function UN(n){return bw.apply(this,arguments)}function bw(){return(bw=(0,nt.A)(function*(n){$a(n).V_()})).apply(this,arguments)}function EA(n){return uy.apply(this,arguments)}function uy(){return(uy=(0,nt.A)(function*(n){const e=$a(n);for(const t of n.v_)e.d_(t.mutations)})).apply(this,arguments)}function wA(n,e,t){return Ew.apply(this,arguments)}function Ew(){return(Ew=(0,nt.A)(function*(n,e,t){const r=n.v_.shift(),s=Rm.from(r,e,t);yield If(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Ic(n)})).apply(this,arguments)}function IA(n,e){return ww.apply(this,arguments)}function ww(){return ww=(0,nt.A)(function*(n,e){var t;e&&$a(n).E_&&(yield(t=(0,nt.A)(function*(s,u){if(O0(f=u.code)&&f!==mt.ABORTED){const d=s.v_.shift();$a(s).t_(),yield If(s,()=>s.remoteSyncer.rejectFailedWrite(d.batchId,u)),yield Ic(s)}var f}),function r(s,u){return t.apply(this,arguments)})(n,e)),Df(n)&&bA(n)}),ww.apply(this,arguments)}function $N(n,e){return DA.apply(this,arguments)}function DA(){return(DA=(0,nt.A)(function*(n,e){const t=Gt(n);t.asyncQueue.verifyOperationInProgress(),Ot("RemoteStore","RemoteStore received new credentials");const r=js(t);t.M_.add(3),yield bf(t),r&&t.N_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.M_.delete(3),yield Ua(t)})).apply(this,arguments)}function CA(n,e){return TA.apply(this,arguments)}function TA(){return(TA=(0,nt.A)(function*(n,e){const t=Gt(n);e?(t.M_.delete(2),yield Ua(t)):e||(t.M_.add(2),yield bf(t),t.N_.set("Unknown"))})).apply(this,arguments)}function Sd(n){return n.B_||(n.B_=function(t,r,s){const u=Gt(t);return u.f_(),new LN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{Po:BN.bind(null,n),To:Ef.bind(null,n),Ao:ay.bind(null,n),h_:_s.bind(null,n)}),n.x_.push(function(){var e=(0,nt.A)(function*(t){t?(n.B_.t_(),vA(n)?sy(n):n.N_.set("Unknown")):(yield n.B_.stop(),_A(n))});return function(t){return e.apply(this,arguments)}}())),n.B_}function $a(n){return n.k_||(n.k_=function(t,r,s){const u=Gt(t);return u.f_(),new VN(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,s)}(n.datastore,n.asyncQueue,{Po:()=>Promise.resolve(),To:UN.bind(null,n),Ao:IA.bind(null,n),R_:EA.bind(null,n),A_:wA.bind(null,n)}),n.x_.push(function(){var e=(0,nt.A)(function*(t){t?(n.k_.t_(),yield Ic(n)):(yield n.k_.stop(),n.v_.length>0&&(Ot("RemoteStore",`Stopping write stream with ${n.v_.length} pending writes`),n.v_=[]))});return function(t){return e.apply(this,arguments)}}())),n.k_}class Iw{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new Fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,u){const d=Date.now()+r,f=new Iw(e,t,d,s,u);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Rt(mt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Cf(n,e){if(hi("AsyncQueue",`${e}: ${n}`),pc(n))return new Rt(mt.UNAVAILABLE,`${e}: ${n}`);throw n}class Ad{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xt.comparator(t.key,r.key):(t,r)=>Xt.comparator(t.key,r.key),this.keyedMap=Im(),this.sortedSet=new Hr(this.comparator)}static emptySet(e){return new Ad(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ad)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ad;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Tf{constructor(){this.q_=new Hr(Xt.comparator)}track(e){const t=e.doc.key,r=this.q_.get(t);r?0!==e.type&&3===r.type?this.q_=this.q_.insert(t,e):3===e.type&&1!==r.type?this.q_=this.q_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.q_=this.q_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.q_=this.q_.remove(t):1===e.type&&2===r.type?this.q_=this.q_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.q_=this.q_.insert(t,{type:2,doc:e.doc}):Jt():this.q_=this.q_.insert(t,e)}Q_(){const e=[];return this.q_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Sf{constructor(e,t,r,s,u,d,f,g,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,s,u){const d=[];return t.forEach(f=>{d.push({type:0,doc:f})}),new Sf(e,t,Ad.emptySet(t),d,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&O_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class HN{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}}class zN{constructor(){this.queries=new _c(e=>vS(e),O_),this.onlineState="Unknown",this.z_=new Set}}function Dw(n,e){return SA.apply(this,arguments)}function SA(){return(SA=(0,nt.A)(function*(n,e){const t=Gt(n);let r=3;const s=e.query;let u=t.queries.get(s);u?!u.W_()&&e.G_()&&(r=2):(u=new HN,r=e.G_()?0:1);try{switch(r){case 0:u.K_=yield t.onListen(s,!0);break;case 1:u.K_=yield t.onListen(s,!1);break;case 2:yield t.onFirstRemoteStoreListen(s)}}catch(d){const f=Cf(d,`Initialization of query '${Wh(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,u),u.U_.push(e),e.j_(t.onlineState),u.K_&&e.H_(u.K_)&&Rd(t)})).apply(this,arguments)}function Cw(n,e){return ly.apply(this,arguments)}function ly(){return(ly=(0,nt.A)(function*(n,e){const t=Gt(n),r=e.query;let s=3;const u=t.queries.get(r);if(u){const d=u.U_.indexOf(e);d>=0&&(u.U_.splice(d,1),0===u.U_.length?s=e.G_()?0:1:!u.W_()&&e.G_()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})).apply(this,arguments)}function KN(n,e){const t=Gt(n);let r=!1;for(const s of e){const d=t.queries.get(s.query);if(d){for(const f of d.U_)f.H_(s)&&(r=!0);d.K_=s}}r&&Rd(t)}function WN(n,e,t){const r=Gt(n),s=r.queries.get(e);if(s)for(const u of s.U_)u.onError(t);r.queries.delete(e)}function Rd(n){n.z_.forEach(e=>{e.next()})}var Tw,Sw;(Sw=Tw||(Tw={})).J_="default",Sw.Cache="cache";class dy{constructor(e,t,r){this.query=e,this.Y_=t,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Sf(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),t=!0):this.ta(e,this.onlineState)&&(this.na(e),t=!0),this.X_=e,t}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let t=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),t=!0),t}ta(e,t){return!e.fromCache||!this.G_()||(!this.options.ra||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}ea(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}na(e){e=Sf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Tw.Cache}}class AA{constructor(e){this.key=e}}class Rw{constructor(e){this.key=e}}class xw{constructor(e,t){this.query=e,this.la=t,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Bn(),this.mutatedKeys=Bn(),this.Ia=C0(e),this.Ta=new Ad(this.Ia)}get Ea(){return this.la}da(e,t){const r=t?t.Aa:new Tf,s=t?t.Ta:this.Ta;let u=t?t.mutatedKeys:this.mutatedKeys,d=s,f=!1;const g="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,D="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,P)=>{const j=s.get(S),Q=Em(this.query,P)?P:null,we=!!j&&this.mutatedKeys.has(j.key),Me=!!Q&&(Q.hasLocalMutations||this.mutatedKeys.has(Q.key)&&Q.hasCommittedMutations);let Re=!1;j&&Q?j.data.isEqual(Q.data)?we!==Me&&(r.track({type:3,doc:Q}),Re=!0):this.Ra(j,Q)||(r.track({type:2,doc:Q}),Re=!0,(g&&this.Ia(Q,g)>0||D&&this.Ia(Q,D)<0)&&(f=!0)):!j&&Q?(r.track({type:0,doc:Q}),Re=!0):j&&!Q&&(r.track({type:1,doc:j}),Re=!0,(g||D)&&(f=!0)),Re&&(Q?(d=d.add(Q),u=Me?u.add(S):u.delete(S)):(d=d.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const S="F"===this.query.limitType?d.last():d.first();d=d.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{Ta:d,Aa:r,Xi:f,mutatedKeys:u}}Ra(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const u=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;const d=e.Aa.Q_();d.sort((S,P)=>function(Q,we){const Me=Re=>{switch(Re){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jt()}};return Me(Q)-Me(we)}(S.type,P.type)||this.Ia(S.doc,P.doc)),this.Va(r),s=null!=s&&s;const f=t&&!s?this.ma():[],g=0===this.Pa.size&&this.current&&!s?1:0,D=g!==this.ha;return this.ha=g,0!==d.length||D?{snapshot:new Sf(this.query,e.Ta,u,d,e.mutatedKeys,0===g,D,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:f}:{fa:f}}j_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Tf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(t=>this.la=this.la.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.la=this.la.delete(t)),this.current=e.current)}ma(){if(!this.current)return[];const e=this.Pa;this.Pa=Bn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const t=[];return e.forEach(r=>{this.Pa.has(r)||t.push(new Rw(r))}),this.Pa.forEach(r=>{e.has(r)||t.push(new AA(r))}),t}pa(e){this.la=e.hs,this.Pa=Bn();const t=this.da(e.documents);return this.applyChanges(t,!0)}ya(){return Sf.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,0===this.ha,this.hasCachedResults)}}class QN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class XN{constructor(e){this.key=e,this.wa=!1}}class YN{constructor(e,t,r,s,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.Sa={},this.ba=new _c(f=>vS(f),O_),this.Da=new Map,this.Ca=new Set,this.va=new Hr(Xt.comparator),this.Fa=new Map,this.Ma=new Bs,this.xa={},this.Oa=new Map,this.Na=nl.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return!0===this.La}}function Mw(n,e){return Ow.apply(this,arguments)}function Ow(){return(Ow=(0,nt.A)(function*(n,e,t=!0){const r=Cy(n);let s;const u=r.ba.get(e);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),s=u.view.ya()):s=yield xA(r,e,t,!0),s})).apply(this,arguments)}function RA(n,e){return Pw.apply(this,arguments)}function Pw(){return(Pw=(0,nt.A)(function*(n,e){const t=Cy(n);yield xA(t,e,!0,!1)})).apply(this,arguments)}function xA(n,e,t,r){return Nw.apply(this,arguments)}function Nw(){return(Nw=(0,nt.A)(function*(n,e,t,r){const s=yield function gf(n,e){const t=Gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Qr.getTargetData(r,e).next(u=>u?(s=u,ct.resolve(s)):t.Qr.allocateTargetId(r).next(d=>(s=new du(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.ns.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}(n.localStore,Ti(e)),u=s.targetId,d=t?n.sharedClientState.addLocalQueryTarget(u):"not-current";let f;return r&&(f=yield function kw(n,e,t,r,s){return Fw.apply(this,arguments)}(n,e,u,"current"===d,s.resumeToken)),n.isPrimaryClient&&t&&pw(n.remoteStore,s),f})).apply(this,arguments)}function Fw(){return Fw=(0,nt.A)(function*(n,e,t,r,s){n.Ba=(P,j,Q)=>{return(we=(0,nt.A)(function*(Re,gt,Et,Dt){let Ht=gt.view.da(Et);Ht.Xi&&(Ht=yield ey(Re.localStore,gt.query,!1).then(({documents:ue})=>gt.view.da(ue,Ht)));const wn=Dt&&Dt.targetChanges.get(gt.targetId),un=Dt&&null!=Dt.targetMismatches.get(gt.targetId),Fe=gt.view.applyChanges(Ht,Re.isPrimaryClient,wn,un);return _y(Re,gt.targetId,Fe.fa),Fe.snapshot}),function Me(Re,gt,Et,Dt){return we.apply(this,arguments)})(n,P,j,Q);var we};const u=yield ey(n.localStore,e,!0),d=new xw(e,u.hs),f=d.da(u.documents),g=Jh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),D=d.applyChanges(f,n.isPrimaryClient,g);_y(n,t,D.fa);const S=new QN(e,t,d);return n.ba.set(e,S),n.Da.has(t)?n.Da.get(t).push(e):n.Da.set(t,[e]),D.snapshot}),Fw.apply(this,arguments)}function ZN(n,e,t){return Lw.apply(this,arguments)}function Lw(){return(Lw=(0,nt.A)(function*(n,e,t){const r=Gt(n),s=r.ba.get(e),u=r.Da.get(s.targetId);if(u.length>1)return r.Da.set(s.targetId,u.filter(d=>!O_(d,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield ol(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&al(r.remoteStore,s.targetId),xd(r,s.targetId)}).catch(nu))):(xd(r,s.targetId),yield ol(r.localStore,s.targetId,!0))})).apply(this,arguments)}function JN(n,e){return fy.apply(this,arguments)}function fy(){return(fy=(0,nt.A)(function*(n,e){const t=Gt(n),r=t.ba.get(e),s=t.Da.get(r.targetId);t.isPrimaryClient&&1===s.length&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),al(t.remoteStore,r.targetId))})).apply(this,arguments)}function Vw(){return(Vw=(0,nt.A)(function*(n,e,t){const r=function Gw(n){const e=Gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Bw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NA.bind(null,e),e}(n);try{const s=yield function(d,f){const g=Gt(d),D=Sr.now(),S=f.reduce((Q,we)=>Q.add(we.key),Bn());let P,j;return g.persistence.runTransaction("Locally write mutations","readwrite",Q=>{let we=Xo(),Me=Bn();return g.os.getEntries(Q,S).next(Re=>{we=Re,we.forEach((gt,Et)=>{Et.isValidDocument()||(Me=Me.add(gt))})}).next(()=>g.localDocuments.getOverlayedDocuments(Q,we)).next(Re=>{P=Re;const gt=[];for(const Et of f){const Dt=lN(Et,P.get(Et.key).overlayedDocument);null!=Dt&&gt.push(new Rr(Et.key,Dt,v0(Dt.value.mapValue),Qr.exists(!0)))}return g.mutationQueue.addMutationBatch(Q,D,gt,f)}).next(Re=>{j=Re;const gt=Re.applyToLocalDocumentSet(P,Me);return g.documentOverlayCache.saveOverlays(Q,Re.batchId,gt)})}).then(()=>({batchId:j.batchId,changes:T0(P)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(d,f,g){let D=d.xa[d.currentUser.toKey()];D||(D=new Hr(Mn)),D=D.insert(f,g),d.xa[d.currentUser.toKey()]=D}(r,s.batchId,t),yield Dc(r,s.changes),yield Ic(r.remoteStore)}catch(s){const u=Cf(s,"Failed to persist write");t.reject(u)}})).apply(this,arguments)}function OA(n,e){return py.apply(this,arguments)}function py(){return(py=(0,nt.A)(function*(n,e){const t=Gt(n);try{const r=yield function PN(n,e){const t=Gt(n),r=e.snapshotVersion;let s=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.os.newChangeBuffer({trackRemovals:!0});s=t.ns;const f=[];e.targetChanges.forEach((S,P)=>{const j=s.get(P);if(!j)return;f.push(t.Qr.removeMatchingKeys(u,S.removedDocuments,P).next(()=>t.Qr.addMatchingKeys(u,S.addedDocuments,P)));let Q=j.withSequenceNumber(u.currentSequenceNumber);var Me,Re,gt;null!==e.targetMismatches.get(P)?Q=Q.withResumeToken(Vi.EMPTY_BYTE_STRING,fn.min()).withLastLimboFreeSnapshotVersion(fn.min()):S.resumeToken.approximateByteSize()>0&&(Q=Q.withResumeToken(S.resumeToken,r)),s=s.insert(P,Q),Re=Q,gt=S,(0===(Me=j).resumeToken.approximateByteSize()||Re.snapshotVersion.toMicroseconds()-Me.snapshotVersion.toMicroseconds()>=3e8||gt.addedDocuments.size+gt.modifiedDocuments.size+gt.removedDocuments.size>0)&&f.push(t.Qr.updateTargetData(u,Q))});let g=Xo(),D=Bn();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),f.push(function iA(n,e,t){let r=Bn(),s=Bn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Xo();return t.forEach((f,g)=>{const D=u.get(f);g.isFoundDocument()!==D.isFoundDocument()&&(s=s.add(f)),g.isNoDocument()&&g.version.isEqual(fn.min())?(e.removeEntry(f,g.readTime),d=d.insert(f,g)):!D.isValidDocument()||g.version.compareTo(D.version)>0||0===g.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(g),d=d.insert(f,g)):Ot("LocalStore","Ignoring outdated watch update for ",f,". Current version:",D.version," Watch version:",g.version)}),{cs:d,ls:s}})}(u,d,e.documentUpdates).next(S=>{g=S.cs,D=S.ls})),!r.isEqual(fn.min())){const S=t.Qr.getLastRemoteSnapshotVersion(u).next(P=>t.Qr.setTargetsMetadata(u,u.currentSequenceNumber,r));f.push(S)}return ct.waitFor(f).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,g,D)).next(()=>g)}).then(u=>(t.ns=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const d=t.Fa.get(u);d&&(dn(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?d.wa=!0:s.modifiedDocuments.size>0?dn(d.wa):s.removedDocuments.size>0&&(dn(d.wa),d.wa=!1))}),yield Dc(t,r,e)}catch(r){yield nu(r)}})).apply(this,arguments)}function PA(n,e,t){const r=Gt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.ba.forEach((u,d)=>{const f=d.view.j_(e);f.snapshot&&s.push(f.snapshot)}),function(d,f){const g=Gt(d);g.onlineState=f;let D=!1;g.queries.forEach((S,P)=>{for(const j of P.U_)j.j_(f)&&(D=!0)}),D&&Rd(g)}(r.eventManager,e),s.length&&r.Sa.h_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ek(n,e,t){return my.apply(this,arguments)}function my(){return(my=(0,nt.A)(function*(n,e,t){const r=Gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Fa.get(e),u=s&&s.key;if(u){let d=new Hr(Xt.comparator);d=d.insert(u,Br.newNoDocument(u,fn.min()));const f=Bn().add(u),g=new Zh(fn.min(),new Map,new Hr(Mn),d,f);yield OA(r,g),r.va=r.va.remove(u),r.Fa.delete(e),$w(r)}else yield ol(r.localStore,e,!1).then(()=>xd(r,e,t)).catch(nu)})).apply(this,arguments)}function Bw(n,e){return Um.apply(this,arguments)}function Um(){return(Um=(0,nt.A)(function*(n,e){const t=Gt(n),r=e.batch.batchId;try{const s=yield function ON(n,e){const t=Gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.os.newChangeBuffer({trackRemovals:!0});return function(f,g,D,S){const P=D.batch,j=P.keys();let Q=ct.resolve();return j.forEach(we=>{Q=Q.next(()=>S.getEntry(g,we)).next(Me=>{const Re=D.docVersions.get(we);dn(null!==Re),Me.version.compareTo(Re)<0&&(P.applyToRemoteDocument(Me,D),Me.isValidDocument()&&(Me.setReadTime(D.commitVersion),S.addEntry(Me)))})}),Q.next(()=>f.mutationQueue.removeMutationBatch(g,P))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(f){let g=Bn();for(let D=0;D<f.mutationResults.length;++D)f.mutationResults[D].transformResults.length>0&&(g=g.add(f.batch.mutations[D].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);kA(t,r,null),vy(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Dc(t,s)}catch(s){yield nu(s)}})).apply(this,arguments)}function NA(n,e,t){return jw.apply(this,arguments)}function jw(){return(jw=(0,nt.A)(function*(n,e,t){const r=Gt(n);try{const s=yield function(d,f){const g=Gt(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let S;return g.mutationQueue.lookupMutationBatch(D,f).next(P=>(dn(null!==P),S=P.keys(),g.mutationQueue.removeMutationBatch(D,P))).next(()=>g.mutationQueue.performConsistencyCheck(D)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(D,S,f)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(D,S)).next(()=>g.localDocuments.getDocuments(D,S))})}(r.localStore,e);kA(r,e,t),vy(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Dc(r,s)}catch(s){yield nu(s)}})).apply(this,arguments)}function gy(){return(gy=(0,nt.A)(function*(n,e){const t=Gt(n);js(t.remoteStore)||Ot("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(d){const f=Gt(d);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>f.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const s=t.Oa.get(r)||[];s.push(e),t.Oa.set(r,s)}catch(r){const s=Cf(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}})).apply(this,arguments)}function vy(n,e){(n.Oa.get(e)||[]).forEach(t=>{t.resolve()}),n.Oa.delete(e)}function kA(n,e,t){const r=Gt(n);let s=r.xa[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.xa[r.currentUser.toKey()]=s}}function xd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Da.get(e))n.ba.delete(r),t&&n.Sa.ka(r,t);n.Da.delete(e),n.isPrimaryClient&&n.Ma.Vr(e).forEach(r=>{n.Ma.containsKey(r)||FA(n,r)})}function FA(n,e){n.Ca.delete(e.path.canonicalString());const t=n.va.get(e);null!==t&&(al(n.remoteStore,t),n.va=n.va.remove(e),n.Fa.delete(t),$w(n))}function _y(n,e,t){for(const r of t)r instanceof AA?(n.Ma.addReference(r.key,e),LA(n,r)):r instanceof Rw?(Ot("SyncEngine","Document no longer in limbo: "+r.key),n.Ma.removeReference(r.key,e),n.Ma.containsKey(r.key)||FA(n,r.key)):Jt()}function LA(n,e){const t=e.key,r=t.path.canonicalString();n.va.get(t)||n.Ca.has(r)||(Ot("SyncEngine","New document in limbo: "+t),n.Ca.add(r),$w(n))}function $w(n){for(;n.Ca.size>0&&n.va.size<n.maxConcurrentLimboResolutions;){const e=n.Ca.values().next().value;n.Ca.delete(e);const t=new Xt(Jn.fromString(e)),r=n.Na.next();n.Fa.set(r,new XN(t)),n.va=n.va.insert(t,r),pw(n.remoteStore,new du(Ti(bm(t.path)),r,"TargetPurposeLimboResolution",ms.oe))}}function Dc(n,e,t){return $m.apply(this,arguments)}function $m(){return $m=(0,nt.A)(function*(n,e,t){const r=Gt(n),s=[],u=[],d=[];var f;r.ba.isEmpty()||(r.ba.forEach((f,g)=>{d.push(r.Ba(g,e,t).then(D=>{var S;if((D||t)&&r.isPrimaryClient){const P=D?!D.fromCache:null===(S=t?.targetChanges.get(g.targetId))||void 0===S?void 0:S.current;r.sharedClientState.updateQueryState(g.targetId,P?"current":"not-current")}if(D){s.push(D);const P=tw.Ki(g.targetId,D);u.push(P)}}))}),yield Promise.all(d),r.Sa.h_(s),yield(f=(0,nt.A)(function*(D,S){const P=Gt(D);try{yield P.persistence.runTransaction("notifyLocalViewChanges","readwrite",j=>ct.forEach(S,Q=>ct.forEach(Q.qi,we=>P.persistence.referenceDelegate.addReference(j,Q.targetId,we)).next(()=>ct.forEach(Q.Qi,we=>P.persistence.referenceDelegate.removeReference(j,Q.targetId,we)))))}catch(j){if(!pc(j))throw j;Ot("LocalStore","Failed to update sequence numbers: "+j)}for(const j of S){const Q=j.targetId;if(!j.fromCache){const we=P.ns.get(Q),Re=we.withLastLimboFreeSnapshotVersion(we.snapshotVersion);P.ns=P.ns.insert(Q,Re)}}}),function g(D,S){return f.apply(this,arguments)})(r.localStore,u))}),$m.apply(this,arguments)}function VA(n,e){return yy.apply(this,arguments)}function yy(){return(yy=(0,nt.A)(function*(n,e){const t=Gt(n);if(!t.currentUser.isEqual(e)){Ot("SyncEngine","User change. New user:",e.toKey());const r=yield nA(t.localStore,e);t.currentUser=e,(u=t).Oa.forEach(f=>{f.forEach(g=>{g.reject(new Rt(mt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.Oa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Dc(t,r.us)}var u})).apply(this,arguments)}function BA(n,e){const t=Gt(n),r=t.Fa.get(e);if(r&&r.wa)return Bn().add(r.key);{let s=Bn();const u=t.Da.get(e);if(!u)return s;for(const d of u){const f=t.ba.get(d);s=s.unionWith(f.view.Ea)}return s}}function Cy(n){const e=Gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=OA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ek.bind(null,e),e.Sa.h_=KN.bind(null,e.eventManager),e.Sa.ka=WN.bind(null,e.eventManager),e}class Af{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,nt.A)(function*(){t.serializer=Td(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function tA(n,e,t,r){return new MN(n,e,t,r)}(this.persistence,new eA,e.initialUser,this.serializer)}createPersistence(e){return new Y0(ff.Hr,this.serializer)}createSharedClientState(e){return new uA}terminate(){var e=this;return(0,nt.A)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Md{initialize(e,t){var r=this;return(0,nt.A)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>PA(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=VA.bind(null,r.syncEngine),yield CA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new zN}createDatastore(e){const t=Td(e.databaseInfo.databaseId),r=new FN(e.databaseInfo);return new fA(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,s=this.datastore,u=e.asyncQueue,d=t=>PA(this.syncEngine,t,0),f=lA.D()?new lA:new lw,new mA(r,s,u,d,f);var r,s,u,d,f}createSyncEngine(e,t){return function(s,u,d,f,g,D,S){const P=new YN(s,u,d,f,g,D);return S&&(P.La=!0),P}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,nt.A)(function*(){var t,r;yield(r=(0,nt.A)(function*(u){const d=Gt(u);Ot("RemoteStore","RemoteStore shutting down."),d.M_.add(5),yield bf(d),d.O_.shutdown(),d.N_.set("Unknown")}),function s(u){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}class Hm{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):hi("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class GA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,nt.A)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new Rt(mt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(s=(0,nt.A)(function*(d,f){const g=Gt(d),D={documents:f.map(Q=>tf(g.serializer,Q))},S=yield g.xo("BatchGetDocuments",g.serializer.databaseId,Jn.emptyPath(),D,f.length),P=new Map;S.forEach(Q=>{const we=function gN(n,e){return"found"in e?function(r,s){dn(!!s.found);const u=ja(r,s.found.name),d=Yr(s.found.updateTime),f=s.found.createTime?Yr(s.found.createTime):fn.min(),g=new Zi({mapValue:{fields:s.found.fields}});return Br.newFoundDocument(u,d,f,g)}(n,e):"missing"in e?function(r,s){dn(!!s.missing),dn(!!s.readTime);const u=ja(r,s.missing),d=Yr(s.readTime);return Br.newNoDocument(u,d)}(n,e):Jt()}(g.serializer,Q);P.set(we.key.toString(),we)});const j=[];return f.forEach(Q=>{const we=P.get(Q.toString());dn(!!we),j.push(we)}),j}),function u(d,f){return s.apply(this,arguments)})(t.datastore,e);var s;return r.forEach(s=>t.recordVersion(s)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ba(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,nt.A)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const u=Xt.fromPath(s);e.mutations.push(new x0(u,e.precondition(u)))}),yield(r=(0,nt.A)(function*(u,d){const f=Gt(u),g={writes:d.map(D=>bc(f.serializer,D))};yield f.Co("Commit",f.serializer.databaseId,Jn.emptyPath(),g)}),function s(u,d){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Jt();t=fn.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Rt(mt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(fn.min())?Qr.exists(!1):Qr.updateTime(t):Qr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fn.min()))throw new Rt(mt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qr.updateTime(t)}return Qr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class qA{constructor(e,t,r,s,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=u,this.Za=r.maxAttempts,this.Yo=new oy(this.asyncQueue,"transaction_retry")}Xa(){this.Za-=1,this.eu()}eu(){var e=this;this.Yo.$o((0,nt.A)(function*(){const t=new GA(e.datastore),r=e.tu(t);r&&r.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(u=>{e.nu(u)}))}).catch(s=>{e.nu(s)})}))}tu(e){try{const t=this.updateFunction(e);return!Bh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}nu(e){this.Za>0&&this.ru(e)?(this.Za-=1,this.asyncQueue.enqueueAndForget(()=>(this.eu(),Promise.resolve()))):this.deferred.reject(e)}ru(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!O0(t)}return!1}}class QA{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=ki.UNAUTHENTICATED,this.clientId=Lh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,nt.A)(function*(f){Ot("FirestoreClient","Received user=",f.uid),yield u.authCredentialListener(f),u.user=f});return function(f){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ot("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Rt(mt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,nt.A)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=Cf(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function zm(n,e){return Ty.apply(this,arguments)}function Ty(){return Ty=(0,nt.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ot("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,nt.A)(function*(u){r.isEqual(u)||(yield nA(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),Ty.apply(this,arguments)}function Sy(n,e){return Ay.apply(this,arguments)}function Ay(){return(Ay=(0,nt.A)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield function Xw(n){return Ry.apply(this,arguments)}(n);Ot("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>$N(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>$N(e.remoteStore,s)),n._onlineComponents=e})).apply(this,arguments)}function Ry(){return(Ry=(0,nt.A)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ot("FirestoreClient","Using user provided OfflineComponentProvider");try{yield zm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function XA(n){return"FirebaseError"===n.name?n.code===mt.FAILED_PRECONDITION||n.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;qo("Error using user provided cache. Falling back to memory cache: "+t),yield zm(n,new Af)}}else Ot("FirestoreClient","Using default OfflineComponentProvider"),yield zm(n,new Af);return n._offlineComponents})).apply(this,arguments)}function Rf(n){return xy.apply(this,arguments)}function xy(){return(xy=(0,nt.A)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ot("FirestoreClient","Using user provided OnlineComponentProvider"),yield Sy(n,n._uninitializedComponentsProvider._online)):(Ot("FirestoreClient","Using default OnlineComponentProvider"),yield Sy(n,new Md))),n._onlineComponents})).apply(this,arguments)}function My(n){return Rf(n).then(e=>e.syncEngine)}function Pd(n){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,nt.A)(function*(n){const e=yield Rf(n),t=e.eventManager;return t.onListen=Mw.bind(null,e.syncEngine),t.onUnlisten=ZN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=RA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JN.bind(null,e.syncEngine),t})).apply(this,arguments)}function nR(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const Py=new Map;function iI(n,e,t){if(!t)throw new Rt(mt.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iR(n){if(!Xt.isDocumentKey(n))throw new Rt(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function oI(n){if(Xt.isDocumentKey(n))throw new Rt(mt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Ny(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":Jt()}function Xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Rt(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ny(n);throw new Rt(mt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}class sI{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Rt(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Rt(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function rR(n,e,t,r){if(!0===e&&!0===r)throw new Rt(mt.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=nR(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(u){if(void 0!==u.timeoutSeconds){if(isNaN(u.timeoutSeconds))throw new Rt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (must not be NaN)`);if(u.timeoutSeconds<5)throw new Rt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (minimum allowed value is 5)`);if(u.timeoutSeconds>30)throw new Rt(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${u.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cl{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Rt(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Rt(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sI(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new AP;switch(r.type){case"firstParty":return new s0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Rt(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Py.get(t);r&&(Ot("ComponentProvider","Removing Datastore"),Py.delete(t),r.terminate())}(this),Promise.resolve()}}class mo{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mo(this.firestore,e,this._query)}}class mi{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mi(this.firestore,e,this._key)}}class Cc extends mo{constructor(e,t,r){super(e,t,bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mi(this.firestore,null,new Xt(e))}withConverter(e){return new Cc(this.firestore,e,this._path)}}class lk{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new oy(this,"async_queue_retry"),this.hu=()=>{const t=yf();t&&Ot("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Yo.Wo()};const e=yf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;const t=yf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});const t=new Fi;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){var e=this;return(0,nt.A)(function*(){if(0!==e.su.length){try{yield e.su[0](),e.su.shift(),e.Yo.reset()}catch(t){if(!pc(t))throw t;Ot("AsyncQueue","Operation failed with retryable error: "+t)}e.su.length>0&&e.Yo.$o(()=>e.Tu())}})()}Iu(e){const t=this.iu.then(()=>(this.uu=!0,e().catch(r=>{throw this.au=r,this.uu=!1,hi("INTERNAL UNHANDLED ERROR: ",function(d){let f=d.message||"";return d.stack&&(f=d.stack.includes(d.message)?d.stack:d.message+"\n"+d.stack),f}(r)),r}).then(r=>(this.uu=!1,r))));return this.iu=t,t}enqueueAfterDelay(e,t,r){this.Pu(),this.lu.indexOf(e)>-1&&(t=0);const s=Iw.createAndSchedule(this,e,t,r,u=>this.Eu(u));return this._u.push(s),s}Pu(){this.au&&Jt()}verifyOperationInProgress(){}du(){var e=this;return(0,nt.A)(function*(){let t;do{t=e.iu,yield t}while(t!==e.iu)})()}Au(e){for(const t of this._u)if(t.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this._u)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){const t=this._u.indexOf(e);this._u.splice(t,1)}}function aI(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const s=t;for(const u of["next","error","complete"])if(u in s&&"function"==typeof s[u])return!0;return!1}(n)}class fr extends cl{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new lk,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||cI(this),this._firestoreClient.terminate()}}function aR(n,e){const t="object"==typeof n?n:function IL(n=n_){const e=Vu.get(n);if(!e&&n===n_&&Wl())return bP();if(!e)throw Pa.create("no-app",{appName:n});return e}(),r="string"==typeof n?n:e||"(default)",s=function VT(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const u=(n=>{const e=(n=>{var e,t;return null===(t=null===(e=Sh())||void 0===e?void 0:e.emulatorHosts)||void 0===t?void 0:t[n]})(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return"["===e[0]?[e.substring(1,t-1),r]:[e.substring(0,t),r]})("firestore");u&&function NL(n,e,t,r={}){var s;const u=(n=Xn(n,cl))._getSettings(),d=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==d&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:d,ssl:!1})),r.mockUserToken){let f,g;if("string"==typeof r.mockUserToken)f=r.mockUserToken,g=ki.MOCK_USER;else{f=function OE(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r=e||"demo-project",s=n.iat||0,u=n.sub||n.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Yp(JSON.stringify({alg:"none",type:"JWT"})),Yp(JSON.stringify(d)),""].join(".")}(r.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const D=r.mockUserToken.sub||r.mockUserToken.user_id;if(!D)throw new Rt(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ki(D)}n._authCredentials=new RP(new qT(f,g))}}(s,...u)}return s}function Jr(n){return n._firestoreClient||cI(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function cI(n){var e,t,r;const s=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new dS(n._databaseId,g,n._persistenceKey,(S=s).host,S.ssl,S.experimentalForceLongPolling,S.experimentalAutoDetectLongPolling,nR(S.experimentalLongPollingOptions),S.useFetchStreams));var g,S;n._firestoreClient=new QA(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function uR(n){return function(t){const r=new Fi;return t.asyncQueue.enqueueAndForget((0,nt.A)(function*(){return function Uw(n,e){return gy.apply(this,arguments)}(yield My(t),r)})),r.promise}(Jr(n=Xn(n,fr)))}class Nd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nd(Vi.fromBase64String(e))}catch(t){throw new Rt(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nd(Vi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ei{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Rt(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kd{constructor(e){this._methodName=e}}class uI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Rt(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Rt(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mn(this._lat,e._lat)||Mn(this._long,e._long)}}const zL=/^__.*__$/;class KL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms):new yc(e,this.data,t,this.fieldTransforms)}}class Of{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jt()}}class Pf{constructor(e,t,r,s,u,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.mu(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new Pf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.gu({path:r,yu:!1});return s.wu(e),s}Su(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.gu({path:r,yu:!1});return s.mu(),s}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Ly(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(0===e.length)throw this.Du("Document fields must not be empty");if(lR(this.fu)&&zL.test(e))throw this.Du('Document fields cannot begin and end with "__"')}}class mk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Td(e)}Fu(e,t,r,s=!1){return new Pf({fu:e,methodName:t,vu:r,path:qr.emptyPath(),yu:!1,Cu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ul(n){const e=n._freezeSettings(),t=Td(n._databaseId);return new mk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ky(n,e,t,r,s,u={}){const d=n.Fu(u.merge||u.mergeFields?2:0,e,t,s);fI("Data must be an object, but it was:",d,r);const f=hI(r,d);let g,D;if(u.merge)g=new gs(d.fieldMask),D=d.fieldTransforms;else if(u.mergeFields){const S=[];for(const P of u.mergeFields){const j=kf(e,P,t);if(!d.contains(j))throw new Rt(mt.INVALID_ARGUMENT,`Field '${j}' is specified in your field mask but missing from your input data.`);fR(S,j)||S.push(j)}g=new gs(S),D=d.fieldTransforms.filter(P=>g.covers(P.field))}else g=null,D=d.fieldTransforms;return new KL(new Zi(f),g,D)}class Gm extends kd{_toFieldTransform(e){if(2!==e.fu)throw e.Du(1===e.fu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gm}}class qm extends kd{_toFieldTransform(e){return new Sm(e.path,new ad)}isEqual(e){return e instanceof qm}}function Qm(n,e,t,r){const s=n.Fu(1,e,t);fI("Data must be an object, but it was:",s,r);const u=[],d=Zi.empty();ou(r,(g,D)=>{const S=mI(e,g,t);D=Wo(D);const P=s.Su(S);if(D instanceof Gm)u.push(S);else{const j=Fd(D,P);null!=j&&(u.push(S),d.set(S,j))}});const f=new gs(u);return new Of(d,f,s.fieldTransforms)}function hR(n,e,t,r,s,u){const d=n.Fu(1,e,t),f=[kf(e,r,t)],g=[s];if(u.length%2!=0)throw new Rt(mt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let j=0;j<u.length;j+=2)f.push(kf(e,u[j])),g.push(u[j+1]);const D=[],S=Zi.empty();for(let j=f.length-1;j>=0;--j)if(!fR(D,f[j])){const Q=f[j];let we=g[j];we=Wo(we);const Me=d.Su(Q);if(we instanceof Gm)D.push(Q);else{const Re=Fd(we,Me);null!=Re&&(D.push(Q),S.set(Q,Re))}}const P=new gs(D);return new Of(S,P,d.fieldTransforms)}function Fd(n,e){if(Ld(n=Wo(n)))return fI("Unsupported field value:",e,n),hI(n,e);if(n instanceof kd)return function(r,s){if(!lR(s.fu))throw s.Du(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Du(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(s);u&&s.fieldTransforms.push(u)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.yu&&4!==e.fu)throw e.Du("Nested arrays are not supported");return function(r,s){const u=[];let d=0;for(const f of r){let g=Fd(f,s.bu(d));null==g&&(g={nullValue:"NULL_VALUE"}),u.push(g),d++}return{arrayValue:{values:u}}}(n,e)}return function(r,s){if(null===(r=Wo(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return ES(s.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const u=Sr.fromDate(r);return{timestampValue:ef(s.serializer,u)}}if(r instanceof Sr){const u=new Sr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(s.serializer,u)}}if(r instanceof uI)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nd)return{bytesValue:pN(s.serializer,r._byteString)};if(r instanceof mi){const u=s.databaseId,d=r.firestore._databaseId;if(!d.isEqual(u))throw s.Du(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Om(r.firestore._databaseId||s.databaseId,r._key.path)}}throw s.Du(`Unsupported field value: ${Ny(r)}`)}(n,e)}function hI(n,e){const t={};return $h(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ou(n,(r,s)=>{const u=Fd(s,e.pu(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Ld(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Sr||n instanceof uI||n instanceof Nd||n instanceof mi||n instanceof kd)}function fI(n,e,t){if(!Ld(t)||"object"!=typeof(s=t)||null===s||Object.getPrototypeOf(s)!==Object.prototype&&null!==Object.getPrototypeOf(s)){const r=Ny(t);throw e.Du("an object"===r?n+" a custom object":n+" "+r)}var s}function kf(n,e,t){if((e=Wo(e))instanceof Ei)return e._internalPath;if("string"==typeof e)return mI(n,e);throw Ly("Field path arguments must be of type string or ",n,!1,void 0,t)}const pI=new RegExp("[~\\*/\\[\\]]");function mI(n,e,t){if(e.search(pI)>=0)throw Ly(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ei(...e.split("."))._internalPath}catch{throw Ly(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ly(n,e,t,r,s){const u=r&&!r.isEmpty(),d=void 0!==s;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(u||d)&&(g+=" (found",u&&(g+=` in field ${r}`),d&&(g+=` in document ${s}`),g+=")"),new Rt(mt.INVALID_ARGUMENT,f+n+g)}function fR(n,e){return n.some(t=>t.isEqual(e))}class Xm{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new mi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new pR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ym("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class pR extends Xm{data(){return super.data()}}function Ym(n,e){return"string"==typeof e?mI(n,e):e instanceof Ei?e._internalPath:e._delegate._internalPath}function mR(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Rt(mt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vy{}class Ff extends Vy{}function Lf(n,e,...t){let r=[];e instanceof Vy&&r.push(e),r=r.concat(t),function(u){const d=u.filter(g=>g instanceof Vf).length,f=u.filter(g=>g instanceof Zm).length;if(d>1||d>0&&f>0)throw new Rt(mt.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class Zm extends Ff{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Zm(e,t,r)}_apply(e){const t=this._parse(e);return vI(e._query,t),new mo(e.firestore,e.converter,x_(e._query,t))}_parse(e){const t=ul(e.firestore);return function(u,d,f,g,D,S,P){let j;if(D.isKeyField()){if("array-contains"===S||"array-contains-any"===S)throw new Rt(mt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if("in"===S||"not-in"===S){bk(P,S);const Q=[];for(const we of P)Q.push(yk(g,u,we));j={arrayValue:{values:Q}}}else j=yk(g,u,P)}else"in"!==S&&"not-in"!==S&&"array-contains-any"!==S||bk(P,S),j=function dI(n,e,t,r=!1){return Fd(t,n.Fu(r?4:3,e))}(f,"where",P,"in"===S||"not-in"===S);return nr.create(D,S,j)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function Jm(n,e,t){const r=e,s=Ym("where",n);return Zm._create(s,r,t)}class Vf extends Vy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Vf(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Or.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(s,u){let d=s;const f=u.getFlattenedFilters();for(const g of f)vI(d,g),d=x_(d,g)}(e._query,t),new mo(e.firestore,e.converter,x_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class By extends Ff{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new By(e,t)}_apply(e){const t=function(s,u,d){if(null!==s.startAt)throw new Rt(mt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==s.endAt)throw new Rt(mt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sd(u,d)}(e._query,this._field,this._direction);return new mo(e.firestore,e.converter,function(s,u){const d=s.explicitOrderBy.concat([u]);return new Gu(s.path,s.collectionGroup,d,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function eg(n,e="asc"){const t=e,r=Ym("orderBy",n);return By._create(r,t)}class jy extends Ff{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new jy(e,t,r)}_apply(e){return new mo(e.firestore,e.converter,M_(e._query,this._limit,this._limitType))}}function Uy(n){return function Km(n,e){if(e<=0)throw new Rt(mt.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}("limit",n),jy._create("limit",n,"F")}function yk(n,e,t){if("string"==typeof(t=Wo(t))){if(""===t)throw new Rt(mt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!D0(e)&&-1!==t.indexOf("/"))throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jn.fromString(t));if(!Xt.isDocumentKey(r))throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lu(n,new Xt(r))}if(t instanceof mi)return lu(n,t._key);throw new Rt(mt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ny(t)}.`)}function bk(n,e){if(!Array.isArray(n)||0===n.length)throw new Rt(mt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vI(n,e){const t=function(s,u){for(const d of s)for(const f of d.getFlattenedFilters())if(u.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Rt(mt.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class wk{convertValue(e,t="none"){switch(zu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(cu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Jt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ou(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new uI(fi(e.latitude),fi(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=g_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gm(e));default:return null}}convertTimestamp(e){const t=au(e);return new Sr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jn.fromString(e);dn(MS(r));const s=new Hu(r.get(1),r.get(3)),u=new Xt(r.popFirst(5));return s.isEqual(t)||hi(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function ng(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ik extends wk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mi(this.firestore,null,t)}}class Vd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bf extends Xm{constructor(e,t,r,s,u,d){super(e,t,r,s,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ym("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Hy extends Bf{data(e={}){return super.data(e)}}class jf{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Vd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Hy(this._firestore,this._userDataWriter,r.key,r,new Vd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Rt(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,u){if(s._snapshot.oldDocs.isEmpty()){let d=0;return s._snapshot.docChanges.map(f=>({type:"added",doc:new Hy(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Vd(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter),oldIndex:-1,newIndex:d++}))}{let d=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>u||3!==f.type).map(f=>{const g=new Hy(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Vd(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let D=-1,S=-1;return 0!==f.type&&(D=d.indexOf(f.doc.key),d=d.delete(f.doc.key)),1!==f.type&&(d=d.add(f.doc),S=d.indexOf(f.doc.key)),{type:gR(f.type),doc:g,oldIndex:D,newIndex:S}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function gR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jt()}}class ll extends wk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new mi(this.firestore,null,t)}}function yI(n){n=Xn(n,mo);const e=Xn(n.firestore,fr),t=Jr(e),r=new ll(e);return mR(n._query),function eR(n,e,t={}){const r=new Fi;return n.asyncQueue.enqueueAndForget((0,nt.A)(function*(){return function(u,d,f,g,D){const S=new Hm({next:j=>{d.enqueueAndForget(()=>Cw(u,P)),j.fromCache&&"server"===g.source?D.reject(new Rt(mt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(j)},error:j=>D.reject(j)}),P=new dy(f,S,{includeMetadataChanges:!0,ra:!0});return Dw(u,P)}(yield Pd(n),n.asyncQueue,e,t,r)})),r.promise}(t,n._query).then(s=>new jf(e,r,n,s))}const yR={maxAttempts:5};class II{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ul(e)}set(e,t,r){this._verifyNotCommitted();const s=Ha(e,this._firestore),u=ng(s.converter,t,r),d=ky(this._dataReader,"WriteBatch.set",s._key,u,null!==s.converter,r);return this._mutations.push(d.toMutation(s._key,Qr.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const u=Ha(e,this._firestore);let d;return d="string"==typeof(t=Wo(t))||t instanceof Ei?hR(this._dataReader,"WriteBatch.update",u._key,t,r,s):Qm(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,Qr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ha(e,this._firestore);return this._mutations=this._mutations.concat(new Ba(t._key,Qr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Rt(mt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ha(n,e){if((n=Wo(n)).firestore!==e)throw new Rt(mt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class aV extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=ul(t)}get(t){const r=Ha(t,this._firestore),s=new Ik(this._firestore);return this._transaction.lookup([r._key]).then(u=>{if(!u||1!==u.length)return Jt();const d=u[0];if(d.isFoundDocument())return new Xm(this._firestore,s,d.key,d,r.converter);if(d.isNoDocument())return new Xm(this._firestore,s,r._key,null,r.converter);throw Jt()})}set(t,r,s){const u=Ha(t,this._firestore),d=ng(u.converter,r,s),f=ky(this._dataReader,"Transaction.set",u._key,d,null!==u.converter,s);return this._transaction.set(u._key,f),this}update(t,r,s,...u){const d=Ha(t,this._firestore);let f;return f="string"==typeof(r=Wo(r))||r instanceof Ei?hR(this._dataReader,"Transaction.update",d._key,r,s,u):Qm(this._dataReader,"Transaction.update",d._key,r),this._transaction.update(d._key,f),this}delete(t){const r=Ha(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ha(e,this._firestore),r=new ll(this._firestore);return super.get(e).then(s=>new Bf(this._firestore,r,t._key,s._document,new Vd(!1,!1),t.converter))}}function DI(n,e,t){n=Xn(n,fr);const r=Object.assign(Object.assign({},yR),t);return function(u){if(u.maxAttempts<1)throw new Rt(mt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(u,d,f){const g=new Fi;return u.asyncQueue.enqueueAndForget((0,nt.A)(function*(){const D=yield function Jw(n){return Rf(n).then(e=>e.datastore)}(u);new qA(u.asyncQueue,D,f,d,g).Xa()})),g.promise}(Jr(n),s=>e(new aV(n,s)),r)}!function(e,t=!0){Fh="10.12.4",Bu(new rm("firestore",(r,{instanceIdentifier:s,options:u})=>{const d=r.getProvider("app").getImmediate(),f=new fr(new xP(r.getProvider("auth-internal")),new OP(r.getProvider("app-check-internal")),function(D,S){if(!Object.prototype.hasOwnProperty.apply(D.options,["projectId"]))throw new Rt(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hu(D.options.projectId,S)}(d,s),d);return u=Object.assign({useFetchStreams:t},u),f._setSettings(u),f},"PUBLIC").setMultipleInstances(!0)),Zc(r0,"4.6.4",e),Zc(r0,"4.6.4","esm2017")}();var wR="[object process]"===Object.prototype.toString.call(typeof process<"u"?process:0)?function TI(n){process.on("exit",function(){return n()}),process.on("beforeExit",function(){return n().then(function(){return process.exit()})}),process.on("SIGINT",function(){return n().then(function(){return process.exit()})}),process.on("uncaughtException",function(e){return n().then(function(){console.trace(e),process.exit(101)})})}:function vV(n){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var e=self.close.bind(self);self.close=function(){return n(),e()}}else{if("function"!=typeof window.addEventListener)return;window.addEventListener("beforeunload",function(){n()},!0),window.addEventListener("unload",function(){n()},!0)}},mu=new Set,SI=!1;function yV(){var n=[];return mu.forEach(function(e){n.push(e()),mu.delete(e)}),Promise.all(n)}function jd(n,e){return n.broadcastChannel.postInternal({context:"leader",action:e,token:n.token})}function Bk(n){n.isLeader=!0,n._hasLeader=!0;var e=function og(n){if(function _V(){SI||(SI=!0,wR(yV))}(),"function"!=typeof n)throw new Error("Listener is no function");return mu.add(n),{remove:function(){return mu.delete(n)},run:function(){return mu.delete(n),n()}}}(function(){return n.die()});n._unl.push(e);var t=function(s){"leader"===s.context&&"apply"===s.action&&jd(n,"tell"),"leader"===s.context&&"tell"===s.action&&!n._dpLC&&(n._dpLC=!0,n._dpL(),jd(n,"tell"))};return n.broadcastChannel.addEventListener("internal",t),n._lstns.push(t),jd(n,"tell")}var jk=function(e,t){var r=this;this.broadcastChannel=e,e._befC.push(function(){return r.die()}),this._options=t,this.isLeader=!1,this.isDead=!1,this.token=Fu(),this._lstns=[],this._unl=[],this._dpL=function(){},this._dpLC=!1,this._wKMC={},this.lN="pubkey-bc||"+e.method.type+"||"+e.name};jk.prototype={hasLeader:function(){var e=this;return navigator.locks.query().then(function(t){var r=t.held?t.held.filter(function(s){return s.name===e.lN}):[];return!!(r&&r.length>0)})},awaitLeadership:function(){var e=this;if(!this._wLMP){this._wKMC.c=new AbortController;var t=new Promise(function(r,s){e._wKMC.res=r,e._wKMC.rej=s});this._wLMP=new Promise(function(r){navigator.locks.request(e.lN,{signal:e._wKMC.c.signal},function(){return e._wKMC.c=void 0,Bk(e),r(),t}).catch(function(){})})}return this._wLMP},set onduplicate(n){},die:function(){var e=this;return this._lstns.forEach(function(t){return e.broadcastChannel.removeEventListener("internal",t)}),this._lstns=[],this._unl.forEach(function(t){return t.remove()}),this._unl=[],this.isLeader&&(this.isLeader=!1),this.isDead=!0,this._wKMC.res&&this._wKMC.res(),this._wKMC.c&&this._wKMC.c.abort("LeaderElectionWebLock.die() called"),jd(this,"death")}};var IR=function(e,t){var r=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this._hasLeader=!1,this.isDead=!1,this.token=Fu(),this._aplQ=da,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var s=function(d){"leader"===d.context&&("death"===d.action&&(r._hasLeader=!1),"tell"===d.action&&(r._hasLeader=!0))};this.broadcastChannel.addEventListener("internal",s),this._lstns.push(s)};IR.prototype={hasLeader:function(){return Promise.resolve(this._hasLeader)},applyOnce:function(e){var t=this;return this.isLeader?Gc(0,!0):this.isDead?Gc(0,!1):this._aplQC>1?this._aplQ:(this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then(function(){return function(){if(t.isLeader)return LC;var d,u=!1,f=new Promise(function(S){d=function(){u=!0,S()}}),g=function(P){"leader"===P.context&&P.token!=t.token&&("apply"===P.action&&P.token>t.token&&d(),"tell"===P.action&&(d(),t._hasLeader=!0))};t.broadcastChannel.addEventListener("internal",g);var D=e?4*t._options.responseTime:t._options.responseTime;return jd(t,"apply").then(function(){return Promise.race([Gc(D),f.then(function(){return Promise.reject(new Error)})])}).then(function(){return jd(t,"apply")}).then(function(){return Promise.race([Gc(D),f.then(function(){return Promise.reject(new Error)})])}).catch(function(){}).then(function(){return t.broadcastChannel.removeEventListener("internal",g),!u&&Bk(t).then(function(){return!0})})}()}).then(function(){t._aplQC=t._aplQC-1}),this._aplQ.then(function(){return t.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=function RI(n){return n.isLeader?da:new Promise(function(e){var t=!1;function r(){t||(t=!0,n.broadcastChannel.removeEventListener("internal",u),e(!0))}n.applyOnce().then(function(){n.isLeader&&r()}),function d(){return Gc(n._options.fallbackInterval).then(function(){if(!n.isDead&&!t){if(!n.isLeader)return n.applyOnce(!0).then(function(){n.isLeader?r():d()});r()}})}();var u=function(f){"leader"===f.context&&"death"===f.action&&(n._hasLeader=!1,n.applyOnce().then(function(){n.isLeader&&r()}))};n.broadcastChannel.addEventListener("internal",u),n._lstns.push(u)})}(this)),this._aLP},set onduplicate(n){this._dpL=n},die:function(){var e=this;return this._lstns.forEach(function(t){return e.broadcastChannel.removeEventListener("internal",t)}),this._lstns=[],this._unl.forEach(function(t){return t.remove()}),this._unl=[],this.isLeader&&(this._hasLeader=!1,this.isLeader=!1),this.isDead=!0,jd(this,"death")}};var ys=M(5520),CR=new WeakMap,TR=new WeakMap;function xI(n){return(0,MC.q)(TR,n,()=>function dl(n,e){if(n._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");e=function DR(n,e){return n||(n={}),(n=JSON.parse(JSON.stringify(n))).fallbackInterval||(n.fallbackInterval=3e3),n.responseTime||(n.responseTime=e.method.averageResponseTime(e.options)),n}(e,n);var t=function qM(){return typeof navigator<"u"&&typeof navigator.locks<"u"&&"function"==typeof navigator.locks.request}()?new jk(n,e):new IR(n,e);return n._befC.push(function(){return t.die()}),n._leaderElector=t,t}(n))}function Uk(){var n=iT(this.storage.name,this.token,this.name,this),e=this.destroy.bind(this);this.destroy=function(){return Qp(this.token,this),e()};var t=xI(n);return t||(t=xI(n),CR.set(this,t)),this.leaderElector=()=>t,t}function MI(){return!this.multiInstance||this.leaderElector().isLeader}function EV(){return this.multiInstance?this.leaderElector().awaitLeadership().then(()=>!0):ys.Ms}var IV={name:"leader-election",rxdb:!0,prototypes:{RxDatabase:n=>{n.leaderElector=Uk,n.isLeader=MI,n.waitForLeadership=EV}},hooks:{preDestroyRxDatabase:{after:function $k(n){var e=CR.get(n);e&&e.die()}}}},Ky=M(2060),Ud=M(6568);function Hk(n,e){return n.input.metaInstance.findDocumentsById(e.map(t=>(0,fs.U)(n.input.metaInstance.schema,{itemId:t,isCheckpoint:"0"})),!0).then(t=>{var r={};return Object.values(t).forEach(s=>{r[s.itemId]={docData:s.docData,metaDocument:s}}),r})}function sg(n,e,t,r){return Wy.apply(this,arguments)}function Wy(){return(Wy=(0,nt.A)(function*(n,e,t,r){var s=e[n.primaryPath],u=t?(0,po.C9)(t):{id:"",isCheckpoint:"0",itemId:s,docData:e,_attachments:{},_deleted:!1,_rev:(0,Ky.Fq)(),_meta:{lwt:0}};return u.docData=e,r&&(u.isResolvedConflict=r),u._meta.lwt=(0,uc.t)(),u.id=(0,fs.U)(n.input.metaInstance.schema,u),u._rev=(0,Ud.CM)(yield n.checkpointKey,t),{previous:t,document:u}})).apply(this,arguments)}var Gy=M(4843);function qy(n,e){return AR.apply(this,arguments)}function AR(){return(AR=(0,nt.A)(function*(n,e){var t=(0,fs.U)(n.input.metaInstance.schema,{isCheckpoint:"1",itemId:e}),s=(yield n.input.metaInstance.findDocumentsById([t],!1))[0];if(n.lastCheckpointDoc[e]=s,s)return s.checkpointData})).apply(this,arguments)}function OI(n,e,t){return RR.apply(this,arguments)}function RR(){return(RR=(0,nt.A)(function*(n,e,t){n.checkpointQueue=n.checkpointQueue.then((0,nt.A)(function*(){var r=n.lastCheckpointDoc[e];if(t&&!n.events.canceled.getValue()&&(!r||JSON.stringify(r.checkpointData)!==JSON.stringify(t))){var s={id:"",isCheckpoint:"1",itemId:e,_deleted:!1,_attachments:{},checkpointData:t,_meta:(0,Ky.o4)(),_rev:(0,Ky.Fq)()};for(s.id=(0,fs.U)(n.input.metaInstance.schema,s);!n.events.canceled.getValue();){if(r&&(s.checkpointData=(0,po.Mu)([r.checkpointData,s.checkpointData])),s._meta.lwt=(0,uc.t)(),s._rev=(0,Ud.CM)(yield n.checkpointKey,r),n.events.canceled.getValue())return;var u=[{previous:r,document:s}],d=yield n.input.metaInstance.bulkWrite(u,"replication-set-checkpoint"),f=(0,po.YN)(n.primaryPath,u,d)[0];if(f)return void(n.lastCheckpointDoc[e]=f);var g=d.error[0];if(409!==g.status)throw g;r=(0,ii.ZN)(g.documentInDb),s._rev=(0,Ud.CM)(yield n.checkpointKey,r)}}})),yield n.checkpointQueue})).apply(this,arguments)}function xR(){return(xR=(0,nt.A)(function*(n){return"rx_storage_replication_"+(yield n.hashFunction([n.identifier,n.forkInstance.databaseName,n.forkInstance.collectionName].join("||")))})).apply(this,arguments)}function ag(n,e,t){var r=(0,Qi.FD)(n);return e||delete r._attachments,t||(delete r._meta,delete r._rev),r}function PI(n,e){return n.hasAttachments?e.map(t=>{var r=(0,Qi.o8)(t.document);return r.docData=(0,po.on)(r.docData),{document:r,previous:t.previous}}):e}function MR(n){for(;;){if(!n.underlyingPersistentStorage)return n;n=n.underlyingPersistentStorage}}function gu(){return gu=(0,nt.A)(function*(n){n.input.initialCheckpoint&&n.input.initialCheckpoint.downstream&&((yield qy(n,"down"))||(yield OI(n,"down",n.input.initialCheckpoint.downstream)));var t=yield n.input.hashFunction(n.input.identifier),r=n.input.replicationHandler,s=0,u=[];function d(Me){n.stats.down.addNewTask=n.stats.down.addNewTask+1;var Re={time:s++,task:Me};u.push(Re),n.streamQueue.down=n.streamQueue.down.then(()=>{for(var gt=[];u.length>0;){n.events.active.down.next(!0);var Et=(0,ii.ZN)(u.shift());if(!(Et.time<g)){if("RESYNC"===Et.task){if(0===gt.length){gt.push(Et.task);break}break}gt.push(Et.task)}}if(0!==gt.length)return"RESYNC"===gt[0]?function D(){return S.apply(this,arguments)}():function P(Me){n.stats.down.downstreamProcessChanges=n.stats.down.downstreamProcessChanges+1;var Re=[],gt=null;return Me.forEach(Et=>{if("RESYNC"===Et)throw new Error("SNH");(0,Ko.Hb)(Re,Et.documents),gt=(0,po.Mu)([gt,Et.checkpoint])}),we(Re,(0,ii.ZN)(gt))}(gt)}).then(()=>{n.events.active.down.next(!1),!n.firstSyncDone.down.getValue()&&!n.events.canceled.getValue()&&n.firstSyncDone.down.next(!0)})}if(d("RESYNC"),!n.events.canceled.getValue()){var f=r.masterChangeStream$.pipe((0,bi.Z)(function(){var Me=(0,nt.A)(function*(Re){return yield(0,Gy._)(n.events.active.up.pipe((0,wr.p)(gt=>!gt))),Re});return function(Re){return Me.apply(this,arguments)}}())).subscribe(Me=>{n.stats.down.masterChangeStreamEmit=n.stats.down.masterChangeStreamEmit+1,d(Me)});(0,Gy._)(n.events.canceled.pipe((0,wr.p)(Me=>!!Me))).then(()=>f.unsubscribe())}var g=-1;function S(){return(S=(0,nt.A)(function*(){if(n.stats.down.downstreamResyncOnce=n.stats.down.downstreamResyncOnce+1,!n.events.canceled.getValue()){n.checkpointQueue=n.checkpointQueue.then(()=>qy(n,"down"));for(var Me=yield n.checkpointQueue,Re=[];!n.events.canceled.getValue();){g=s++;var gt=yield r.masterChangesSince(Me,n.input.pullBatchSize);if(0===gt.documents.length||(Me=(0,po.Mu)([Me,gt.checkpoint]),Re.push(we(gt.documents,Me)),gt.documents.length<n.input.pullBatchSize))break}yield Promise.all(Re)}})).apply(this,arguments)}var j=ys.em,Q={docs:{}};function we(Me,Re){var gt=n.primaryPath;return n.stats.down.persistFromMaster=n.stats.down.persistFromMaster+1,Me.forEach(Et=>{Q.docs[Et[gt]]=Et}),Q.checkpoint=Re,j=j.then(()=>{var Et=Q.docs;Q.docs={};var Dt=Q.checkpoint,Ht=Object.keys(Et);if(n.events.canceled.getValue()||0===Ht.length)return ys.em;var wn=[],un={},Fe={},ue=[];return Promise.all([n.input.forkInstance.findDocumentsById(Ht,!0),Hk(n,Ht)]).then(([Ie,Le])=>{var ze=new Map;return Ie.forEach(it=>ze.set(it[gt],it)),Promise.all(Ht.map(function(){var it=(0,nt.A)(function*(Ee){var pr=ze.get(Ee),bs=pr?ag(pr,n.hasAttachments,!1):void 0,Yo=Et[Ee],ji=Le[Ee];ji&&pr&&ji.metaDocument.isResolvedConflict===pr._rev&&(yield n.streamQueue.up);var ei=!(!ji||!bs)&&(yield n.input.conflictHandler({realMasterState:ji.docData,newDocumentState:bs},"downstream-check-if-equal-0").then(ti=>ti.isEqual));if(!ei&&ji&&ji.docData._rev&&pr&&pr._meta[n.input.identifier]&&(0,Ud.Wg)(pr._rev)===pr._meta[n.input.identifier]&&(ei=!0),pr&&ji&&!1===ei||pr&&!ji)return ys.em;var Ai=!!bs&&(yield n.input.conflictHandler({realMasterState:Yo,newDocumentState:bs},"downstream-check-if-equal-1").then(ti=>ti.isEqual));if(bs&&Ai)return(!ji||!1===ei)&&ue.push(yield sg(n,bs,ji?ji.metaDocument:void 0)),ys.em;var Oo=Object.assign({},Yo,pr?{_meta:(0,Qi.FD)(pr._meta),_attachments:n.hasAttachments&&Yo._attachments?Yo._attachments:{},_rev:(0,Ky.Fq)()}:{_meta:{lwt:(0,uc.t)()},_rev:(0,Ky.Fq)(),_attachments:n.hasAttachments&&Yo._attachments?Yo._attachments:{}});if(Yo._rev){var zs=pr?(0,Ud.Wg)(pr._rev)+1:1;Oo._meta[n.input.identifier]=zs,n.input.keepMeta&&(Oo._rev=Yo._rev)}n.input.keepMeta&&Yo._meta&&(Oo._meta=Yo._meta);var dr={previous:pr,document:Oo};dr.document._rev=dr.document._rev?dr.document._rev:(0,Ud.CM)(t,dr.previous),wn.push(dr),un[Ee]=dr,Fe[Ee]=yield sg(n,Yo,ji?ji.metaDocument:void 0)});return function(Ee){return it.apply(this,arguments)}}()))}).then((0,nt.A)(function*(){if(wn.length>0)return n.input.forkInstance.bulkWrite(wn,yield n.downstreamBulkWriteFlag).then(Ie=>{(0,po.YN)(n.primaryPath,wn,Ie).forEach(ze=>{var it=ze[gt];n.events.processed.down.next(un[it]),ue.push(Fe[it])}),Ie.error.forEach(ze=>{409!==ze.status&&n.events.error.next((0,zc.Br)("RC_PULL",{writeError:ze}))})})})).then(()=>{if(ue.length>0)return n.input.metaInstance.bulkWrite(PI(n,ue),"replication-down-write-meta").then(Ie=>{Ie.error.forEach(Le=>{n.events.error.next((0,zc.Br)("RC_PULL",{id:Le.documentId,writeError:Le}))})})}).then(()=>{OI(n,"down",Dt)})}).catch(Et=>n.events.error.next(Et)),j}}),gu.apply(this,arguments)}var PR=M(327);function cg(){return cg=(0,nt.A)(function*(n,e,t,r){if(!t._attachments||r&&!r._attachments)throw new Error("_attachments missing");var s=t[n],u=new Set(r&&r._attachments?Object.keys(r._attachments):[]);return yield Promise.all(Object.entries(t._attachments).map(function(){var d=(0,nt.A)(function*([f,g]){if((!u.has(f)||r&&(0,ii.ZN)(r._attachments)[f].digest!==g.digest)&&!g.data){var D=yield e.getAttachmentData(s,f,g.digest);g.data=D}});return function(f){return d.apply(this,arguments)}}())),t}),cg.apply(this,arguments)}function Uf(){return Uf=(0,nt.A)(function*(n){n.input.initialCheckpoint&&n.input.initialCheckpoint.upstream&&((yield qy(n,"up"))||(yield OI(n,"up",n.input.initialCheckpoint.upstream)));var t=n.input.replicationHandler;n.streamQueue.up=n.streamQueue.up.then(()=>D().then(()=>{P()}));var r=0,s=-1,u=[],d=ys.Dr,f={docs:{}},g=n.input.forkInstance.changeStream().subscribe(function(){var Q=(0,nt.A)(function*(we){if(we.context!==(yield n.downstreamBulkWriteFlag))return n.stats.up.forkChangeStreamEmit=n.stats.up.forkChangeStreamEmit+1,u.push({task:we,time:r++}),n.events.active.up.getValue()||n.events.active.up.next(!0),n.input.waitBeforePersist?n.input.waitBeforePersist().then(()=>P()):P()});return function(we){return Q.apply(this,arguments)}}());function D(){return S.apply(this,arguments)}function S(){return S=(0,nt.A)(function*(){if(n.stats.up.upstreamInitialSync=n.stats.up.upstreamInitialSync+1,!n.events.canceled.getValue()){n.checkpointQueue=n.checkpointQueue.then(()=>qy(n,"up"));for(var Q=yield n.checkpointQueue,we=new Set,Me=function(){var Et=(0,nt.A)(function*(){s=r++,we.size>3&&(yield Promise.race(Array.from(we)));var Dt=yield(0,po.p0)(n.input.forkInstance,n.input.pushBatchSize,Q);if(0===Dt.documents.length)return 1;Q=(0,po.Mu)([Q,Dt.checkpoint]);var Ht=j(Dt.documents,(0,ii.ZN)(Q));we.add(Ht),Ht.catch().then(()=>we.delete(Ht))});return function(){return Et.apply(this,arguments)}}();!n.events.canceled.getValue()&&!(yield Me()););(yield Promise.all(we)).find(Et=>!!Et)?yield D():!n.firstSyncDone.up.getValue()&&!n.events.canceled.getValue()&&n.firstSyncDone.up.next(!0)}}),S.apply(this,arguments)}function P(){n.events.canceled.getValue()||0===u.length?n.events.active.up.next(!1):(n.stats.up.processTasks=n.stats.up.processTasks+1,n.events.active.up.next(!0),n.streamQueue.up=n.streamQueue.up.then(()=>{for(var Q=[],we={};u.length>0;){var Me=(0,ii.ZN)(u.shift());Me.time<s||((0,Ko.Hb)(Q,Me.task.events.map(gt=>gt.documentData)),we=(0,po.Mu)([we,Me.task.checkpoint]))}return(0===Q.length?ys.Dr:j(Q,we)).then(()=>{0===u.length?n.events.active.up.next(!1):P()})}))}function j(Q,we){return n.stats.up.persistToMaster=n.stats.up.persistToMaster+1,Q.forEach(Me=>{f.docs[Me[n.primaryPath]]=Me}),f.checkpoint=we,d=d.then((0,nt.A)(function*(){if(n.events.canceled.getValue())return!1;var Me=f.docs;f.docs={};var Re=f.checkpoint,gt=Object.keys(Me);if(0===gt.length)return!1;var Et=yield Hk(n,gt),Dt={},Ht=[],wn={},un={};if(yield Promise.all(gt.map(function(){var ei=(0,nt.A)(function*(Ai){var Oo=Me[Ai];un[Ai]=Oo;var zs=ag(Oo,n.hasAttachments,!!n.input.keepMeta),dr=Et[Ai];dr&&dr.metaDocument.isResolvedConflict!==Oo._rev&&(yield n.input.conflictHandler({realMasterState:dr.docData,newDocumentState:zs},"upstream-check-if-equal")).isEqual||dr&&dr.docData._rev&&(0,Ud.Wg)(Oo._rev)===Oo._meta[n.input.identifier]||(Ht.push(Ai),Dt[Ai]={assumedMasterState:dr?dr.docData:void 0,newDocumentState:zs},wn[Ai]=yield sg(n,zs,dr?dr.metaDocument:void 0))});return function(Ai){return ei.apply(this,arguments)}}())),0===Ht.length)return!1;var Fe=Object.values(Dt),ue=new Set,Ie={},Le=(0,Ko.Aj)(Fe,n.input.pushBatchSize);yield Promise.all(Le.map(function(){var ei=(0,nt.A)(function*(Ai){n.hasAttachments&&(yield Promise.all(Ai.map(function(){var zs=(0,nt.A)(function*(dr){dr.newDocumentState=yield function Kk(n,e,t,r){return cg.apply(this,arguments)}(n.primaryPath,n.input.forkInstance,(0,Qi.o8)(dr.newDocumentState),dr.assumedMasterState)});return function(dr){return zs.apply(this,arguments)}}()))),(yield t.masterWrite(Ai)).forEach(zs=>{var dr=zs[n.primaryPath];ue.add(dr),Ie[dr]=zs})});return function(Ai){return ei.apply(this,arguments)}}()));var ze=[];if(Ht.forEach(ei=>{ue.has(ei)||(n.events.processed.up.next(Dt[ei]),ze.push(wn[ei]))}),n.events.canceled.getValue())return!1;ze.length>0&&(yield n.input.metaInstance.bulkWrite(PI(n,ze),"replication-up-write-meta"));var it=!1;if(ue.size>0){n.stats.up.persistToMasterHadConflicts=n.stats.up.persistToMasterHadConflicts+1;var Ee=[],pr={};if(yield Promise.all(Object.entries(Ie).map(([ei,Ai])=>{var Oo=Dt[ei],zs={newDocumentState:Oo.newDocumentState,assumedMasterState:Oo.assumedMasterState,realMasterState:Ai};return(0,PR.r)(n,zs,un[ei]).then(function(){var dr=(0,nt.A)(function*(ti){if(ti){n.events.resolvedConflicts.next({input:zs,output:ti.output}),Ee.push({previous:un[ei],document:ti.resolvedDoc});var Cx=Et[ei];pr[ei]=yield sg(n,(0,ii.ZN)(Ai),Cx?Cx.metaDocument:void 0,ti.resolvedDoc._rev)}});return function(ti){return dr.apply(this,arguments)}}())})),Ee.length>0){it=!0,n.stats.up.persistToMasterConflictWrites=n.stats.up.persistToMasterConflictWrites+1;var bs=yield n.input.forkInstance.bulkWrite(Ee,"replication-up-write-conflict"),Yo=[];(0,po.YN)(n.primaryPath,Ee,bs).forEach(ei=>{Yo.push(pr[ei[n.primaryPath]])}),Yo.length>0&&(yield n.input.metaInstance.bulkWrite(PI(n,Yo),"replication-up-write-conflict-meta"))}}return OI(n,"up",Re),it})).catch(Me=>(n.events.error.next(Me),!1)),d}(0,Gy._)(n.events.canceled.pipe((0,wr.p)(Q=>!!Q))).then(()=>g.unsubscribe())}),Uf.apply(this,arguments)}function kI(n){return(0,Gy._)(xu([n.firstSyncDone.down.pipe((0,wr.p)(e=>!!e)),n.firstSyncDone.up.pipe((0,wr.p)(e=>!!e))])).then(()=>{})}function Wk(n){return Promise.all([n.streamQueue.up,n.streamQueue.down,n.checkpointQueue])}function LI(){return(LI=(0,nt.A)(function*(n){n.events.canceled.next(!0),n.events.active.up.complete(),n.events.active.down.complete(),n.events.processed.up.complete(),n.events.processed.down.complete(),n.events.resolvedConflicts.complete(),n.events.canceled.complete(),yield n.checkpointQueue})).apply(this,arguments)}var VI=n=>Promise.resolve(n);function BI(n,e){return"_deleted"===n||((e=(0,Qi.FD)(e))[n]=!!e._deleted,delete e._deleted),e}function Qy(n,e,t){return t.map(r=>{var s=(0,Qi.FD)(r);return"_deleted"!==e?(s._deleted=!!s[e],delete s[e]):s._deleted=!!s._deleted,s[n.schema.primaryPath]=(0,fs.U)(n.schema.jsonSchema,s),s})}function FR(n,e){if(typeof window>"u"||"object"!=typeof window||typeof window.addEventListener>"u"||navigator.onLine)return n.promiseWait(e);var t,r=new Promise(s=>{t=()=>{window.removeEventListener("online",t),s()},window.addEventListener("online",t)});return Promise.race([r,n.promiseWait(e)]).then(()=>{window.removeEventListener("online",t)})}var LR=M(2104),VR=new WeakMap;function jR(n,e){var t=(0,Qi.FD)(e);return delete t[n],t}function Qk(n,e){return e[n].toDate().toISOString()}function UR(n,e){return delete(e=(0,Qi.FD)(e))[n],e}var MV=function(n){function e(t,r,s,u,d,f=!0,g=5e3,D=!0){var S;return(S=n.call(this,r,s,"_deleted",u,d,f,g,D)||this).firestore=t,S.replicationIdentifierHash=r,S.collection=s,S.pull=u,S.push=d,S.live=f,S.retryTime=g,S.autoStart=D,S}return(0,Wv.A)(e,n),e}(function(){function n(t,r,s,u,d,f,g,D){var S=this;this.subs=[],this.subjects={received:new Vn.B,sent:new Vn.B,error:new Vn.B,canceled:new Di.t(!1),active:new Di.t(!1)},this.received$=this.subjects.received.asObservable(),this.sent$=this.subjects.sent.asObservable(),this.error$=this.subjects.error.asObservable(),this.canceled$=this.subjects.canceled.asObservable(),this.active$=this.subjects.active.asObservable(),this.onCancel=[],this.callOnStart=void 0,this.remoteEvents$=new Vn.B,this.replicationIdentifier=t,this.collection=r,this.deletedField=s,this.pull=u,this.push=d,this.live=f,this.retryTime=g,this.autoStart=D,this.metaInfoPromise=(0,nt.A)(function*(){var Q="rx-replication-meta-"+(yield r.database.hashFunction([S.collection.name,S.replicationIdentifier].join("-"))),we=function CV(n,e){var t=(0,fs.Hq)(n),r={title:"RxReplicationProtocolMetaData",primaryKey:{key:"id",fields:["itemId","isCheckpoint"],separator:"|"},type:"object",version:n.version,additionalProperties:!1,properties:{id:{type:"string",minLength:1,maxLength:t+2},isCheckpoint:{type:"string",enum:["0","1"],minLength:1,maxLength:1},itemId:{type:"string",maxLength:t>4?t:4},checkpointData:{type:"object",additionalProperties:!0},docData:{type:"object",properties:n.properties},isResolvedConflict:{type:"string"}},keyCompression:n.keyCompression,required:["id","isCheckpoint","itemId"]};return e&&(r.encrypted=["docData"]),(0,fs.Ud)(r)}(S.collection.schema.jsonSchema,(0,po.ME)(S.collection.schema.jsonSchema));return{collectionName:Q,schema:we}})(),(0,MC.q)(VR,r,()=>[]).push(this),this.collection.onDestroy.push(()=>this.cancel()),Object.keys(this.subjects).forEach(Q=>{Object.defineProperty(this,Q+"$",{get:function(){return this.subjects[Q].asObservable()}})});var j=new Promise(Q=>{this.callOnStart=Q});this.startPromise=j}var e=n.prototype;return e.start=function(){var t=(0,nt.A)(function*(){var S,s=this;if(!this.isStopped()){var u=this.pull&&this.pull.modifier?this.pull.modifier:VI,d=this.push&&this.push.modifier?this.push.modifier:VI,f=this.collection.database,g=yield this.metaInfoPromise,[D]=yield Promise.all([this.collection.database.storage.createStorageInstance({databaseName:f.name,collectionName:g.collectionName,databaseInstanceToken:f.token,multiInstance:f.multiInstance,options:{},schema:g.schema,password:f.password,devMode:SC.h.isDevMode()}),(0,LR.vV)(this.collection,g.collectionName,g.schema)]);this.metaInstance=D,this.internalReplicationState=function SV(n){(n=(0,Qi.FD)(n)).forkInstance=MR(n.forkInstance),n.metaInstance=MR(n.metaInstance);var e=function TV(n){return xR.apply(this,arguments)}(n),t={primaryPath:(0,fs.xQ)(n.forkInstance.schema.primaryKey),hasAttachments:!!n.forkInstance.schema.attachments,input:n,checkpointKey:e,downstreamBulkWriteFlag:e.then(r=>"replication-downstream-"+r),events:{canceled:new Di.t(!1),active:{down:new Di.t(!0),up:new Di.t(!0)},processed:{down:new Vn.B,up:new Vn.B},resolvedConflicts:new Vn.B,error:new Vn.B},stats:{down:{addNewTask:0,downstreamProcessChanges:0,downstreamResyncOnce:0,masterChangeStreamEmit:0,persistFromMaster:0},up:{forkChangeStreamEmit:0,persistToMaster:0,persistToMasterConflictWrites:0,persistToMasterHadConflicts:0,processTasks:0,upstreamInitialSync:0}},firstSyncDone:{down:new Di.t(!1),up:new Di.t(!1)},streamQueue:{down:ys.em,up:ys.em},checkpointQueue:ys.em,lastCheckpointDoc:{}};return function OR(n){gu.apply(this,arguments)}(t),function NI(n){Uf.apply(this,arguments)}(t),t}({pushBatchSize:this.push&&this.push.batchSize?this.push.batchSize:100,pullBatchSize:this.pull&&this.pull.batchSize?this.pull.batchSize:100,initialCheckpoint:{upstream:this.push?this.push.initialCheckpoint:void 0,downstream:this.pull?this.pull.initialCheckpoint:void 0},forkInstance:this.collection.storageInstance,metaInstance:this.metaInstance,hashFunction:f.hashFunction,identifier:"rxdbreplication"+this.replicationIdentifier,conflictHandler:this.collection.conflictHandler,replicationHandler:{masterChangeStream$:this.remoteEvents$.asObservable().pipe((0,wr.p)(S=>!!this.pull),(0,bi.Z)(function(){var S=(0,nt.A)(function*(P){if("RESYNC"===P)return P;var j=(0,Qi.FD)(P);return j.documents=Qy(s.collection,s.deletedField,j.documents),j.documents=yield Promise.all(j.documents.map(Q=>u(Q))),j});return function(P){return S.apply(this,arguments)}}())),masterChangesSince:(S=(0,nt.A)(function*(P,j){if(!s.pull)return{checkpoint:null,documents:[]};for(var Q=!1,we={};!Q&&!s.isStopped();)try{we=yield s.pull.handler(P,j),Q=!0}catch(gt){var Me=(0,zc.Br)("RC_PULL",{checkpoint:P,errors:(0,Ko.$r)(gt).map(Et=>(0,Gv.S)(Et)),direction:"pull"});s.subjects.error.next(Me),yield FR(s.collection,(0,ii.ZN)(s.retryTime))}if(s.isStopped())return{checkpoint:null,documents:[]};var Re=(0,Qi.FD)(we);return Re.documents=Qy(s.collection,s.deletedField,Re.documents),Re.documents=yield Promise.all(Re.documents.map(gt=>u(gt))),Re}),function(j,Q){return S.apply(this,arguments)}),masterWrite:function(){var S=(0,nt.A)(function*(P){if(!s.push)return[];var j=!1;yield(0,Eh.FX)("preReplicationMasterWrite",{rows:P,collection:s.collection});var Q=yield Promise.all(P.map(function(){var Et=(0,nt.A)(function*(Dt){return Dt.newDocumentState=yield d(Dt.newDocumentState),null===Dt.newDocumentState?null:(Dt.assumedMasterState&&(Dt.assumedMasterState=yield d(Dt.assumedMasterState)),"_deleted"!==s.deletedField&&(Dt.newDocumentState=BI(s.deletedField,Dt.newDocumentState),Dt.assumedMasterState&&(Dt.assumedMasterState=BI(s.deletedField,Dt.assumedMasterState))),Dt)});return function(Dt){return Et.apply(this,arguments)}}())),we=Q.filter(Ko.S7),Me=null;for(0===we.length&&(j=!0,Me=[]);!j&&!s.isStopped();)try{if(Me=yield s.push.handler(we),!Array.isArray(Me))throw(0,zc.Br)("RC_PUSH_NO_AR",{pushRows:P,direction:"push",args:{result:Me}});j=!0}catch(Et){var Re=Et.rxdb?Et:(0,zc.Br)("RC_PUSH",{pushRows:P,errors:(0,Ko.$r)(Et).map(Dt=>(0,Gv.S)(Dt)),direction:"push"});s.subjects.error.next(Re),yield FR(s.collection,(0,ii.ZN)(s.retryTime))}return s.isStopped()?[]:(yield(0,Eh.FX)("preReplicationMasterWriteDocumentsHandle",{result:Me,collection:s.collection}),Qy(s.collection,s.deletedField,(0,ii.ZN)(Me)))});return function(j){return S.apply(this,arguments)}}()}}),this.subs.push(this.internalReplicationState.events.error.subscribe(S=>{this.subjects.error.next(S)}),this.internalReplicationState.events.processed.down.subscribe(S=>this.subjects.received.next(S.document)),this.internalReplicationState.events.processed.up.subscribe(S=>{this.subjects.sent.next(S.newDocumentState)}),xu([this.internalReplicationState.events.active.down,this.internalReplicationState.events.active.up]).subscribe(([S,P])=>{this.subjects.active.next(S||P)})),this.pull&&this.pull.stream$&&this.live&&this.subs.push(this.pull.stream$.subscribe({next:S=>{this.remoteEvents$.next(S)},error:S=>{this.subjects.error.next(S)}})),this.live||(yield kI(this.internalReplicationState),yield Wk(this.internalReplicationState),yield this.cancel()),this.callOnStart()}});return function r(){return t.apply(this,arguments)}}(),e.isStopped=function(){return!!this.subjects.canceled.getValue()},e.awaitInitialReplication=function(){var t=(0,nt.A)(function*(){return yield this.startPromise,kI((0,ii.ZN)(this.internalReplicationState))});return function r(){return t.apply(this,arguments)}}(),e.awaitInSync=function(){var t=(0,nt.A)(function*(){yield this.startPromise,yield kI((0,ii.ZN)(this.internalReplicationState));for(var s=2;s>0;)s--,yield this.collection.database.requestIdlePromise(),yield Wk((0,ii.ZN)(this.internalReplicationState));return!0});return function r(){return t.apply(this,arguments)}}(),e.reSync=function(){this.remoteEvents$.next("RESYNC")},e.emitEvent=function(r){this.remoteEvents$.next(r)},e.cancel=function(){var t=(0,nt.A)(function*(){if(this.isStopped())return ys.Dr;var s=this.onCancel.map(u=>(0,ys.hq)(u()));return this.internalReplicationState&&(yield function qk(n){return LI.apply(this,arguments)}(this.internalReplicationState)),this.metaInstance&&s.push((0,ii.ZN)(this.internalReplicationState).checkpointQueue.then(()=>(0,ii.ZN)(this.metaInstance).close())),this.subs.forEach(u=>u.unsubscribe()),this.subjects.canceled.next(!0),this.subjects.active.complete(),this.subjects.canceled.complete(),this.subjects.error.complete(),this.subjects.received.complete(),this.subjects.sent.complete(),Promise.all(s)});return function r(){return t.apply(this,arguments)}}(),e.remove=function(){var t=(0,nt.A)(function*(){yield(0,ii.ZN)(this.metaInstance).remove();var s=yield this.metaInfoPromise;yield this.cancel(),yield(0,LR.bD)(this.collection,s.collectionName,s.schema)});return function r(){return t.apply(this,arguments)}}(),n}());function Bi(n){var e=n.collection;jM(IV);var r,t=new Vn.B;n.live=typeof n.live>"u"||n.live,n.waitForLeadership=typeof n.waitForLeadership>"u"||n.waitForLeadership;var s=typeof n.serverTimestampField>"u"?"serverTimestamp":n.serverTimestampField;n.serverTimestampField=s;var u=e.schema.primaryPath;if((0,fs.nT)(e.schema.jsonSchema,s)||s.includes("."))throw(0,zc.Br)("RC6",{field:s,schema:e.schema.jsonSchema});var D,f=void 0!==n.pull?.filter?(0,Ko.$r)(n.pull.filter):[],g=Lf(n.firestore.collection,...f);if(n.pull&&(r={handler:(we,Me)=>(0,nt.A)(function*(){var Re,gt;if(we){var Et=function RV(n){var e=new Date(n);return Sr.fromDate(e)}(we.serverTimestamp);Re=Lf(g,Jm(s,">",Et),eg(s,"asc"),Uy(Me)),gt=Lf(g,Jm(s,"==",Et),Jm(u,">",we.id),eg(u,"asc"),Uy(Me))}else Re=Lf(g,eg(s,"asc"),Uy(Me));for(var Dt=!0,Ht=[];Dt;)yield uR(n.firestore.database),yield DI(n.firestore.database,function(){var Ie=(0,nt.A)(function*(Le){Ht=[];var[ze,it]=yield Promise.all([yI(Re),gt?yI(gt):void 0]);if(!(ze.metadata.hasPendingWrites||gt&&(0,ii.ZN)(it).metadata.hasPendingWrites)){Dt=!1,gt&&(Ht=(0,ii.ZN)(it).docs);var Ee=Me-Ht.length;if(Ee>0){var pr=ze.docs.slice(0,Ee).filter(bs=>!!bs);(0,Ko.Hb)(Ht,pr)}}});return function(Le){return Ie.apply(this,arguments)}}());if(0===Ht.length)return{checkpoint:we??null,documents:[]};var wn=(0,ii.ZN)((0,Ko.dG)(Ht)),un=Ht.map(Ie=>function xV(n,e,t){var r=jR(n,t.data());return r[e]=t.id,r}(s,u,Ie));return{documents:un,checkpoint:{id:wn.id,serverTimestamp:Qk(s,wn.data())}}})(),batchSize:(0,ii.ZN)(n.pull).batchSize,modifier:(0,ii.ZN)(n.pull).modifier,stream$:t.asObservable()}),n.push){var S=n.push?.filter;D={handler:we=>(0,nt.A)(function*(){void 0!==S&&(we=yield(0,Ko.j7)(we,Et=>S(Et.newDocumentState)));var Me={},Re=we.map(Et=>{var Dt=Et.newDocumentState[u];return Me[Dt]=Et,Dt});yield uR(n.firestore.database);var gt=[];return yield DI(n.firestore.database,function(){var Et=(0,nt.A)(function*(Dt){gt=[];var wn=yield function Xk(n,e){for(var t=[];n.length;){var r=n.splice(0,10);t.push(e(r))}return Promise.all(t).then(s=>s.map(u=>u.docs).flat())}(Re,Ie=>yI(Lf(n.firestore.collection,Jm(function Mf(){return new Ei("__name__")}(),"in",Ie)))),un={};wn.forEach(Ie=>{var Le=jR(s,Ie.data()),ze=Ie.id;Le[u]=ze,un[ze]=Le});var Fe=function za(n){return Jr(n=Xn(n,fr)),new II(n,e=>function Bd(n,e){return function(r,s){const u=new Fi;return r.asyncQueue.enqueueAndForget((0,nt.A)(function*(){return function MA(n,e,t){return Vw.apply(this,arguments)}(yield My(r),s,u)})),u.promise}(Jr(n),e)}(n,e))}(n.firestore.database),ue=!1;yield Promise.all(Object.entries(Me).map(function(){var Ie=(0,nt.A)(function*([Le,ze]){var it=un[Le];if(!it||ze.assumedMasterState&&!1!==(yield e.conflictHandler({newDocumentState:it,realMasterState:ze.assumedMasterState},"replication-firestore-push")).isEqual){ue=!0;var Ee=function oR(n,e,...t){if(n=Wo(n),1===arguments.length&&(e=Lh.newId()),iI("doc","path",e),n instanceof cl){const r=Jn.fromString(e,...t);return iR(r),new mi(n,null,new Xt(r))}{if(!(n instanceof mi||n instanceof Cc))throw new Rt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jn.fromString(e,...t));return iR(r),new mi(n.firestore,n instanceof Cc?n.converter:null,new Xt(r))}}(n.firestore.collection,Le),pr=(0,Qi.FD)(ze.newDocumentState);pr[s]=function uV(){return new qm("serverTimestamp")}(),it?Fe.update(Ee,UR(u,pr)):Fe.set(Ee,UR(u,pr))}else gt.push(it)});return function(Le){return Ie.apply(this,arguments)}}())),ue&&(yield Fe.commit())});return function(Dt){return Et.apply(this,arguments)}}()),yield uR(n.firestore.database),gt})(),batchSize:n.push.batchSize,modifier:n.push.modifier}}var P=new MV(n.firestore,n.replicationIdentifier,e,r,D,n.live,n.retryTime,n.autoStart);if(n.live&&n.pull){var j=P.start.bind(P),Q=P.cancel.bind(P);P.start=()=>{var Me=function Ck(n,...e){var t,r,s;n=Wo(n);let u={includeMetadataChanges:!1,source:"default"},d=0;"object"!=typeof e[d]||aI(e[d])||(u=e[d],d++);const f={includeMetadataChanges:u.includeMetadataChanges,source:u.source};if(aI(e[d])){const P=e[d];e[d]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[d+1]=null===(r=P.error)||void 0===r?void 0:r.bind(P),e[d+2]=null===(s=P.complete)||void 0===s?void 0:s.bind(P)}let g,D,S;if(n instanceof mi)D=Xn(n.firestore,fr),S=bm(n._key.path),g={next:P=>{e[d]&&e[d](function bI(n,e,t){const r=t.docs.get(e._key),s=new ll(n);return new Bf(n,s,e._key,r,new Vd(t.hasPendingWrites,t.fromCache),e.converter)}(D,n,P))},error:e[d+1],complete:e[d+2]};else{const P=Xn(n,mo);D=Xn(P.firestore,fr),S=P._query;const j=new ll(D);g={next:Q=>{e[d]&&e[d](new jf(D,j,P,Q))},error:e[d+1],complete:e[d+2]},mR(n._query)}return function(j,Q,we,Me){const Re=new Hm(Me),gt=new dy(Q,Re,we);return j.asyncQueue.enqueueAndForget((0,nt.A)(function*(){return Dw(yield Pd(j),gt)})),()=>{Re.$a(),j.asyncQueue.enqueueAndForget((0,nt.A)(function*(){return Cw(yield Pd(j),gt)}))}}(Jr(D),S,f,g)}(Lf(g,eg(s,"desc"),Uy(1)),Re=>{P.reSync()},Re=>{P.subjects.error.next((0,zc.Br)("RC_STREAM",{error:(0,Gv.S)(Re)}))});return P.cancel=()=>(Me(),Q()),j()}}return function jI(n,e){return(n&&e.collection.database.multiInstance?e.collection.database.waitForLeadership():ys.Ms).then(()=>{e.isStopped()||e.autoStart&&e.start()})}(n.waitForLeadership,P),P}Zc("firebase","10.12.4","app");const OV=[{path:"game",component:(()=>{class n{constructor(){this.myDatabase=void 0,this.todoSchema={version:0,primaryKey:"id",type:"object",properties:{id:{type:"string",maxLength:100},name:{type:"string"},done:{type:"boolean"},timestamp:{type:"string",format:"date-time"}},required:["id","name","done","timestamp"]},this.myDatabase=this.createDb()}createDb(){var t=this;return(0,nt.A)(function*(){(0,m.naY)()&&(yield M.e(486).then(M.bind(M,6486)).then(s=>jM(s.RxDBDevModePlugin)));const r=(0,TC.uh)({name:"mydatabase",storage:Kv()}).then(s=>(s.addCollections({todos:{schema:t.todoSchema}}),s));return console.log("LOL: DB created"),r})()}addDocument(){var t=this;return(0,nt.A)(function*(){let r=3;t.myDatabase?(yield t.myDatabase.then(s=>{s.todos.insert({id:`todo_${r}`,name:"Learn RxDB",done:!1,timestamp:(new Date).toISOString()})}),console.log("LOL: doc added"),r++):console.log("LOL: No DB!")})()}getDocs(){var t=this;return(0,nt.A)(function*(){if(t.myDatabase){const r=yield t.myDatabase.then(s=>s.todos.find({selector:{id:{$eq:"todo1"}}}).exec());console.log(`LOL: ${JSON.stringify(r)}`)}else console.log("LOL: No docs!")})()}replicate(){var t=this;return(0,nt.A)(function*(){const u=aR(bP({apiKey:"AIzaSyBnagIv1jnnkGEMASLY3bJIrc5Iuz-Syks",authDomain:"empathy-7224d.firebaseapp.com",projectId:"empathy-7224d",storageBucket:"empathy-7224d.appspot.com",messagingSenderId:"957387697152",appId:"1:957387697152:web:a2fd71b0ac7fc060703ce5",measurementId:"G-WBFW0YBS26"})),d=function uk(n,e,...t){if(n=Wo(n),iI("collection","path",e),n instanceof cl){const r=Jn.fromString(e,...t);return oI(r),new Cc(n,null,r)}{if(!(n instanceof mi||n instanceof Cc))throw new Rt(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jn.fromString(e,...t));return oI(r),new Cc(n.firestore,null,r)}}(u,"todos"),f=yield t.myDatabase?.then(D=>D.todos);f&&(console.log(`LOL: myRxCollection ${Object.keys(f)}`),console.log(`LOL: database ${f.database}`),console.log(`LOL: name ${f.name}`),console.log(`LOL: schema ${f.schema.primaryPath}`)),(yield Bi({collection:f,firestore:{projectId:"empathy-7224d",database:u,collection:d},pull:{},push:{},live:!0,replicationIdentifier:"Empathy-to-firebase"})).reSync()})()}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["app-game"]],standalone:!0,features:[m.aNF],decls:8,vars:0,consts:[[3,"click"]],template:function(r,s){1&r&&(m.j41(0,"p"),m.EFF(1,"game works!"),m.k0s(),m.j41(2,"p",0),m.bIt("click",function(){return s.addDocument()}),m.EFF(3,"Add doc"),m.k0s(),m.j41(4,"p",0),m.bIt("click",function(){return s.getDocs()}),m.EFF(5,"See docs"),m.k0s(),m.j41(6,"p",0),m.bIt("click",function(){return s.replicate()}),m.EFF(7,"Fire"),m.k0s())},dependencies:[vl]})}return n})()},{path:"editor",component:(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["editor"]],standalone:!0,features:[m.aNF],decls:2,vars:0,template:function(r,s){1&r&&(m.j41(0,"p"),m.EFF(1,"editor works!"),m.k0s())}})}return n})()}];let Zk=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({imports:[bC.forRoot(OV),bC]})}return n})();var PV=M(7441);const NV=["addListener","removeListener"],$I=["addEventListener","removeEventListener"],Jk=["on","off"];function $f(n,e,t,r){if((0,co.T)(t)&&(r=t,t=void 0),r)return $f(n,e,t).pipe(Bo(r));const[s,u]=function e1(n){return(0,co.T)(n.addEventListener)&&(0,co.T)(n.removeEventListener)}(n)?$I.map(d=>f=>n[d](e,f,t)):function $R(n){return(0,co.T)(n.addListener)&&(0,co.T)(n.removeListener)}(n)?NV.map(HI(n,e)):function HR(n){return(0,co.T)(n.on)&&(0,co.T)(n.off)}(n)?Jk.map(HI(n,e)):[];if(!s&&(0,PV.X)(n))return(0,bi.Z)(d=>$f(d,e,t))((0,Sa.Tg)(n));if(!s)throw new TypeError("Invalid event target");return new Ps.c(d=>{const f=(...g)=>d.next(1<g.length?g:g[0]);return s(f),()=>u(f)})}function HI(n,e){return t=>r=>n[t](e,r)}const Hf=new Ps.c(Z.l);var zf=M(7786);const Zy={connector:()=>new Vn.B};function Kf(n,e=Zy){const{connector:t}=e;return(0,Mi.N)((r,s)=>{const u=t();(0,Sa.Tg)(n(function zR(n){return new Ps.c(e=>n.subscribe(e))}(u))).subscribe(s),s.add(r.subscribe(u))})}class WR extends Wi.yU{constructor(e,t){super()}schedule(e,t=0){return this}}const zI={setInterval(n,e,...t){const{delegate:r}=zI;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=zI;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var kV=M(7908);class GR extends WR{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const s=this.id,u=this.scheduler;return null!=s&&(this.id=this.recycleAsyncId(u,s,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,t),this}requestAsyncId(e,t,r=0){return zI.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&zI.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let s,r=!1;try{this.work(e)}catch(u){r=!0,s=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,kV.o)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}var n1=M(6129);class lg{constructor(e,t=lg.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}lg.now=n1.U.now;class qR extends lg{constructor(e,t=lg.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const dg=new qR(GR),QR=dg;function hg(n,e){return e?t=>(0,ah.x)(e.pipe(Gr(1),function FV(){return(0,Mi.N)((n,e)=>{n.subscribe((0,ui._)(e,Z.l))})}()),t.pipe(hg(n))):(0,bi.Z)((t,r)=>(0,Sa.Tg)(n(t,r)).pipe(Gr(1),B(t)))}var LV=M(9470);function r1(n=0,e,t=QR){let r=-1;return null!=e&&((0,LV.m)(e)?t=e:r=e),new Ps.c(s=>{let u=function VV(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;u<0&&(u=0);let d=0;return t.schedule(function(){s.closed||(s.next(d++),0<=r?this.schedule(void 0,r):s.complete())},u)})}function KI(n,e=dg){const t=r1(n,e);return hg(()=>t)}const eb="Service workers are disabled or not supported by this browser";class tb{constructor(e){if(this.serviceWorker=e,e){const r=$f(e,"controllerchange").pipe((0,kn.T)(()=>e.controller)),s=Mu(()=>cn(e.controller)),u=(0,ah.x)(s,r);this.worker=u.pipe((0,wr.p)(S=>!!S)),this.registration=this.worker.pipe(Gi(()=>e.getRegistration()));const D=$f(e,"message").pipe((0,kn.T)(S=>S.data)).pipe((0,wr.p)(S=>S&&S.type)).pipe(function KR(n){return n?e=>Kf(n)(e):e=>function Jy(n,e){const t=(0,co.T)(n)?n:()=>n;return(0,co.T)(e)?Kf(e,{connector:t}):r=>new li(r,t)}(new Vn.B)(e)}());D.connect(),this.events=D}else this.worker=this.events=this.registration=function BV(n){return Mu(()=>Bc(new Error(n)))}(eb)}postMessage(e,t){return this.worker.pipe(Gr(1),On(r=>{r.postMessage({action:e,...t})})).toPromise().then(()=>{})}postMessageWithOperation(e,t,r){const s=this.waitForOperationCompleted(r),u=this.postMessage(e,t);return Promise.all([u,s]).then(([,d])=>d)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let t;return t="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe((0,wr.p)(t))}nextEventOfType(e){return this.eventsOfType(e).pipe(Gr(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe((0,wr.p)(t=>t.nonce===e),Gr(1),(0,kn.T)(t=>{if(void 0!==t.result)return t.result;throw new Error(t.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let XR=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new Vn.B,!t.isEnabled)return this.messages=Hf,this.notificationClicks=Hf,void(this.subscription=Hf);this.messages=this.sw.eventsOfType("PUSH").pipe((0,kn.T)(s=>s.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe((0,kn.T)(s=>s.data)),this.pushManager=this.sw.registration.pipe((0,kn.T)(s=>s.pushManager));const r=this.pushManager.pipe(Gi(s=>s.getSubscription()));this.subscription=(0,zf.h)(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||null===this.pushManager)return Promise.reject(new Error(eb));const r={userVisibleOnly:!0};let s=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),u=new Uint8Array(new ArrayBuffer(s.length));for(let d=0;d<s.length;d++)u[d]=s.charCodeAt(d);return r.applicationServerKey=u,this.pushManager.pipe(Gi(d=>d.subscribe(r)),Gr(1)).toPromise().then(d=>(this.subscriptionChanges.next(d),d))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Gr(1),Gi(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(s=>{if(!s)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(eb))}decodeBase64(t){return atob(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(tb))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})(),o1=(()=>{class n{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled)return this.versionUpdates=Hf,void(this.unrecoverable=Hf);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(eb));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(eb));const t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(tb))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();const WI=new m.nKC("");function s1(n,e,t,r){return()=>{if(!zt(r)||!("serviceWorker"in navigator)||!1===t.enabled)return;const s=n.get(m.SKi),u=n.get(m.o8S);let d;if(s.runOutsideAngular(()=>{const f=navigator.serviceWorker,g=()=>f.controller?.postMessage({action:"INITIALIZE"});f.addEventListener("controllerchange",g),u.onDestroy(()=>{f.removeEventListener("controllerchange",g)})}),"function"==typeof t.registrationStrategy)d=t.registrationStrategy();else{const[f,...g]=(t.registrationStrategy||"registerWhenStable:30000").split(":");switch(f){case"registerImmediately":d=cn(null);break;case"registerWithDelay":d=a1(+g[0]||0);break;case"registerWhenStable":d=g[0]?(0,zf.h)(YR(n),a1(+g[0])):YR(n);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${t.registrationStrategy}`)}}s.runOutsideAngular(()=>d.pipe(Gr(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:t.scope}).catch(f=>console.error("Service worker registration failed with:",f))))}}function a1(n){return cn(null).pipe(KI(n))}function YR(n){return n.get(m.o8S).isStable.pipe((0,wr.p)(t=>t))}function ZR(n,e){return new tb(zt(e)&&!1!==n.enabled?navigator.serviceWorker:void 0)}class JR{}function c1(n,e={}){return(0,m.EmA)([XR,o1,{provide:WI,useValue:n},{provide:JR,useValue:e},{provide:tb,useFactory:ZR,deps:[JR,m.Agw]},{provide:m.hnV,useFactory:s1,deps:[m.zZn,WI,JR,m.Agw],multi:!0}])}let nb,u1=(()=>{class n{static register(t,r={}){return{ngModule:n,providers:[c1(t,r)]}}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({providers:[XR,o1]})}return n})(),ex=(()=>{class n{constructor(t,r,s,u,d){this.doc=t,this.delegate=r,this.zone=s,this.animationType=u,this.moduleImpl=d,this._rendererFactoryPromise=null,this.scheduler=(0,m.WQX)(m.An2,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??M.e(8).then(M.bind(M,8008)).then(r=>r)).catch(r=>{throw new m.wOt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);const u=new s(this.delegate,this._engine,this.zone);return this.delegate=u,u})}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(0===s.\u0275type)return s;"boolean"==typeof s.throwOnSyntheticProps&&(s.throwOnSyntheticProps=!1);const u=new tx(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(d=>{const f=d.createRenderer(t,r);u.use(f),this.scheduler?.notify(9)}).catch(d=>{u.use(s)}),u}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static#e=this.\u0275fac=function(r){m.QTQ()};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();class tx{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,null!==this.replay){for(const t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,r,s){this.delegate.insertBefore(e,t,r,s)}removeChild(e,t,r){this.delegate.removeChild(e,t,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,s){this.delegate.setAttribute(e,t,r,s)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,s){this.delegate.setStyle(e,t,r,s)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){this.shouldReplay(t)&&this.replay.push(s=>s.setProperty(e,t,r)),this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.shouldReplay(t)&&this.replay.push(s=>s.listen(e,t,r)),this.delegate.listen(e,t,r)}shouldReplay(e){return null!==this.replay&&e.startsWith("@")}}function l1(n="animations"){return(0,m.ngT)("NgAsyncAnimations"),(0,m.EmA)([{provide:m._9s,useFactory:(e,t,r)=>new ex(e,t,r,n),deps:[de,pp,m.SKi]},{provide:m.bc$,useValue:"noop"===n?"NoopAnimations":"BrowserAnimations"}])}try{nb=typeof Intl<"u"&&Intl.v8BreakIterator}catch{nb=!1}let Wf,Hd,ob,Us=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?zt(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!nb)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(m.Agw))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gf(n){return function d1(){if(null==Wf&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Wf=!0}))}finally{Wf=Wf||!1}return Wf}()?n:!!n.capture}function h1(){if(null==Hd){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Hd=!1,Hd;if("scrollBehavior"in document.documentElement.style)Hd=!0;else{const n=Element.prototype.scrollTo;Hd=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return Hd}function Tc(n){return n.composedPath?n.composedPath()[0]:n.target}function ox(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function o2(n,...e){return e.length?e.some(t=>n[t]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function s2(n,e=dg){return(0,Mi.N)((t,r)=>{let s=null,u=null,d=null;const f=()=>{if(s){s.unsubscribe(),s=null;const D=u;u=null,r.next(D)}};function g(){const D=d+n,S=e.now();if(S<D)return s=this.schedule(void 0,D-S),void r.add(s);f()}t.subscribe((0,ui._)(r,D=>{u=D,d=e.now(),s||(s=e.schedule(g,n),r.add(s))},()=>{f(),r.complete()},void 0,()=>{u=s=null}))})}function a2(n){return(0,wr.p)((e,t)=>n<=t)}var Kj=M(3294);function lx(n){return Array.isArray(n)?n:[n]}function eo(n){return null==n?"":"string"==typeof n?n:`${n}px`}function cb(n){return n instanceof m.aKT?n.nativeElement:n}const c2=new Set;let pg,Gj=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Qj}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function qj(n,e){if(!c2.has(n))try{pg||(pg=document.createElement("style"),e&&pg.setAttribute("nonce",e),pg.setAttribute("type","text/css"),document.head.appendChild(pg)),pg.sheet&&(pg.sheet.insertRule(`@media ${n} {body{ }}`,0),c2.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(Us),m.KVO(m.BIS,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Qj(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Xj=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Vn.B}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return u2(lx(t)).some(s=>this._registerQuery(s).mql.matches)}observe(t){let u=xu(u2(lx(t)).map(d=>this._registerQuery(d).observable));return u=(0,ah.x)(u.pipe(Gr(1)),u.pipe(a2(1),s2(0))),u.pipe((0,kn.T)(d=>{const f={matches:!1,breakpoints:{}};return d.forEach(({matches:g,query:D})=>{f.matches=f.matches||g,f.breakpoints[D]=g}),f}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),u={observable:new Ps.c(d=>{const f=g=>this._zone.run(()=>d.next(g));return r.addListener(f),()=>{r.removeListener(f)}}).pipe((0,Tl.Z)(r),(0,kn.T)(({matches:d})=>({query:t,matches:d})),ve(this._destroySubject)),mql:r};return this._queries.set(t,u),u}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(Gj),m.KVO(m.SKi))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function u2(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}class Jj{constructor(e,t){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Vn.B,this._typeaheadSubscription=Wi.yU.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=r=>r.disabled,this._pressedLetters=[],this.tabOut=new Vn.B,this.change=new Vn.B,e instanceof m.rOR?this._itemChangesSubscription=e.changes.subscribe(r=>this._itemsChanged(r.toArray())):(0,m.Hps)(e)&&(this._effectRef=(0,m.QZP)(()=>this._itemsChanged(e()),{injector:t}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(On(t=>this._pressedLetters.push(t)),s2(e),(0,wr.p)(()=>this._pressedLetters.length>0),(0,kn.T)(()=>this._pressedLetters.join(""))).subscribe(t=>{const r=this._getItemsArray();for(let s=1;s<r.length+1;s++){const u=(this._activeItemIndex+s)%r.length,d=r[u];if(!this._skipPredicateFn(d)&&0===d.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(u);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,s=["altKey","ctrlKey","metaKey","shiftKey"].every(u=>!e[u]||this._allowedModifierKeys.indexOf(u)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&s){this.setNextItemActive();break}return;case 38:if(this._vertical&&s){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&s){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&s){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&s){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&s){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&s){const u=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(u>0?u:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&s){const u=this._activeItemIndex+this._pageUpAndDown.delta,d=this._getItemsArray().length;this._setActiveItemByIndex(u<d?u:d-1,-1);break}return;default:return void((s||o2(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),r="number"==typeof e?e:t.indexOf(e);this._activeItem=t[r]??null,this._activeItemIndex=r}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let r=1;r<=t.length;r++){const s=(this._activeItemIndex+e*r+t.length)%t.length;if(!this._skipPredicateFn(t[s]))return void this.setActiveItem(s)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const r=this._getItemsArray();if(r[e]){for(;this._skipPredicateFn(r[e]);)if(!r[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return(0,m.Hps)(this._items)?this._items():this._items instanceof m.rOR?this._items.toArray():this._items}_itemsChanged(e){if(this._activeItem){const t=e.indexOf(this._activeItem);t>-1&&t!==this._activeItemIndex&&(this._activeItemIndex=t)}}}class eU extends Jj{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}function S1(n){return 0===n.buttons||0===n.detail}function A1(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const aU=new m.nKC("cdk-input-modality-detector-options"),cU={ignoreKeys:[18,17,224,91,16]},ub=Gf({passive:!0,capture:!0});let uU=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,s,u){this._platform=t,this._mostRecentTarget=null,this._modality=new Di.t(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(f=>f===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Tc(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(S1(d)?"keyboard":"mouse"),this._mostRecentTarget=Tc(d))},this._onTouchstart=d=>{A1(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Tc(d))},this._options={...cU,...u},this.modalityDetected=this._modality.pipe(a2(1)),this.modalityChanged=this.modalityDetected.pipe((0,Kj.F)()),t.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,ub),s.addEventListener("mousedown",this._onMousedown,ub),s.addEventListener("touchstart",this._onTouchstart,ub)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,ub),document.removeEventListener("mousedown",this._onMousedown,ub),document.removeEventListener("touchstart",this._onTouchstart,ub))}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(Us),m.KVO(m.SKi),m.KVO(de),m.KVO(aU,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var dx=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(dx||{});const dU=new m.nKC("cdk-focus-monitor-default-options"),hx=Gf({passive:!0,capture:!0});let R1=(()=>{class n{constructor(t,r,s,u,d){this._ngZone=t,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Vn.B,this._rootNodeFocusAndBlurListener=f=>{for(let D=Tc(f);D;D=D.parentElement)"focus"===f.type?this._onFocus(f,D):this._onBlur(f,D)},this._document=u,this._detectionMode=d?.detectionMode||dx.IMMEDIATE}monitor(t,r=!1){const s=cb(t);if(!this._platform.isBrowser||1!==s.nodeType)return cn();const u=function f1(n){if(function ix(){if(null==ob){const n=typeof document<"u"?document.head:null;ob=!(!n||!n.createShadowRoot&&!n.attachShadow)}return ob}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(s)||this._getDocument(),d=this._elementInfo.get(s);if(d)return r&&(d.checkChildren=!0),d.subject;const f={checkChildren:r,subject:new Vn.B,rootNode:u};return this._elementInfo.set(s,f),this._registerGlobalListeners(f),f.subject}stopMonitoring(t){const r=cb(t),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(t,r,s){const u=cb(t);u===this._getDocument().activeElement?this._getClosestElementsInfo(u).forEach(([f,g])=>this._originChanged(f,r,g)):(this._setOrigin(r),"function"==typeof u.focus&&u.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return this._detectionMode===dx.EVENTUAL||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,this._detectionMode===dx.IMMEDIATE&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const s=this._elementInfo.get(r),u=Tc(t);!s||!s.checkChildren&&r!==u||this._originChanged(r,this._getFocusOrigin(u),s)}_onBlur(t,r){const s=this._elementInfo.get(r);!s||s.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,hx),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,hx)}),this._rootNodeFocusListenerCount.set(r,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ve(this._stopInputModalityDetector)).subscribe(u=>{this._setOrigin(u,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,hx),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,hx),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,s){this._setClasses(t,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((s,u)=>{(u===t||s.checkChildren&&u.contains(t))&&r.push([u,s])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const u=t.labels;if(u)for(let d=0;d<u.length;d++)if(u[d].contains(r))return!0;return!1}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(m.SKi),m.KVO(Us),m.KVO(uU),m.KVO(de,8),m.KVO(dU,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mg=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(mg||{});const p2="cdk-high-contrast-black-on-white",m2="cdk-high-contrast-white-on-black",x1="cdk-high-contrast-active";let hU=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,m.WQX)(Xj).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return mg.NONE;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(t):null,u=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),u){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return mg.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return mg.BLACK_ON_WHITE}return mg.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(x1,p2,m2),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();r===mg.BLACK_ON_WHITE?t.add(x1,p2):r===mg.WHITE_ON_BLACK&&t.add(x1,m2)}}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(Us),m.KVO(de))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const fU=new m.nKC("cdk-dir-doc",{providedIn:"root",factory:function pU(){return(0,m.WQX)(de)}}),mU=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let g2=(()=>{class n{constructor(t){this.value="ltr",this.change=new m.bkB,t&&(this.value=function gU(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?mU.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(fU,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),qI=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({})}return n})();const _U=new m.nKC("mat-sanity-checks",{providedIn:"root",factory:function vU(){return!0}});let hl=(()=>{class n{constructor(t,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!ox()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(hU),m.KVO(_U,8),m.KVO(de))};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({imports:[qI,qI]})}return n})();var Sc=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(Sc||{});class CU{constructor(e,t,r,s=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=s,this.state=Sc.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}}const y2=Gf({passive:!0,capture:!0});class TU{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Tc(e);t&&this._events.get(e.type)?.forEach((r,s)=>{(s===t||s.contains(t))&&r.forEach(u=>u.handleEvent(e))})}}addHandler(e,t,r,s){const u=this._events.get(t);if(u){const d=u.get(r);d?d.add(s):u.set(r,new Set([s]))}else this._events.set(t,new Map([[r,new Set([s])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,y2)})}removeHandler(e,t,r){const s=this._events.get(e);if(!s)return;const u=s.get(t);u&&(u.delete(r),0===u.size&&s.delete(t),0===s.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,y2)))}}const b2={enterDuration:225,exitDuration:150},E2=Gf({passive:!0,capture:!0}),w2=["mousedown","touchstart"],I2=["mouseup","mouseleave","touchend","touchcancel"];class fx{static#e=this._eventManager=new TU;constructor(e,t,r,s){this._target=e,this._ngZone=t,this._platform=s,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,s.isBrowser&&(this._containerElement=cb(r))}fadeInRipple(e,t,r={}){const s=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),u={...b2,...r.animation};r.centered&&(e=s.left+s.width/2,t=s.top+s.height/2);const d=r.radius||function AU(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),s=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+s*s)}(e,t,s),f=e-s.left,g=t-s.top,D=u.enterDuration,S=document.createElement("div");S.classList.add("mat-ripple-element"),S.style.left=f-d+"px",S.style.top=g-d+"px",S.style.height=2*d+"px",S.style.width=2*d+"px",null!=r.color&&(S.style.backgroundColor=r.color),S.style.transitionDuration=`${D}ms`,this._containerElement.appendChild(S);const P=window.getComputedStyle(S),Q=P.transitionDuration,we="none"===P.transitionProperty||"0s"===Q||"0s, 0s"===Q||0===s.width&&0===s.height,Me=new CU(this,S,r,we);S.style.transform="scale3d(1, 1, 1)",Me.state=Sc.FADING_IN,r.persistent||(this._mostRecentTransientRipple=Me);let Re=null;return!we&&(D||u.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const gt=()=>{Re&&(Re.fallbackTimer=null),clearTimeout(Dt),this._finishRippleTransition(Me)},Et=()=>this._destroyRipple(Me),Dt=setTimeout(Et,D+100);S.addEventListener("transitionend",gt),S.addEventListener("transitioncancel",Et),Re={onTransitionEnd:gt,onTransitionCancel:Et,fallbackTimer:Dt}}),this._activeRipples.set(Me,Re),(we||!D)&&this._finishRippleTransition(Me),Me}fadeOutRipple(e){if(e.state===Sc.FADING_OUT||e.state===Sc.HIDDEN)return;const t=e.element,r={...b2,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=Sc.FADING_OUT,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=cb(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,w2.forEach(r=>{fx._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{I2.forEach(t=>{this._triggerElement.addEventListener(t,this,E2)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Sc.FADING_IN?this._startFadeOutTransition(e):e.state===Sc.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=Sc.VISIBLE,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Sc.HIDDEN,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel),null!==t.fallbackTimer&&clearTimeout(t.fallbackTimer)),e.element.remove()}_onMousedown(e){const t=S1(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!A1(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(e.state===Sc.VISIBLE||e.config.terminateOnPointerUp&&e.state===Sc.FADING_IN)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(w2.forEach(t=>fx._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(I2.forEach(t=>e.removeEventListener(t,this,E2)),this._pointerUpEventsRegistered=!1))}}const D2=new m.nKC("mat-ripple-global-options");let C2=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,s,u,d){this._elementRef=t,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=u||{},this._rippleRenderer=new fx(this,r,t,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,s){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...s}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}static#e=this.\u0275fac=function(r){return new(r||n)(m.rXU(m.aKT),m.rXU(m.SKi),m.rXU(Us),m.rXU(D2,8),m.rXU(m.bc$,8))};static#t=this.\u0275dir=m.FsC({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){2&r&&m.AVh("mat-ripple-unbounded",s.unbounded)},inputs:{color:[0,"matRippleColor","color"],unbounded:[0,"matRippleUnbounded","unbounded"],centered:[0,"matRippleCentered","centered"],radius:[0,"matRippleRadius","radius"],animation:[0,"matRippleAnimation","animation"],disabled:[0,"matRippleDisabled","disabled"],trigger:[0,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}return n})(),T2=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({imports:[hl,hl]})}return n})();const S2={capture:!0},A2=["focus","mousedown","mouseenter","touchstart"],M1="mat-ripple-loader-uninitialized",O1="mat-ripple-loader-class-name",R2="mat-ripple-loader-centered",px="mat-ripple-loader-disabled";let RU=(()=>{class n{constructor(){this._document=(0,m.WQX)(de,{optional:!0}),this._animationMode=(0,m.WQX)(m.bc$,{optional:!0}),this._globalRippleOptions=(0,m.WQX)(D2,{optional:!0}),this._platform=(0,m.WQX)(Us),this._ngZone=(0,m.WQX)(m.SKi),this._hosts=new Map,this._onInteraction=t=>{const r=Tc(t);if(r instanceof HTMLElement){const s=r.closest(`[${M1}="${this._globalRippleOptions?.namespace??""}"]`);s&&this._createRipple(s)}},this._ngZone.runOutsideAngular(()=>{for(const t of A2)this._document?.addEventListener(t,this._onInteraction,S2)})}ngOnDestroy(){const t=this._hosts.keys();for(const r of t)this.destroyRipple(r);for(const r of A2)this._document?.removeEventListener(r,this._onInteraction,S2)}configureRipple(t,r){t.setAttribute(M1,this._globalRippleOptions?.namespace??""),(r.className||!t.hasAttribute(O1))&&t.setAttribute(O1,r.className||""),r.centered&&t.setAttribute(R2,""),r.disabled&&t.setAttribute(px,"")}getRipple(t){return this._hosts.get(t)||this._createRipple(t)}setDisabled(t,r){const s=this._hosts.get(t);s?s.disabled=r:r?t.setAttribute(px,""):t.removeAttribute(px)}_createRipple(t){if(!this._document)return;const r=this._hosts.get(t);if(r)return r;t.querySelector(".mat-ripple")?.remove();const s=this._document.createElement("span");s.classList.add("mat-ripple",t.getAttribute(O1)),t.append(s);const u=new C2(new m.aKT(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return u._isInitialized=!0,u.trigger=t,u.centered=t.hasAttribute(R2),u.disabled=t.hasAttribute(px),this.attachRipple(t,u),u}attachRipple(t,r){t.removeAttribute(M1),this._hosts.set(t,r)}destroyRipple(t){const r=this._hosts.get(t);r&&(r.ngOnDestroy(),this._hosts.delete(t))}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xU=["*",[["mat-toolbar-row"]]],MU=["*","mat-toolbar-row"];let OU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275dir=m.FsC({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"],standalone:!0})}return n})(),PU=(()=>{class n{constructor(t,r,s){this._elementRef=t,this._platform=r,this._document=s}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}static#e=this.\u0275fac=function(r){return new(r||n)(m.rXU(m.aKT),m.rXU(Us),m.rXU(de))};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["mat-toolbar"]],contentQueries:function(r,s,u){if(1&r&&m.wni(u,OU,5),2&r){let d;m.mGM(d=m.lsd())&&(s._toolbarRows=d)}},hostAttrs:[1,"mat-toolbar"],hostVars:6,hostBindings:function(r,s){2&r&&(m.HbH(s.color?"mat-"+s.color:""),m.AVh("mat-toolbar-multiple-rows",s._toolbarRows.length>0)("mat-toolbar-single-row",0===s._toolbarRows.length))},inputs:{color:"color"},exportAs:["matToolbar"],standalone:!0,features:[m.aNF],ngContentSelectors:MU,decls:2,vars:0,template:function(r,s){1&r&&(m.NAR(xU),m.SdG(0),m.SdG(1,1))},styles:[".mat-toolbar{background:var(--mat-toolbar-container-background-color);color:var(--mat-toolbar-container-text-color)}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font-family:var(--mat-toolbar-title-text-font);font-size:var(--mat-toolbar-title-text-size);line-height:var(--mat-toolbar-title-text-line-height);font-weight:var(--mat-toolbar-title-text-weight);letter-spacing:var(--mat-toolbar-title-text-tracking);margin:0}.cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar .mat-form-field-underline,.mat-toolbar .mat-form-field-ripple,.mat-toolbar .mat-focused .mat-form-field-ripple{background-color:currentColor}.mat-toolbar .mat-form-field-label,.mat-toolbar .mat-focused .mat-form-field-label,.mat-toolbar .mat-select-value,.mat-toolbar .mat-select-arrow,.mat-toolbar .mat-form-field.mat-focused .mat-select-arrow{color:inherit}.mat-toolbar .mat-input-element{caret-color:currentColor}.mat-toolbar .mat-mdc-button-base.mat-mdc-button-base.mat-unthemed{--mdc-text-button-label-text-color:var(--mat-toolbar-container-text-color);--mdc-outlined-button-label-text-color:var(--mat-toolbar-container-text-color)}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap;height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-row,.mat-toolbar-single-row{height:var(--mat-toolbar-mobile-height)}}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%;min-height:var(--mat-toolbar-standard-height)}@media(max-width: 599px){.mat-toolbar-multiple-rows{min-height:var(--mat-toolbar-mobile-height)}}"],encapsulation:2,changeDetection:0})}return n})(),NU=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({imports:[hl,hl]})}return n})();var FU=M(7647);class P1{}class zd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof zd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new zd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof zd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(f=>-1===u.indexOf(f)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(u=>u.toString()),s=e.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(e,s)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class LU{encodeKey(e){return x2(e)}encodeValue(e){return x2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const BU=/%(\d[a-f0-9])/gi,jU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function x2(n){return encodeURIComponent(n).replace(BU,(e,t)=>jU[t]??e)}function mx(n){return`${n}`}class qf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new LU,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function VU(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[d,f]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],g=t.get(d)||[];g.push(f),t.set(d,g)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(mx):[mx(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new qf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(mx(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(mx(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class UU{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function M2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function O2(n){return typeof Blob<"u"&&n instanceof Blob}function P2(n){return typeof FormData<"u"&&n instanceof FormData}class XI{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function $U(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params),this.transferCache=u.transferCache),this.headers??=new zd,this.context??=new UU,this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const f=t.indexOf("?");this.urlWithParams=t+(-1===f?"?":f<t.length-1?"&":"")+d}}else this.params=new qf,this.urlWithParams=t}serializeBody(){return null===this.body?null:"string"==typeof this.body||M2(this.body)||O2(this.body)||P2(this.body)||function HU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)?this.body:this.body instanceof qf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||P2(this.body)?null:O2(this.body)?this.body.type||null:M2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=e.transferCache??this.transferCache,d=void 0!==e.body?e.body:this.body,f=e.withCredentials??this.withCredentials,g=e.reportProgress??this.reportProgress;let D=e.headers||this.headers,S=e.params||this.params;const P=e.context??this.context;return void 0!==e.setHeaders&&(D=Object.keys(e.setHeaders).reduce((j,Q)=>j.set(Q,e.setHeaders[Q]),D)),e.setParams&&(S=Object.keys(e.setParams).reduce((j,Q)=>j.set(Q,e.setParams[Q]),S)),new XI(t,r,d,{params:S,headers:D,context:P,reportProgress:g,responseType:s,withCredentials:f,transferCache:u})}}var k1=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(k1||{});class F1{constructor(e,t=200,r="OK"){this.headers=e.headers||new zd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class YI extends F1{constructor(e={}){super(e),this.type=k1.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new YI({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function L1(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}let V1=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof XI)u=t;else{let g,D;g=s.headers instanceof zd?s.headers:new zd(s.headers),s.params&&(D=s.params instanceof qf?s.params:new qf({fromObject:s.params})),u=new XI(t,r,void 0!==s.body?s.body:null,{headers:g,context:s.context,params:D,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}const d=cn(u).pipe(Ra(g=>this.handler.handle(g)));if(t instanceof XI||"events"===s.observe)return d;const f=d.pipe((0,wr.p)(g=>g instanceof YI));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return f.pipe((0,kn.T)(g=>{if(null!==g.body&&!(g.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return g.body}));case"blob":return f.pipe((0,kn.T)(g=>{if(null!==g.body&&!(g.body instanceof Blob))throw new Error("Response is not a Blob.");return g.body}));case"text":return f.pipe((0,kn.T)(g=>{if(null!==g.body&&"string"!=typeof g.body)throw new Error("Response is not a string.");return g.body}));default:return f.pipe((0,kn.T)(g=>g.body))}case"response":return f;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new qf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,L1(s,r))}post(t,r,s={}){return this.request("POST",t,L1(s,r))}put(t,r,s={}){return this.request("PUT",t,L1(s,r))}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(P1))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac})}return n})();const m$=["*"];let _x;function ZI(n){return function g$(){if(void 0===_x&&(_x=null,typeof window<"u")){const n=window;void 0!==n.trustedTypes&&(_x=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return _x}()?.createHTML(n)||n}function Q2(n){return Error(`Unable to find icon with the name "${n}"`)}function X2(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Y2(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class vg{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let yx=(()=>{class n{constructor(t,r,s,u){this._httpClient=t,this._sanitizer=r,this._errorHandler=u,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(t,r,s){return this.addSvgIconInNamespace("",t,r,s)}addSvgIconLiteral(t,r,s){return this.addSvgIconLiteralInNamespace("",t,r,s)}addSvgIconInNamespace(t,r,s,u){return this._addSvgIconConfig(t,r,new vg(s,null,u))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,s,u){const d=this._sanitizer.sanitize(m.WPN.HTML,s);if(!d)throw Y2(s);const f=ZI(d);return this._addSvgIconConfig(t,r,new vg("",f,u))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,s){return this._addSvgIconSetConfig(t,new vg(r,null,s))}addSvgIconSetLiteralInNamespace(t,r,s){const u=this._sanitizer.sanitize(m.WPN.HTML,r);if(!u)throw Y2(r);const d=ZI(u);return this._addSvgIconSetConfig(t,new vg("",d,s))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(m.WPN.RESOURCE_URL,t);if(!r)throw X2(t);const s=this._cachedIconsByUrl.get(r);return s?cn(bx(s)):this._loadSvgIconFromConfig(new vg(t,null)).pipe(On(u=>this._cachedIconsByUrl.set(r,u)),(0,kn.T)(u=>bx(u)))}getNamedSvgIcon(t,r=""){const s=Z2(r,t);let u=this._svgIconConfigs.get(s);if(u)return this._getSvgFromConfig(u);if(u=this._getIconConfigFromResolvers(r,t),u)return this._svgIconConfigs.set(s,u),this._getSvgFromConfig(u);const d=this._iconSetConfigs.get(r);return d?this._getSvgFromIconSetConfigs(t,d):Bc(Q2(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?cn(bx(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,kn.T)(r=>bx(r)))}_getSvgFromIconSetConfigs(t,r){const s=this._extractIconWithNameFromAnySet(t,r);return s?cn(s):function kU(...n){const e=(0,ih.ms)(n),{args:t,keys:r}=Vb(n),s=new Ps.c(u=>{const{length:d}=t;if(!d)return void u.complete();const f=new Array(d);let g=d,D=d;for(let S=0;S<d;S++){let P=!1;(0,Sa.Tg)(t[S]).subscribe((0,ui._)(u,j=>{P||(P=!0,D--),f[S]=j},()=>g--,void 0,()=>{(!g||!P)&&(D||u.next(r?Ru(r,f):f),u.complete())}))}});return e?s.pipe(Bo(e)):s}(r.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(y(f=>{const D=`Loading icon set URL: ${this._sanitizer.sanitize(m.WPN.RESOURCE_URL,d.url)} failed: ${f.message}`;return this._errorHandler.handleError(new Error(D)),cn(null)})))).pipe((0,kn.T)(()=>{const d=this._extractIconWithNameFromAnySet(t,r);if(!d)throw Q2(t);return d}))}_extractIconWithNameFromAnySet(t,r){for(let s=r.length-1;s>=0;s--){const u=r[s];if(u.svgText&&u.svgText.toString().indexOf(t)>-1){const d=this._svgElementFromConfig(u),f=this._extractSvgIconFromSet(d,t,u.options);if(f)return f}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(On(r=>t.svgText=r),(0,kn.T)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?cn(null):this._fetchIcon(t).pipe(On(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,s){const u=t.querySelector(`[id="${r}"]`);if(!u)return null;const d=u.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,s);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),s);const f=this._svgElementFromString(ZI("<svg></svg>"));return f.appendChild(d),this._setSvgAttributes(f,s)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(t){const r=this._svgElementFromString(ZI("<svg></svg>")),s=t.attributes;for(let u=0;u<s.length;u++){const{name:d,value:f}=s[u];"id"!==d&&r.setAttribute(d,f)}for(let u=0;u<t.childNodes.length;u++)t.childNodes[u].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[u].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:s}=t,u=s?.withCredentials??!1;if(!this._httpClient)throw function v$(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(m.WPN.RESOURCE_URL,r);if(!d)throw X2(r);const f=this._inProgressUrlFetches.get(d);if(f)return f;const g=this._httpClient.get(d,{responseType:"text",withCredentials:u}).pipe((0,kn.T)(D=>ZI(D)),Y(()=>this._inProgressUrlFetches.delete(d)),(0,FU.u)());return this._inProgressUrlFetches.set(d,g),g}_addSvgIconConfig(t,r,s){return this._svgIconConfigs.set(Z2(t,r),s),this}_addSvgIconSetConfig(t,r){const s=this._iconSetConfigs.get(t);return s?s.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let s=0;s<this._resolvers.length;s++){const u=this._resolvers[s](r,t);if(u)return y$(u)?new vg(u.url,null,u.options):new vg(u,null)}}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(V1,8),m.KVO(rh),m.KVO(de,8),m.KVO(m.zcH))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function bx(n){return n.cloneNode(!0)}function Z2(n,e){return n+":"+e}function y$(n){return!(!n.url||!n.options)}const b$=new m.nKC("MAT_ICON_DEFAULT_OPTIONS"),E$=new m.nKC("mat-icon-location",{providedIn:"root",factory:function w$(){const n=(0,m.WQX)(de),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),J2=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],I$=J2.map(n=>`[${n}]`).join(", "),D$=/^url\(['"]?#(.*?)['"]?\)$/;let C$=(()=>{class n{get color(){return this._color||this._defaultColor}set color(t){this._color=t}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,s,u,d,f){this._elementRef=t,this._iconRegistry=r,this._location=u,this._errorHandler=d,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Wi.yU.EMPTY,f&&(f.color&&(this.color=this._defaultColor=f.color),f.fontSet&&(this.fontSet=f.fontSet)),s||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const s=t.childNodes[r];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>t.classList.remove(s)),r.forEach(s=>t.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((s,u)=>{s.forEach(d=>{u.setAttribute(d.name,`url('${t}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(I$),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let u=0;u<r.length;u++)J2.forEach(d=>{const f=r[u],g=f.getAttribute(d),D=g?g.match(D$):null;if(D){let S=s.get(f);S||(S=[],s.set(f,S)),S.push({name:d,value:D[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,s]=this._splitIconName(t);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(Gr(1)).subscribe(u=>this._setSvgElement(u),u=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${s}! ${u.message}`))})}}static#e=this.\u0275fac=function(r){return new(r||n)(m.rXU(m.aKT),m.rXU(yx),m.kS0("aria-hidden"),m.rXU(E$),m.rXU(m.zcH),m.rXU(b$,8))};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,s){2&r&&(m.BMQ("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),m.HbH(s.color?"mat-"+s.color:""),m.AVh("mat-icon-inline",s.inline)("mat-icon-no-color","primary"!==s.color&&"accent"!==s.color&&"warn"!==s.color))},inputs:{color:"color",inline:[2,"inline","inline",m.L39],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[m.GFd,m.aNF],ngContentSelectors:m$,decls:1,vars:0,template:function(r,s){1&r&&(m.NAR(),m.SdG(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}return n})(),T$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({imports:[hl,hl]})}return n})();const A$=["mat-icon-button",""],R$=["*"],x$=new m.nKC("MAT_BUTTON_CONFIG"),M$=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mat-mdc-fab-base","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}];let U1,O$=(()=>{class n{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=t,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._updateRippleDisabled()}constructor(t,r,s,u){this._elementRef=t,this._platform=r,this._ngZone=s,this._animationMode=u,this._focusMonitor=(0,m.WQX)(R1),this._rippleLoader=(0,m.WQX)(RU),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;const d=(0,m.WQX)(x$,{optional:!0}),f=t.nativeElement,g=f.classList;this.disabledInteractive=d?.disabledInteractive??!1,this.color=d?.color??null,this._rippleLoader?.configureRipple(f,{className:"mat-mdc-button-ripple"});for(const{attribute:D,mdcClasses:S}of M$)f.hasAttribute(D)&&g.add(...S)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return null!=this.ariaDisabled?this.ariaDisabled:!(!this.disabled||!this.disabledInteractive)||null}_getDisabledAttribute(){return!(this.disabledInteractive||!this.disabled)||null}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static#e=this.\u0275fac=function(r){m.QTQ()};static#t=this.\u0275dir=m.FsC({type:n,inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",m.L39],disabled:[2,"disabled","disabled",m.L39],ariaDisabled:[2,"aria-disabled","ariaDisabled",m.L39],disabledInteractive:[2,"disabledInteractive","disabledInteractive",m.L39]},features:[m.GFd]})}return n})(),N$=(()=>{class n extends O${constructor(t,r,s,u){super(t,r,s,u),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static#e=this.\u0275fac=function(r){return new(r||n)(m.rXU(m.aKT),m.rXU(Us),m.rXU(m.SKi),m.rXU(m.bc$,8))};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(r,s){2&r&&(m.BMQ("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),m.HbH(s.color?"mat-"+s.color:""),m.AVh("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable","NoopAnimations"===s._animationMode)("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[m.Vt3,m.aNF],attrs:A$,ngContentSelectors:R$,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){1&r&&(m.NAR(),m.nrm(0,"span",0),m.SdG(1),m.nrm(2,"span",1)(3,"span",2))},styles:['.mat-mdc-icon-button{-webkit-user-select:none;user-select:none;display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;z-index:0;overflow:visible;border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);color:var(--mdc-icon-button-icon-color);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button img,.mat-mdc-icon-button svg{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size);vertical-align:baseline}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label,.mat-mdc-icon-button .mat-icon{z-index:1;position:relative}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button[hidden]{display:none}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}return n})(),k$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({imports:[hl,T2,hl]})}return n})(),F$=1;const Ex={};function eB(n){return n in Ex&&(delete Ex[n],!0)}const L$={setImmediate(n){const e=F$++;return Ex[e]=!0,U1||(U1=Promise.resolve()),U1.then(()=>eB(e)&&n()),e},clearImmediate(n){eB(n)}},{setImmediate:V$,clearImmediate:B$}=L$,wx={setImmediate(...n){const{delegate:e}=wx;return(e?.setImmediate||V$)(...n)},clearImmediate(n){const{delegate:e}=wx;return(e?.clearImmediate||B$)(n)},delegate:void 0},$1=new class U$ extends qR{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class j$ extends GR{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=wx.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:u}=e;null!=t&&(null===(s=u[u.length-1])||void 0===s?void 0:s.id)!==t&&(wx.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});class H1{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class $$ extends H1{constructor(e,t,r,s,u){super(),this.component=e,this.viewContainerRef=t,this.injector=r,this.componentFactoryResolver=s,this.projectableNodes=u}}class tB extends H1{constructor(e,t,r,s){super(),this.templateRef=e,this.viewContainerRef=t,this.context=r,this.injector=s}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class H$ extends H1{constructor(e){super(),this.element=e instanceof m.aKT?e.nativeElement:e}}class z${constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof $$?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof tB?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof H$?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class K$ extends z${constructor(e,t,r,s,u){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=r,this._defaultInjector=s,this.attachDomPortal=d=>{const f=d.element,g=this._document.createComment("dom-portal");f.parentNode.insertBefore(g,f),this.outletElement.appendChild(f),this._attachedPortal=d,super.setDisposeFn(()=>{g.parentNode&&g.parentNode.replaceChild(f,g)})},this._document=u}attachComponentPortal(e){const r=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let s;return e.viewContainerRef?(s=e.viewContainerRef.createComponent(r,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>s.destroy())):(s=r.create(e.injector||this._defaultInjector||m.zZn.NULL),this._appRef.attachView(s.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(s.hostView),s.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(s)),this._attachedPortal=e,s}attachTemplatePortal(e){let t=e.viewContainerRef,r=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return r.rootNodes.forEach(s=>this.outletElement.appendChild(s)),r.detectChanges(),this.setDisposeFn(()=>{let s=t.indexOf(r);-1!==s&&t.remove(s)}),this._attachedPortal=e,r}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let W$=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({})}return n})();var Hs=M(9969);const JI={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:r}=JI;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);const s=e(u=>{t=void 0,n(u)});return new Wi.yU(()=>t?.(s))},requestAnimationFrame(...n){const{delegate:e}=JI;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:e}=JI;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};new class q$ extends qR{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:r}=this;let s;e=e||r.shift();do{if(s=e.execute(e.state,e.delay))break}while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,s){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw s}}}(class G$ extends GR{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return null!==r&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=JI.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var s;if(null!=r?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);const{actions:u}=e;null!=t&&(null===(s=u[u.length-1])||void 0===s?void 0:s.id)!==t&&(JI.cancelAnimationFrame(t),e._scheduled=void 0)}});function nB(n,e=dg){return function X$(n){return(0,Mi.N)((e,t)=>{let r=!1,s=null,u=null,d=!1;const f=()=>{if(u?.unsubscribe(),u=null,r){r=!1;const D=s;s=null,t.next(D)}d&&t.complete()},g=()=>{u=null,d&&t.complete()};e.subscribe((0,ui._)(t,D=>{r=!0,s=D,u||(0,Sa.Tg)(n(D)).subscribe(u=(0,ui._)(t,f,g))},()=>{d=!0,(!r||!u||u.closed)&&t.complete()}))})}(()=>r1(n,e))}let Z$=(()=>{class n{constructor(t,r,s){this._ngZone=t,this._platform=r,this._scrolled=new Vn.B,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Ps.c(r=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(nB(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):cn()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const s=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe((0,wr.p)(u=>!u||s.indexOf(u)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((s,u)=>{this._scrollableContainsElement(u,t)&&r.push(u)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let s=cb(r),u=t.getElementRef().nativeElement;do{if(s==u)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>$f(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(m.SKi),m.KVO(Us),m.KVO(de,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),rB=(()=>{class n{constructor(t,r,s){this._platform=t,this._change=new Vn.B,this._changeListener=u=>{this._change.next(u)},this._document=s,r.runOutsideAngular(()=>{if(t.isBrowser){const u=this._getWindow();u.addEventListener("resize",this._changeListener),u.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),s=t.documentElement,u=s.getBoundingClientRect();return{top:-u.top||t.body.scrollTop||r.scrollY||s.scrollTop||0,left:-u.left||t.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(nB(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(Us),m.KVO(m.SKi),m.KVO(de,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),z1=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({})}return n})(),iB=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({imports:[qI,z1,qI,z1]})}return n})();const oB=h1();class eH{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=eo(-this._previousScrollPosition.left),e.style.top=eo(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,r=e.style,s=this._document.body.style,u=r.scrollBehavior||"",d=s.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),oB&&(r.scrollBehavior=s.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),oB&&(r.scrollBehavior=u,s.scrollBehavior=d)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,r=this._viewportRuler.getViewportSize();return t.scrollHeight>r.height||t.scrollWidth>r.width}}class tH{constructor(e,t,r,s){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=r,this._config=s,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe((0,wr.p)(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class sB{enable(){}disable(){}attach(){}}function K1(n,e){return e.some(t=>n.bottom<t.top||n.top>t.bottom||n.right<t.left||n.left>t.right)}function aB(n,e){return e.some(t=>n.top<t.top||n.bottom>t.bottom||n.left<t.left||n.right>t.right)}class nH{constructor(e,t,r,s){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=r,this._config=s,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:s}=this._viewportRuler.getViewportSize();K1(t,[{width:r,height:s,bottom:s,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let rH=(()=>{class n{constructor(t,r,s,u){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new sB,this.close=d=>new tH(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new eH(this._viewportRuler,this._document),this.reposition=d=>new nH(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=u}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(Z$),m.KVO(rB),m.KVO(m.SKi),m.KVO(de))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class cB{constructor(e){if(this.scrollStrategy=new sB,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const r of t)void 0!==e[r]&&(this[r]=e[r])}}}class iH{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let uB=(()=>{class n{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),oH=(()=>{class n extends uB{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=s=>{const u=this._attachedOverlays;for(let d=u.length-1;d>-1;d--)if(u[d]._keydownEvents.observers.length>0){const f=u[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>f.next(s)):f.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de),m.KVO(m.SKi,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),sH=(()=>{class n extends uB{constructor(t,r,s){super(t),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=u=>{this._pointerDownEventTarget=Tc(u)},this._clickListener=u=>{const d=Tc(u),f="click"===u.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;const g=this._attachedOverlays.slice();for(let D=g.length-1;D>-1;D--){const S=g[D];if(S._outsidePointerEvents.observers.length<1||!S.hasAttached())continue;if(lB(S.overlayElement,d)||lB(S.overlayElement,f))break;const P=S._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>P.next(u)):P.next(u)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de),m.KVO(Us),m.KVO(m.SKi,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function lB(n,e){const t=typeof ShadowRoot<"u"&&ShadowRoot;let r=e;for(;r;){if(r===n)return!0;r=t&&r instanceof ShadowRoot?r.host:r.parentNode}return!1}let dB=(()=>{class n{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||ox()){const s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let u=0;u<s.length;u++)s[u].remove()}const r=this._document.createElement("div");r.classList.add(t),ox()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(de),m.KVO(Us))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();class aH{constructor(e,t,r,s,u,d,f,g,D,S=!1,P){this._portalOutlet=e,this._host=t,this._pane=r,this._config=s,this._ngZone=u,this._keyboardDispatcher=d,this._document=f,this._location=g,this._outsideClickDispatcher=D,this._animationsDisabled=S,this._injector=P,this._backdropElement=null,this._backdropClick=new Vn.B,this._attachments=new Vn.B,this._detachments=new Vn.B,this._locationChanges=Wi.yU.EMPTY,this._backdropClickHandler=j=>this._backdropClick.next(j),this._backdropTransitionendHandler=j=>{this._disposeBackdrop(j.target)},this._keydownEvents=new Vn.B,this._outsidePointerEvents=new Vn.B,this._renders=new Vn.B,s.scrollStrategy&&(this._scrollStrategy=s.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=s.positionStrategy,this._afterRenderRef=(0,m.O8t)(()=>(0,m.Tzd)(()=>{this._renders.next()},{injector:this._injector}))}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),(0,m.mal)(()=>{this.hasAttached()&&this.updatePosition()},{injector:this._injector}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenEmpty(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete(),this._afterRenderRef.destroy(),this._renders.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=eo(this._config.width),e.height=eo(this._config.height),e.minWidth=eo(this._config.minWidth),e.minHeight=eo(this._config.minHeight),e.maxWidth=eo(this._config.maxWidth),e.maxHeight=eo(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,r){const s=lx(t||[]).filter(u=>!!u);s.length&&(r?e.classList.add(...s):e.classList.remove(...s))}_detachContentWhenEmpty(){this._ngZone.runOutsideAngular(()=>{const e=this._renders.pipe(ve((0,zf.h)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const hB="cdk-overlay-connected-position-bounding-box",cH=/([A-Za-z%]+)$/;class uH{get positions(){return this._preferredPositions}constructor(e,t,r,s,u){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=u,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Vn.B,this._resizeSubscription=Wi.yU.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(hB),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,r=this._viewportRect,s=this._containerRect,u=[];let d;for(let f of this._preferredPositions){let g=this._getOriginPoint(e,s,f),D=this._getOverlayPoint(g,t,f),S=this._getOverlayFit(D,t,r,f);if(S.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(f,g);this._canFitWithFlexibleDimensions(S,D,r)?u.push({position:f,origin:g,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(g,f)}):(!d||d.overlayFit.visibleArea<S.visibleArea)&&(d={overlayFit:S,overlayPoint:D,originPoint:g,position:f,overlayRect:t})}if(u.length){let f=null,g=-1;for(const D of u){const S=D.boundingBoxRect.width*D.boundingBoxRect.height*(D.position.weight||1);S>g&&(g=S,f=D)}return this._isPushed=!1,void this._applyPosition(f.position,f.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(d.position,d.originPoint);this._applyPosition(d.position,d.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&_g(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(hB),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,r){let s,u;if("center"==r.originX)s=e.left+e.width/2;else{const d=this._isRtl()?e.right:e.left,f=this._isRtl()?e.left:e.right;s="start"==r.originX?d:f}return t.left<0&&(s-=t.left),u="center"==r.originY?e.top+e.height/2:"top"==r.originY?e.top:e.bottom,t.top<0&&(u-=t.top),{x:s,y:u}}_getOverlayPoint(e,t,r){let s,u;return s="center"==r.overlayX?-t.width/2:"start"===r.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,u="center"==r.overlayY?-t.height/2:"top"==r.overlayY?0:-t.height,{x:e.x+s,y:e.y+u}}_getOverlayFit(e,t,r,s){const u=pB(t);let{x:d,y:f}=e,g=this._getOffset(s,"x"),D=this._getOffset(s,"y");g&&(d+=g),D&&(f+=D);let j=0-f,Q=f+u.height-r.height,we=this._subtractOverflows(u.width,0-d,d+u.width-r.width),Me=this._subtractOverflows(u.height,j,Q),Re=we*Me;return{visibleArea:Re,isCompletelyWithinViewport:u.width*u.height===Re,fitsInViewportVertically:Me===u.height,fitsInViewportHorizontally:we==u.width}}_canFitWithFlexibleDimensions(e,t,r){if(this._hasFlexibleDimensions){const s=r.bottom-t.y,u=r.right-t.x,d=fB(this._overlayRef.getConfig().minHeight),f=fB(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=d&&d<=s)&&(e.fitsInViewportHorizontally||null!=f&&f<=u)}return!1}_pushOverlayOnScreen(e,t,r){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const s=pB(t),u=this._viewportRect,d=Math.max(e.x+s.width-u.width,0),f=Math.max(e.y+s.height-u.height,0),g=Math.max(u.top-r.top-e.y,0),D=Math.max(u.left-r.left-e.x,0);let S=0,P=0;return S=s.width<=u.width?D||-d:e.x<this._viewportMargin?u.left-r.left-e.x:0,P=s.height<=u.height?g||-f:e.y<this._viewportMargin?u.top-r.top-e.y:0,this._previousPushAmount={x:S,y:P},{x:e.x+S,y:e.y+P}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._positionChanges.observers.length){const r=this._getScrollVisibility();if(e!==this._lastPosition||!this._lastScrollVisibility||!function lH(n,e){return n===e||n.isOriginClipped===e.isOriginClipped&&n.isOriginOutsideView===e.isOriginOutsideView&&n.isOverlayClipped===e.isOverlayClipped&&n.isOverlayOutsideView===e.isOverlayOutsideView}(this._lastScrollVisibility,r)){const s=new iH(e,r);this._positionChanges.next(s)}this._lastScrollVisibility=r}this._lastPosition=e,this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,s=e.overlayY;r="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let u=0;u<t.length;u++)t[u].style.transformOrigin=`${r} ${s}`}_calculateBoundingBoxRect(e,t){const r=this._viewportRect,s=this._isRtl();let u,d,f,S,P,j;if("top"===t.overlayY)d=e.y,u=r.height-d+this._viewportMargin;else if("bottom"===t.overlayY)f=r.height-e.y+2*this._viewportMargin,u=r.height-f+this._viewportMargin;else{const Q=Math.min(r.bottom-e.y+r.top,e.y),we=this._lastBoundingBoxSize.height;u=2*Q,d=e.y-Q,u>we&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.y-we/2)}if("end"===t.overlayX&&!s||"start"===t.overlayX&&s)j=r.width-e.x+2*this._viewportMargin,S=e.x-this._viewportMargin;else if("start"===t.overlayX&&!s||"end"===t.overlayX&&s)P=e.x,S=r.right-e.x;else{const Q=Math.min(r.right-e.x+r.left,e.x),we=this._lastBoundingBoxSize.width;S=2*Q,P=e.x-Q,S>we&&!this._isInitialRender&&!this._growAfterOpen&&(P=e.x-we/2)}return{top:d,left:P,bottom:f,right:j,width:S,height:u}}_setBoundingBoxStyles(e,t){const r=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const s={};if(this._hasExactPosition())s.top=s.left="0",s.bottom=s.right=s.maxHeight=s.maxWidth="",s.width=s.height="100%";else{const u=this._overlayRef.getConfig().maxHeight,d=this._overlayRef.getConfig().maxWidth;s.height=eo(r.height),s.top=eo(r.top),s.bottom=eo(r.bottom),s.width=eo(r.width),s.left=eo(r.left),s.right=eo(r.right),s.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",s.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",u&&(s.maxHeight=eo(u)),d&&(s.maxWidth=eo(d))}this._lastBoundingBoxSize=r,_g(this._boundingBox.style,s)}_resetBoundingBoxStyles(){_g(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){_g(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const r={},s=this._hasExactPosition(),u=this._hasFlexibleDimensions,d=this._overlayRef.getConfig();if(s){const S=this._viewportRuler.getViewportScrollPosition();_g(r,this._getExactOverlayY(t,e,S)),_g(r,this._getExactOverlayX(t,e,S))}else r.position="static";let f="",g=this._getOffset(t,"x"),D=this._getOffset(t,"y");g&&(f+=`translateX(${g}px) `),D&&(f+=`translateY(${D}px)`),r.transform=f.trim(),d.maxHeight&&(s?r.maxHeight=eo(d.maxHeight):u&&(r.maxHeight="")),d.maxWidth&&(s?r.maxWidth=eo(d.maxWidth):u&&(r.maxWidth="")),_g(this._pane.style,r)}_getExactOverlayY(e,t,r){let s={top:"",bottom:""},u=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r)),"bottom"===e.overlayY?s.bottom=this._document.documentElement.clientHeight-(u.y+this._overlayRect.height)+"px":s.top=eo(u.y),s}_getExactOverlayX(e,t,r){let d,s={left:"",right:""},u=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r)),d=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===d?s.right=this._document.documentElement.clientWidth-(u.x+this._overlayRect.width)+"px":s.left=eo(u.x),s}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),r=this._scrollables.map(s=>s.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:aB(e,r),isOriginOutsideView:K1(e,r),isOverlayClipped:aB(t,r),isOverlayOutsideView:K1(t,r)}}_subtractOverflows(e,...t){return t.reduce((r,s)=>r-Math.max(s,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+e-this._viewportMargin,bottom:r.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&lx(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof m.aKT)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,r=e.height||0;return{top:e.y,bottom:e.y+r,left:e.x,right:e.x+t,height:r,width:t}}}function _g(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function fB(n){if("number"!=typeof n&&null!=n){const[e,t]=n.split(cH);return t&&"px"!==t?null:parseFloat(e)}return n||null}function pB(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const mB="cdk-global-overlay-wrapper";class dH{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(mB),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:s,height:u,maxWidth:d,maxHeight:f}=r,g=!("100%"!==s&&"100vw"!==s||d&&"100%"!==d&&"100vw"!==d),D=!("100%"!==u&&"100vh"!==u||f&&"100%"!==f&&"100vh"!==f),S=this._xPosition,P=this._xOffset,j="rtl"===this._overlayRef.getConfig().direction;let Q="",we="",Me="";g?Me="flex-start":"center"===S?(Me="center",j?we=P:Q=P):j?"left"===S||"end"===S?(Me="flex-end",Q=P):("right"===S||"start"===S)&&(Me="flex-start",we=P):"left"===S||"start"===S?(Me="flex-start",Q=P):("right"===S||"end"===S)&&(Me="flex-end",we=P),e.position=this._cssPosition,e.marginLeft=g?"0":Q,e.marginTop=D?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=g?"0":we,t.justifyContent=Me,t.alignItems=D?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,r=t.style;t.classList.remove(mB),r.justifyContent=r.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let hH=(()=>{class n{constructor(t,r,s,u){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=u}global(){return new dH}flexibleConnectedTo(t){return new uH(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(rB),m.KVO(de),m.KVO(Us),m.KVO(dB))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fH=0,lb=(()=>{class n{constructor(t,r,s,u,d,f,g,D,S,P,j,Q){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=u,this._keyboardDispatcher=d,this._injector=f,this._ngZone=g,this._document=D,this._directionality=S,this._location=P,this._outsideClickDispatcher=j,this._animationsModuleType=Q}create(t){const r=this._createHostElement(),s=this._createPaneElement(r),u=this._createPortalOutlet(s),d=new cB(t);return d.direction=d.direction||this._directionality.value,new aH(u,r,s,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType,this._injector.get(m.uvJ))}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+fH++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(m.o8S)),new K$(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static#e=this.\u0275fac=function(r){return new(r||n)(m.KVO(rH),m.KVO(dB),m.KVO(m.OM3),m.KVO(hH),m.KVO(oH),m.KVO(m.zZn),m.KVO(m.SKi),m.KVO(de),m.KVO(g2),m.KVO(pe),m.KVO(sH),m.KVO(m.bc$,8))};static#t=this.\u0275prov=m.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const gH={provide:new m.nKC("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{const n=(0,m.WQX)(lb);return()=>n.scrollStrategies.reposition()}}),deps:[lb],useFactory:function mH(n){return()=>n.scrollStrategies.reposition()}};let vH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({providers:[lb,gH],imports:[qI,W$,iB,iB]})}return n})();const _H=["mat-menu-item",""],yH=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],bH=["mat-icon, [matMenuItemIcon]","*"];function EH(n,e){1&n&&(m.qSk(),m.j41(0,"svg",2),m.nrm(1,"polygon",3),m.k0s())}const wH=["*"];function IH(n,e){if(1&n){const t=m.RV6();m.j41(0,"div",0),m.bIt("keydown",function(s){m.eBV(t);const u=m.XpG();return m.Njj(u._handleKeydown(s))})("click",function(){m.eBV(t);const s=m.XpG();return m.Njj(s.closed.emit("click"))})("@transformMenu.start",function(s){m.eBV(t);const u=m.XpG();return m.Njj(u._onAnimationStart(s))})("@transformMenu.done",function(s){m.eBV(t);const u=m.XpG();return m.Njj(u._onAnimationDone(s))}),m.j41(1,"div",1),m.SdG(2),m.k0s()()}if(2&n){const t=m.XpG();m.HbH(t._classList),m.Y8G("id",t.panelId)("@transformMenu",t._panelAnimationState),m.BMQ("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const W1=new m.nKC("MAT_MENU_PANEL");let Ix=(()=>{class n{constructor(t,r,s,u,d){this._elementRef=t,this._document=r,this._focusMonitor=s,this._parentMenu=u,this._changeDetectorRef=d,this.role="menuitem",this.disabled=!1,this.disableRipple=!1,this._hovered=new Vn.B,this._focused=new Vn.B,this._highlighted=!1,this._triggersSubmenu=!1,u?.addItem?.(this)}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,r):this._getHostElement().focus(r),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),r=t.querySelectorAll("mat-icon, .material-icons");for(let s=0;s<r.length;s++)r[s].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static#e=this.\u0275fac=function(r){return new(r||n)(m.rXU(m.aKT),m.rXU(de),m.rXU(R1),m.rXU(W1,8),m.rXU(m.gRc))};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator"],hostVars:8,hostBindings:function(r,s){1&r&&m.bIt("click",function(d){return s._checkDisabled(d)})("mouseenter",function(){return s._handleMouseEnter()}),2&r&&(m.BMQ("role",s.role)("tabindex",s._getTabIndex())("aria-disabled",s.disabled)("disabled",s.disabled||null),m.AVh("mat-mdc-menu-item-highlighted",s._highlighted)("mat-mdc-menu-item-submenu-trigger",s._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",m.L39],disableRipple:[2,"disableRipple","disableRipple",m.L39]},exportAs:["matMenuItem"],standalone:!0,features:[m.GFd,m.aNF],attrs:_H,ngContentSelectors:bH,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(r,s){1&r&&(m.NAR(yH),m.SdG(0),m.j41(1,"span",0),m.SdG(2,1),m.k0s(),m.nrm(3,"div",1),m.DNE(4,EH,2,0,":svg:svg",2)),2&r&&(m.R7$(3),m.Y8G("matRippleDisabled",s.disableRipple||s.disabled)("matRippleTrigger",s._getHostElement()),m.R7$(),m.vxM(s._triggersSubmenu?4:-1))},dependencies:[C2],encapsulation:2,changeDetection:0})}return n})();const DH=new m.nKC("MatMenuContent"),Dx={transformMenu:(0,Hs.hZ)("transformMenu",[(0,Hs.wk)("void",(0,Hs.iF)({opacity:0,transform:"scale(0.8)"})),(0,Hs.kY)("void => enter",(0,Hs.i0)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,Hs.iF)({opacity:1,transform:"scale(1)"}))),(0,Hs.kY)("* => void",(0,Hs.i0)("100ms 25ms linear",(0,Hs.iF)({opacity:0})))]),fadeInItems:(0,Hs.hZ)("fadeInItems",[(0,Hs.wk)("showing",(0,Hs.iF)({opacity:1})),(0,Hs.kY)("void => *",[(0,Hs.iF)({opacity:0}),(0,Hs.i0)("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let CH=0;const TH=new m.nKC("mat-menu-default-options",{providedIn:"root",factory:function SH(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let eD=(()=>{class n{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}set panelClass(t){const r=this._previousPanelClass,s={...this._classList};r&&r.length&&r.split(" ").forEach(u=>{s[u]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(u=>{s[u]=!0}),this._elementRef.nativeElement.className=""),this._classList=s}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,r,s,u){this._elementRef=t,this._changeDetectorRef=u,this._elevationPrefix="mat-elevation-z",this._baseElevation=null,this._directDescendantItems=new m.rOR,this._classList={},this._panelAnimationState="void",this._animationDone=new Vn.B,this.closed=new m.bkB,this.close=this.closed,this.panelId="mat-menu-panel-"+CH++,this._injector=(0,m.WQX)(m.zZn),this.overlayPanelClass=s.overlayPanelClass||"",this._xPosition=s.xPosition,this._yPosition=s.yPosition,this.backdropClass=s.backdropClass,this.overlapTrigger=s.overlapTrigger,this.hasBackdrop=s.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new eU(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe((0,Tl.Z)(this._directDescendantItems),Gi(t=>(0,zf.h)(...t.map(r=>r._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const r=this._keyManager;if("enter"===this._panelAnimationState&&r.activeItem?._hasFocus()){const s=t.toArray(),u=Math.max(0,Math.min(s.length-1,r.activeItemIndex||0));s[u]&&!s[u].disabled?r.setActiveItem(u):r.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy()}_hovered(){return this._directDescendantItems.changes.pipe((0,Tl.Z)(this._directDescendantItems),Gi(r=>(0,zf.h)(...r.map(s=>s._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const r=t.keyCode,s=this._keyManager;switch(r){case 27:o2(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===r||40===r)&&s.setFocusOrigin("keyboard"),void s.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=(0,m.mal)(()=>{let r=null;if(this._directDescendantItems.length&&(r=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!r||!r.contains(document.activeElement)){const s=this._keyManager;s.setFocusOrigin(t).setFirstItemActive(),!s.activeItem&&r&&r.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){if(null===this._baseElevation){const f=("function"==typeof getComputedStyle?getComputedStyle(this._elementRef.nativeElement):null)?.getPropertyValue("--mat-menu-base-elevation-level")||"8";this._baseElevation=parseInt(f)}const r=Math.min(this._baseElevation+t,24),s=`${this._elevationPrefix}${r}`,u=Object.keys(this._classList).find(d=>d.startsWith(this._elevationPrefix));if(!u||u===this._previousElevation){const d={...this._classList};this._previousElevation&&(d[this._previousElevation]=!1),d[s]=!0,this._previousElevation=s,this._classList=d}}setPositionClasses(t=this.xPosition,r=this.yPosition){this._classList={...this._classList,"mat-menu-before":"before"===t,"mat-menu-after":"after"===t,"mat-menu-above":"above"===r,"mat-menu-below":"below"===r},this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe((0,Tl.Z)(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(r=>r._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}static#e=this.\u0275fac=function(r){return new(r||n)(m.rXU(m.aKT),m.rXU(m.SKi),m.rXU(TH),m.rXU(m.gRc))};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["mat-menu"]],contentQueries:function(r,s,u){if(1&r&&(m.wni(u,DH,5),m.wni(u,Ix,5),m.wni(u,Ix,4)),2&r){let d;m.mGM(d=m.lsd())&&(s.lazyContent=d.first),m.mGM(d=m.lsd())&&(s._allItems=d),m.mGM(d=m.lsd())&&(s.items=d)}},viewQuery:function(r,s){if(1&r&&m.GBs(m.C4Q,5),2&r){let u;m.mGM(u=m.lsd())&&(s.templateRef=u.first)}},hostVars:3,hostBindings:function(r,s){2&r&&m.BMQ("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",m.L39],hasBackdrop:[2,"hasBackdrop","hasBackdrop",t=>null==t?null:(0,m.L39)(t)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],standalone:!0,features:[m.Jv_([{provide:W1,useExisting:n}]),m.GFd,m.aNF],ngContentSelectors:wH,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mat-mdc-elevation-specific",3,"keydown","click","id"],[1,"mat-mdc-menu-content"]],template:function(r,s){1&r&&(m.NAR(),m.DNE(0,IH,3,7,"ng-template"))},styles:['mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font);line-height:var(--mat-menu-item-label-text-line-height);font-size:var(--mat-menu-item-label-text-size);letter-spacing:var(--mat-menu-item-label-text-tracking);font-weight:var(--mat-menu-item-label-text-weight)}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;box-sizing:border-box;outline:0;border-radius:var(--mat-menu-container-shape);background-color:var(--mat-menu-container-color);will-change:transform,opacity}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.mat-mdc-menu-panel.ng-animating:has(.mat-mdc-menu-content:empty){display:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel .mat-divider{color:var(--mat-menu-divider-color);margin-bottom:var(--mat-menu-divider-bottom-spacing);margin-top:var(--mat-menu-divider-top-spacing)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:var(--mat-menu-item-leading-spacing);padding-right:var(--mat-menu-item-trailing-spacing);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}[dir=rtl] .mat-mdc-menu-item{padding-right:var(--mat-menu-item-leading-spacing);padding-left:var(--mat-menu-item-trailing-spacing)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing);padding-right:var(--mat-menu-item-with-icon-trailing-spacing)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-right:var(--mat-menu-item-with-icon-leading-spacing);padding-left:var(--mat-menu-item-with-icon-trailing-spacing)}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color)}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color)}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing);height:var(--mat-menu-item-icon-size);width:var(--mat-menu-item-icon-size)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color)}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color)}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[Dx.transformMenu,Dx.fadeInItems]},changeDetection:0})}return n})();const gB=new m.nKC("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{const n=(0,m.WQX)(lb);return()=>n.scrollStrategies.reposition()}}),RH={provide:gB,deps:[lb],useFactory:function AH(n){return()=>n.scrollStrategies.reposition()}},vB=Gf({passive:!0});let xH=(()=>{class n{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(r=>{this._destroyMenu(r),("click"===r||"tab"===r)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(r)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,r,s,u,d,f,g,D,S){this._overlay=t,this._element=r,this._viewContainerRef=s,this._menuItemInstance=f,this._dir=g,this._focusMonitor=D,this._ngZone=S,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Wi.yU.EMPTY,this._hoverSubscription=Wi.yU.EMPTY,this._menuCloseSubscription=Wi.yU.EMPTY,this._changeDetectorRef=(0,m.WQX)(m.gRc),this._handleTouchStart=P=>{A1(P)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new m.bkB,this.onMenuOpen=this.menuOpened,this.menuClosed=new m.bkB,this.onMenuClose=this.menuClosed,this._scrollStrategy=u,this._parentMaterialMenu=d instanceof eD?d:void 0,r.nativeElement.addEventListener("touchstart",this._handleTouchStart,vB)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,vB),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const r=this._createOverlay(t),s=r.getConfig(),u=s.positionStrategy;this._setPosition(t,u),s.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,r.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof eD&&(t._startAnimation(),t._directDescendantItems.changes.pipe(ve(t.close)).subscribe(()=>{u.withLockedPosition(!1).reapplyLastPosition(),u.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,r){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,r):this._element.nativeElement.focus(r)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const r=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,r instanceof eD?(r._resetAnimation(),r.lazyContent?r._animationDone.pipe((0,wr.p)(s=>"void"===s.toState),Gr(1),ve(r.lazyContent._attached)).subscribe({next:()=>r.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),r?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let r=0,s=t.parentMenu;for(;s;)r++,s=s.parentMenu;t.setElevation(r)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const r=this._getOverlayConfig(t);this._subscribeToPositions(t,r.positionStrategy),this._overlayRef=this._overlay.create(r),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new cB({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,r){t.setPositionClasses&&r.positionChanges.subscribe(s=>{const u="start"===s.connectionPair.overlayX?"after":"before",d="top"===s.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(u,d)):t.setPositionClasses(u,d)})}_setPosition(t,r){let[s,u]="before"===t.xPosition?["end","start"]:["start","end"],[d,f]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[g,D]=[d,f],[S,P]=[s,u],j=0;if(this.triggersSubmenu()){if(P=s="before"===t.xPosition?"start":"end",u=S="end"===s?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const Q=this._parentMaterialMenu.items.first;this._parentInnerPadding=Q?Q._getHostElement().offsetTop:0}j="bottom"===d?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(g="top"===d?"bottom":"top",D="top"===f?"bottom":"top");r.withPositions([{originX:s,originY:g,overlayX:S,overlayY:d,offsetY:j},{originX:u,originY:g,overlayX:P,overlayY:d,offsetY:j},{originX:s,originY:D,overlayX:S,overlayY:f,offsetY:-j},{originX:u,originY:D,overlayX:P,overlayY:f,offsetY:-j}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),r=this._overlayRef.detachments(),s=this._parentMaterialMenu?this._parentMaterialMenu.closed:cn(),u=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe((0,wr.p)(d=>d!==this._menuItemInstance),(0,wr.p)(()=>this._menuOpen)):cn();return(0,zf.h)(t,s,u,r)}_handleMousedown(t){S1(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const r=t.keyCode;(13===r||32===r)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===r&&"ltr"===this.dir||37===r&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe((0,wr.p)(t=>t===this._menuItemInstance&&!t.disabled),KI(0,$1)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof eD&&this.menu._isAnimating?this.menu._animationDone.pipe(Gr(1),KI(0,$1),ve(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new tB(t.templateRef,this._viewContainerRef)),this._portal}static#e=this.\u0275fac=function(r){return new(r||n)(m.rXU(lb),m.rXU(m.aKT),m.rXU(m.c1b),m.rXU(gB),m.rXU(W1,8),m.rXU(Ix,10),m.rXU(g2,8),m.rXU(R1),m.rXU(m.SKi))};static#t=this.\u0275dir=m.FsC({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(r,s){1&r&&m.bIt("click",function(d){return s._handleClick(d)})("mousedown",function(d){return s._handleMousedown(d)})("keydown",function(d){return s._handleKeydown(d)}),2&r&&m.BMQ("aria-haspopup",s.menu?"menu":null)("aria-expanded",s.menuOpen)("aria-controls",s.menuOpen?s.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],standalone:!0})}return n})(),MH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n});static#n=this.\u0275inj=m.G2t({providers:[RH],imports:[vl,T2,hl,vH,z1,hl]})}return n})(),_B=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["main-bar"]],standalone:!0,features:[m.aNF],decls:17,vars:1,consts:[["menu","matMenu"],[1,"spacer"],["mat-icon-button","",3,"matMenuTriggerFor"],["mat-menu-item",""],["routerLink","/game"],["data-test-id","game-entry"],["routerLink","/editor"],["data-test-id","editor-entry"]],template:function(r,s){if(1&r&&(m.j41(0,"mat-toolbar")(1,"span"),m.EFF(2,"Empathy"),m.k0s(),m.nrm(3,"span",1),m.j41(4,"button",2)(5,"mat-icon"),m.EFF(6,"menu"),m.k0s()(),m.j41(7,"mat-menu",null,0)(9,"button",3)(10,"a",4)(11,"span",5),m.EFF(12,"Game"),m.k0s()()(),m.j41(13,"button",3)(14,"a",6)(15,"span",7),m.EFF(16,"Editor"),m.k0s()()()()()),2&r){const u=m.sdS(8);m.R7$(4),m.Y8G("matMenuTriggerFor",u)}},dependencies:[jp,NU,PU,T$,C$,k$,N$,MH,eD,Ix,xH]})}return n})(),OH=(()=>{class n{constructor(){this.title="Empathy"}static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275cmp=m.VBU({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(r,s){1&r&&m.nrm(0,"main-bar")(1,"router-outlet")},dependencies:[Ap,_B],styles:["spacer[_ngcontent-%COMP%]{flex:1 1 auto}"]})}return n})(),PH=(()=>{class n{static#e=this.\u0275fac=function(r){return new(r||n)};static#t=this.\u0275mod=m.$C({type:n,bootstrap:[OH]});static#n=this.\u0275inj=m.G2t({providers:[l1()],imports:[_D,Zk,u1.register("ngsw-worker.js",{enabled:!(0,m.naY)(),registrationStrategy:"registerWhenStable:3000"}),_B]})}return n})();xb().bootstrapModule(PH).catch(n=>console.error(n))},5505:function(Bt){Bt.exports=function(){"use strict";var tt=function(_,I){return(tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,N){A.__proto__=N}||function(A,N){for(var L in N)Object.prototype.hasOwnProperty.call(N,L)&&(A[L]=N[L])})(_,I)},M=function(){return(M=Object.assign||function(_){for(var I,A=1,N=arguments.length;A<N;A++)for(var L in I=arguments[A])Object.prototype.hasOwnProperty.call(I,L)&&(_[L]=I[L]);return _}).apply(this,arguments)};function m(_,I,A){if(A||2===arguments.length)for(var N,L=0,U=I.length;L<U;L++)!N&&L in I||((N=N||Array.prototype.slice.call(I,0,L))[L]=I[L]);return _.concat(N||Array.prototype.slice.call(I))}var ie=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fe=Object.keys,se=Array.isArray;function te(_,I){return"object"!=typeof I||fe(I).forEach(function(A){_[A]=I[A]}),_}typeof Promise>"u"||ie.Promise||(ie.Promise=Promise);var ae=Object.getPrototypeOf,de={}.hasOwnProperty;function lt(_,I){return de.call(_,I)}function qe(_,I){"function"==typeof I&&(I=I(ae(_))),(typeof Reflect>"u"?fe:Reflect.ownKeys)(I).forEach(function(A){he(_,A,I[A])})}var $e=Object.defineProperty;function he(_,I,A,N){$e(_,I,te(A&&lt(A,"get")&&"function"==typeof A.get?{get:A.get,set:A.set,configurable:!0}:{value:A,configurable:!0,writable:!0},N))}function Ve(_){return{from:function(I){return _.prototype=Object.create(I.prototype),he(_.prototype,"constructor",_),{extend:qe.bind(null,_.prototype)}}}}var xe=Object.getOwnPropertyDescriptor,ee=[].slice;function Ue(_,I,A){return ee.call(_,I,A)}function Te(_,I){return I(_)}function Oe(_){if(!_)throw new Error("Assertion Failed")}function pe(_){ie.setImmediate?setImmediate(_):setTimeout(_,0)}function Be(_,I){if("string"==typeof I&&lt(_,I))return _[I];if(!I)return _;if("string"!=typeof I){for(var A=[],N=0,L=I.length;N<L;++N){var U=Be(_,I[N]);A.push(U)}return A}var J=I.indexOf(".");if(-1!==J){var ge=_[I.substr(0,J)];return null==ge?void 0:Be(ge,I.substr(J+1))}}function dt(_,I,A){if(_&&void 0!==I&&(!("isFrozen"in Object)||!Object.isFrozen(_)))if("string"!=typeof I&&"length"in I){Oe("string"!=typeof A&&"length"in A);for(var N=0,L=I.length;N<L;++N)dt(_,I[N],A[N])}else{var U,J,ge=I.indexOf(".");-1!==ge?(U=I.substr(0,ge),""===(J=I.substr(ge+1))?void 0===A?se(_)&&!isNaN(parseInt(U))?_.splice(U,1):delete _[U]:_[U]=A:dt(ge=(ge=_[U])&&lt(_,U)?ge:_[U]={},J,A)):void 0===A?se(_)&&!isNaN(parseInt(I))?_.splice(I,1):delete _[I]:_[I]=A}}function De(_){var I,A={};for(I in _)lt(_,I)&&(A[I]=_[I]);return A}var He=[].concat;function be(_){return He.apply([],_)}var Po="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(be([8,16,32,64].map(function(_){return["Int","Uint","Float"].map(function(I){return I+_+"Array"})}))).filter(function(_){return ie[_]}),at=new Set(Po.map(function(_){return ie[_]})),ot=null;function ce(_){return ot=new WeakMap,_=function I(A){if(!A||"object"!=typeof A)return A;var N=ot.get(A);if(N)return N;if(se(A)){ot.set(A,N=[]);for(var L=0,U=A.length;L<U;++L)N.push(I(A[L]))}else if(at.has(A.constructor))N=A;else{var J,ge=ae(A);for(J in N=ge===Object.prototype?{}:Object.create(ge),ot.set(A,N),A)lt(A,J)&&(N[J]=I(A[J]))}return N}(_),ot=null,_}var ne={}.toString;function W(_){return ne.call(_).slice(8,-1)}var ft=typeof Symbol<"u"?Symbol.iterator:"@@iterator",At="symbol"==typeof ft?function(_){var I;return null!=_&&(I=_[ft])&&I.apply(_)}:function(){return null};function xt(_,I){return 0<=(I=_.indexOf(I))&&_.splice(I,1),0<=I}var yn={};function rn(_){var I,A,N,L;if(1===arguments.length){if(se(_))return _.slice();if(this===yn&&"string"==typeof _)return[_];if(L=At(_)){for(A=[];!(N=L.next()).done;)A.push(N.value);return A}if(null==_)return[_];if("number"!=typeof(I=_.length))return[_];for(A=new Array(I);I--;)A[I]=_[I];return A}for(I=arguments.length,A=new Array(I);I--;)A[I]=arguments[I];return A}var pn=typeof Symbol<"u"?function(_){return"AsyncFunction"===_[Symbol.toStringTag]}:function(){return!1},oo=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(In=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),$n={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Ge(_,I){this.name=_,this.message=I}function me(_,I){return _+". Errors: "+Object.keys(I).map(function(A){return I[A].toString()}).filter(function(A,N,L){return L.indexOf(A)===N}).join("\n")}function ye(_,I,A,N){this.failures=I,this.failedKeys=N,this.successCount=A,this.message=me(_,I)}function K(_,I){this.name="BulkError",this.failures=Object.keys(I).map(function(A){return I[A]}),this.failuresByPos=I,this.message=me(_,this.failures)}Ve(Ge).from(Error).extend({toString:function(){return this.name+": "+this.message}}),Ve(ye).from(Ge),Ve(K).from(Ge);var H=oo.reduce(function(_,I){return _[I]=I+"Error",_},{}),V=Ge,q=oo.reduce(function(_,I){var A=I+"Error";function N(L,U){this.name=A,L?"string"==typeof L?(this.message="".concat(L).concat(U?"\n "+U:""),this.inner=U||null):"object"==typeof L&&(this.message="".concat(L.name," ").concat(L.message),this.inner=L):(this.message=$n[I]||A,this.inner=null)}return Ve(N).from(V),_[I]=N,_},{});q.Syntax=SyntaxError,q.Type=TypeError,q.Range=RangeError;var X=In.reduce(function(_,I){return _[I+"Error"]=q[I],_},{}),re=oo.reduce(function(_,I){return-1===["Syntax","Type","Range"].indexOf(I)&&(_[I+"Error"]=q[I]),_},{});function oe(){}function Je(_){return _}function Ct(_,I){return null==_||_===Je?I:function(A){return I(_(A))}}function Ft(_,I){return function(){_.apply(this,arguments),I.apply(this,arguments)}}function Mt(_,I){return _===oe?I:function(){var A=_.apply(this,arguments);void 0!==A&&(arguments[0]=A);var N=this.onsuccess,L=this.onerror;this.onsuccess=null,this.onerror=null;var U=I.apply(this,arguments);return N&&(this.onsuccess=this.onsuccess?Ft(N,this.onsuccess):N),L&&(this.onerror=this.onerror?Ft(L,this.onerror):L),void 0!==U?U:A}}function jt(_,I){return _===oe?I:function(){_.apply(this,arguments);var A=this.onsuccess,N=this.onerror;this.onsuccess=this.onerror=null,I.apply(this,arguments),A&&(this.onsuccess=this.onsuccess?Ft(A,this.onsuccess):A),N&&(this.onerror=this.onerror?Ft(N,this.onerror):N)}}function on(_,I){return _===oe?I:function(A){var N=_.apply(this,arguments);te(A,N);var L=this.onsuccess,U=this.onerror;return this.onsuccess=null,this.onerror=null,A=I.apply(this,arguments),L&&(this.onsuccess=this.onsuccess?Ft(L,this.onsuccess):L),U&&(this.onerror=this.onerror?Ft(U,this.onerror):U),void 0===N?void 0===A?void 0:A:te(N,A)}}function en(_,I){return _===oe?I:function(){return!1!==I.apply(this,arguments)&&_.apply(this,arguments)}}function ln(_,I){return _===oe?I:function(){var A=_.apply(this,arguments);if(A&&"function"==typeof A.then){for(var N=this,L=arguments.length,U=new Array(L);L--;)U[L]=arguments[L];return A.then(function(){return I.apply(N,U)})}return I.apply(this,arguments)}}re.ModifyError=ye,re.DexieError=Ge,re.BulkError=K;var $t=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function hn(_){$t=_}var In,tn={},qn=100,Ui=(oo=(oo=(Po=typeof Promise>"u"?[]:function(){var _=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[_,ae(_),_];var I=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[I,ae(I),_]}())[1])&&oo.then,(In=Po[0])&&In.constructor),jr=!!(Po=Po[2]),_n=function(_,I){rr.push([_,I]),Nr&&(queueMicrotask(ni),Nr=!1)},St=!0,Nr=!0,Dr=[],Cr=[],go=Je,mr={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oe,pgp:!1,env:{},finalize:oe},Zt=mr,rr=[],vo=0,Yn=[];function Pt(_){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var I=this._PSD=Zt;if("function"!=typeof _){if(_!==tn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&_o(this,this._value))}this._state=null,this._value=null,++I.ref,function A(N,L){try{L(function(U){if(null===N._state){if(U===N)throw new TypeError("A promise cannot be resolved with itself.");var J=N._lib&&gi();U&&"function"==typeof U.then?A(N,function(ge,ke){U instanceof Pt?U._then(ge,ke):U.then(ge,ke)}):(N._state=!0,N._value=U,ga(N)),J&&wi()}},_o.bind(null,N))}catch(U){_o(N,U)}}(this,_)}var $i={get:function(){var _=Zt,I=Ds;function A(N,L){var U=this,J=!_.global&&(_!==Zt||I!==Ds),ge=J&&!Ii(),ke=new Pt(function(Pe,et){yo(U,new Gs(Rc(N,_,J,ge),Rc(L,_,J,ge),Pe,et,_))});return this._consoleTask&&(ke._consoleTask=this._consoleTask),ke}return A.prototype=tn,A},set:function(_){he(this,"then",_&&_.prototype===tn?$i:{get:function(){return _},set:$i.set})}};function Gs(_,I,A,N,L){this.onFulfilled="function"==typeof _?_:null,this.onRejected="function"==typeof I?I:null,this.resolve=A,this.reject=N,this.psd=L}function _o(_,I){var A,N;Cr.push(I),null===_._state&&(A=_._lib&&gi(),I=go(I),_._state=!1,_._value=I,N=_,Dr.some(function(L){return L._value===N._value})||Dr.push(N),ga(_),A&&wi())}function ga(_){var I=_._listeners;_._listeners=[];for(var A=0,N=I.length;A<N;++A)yo(_,I[A]);var L=_._PSD;--L.ref||L.finalize(),0===vo&&(++vo,_n(function(){0==--vo&&Hi()},[]))}function yo(_,I){if(null!==_._state){var A=_._state?I.onFulfilled:I.onRejected;if(null===A)return(_._state?I.resolve:I.reject)(_._value);++I.psd.ref,++vo,_n(Ur,[A,_,I])}else _._listeners.push(I)}function Ur(_,I,A){try{var N,L=I._value;!I._state&&Cr.length&&(Cr=[]),N=$t&&I._consoleTask?I._consoleTask.run(function(){return _(L)}):_(L),I._state||-1!==Cr.indexOf(L)||function(U){for(var J=Dr.length;J;)if(Dr[--J]._value===U._value)return Dr.splice(J,1)}(I),A.resolve(N)}catch(U){A.reject(U)}finally{0==--vo&&Hi(),--A.psd.ref||A.psd.finalize()}}function ni(){si(mr,function(){gi()&&wi()})}function gi(){var _=St;return Nr=St=!1,_}function wi(){var _,I,A;do{for(;0<rr.length;)for(_=rr,rr=[],A=_.length,I=0;I<A;++I){var N=_[I];N[0].apply(null,N[1])}}while(0<rr.length);Nr=St=!0}function Hi(){var _=Dr;Dr=[],_.forEach(function(N){N._PSD.onunhandled.call(null,N._value,N)});for(var I=Yn.slice(0),A=I.length;A;)I[--A]()}function va(_){return new Pt(tn,!1,_)}function gn(_,I){var A=Zt;return function(){var N=gi(),L=Zt;try{return es(A,!0),_.apply(this,arguments)}catch(U){I&&I(U)}finally{es(L,!1),N&&wi()}}}qe(Pt.prototype,{then:$i,_then:function(_,I){yo(this,new Gs(null,null,_,I,Zt))},catch:function(_){if(1===arguments.length)return this.then(null,_);var I=_,A=arguments[1];return this.then(null,"function"==typeof I?function(N){return(N instanceof I?A:va)(N)}:function(N){return(N&&N.name===I?A:va)(N)})},finally:function(_){return this.then(function(I){return Pt.resolve(_()).then(function(){return I})},function(I){return Pt.resolve(_()).then(function(){return va(I)})})},timeout:function(_,I){var A=this;return _<1/0?new Pt(function(N,L){var U=setTimeout(function(){return L(new q.Timeout(I))},_);A.then(N,L).finally(clearTimeout.bind(null,U))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&he(Pt.prototype,Symbol.toStringTag,"Dexie.Promise"),mr.env=As(),qe(Pt,{all:function(){var _=rn.apply(null,arguments).map(Ss);return new Pt(function(I,A){0===_.length&&I([]);var N=_.length;_.forEach(function(L,U){return Pt.resolve(L).then(function(J){_[U]=J,--N||I(_)},A)})})},resolve:function(_){return _ instanceof Pt?_:_&&"function"==typeof _.then?new Pt(function(I,A){_.then(I,A)}):new Pt(tn,!0,_)},reject:va,race:function(){var _=rn.apply(null,arguments).map(Ss);return new Pt(function(I,A){_.map(function(N){return Pt.resolve(N).then(I,A)})})},PSD:{get:function(){return Zt},set:function(_){return Zt=_}},totalEchoes:{get:function(){return Ds}},newPSD:vr,usePSD:si,scheduler:{get:function(){return _n},set:function(_){_n=_}},rejectionMapper:{get:function(){return go},set:function(_){go=_}},follow:function(_,I){return new Pt(function(A,N){return vr(function(L,U){var J=Zt;J.unhandleds=[],J.onunhandled=U,J.finalize=Ft(function(){var ge,ke=this;ge=function(){0===ke.unhandleds.length?L():U(ke.unhandleds[0])},Yn.push(function Pe(){ge(),Yn.splice(Yn.indexOf(Pe),1)}),++vo,_n(function(){0==--vo&&Hi()},[])},J.finalize),_()},I,A,N)})}}),Ui&&(Ui.allSettled&&he(Pt,"allSettled",function(){var _=rn.apply(null,arguments).map(Ss);return new Pt(function(I){0===_.length&&I([]);var A=_.length,N=new Array(A);_.forEach(function(L,U){return Pt.resolve(L).then(function(J){return N[U]={status:"fulfilled",value:J}},function(J){return N[U]={status:"rejected",reason:J}}).then(function(){return--A||I(N)})})})}),Ui.any&&typeof AggregateError<"u"&&he(Pt,"any",function(){var _=rn.apply(null,arguments).map(Ss);return new Pt(function(I,A){0===_.length&&A(new AggregateError([]));var N=_.length,L=new Array(N);_.forEach(function(U,J){return Pt.resolve(U).then(function(ge){return I(ge)},function(ge){L[J]=ge,--N||A(new AggregateError(L))})})})}));var gr={awaits:0,echoes:0,id:0},Jo=0,qs=[],bo=0,Ds=0,Cs=0;function vr(_,I,A,N){var L=Zt,U=Object.create(L);return U.parent=L,U.ref=0,U.global=!1,U.id=++Cs,U.env=jr?{Promise:Pt,PromiseProp:{value:Pt,configurable:!0,writable:!0},all:Pt.all,race:Pt.race,allSettled:Pt.allSettled,any:Pt.any,resolve:Pt.resolve,reject:Pt.reject}:{},I&&te(U,I),++L.ref,U.finalize=function(){--this.parent.ref||this.parent.finalize()},N=si(U,_,A,N),0===U.ref&&U.finalize(),N}function Ts(){return gr.id||(gr.id=++Jo),++gr.awaits,gr.echoes+=qn,gr.id}function Ii(){return!!gr.awaits&&(0==--gr.awaits&&(gr.id=0),gr.echoes=gr.awaits*qn,!0)}function Ss(_){return gr.echoes&&_&&_.constructor===Ui?(Ts(),_.then(function(I){return Ii(),I},function(I){return Ii(),br(I)})):_}function Ac(){var _=qs[qs.length-1];qs.pop(),es(_,!1)}function es(_,I){var A,N=Zt;(I?!gr.echoes||bo++&&_===Zt:!bo||--bo&&_===Zt)||queueMicrotask(I?function(L){++Ds,gr.echoes&&0!=--gr.echoes||(gr.echoes=gr.awaits=gr.id=0),qs.push(Zt),es(L,!0)}.bind(null,_):Ac),_!==Zt&&(Zt=_,N===mr&&(mr.env=As()),jr&&(A=mr.env.Promise,I=_.env,(N.global||_.global)&&(Object.defineProperty(ie,"Promise",I.PromiseProp),A.all=I.all,A.race=I.race,A.resolve=I.resolve,A.reject=I.reject,I.allSettled&&(A.allSettled=I.allSettled),I.any&&(A.any=I.any))))}function As(){var _=ie.Promise;return jr?{Promise:_,PromiseProp:Object.getOwnPropertyDescriptor(ie,"Promise"),all:_.all,race:_.race,allSettled:_.allSettled,any:_.any,resolve:_.resolve,reject:_.reject}:{}}function si(_,I,A,N,L){var U=Zt;try{return es(_,!0),I(A,N,L)}finally{es(U,!1)}}function Rc(_,I,A,N){return"function"!=typeof _?_:function(){var L=Zt;A&&Ts(),es(I,!0);try{return _.apply(this,arguments)}finally{es(L,!1),N&&queueMicrotask(Ii)}}}function Rs(_){Promise===Ui&&0===gr.echoes?0===bo?_():enqueueNativeMicroTask(_):setTimeout(_,0)}-1===(""+oo).indexOf("[native code]")&&(Ts=Ii=oe);var br=Pt.reject,xi="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Gd="String expected.",Qs=[],xs="__dbnames",_a="readonly",fl="readwrite";function ya(_,I){return _?I?function(){return _.apply(this,arguments)&&I.apply(this,arguments)}:_:I}var Jf={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Xs(_){return"string"!=typeof _||/\./.test(_)?function(I){return I}:function(I){return void 0===I[_]&&_ in I&&delete(I=ce(I))[_],I}}function ns(){throw q.Type()}function Gn(_,I){try{var A=Wa(_),N=Wa(I);if(A!==N)return"Array"===A?1:"Array"===N?-1:"binary"===A?1:"binary"===N?-1:"string"===A?1:"string"===N?-1:"Date"===A?1:"Date"!==N?NaN:-1;switch(A){case"number":case"Date":case"string":return I<_?1:_<I?-1:0;case"binary":return function(L,U){for(var J=L.length,ge=U.length,ke=J<ge?J:ge,Pe=0;Pe<ke;++Pe)if(L[Pe]!==U[Pe])return L[Pe]<U[Pe]?-1:1;return J===ge?0:J<ge?-1:1}(xc(_),xc(I));case"Array":return function(L,U){for(var J=L.length,ge=U.length,ke=J<ge?J:ge,Pe=0;Pe<ke;++Pe){var et=Gn(L[Pe],U[Pe]);if(0!==et)return et}return J===ge?0:J<ge?-1:1}(_,I)}}catch{}return NaN}function Wa(_){var I=typeof _;return"object"!=I?I:ArrayBuffer.isView(_)||"ArrayBuffer"===(_=W(_))?"binary":_}function xc(_){return _ instanceof Uint8Array?_:ArrayBuffer.isView(_)?new Uint8Array(_.buffer,_.byteOffset,_.byteLength):new Uint8Array(_)}var zi=(_r.prototype._trans=function(_,I,A){var N=this._tx||Zt.trans,L=this.name,U=$t&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat("readonly"===_?"read":"write"," ").concat(this.name));function J(Pe,et,Ce){if(!Ce.schema[L])throw new q.NotFound("Table "+L+" not part of transaction");return I(Ce.idbtrans,Ce)}var ge=gi();try{var ke=N&&N.db._novip===this.db._novip?N===Zt.trans?N._promise(_,J,A):vr(function(){return N._promise(_,J,A)},{trans:N,transless:Zt.transless||Zt}):function Pe(et,Ce,Qe,Ne){if(et.idbdb&&(et._state.openComplete||Zt.letThrough||et._vip)){var Ke=et._createTransaction(Ce,Qe,et._dbSchema);try{Ke.create(),et._state.PR1398_maxLoop=3}catch(Xe){return Xe.name===H.InvalidState&&et.isOpen()&&0<--et._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),et.close({disableAutoOpen:!1}),et.open().then(function(){return Pe(et,Ce,Qe,Ne)})):br(Xe)}return Ke._promise(Ce,function(Xe,je){return vr(function(){return Zt.trans=Ke,Ne(Xe,je,Ke)})}).then(function(Xe){if("readwrite"===Ce)try{Ke.idbtrans.commit()}catch{}return"readonly"===Ce?Xe:Ke._completion.then(function(){return Xe})})}if(et._state.openComplete)return br(new q.DatabaseClosed(et._state.dbOpenError));if(!et._state.isBeingOpened){if(!et._state.autoOpen)return br(new q.DatabaseClosed);et.open().catch(oe)}return et._state.dbReadyPromise.then(function(){return Pe(et,Ce,Qe,Ne)})}(this.db,_,[this.name],J);return U&&(ke._consoleTask=U,ke=ke.catch(function(Pe){return console.trace(Pe),br(Pe)})),ke}finally{ge&&wi()}},_r.prototype.get=function(_,I){var A=this;return _&&_.constructor===Object?this.where(_).first(I):null==_?br(new q.Type("Invalid argument to Table.get()")):this._trans("readonly",function(N){return A.core.get({trans:N,key:_}).then(function(L){return A.hook.reading.fire(L)})}).then(I)},_r.prototype.where=function(_){if("string"==typeof _)return new this.db.WhereClause(this,_);if(se(_))return new this.db.WhereClause(this,"[".concat(_.join("+"),"]"));var I=fe(_);if(1===I.length)return this.where(I[0]).equals(_[I[0]]);var A=this.schema.indexes.concat(this.schema.primKey).filter(function(ke){if(ke.compound&&I.every(function(et){return 0<=ke.keyPath.indexOf(et)})){for(var Pe=0;Pe<I.length;++Pe)if(-1===I.indexOf(ke.keyPath[Pe]))return!1;return!0}return!1}).sort(function(ke,Pe){return ke.keyPath.length-Pe.keyPath.length})[0];if(A&&"\uffff"!==this.db._maxKey){var J=A.keyPath.slice(0,I.length);return this.where(J).equals(J.map(function(Pe){return _[Pe]}))}!A&&$t&&console.warn("The query ".concat(JSON.stringify(_)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(I.join("+"),"]"));var N=this.schema.idxByName,L=this.db._deps.indexedDB;function U(ke,Pe){return 0===L.cmp(ke,Pe)}J=(ge=I.reduce(function(Qe,Pe){var et=Qe[0],Ce=Qe[1],Ne=(Qe=N[Pe],_[Pe]);return[et||Qe,et||!Qe?ya(Ce,Qe&&Qe.multi?function(Ke){return Ke=Be(Ke,Pe),se(Ke)&&Ke.some(function(Xe){return U(Ne,Xe)})}:function(Ke){return U(Ne,Be(Ke,Pe))}):Ce]},[null,null]))[0];var ge=ge[1];return J?this.where(J.name).equals(_[J.keyPath]).filter(ge):A?this.filter(ge):this.where(I).equals("")},_r.prototype.filter=function(_){return this.toCollection().and(_)},_r.prototype.count=function(_){return this.toCollection().count(_)},_r.prototype.offset=function(_){return this.toCollection().offset(_)},_r.prototype.limit=function(_){return this.toCollection().limit(_)},_r.prototype.each=function(_){return this.toCollection().each(_)},_r.prototype.toArray=function(_){return this.toCollection().toArray(_)},_r.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},_r.prototype.orderBy=function(_){return new this.db.Collection(new this.db.WhereClause(this,se(_)?"[".concat(_.join("+"),"]"):_))},_r.prototype.reverse=function(){return this.toCollection().reverse()},_r.prototype.mapToClass=function(_){var I,A=this.db,N=this.name;function L(){return null!==I&&I.apply(this,arguments)||this}(this.schema.mappedClass=_).prototype instanceof ns&&(function(ke,Pe){if("function"!=typeof Pe&&null!==Pe)throw new TypeError("Class extends value "+String(Pe)+" is not a constructor or null");function et(){this.constructor=ke}tt(ke,Pe),ke.prototype=null===Pe?Object.create(Pe):(et.prototype=Pe.prototype,new et)}(L,I=_),Object.defineProperty(L.prototype,"db",{get:function(){return A},enumerable:!1,configurable:!0}),L.prototype.table=function(){return N},_=L);for(var U=new Set,J=_.prototype;J;J=ae(J))Object.getOwnPropertyNames(J).forEach(function(ke){return U.add(ke)});function ge(ke){if(!ke)return ke;var Pe,et=Object.create(_.prototype);for(Pe in ke)if(!U.has(Pe))try{et[Pe]=ke[Pe]}catch{}return et}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=ge,this.hook("reading",ge),_},_r.prototype.defineClass=function(){return this.mapToClass(function(_){te(this,_)})},_r.prototype.add=function(_,I){var A=this,N=this.schema.primKey,U=N.keyPath,J=_;return U&&N.auto&&(J=Xs(U)(_)),this._trans("readwrite",function(ge){return A.core.mutate({trans:ge,type:"add",keys:null!=I?[I]:null,values:[J]})}).then(function(ge){return ge.numFailures?Pt.reject(ge.failures[0]):ge.lastResult}).then(function(ge){if(U)try{dt(_,U,ge)}catch{}return ge})},_r.prototype.update=function(_,I){return"object"!=typeof _||se(_)?this.where(":id").equals(_).modify(I):void 0===(_=Be(_,this.schema.primKey.keyPath))?br(new q.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(_).modify(I)},_r.prototype.put=function(_,I){var A=this,N=this.schema.primKey,U=N.keyPath,J=_;return U&&N.auto&&(J=Xs(U)(_)),this._trans("readwrite",function(ge){return A.core.mutate({trans:ge,type:"put",values:[J],keys:null!=I?[I]:null})}).then(function(ge){return ge.numFailures?Pt.reject(ge.failures[0]):ge.lastResult}).then(function(ge){if(U)try{dt(_,U,ge)}catch{}return ge})},_r.prototype.delete=function(_){var I=this;return this._trans("readwrite",function(A){return I.core.mutate({trans:A,type:"delete",keys:[_]})}).then(function(A){return A.numFailures?Pt.reject(A.failures[0]):void 0})},_r.prototype.clear=function(){var _=this;return this._trans("readwrite",function(I){return _.core.mutate({trans:I,type:"deleteRange",range:Jf})}).then(function(I){return I.numFailures?Pt.reject(I.failures[0]):void 0})},_r.prototype.bulkGet=function(_){var I=this;return this._trans("readonly",function(A){return I.core.getMany({keys:_,trans:A}).then(function(N){return N.map(function(L){return I.hook.reading.fire(L)})})})},_r.prototype.bulkAdd=function(_,I,A){var N=this,L=Array.isArray(I)?I:void 0,U=(A=A||(L?void 0:I))?A.allKeys:void 0;return this._trans("readwrite",function(J){var ge=(Pe=N.schema.primKey).auto;if((Pe=Pe.keyPath)&&L)throw new q.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(L&&L.length!==_.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var ke=_.length,Pe=Pe&&ge?_.map(Xs(Pe)):_;return N.core.mutate({trans:J,type:"add",keys:L,values:Pe,wantResults:U}).then(function(Ke){var Ce=Ke.numFailures,Qe=Ke.results,Ne=Ke.lastResult;if(Ke=Ke.failures,0===Ce)return U?Qe:Ne;throw new K("".concat(N.name,".bulkAdd(): ").concat(Ce," of ").concat(ke," operations failed"),Ke)})})},_r.prototype.bulkPut=function(_,I,A){var N=this,L=Array.isArray(I)?I:void 0,U=(A=A||(L?void 0:I))?A.allKeys:void 0;return this._trans("readwrite",function(J){var ge=(Pe=N.schema.primKey).auto;if((Pe=Pe.keyPath)&&L)throw new q.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(L&&L.length!==_.length)throw new q.InvalidArgument("Arguments objects and keys must have the same length");var ke=_.length,Pe=Pe&&ge?_.map(Xs(Pe)):_;return N.core.mutate({trans:J,type:"put",keys:L,values:Pe,wantResults:U}).then(function(Ke){var Ce=Ke.numFailures,Qe=Ke.results,Ne=Ke.lastResult;if(Ke=Ke.failures,0===Ce)return U?Qe:Ne;throw new K("".concat(N.name,".bulkPut(): ").concat(Ce," of ").concat(ke," operations failed"),Ke)})})},_r.prototype.bulkUpdate=function(_){var I=this,A=this.core,N=_.map(function(J){return J.key}),L=_.map(function(J){return J.changes}),U=[];return this._trans("readwrite",function(J){return A.getMany({trans:J,keys:N,cache:"clone"}).then(function(ge){var ke=[],Pe=[];_.forEach(function(Ce,Qe){var Ne=Ce.key,Ke=Ce.changes,Xe=ge[Qe];if(Xe){for(var je=0,pt=Object.keys(Ke);je<pt.length;je++){var We=pt[je],rt=Ke[We];if(We===I.schema.primKey.keyPath){if(0!==Gn(rt,Ne))throw new q.Constraint("Cannot update primary key in bulkUpdate()")}else dt(Xe,We,rt)}U.push(Qe),ke.push(Ne),Pe.push(Xe)}});var et=ke.length;return A.mutate({trans:J,type:"put",keys:ke,values:Pe,updates:{keys:N,changeSpecs:L}}).then(function(Ce){var Qe=Ce.numFailures,Ne=Ce.failures;if(0===Qe)return et;for(var Ke=0,Xe=Object.keys(Ne);Ke<Xe.length;Ke++){var je,pt=Xe[Ke],We=U[Number(pt)];null!=We&&(je=Ne[pt],delete Ne[pt],Ne[We]=je)}throw new K("".concat(I.name,".bulkUpdate(): ").concat(Qe," of ").concat(et," operations failed"),Ne)})})})},_r.prototype.bulkDelete=function(_){var I=this,A=_.length;return this._trans("readwrite",function(N){return I.core.mutate({trans:N,type:"delete",keys:_})}).then(function(J){var L=J.numFailures,U=J.lastResult;if(J=J.failures,0===L)return U;throw new K("".concat(I.name,".bulkDelete(): ").concat(L," of ").concat(A," operations failed"),J)})},_r);function _r(){}function Ys(_){function I(J,ge){if(ge){for(var ke=arguments.length,Pe=new Array(ke-1);--ke;)Pe[ke-1]=arguments[ke];return A[J].subscribe.apply(null,Pe),_}if("string"==typeof J)return A[J]}var A={};I.addEventType=U;for(var N=1,L=arguments.length;N<L;++N)U(arguments[N]);return I;function U(J,ge,ke){if("object"!=typeof J){var Pe;ge=ge||en;var et={subscribers:[],fire:ke=ke||oe,subscribe:function(Ce){-1===et.subscribers.indexOf(Ce)&&(et.subscribers.push(Ce),et.fire=ge(et.fire,Ce))},unsubscribe:function(Ce){et.subscribers=et.subscribers.filter(function(Qe){return Qe!==Ce}),et.fire=et.subscribers.reduce(ge,ke)}};return A[J]=I[J]=et}fe(Pe=J).forEach(function(Ce){var Qe=Pe[Ce];if(se(Qe))U(Ce,Pe[Ce][0],Pe[Ce][1]);else{if("asap"!==Qe)throw new q.InvalidArgument("Invalid event config");var Ne=U(Ce,Je,function(){for(var Ke=arguments.length,Xe=new Array(Ke);Ke--;)Xe[Ke]=arguments[Ke];Ne.subscribers.forEach(function(je){pe(function(){je.apply(null,Xe)})})})}})}}function Mc(_,I){return Ve(I).from({prototype:_}),I}function ba(_,I){return!(_.filter||_.algorithm||_.or)&&(I?_.justLimit:!_.replayFilter)}function _u(_,I){_.filter=ya(_.filter,I)}function Zs(_,I,A){var N=_.replayFilter;_.replayFilter=N?function(){return ya(N(),I())}:I,_.justLimit=A&&!N}function Ms(_,I){if(_.isPrimKey)return I.primaryKey;var A=I.getIndexByKeyPath(_.index);if(!A)throw new q.Schema("KeyPath "+_.index+" on object store "+I.name+" is not indexed");return A}function Ea(_,I,A){var N=Ms(_,I.schema);return I.openCursor({trans:A,values:!_.keysOnly,reverse:"prev"===_.dir,unique:!!_.unique,query:{index:N,range:_.range}})}function yu(_,I,A,N){var L=_.replayFilter?ya(_.filter,_.replayFilter()):_.filter;if(_.or){var U={},J=function(ge,ke,Pe){var et,Ce;L&&!L(ke,Pe,function(Qe){return ke.stop(Qe)},function(Qe){return ke.fail(Qe)})||("[object ArrayBuffer]"==(Ce=""+(et=ke.primaryKey))&&(Ce=""+new Uint8Array(et)),lt(U,Ce)||(U[Ce]=!0,I(ge,ke,Pe)))};return Promise.all([_.or._iterate(J,A),Ga(Ea(_,N,A),_.algorithm,J,!_.keysOnly&&_.valueMapper)])}return Ga(Ea(_,N,A),ya(_.algorithm,L),I,!_.keysOnly&&_.valueMapper)}function Ga(_,I,A,N){var L=gn(N?function(U,J,ge){return A(N(U),J,ge)}:A);return _.then(function(U){if(U)return U.start(function(){var J=function(){return U.continue()};I&&!I(U,function(ge){return J=ge},function(ge){U.stop(ge),J=oe},function(ge){U.fail(ge),J=oe})||L(U.value,U,function(ge){return J=ge}),J()})})}Po=Symbol();var qa=(pl.prototype.execute=function(_){if(void 0!==this.add){var I=this.add;if(se(I))return m(m([],se(_)?_:[],!0),I,!0).sort();if("number"==typeof I)return(Number(_)||0)+I;if("bigint"==typeof I)try{return BigInt(_)+I}catch{return BigInt(0)+I}throw new TypeError("Invalid term ".concat(I))}if(void 0!==this.remove){var A=this.remove;if(se(A))return se(_)?_.filter(function(N){return!A.includes(N)}).sort():[];if("number"==typeof A)return Number(_)-A;if("bigint"==typeof A)try{return BigInt(_)-A}catch{return BigInt(0)-A}throw new TypeError("Invalid subtrahend ".concat(A))}return(I=null===(I=this.replacePrefix)||void 0===I?void 0:I[0])&&"string"==typeof _&&_.startsWith(I)?this.replacePrefix[1]+_.substring(I.length):_},pl);function pl(_){Object.assign(this,_)}var Ig=(Qn.prototype._read=function(_,I){var A=this._ctx;return A.error?A.table._trans(null,br.bind(null,A.error)):A.table._trans("readonly",_).then(I)},Qn.prototype._write=function(_){var I=this._ctx;return I.error?I.table._trans(null,br.bind(null,I.error)):I.table._trans("readwrite",_,"locked")},Qn.prototype._addAlgorithm=function(_){var I=this._ctx;I.algorithm=ya(I.algorithm,_)},Qn.prototype._iterate=function(_,I){return yu(this._ctx,_,I,this._ctx.table.core)},Qn.prototype.clone=function(_){var I=Object.create(this.constructor.prototype),A=Object.create(this._ctx);return _&&te(A,_),I._ctx=A,I},Qn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Qn.prototype.each=function(_){var I=this._ctx;return this._read(function(A){return yu(I,_,A,I.table.core)})},Qn.prototype.count=function(_){var I=this;return this._read(function(A){var N=I._ctx,L=N.table.core;if(ba(N,!0))return L.count({trans:A,query:{index:Ms(N,L.schema),range:N.range}}).then(function(J){return Math.min(J,N.limit)});var U=0;return yu(N,function(){return++U,!1},A,L).then(function(){return U})}).then(_)},Qn.prototype.sortBy=function(_,I){var A=_.split(".").reverse(),N=A[0],L=A.length-1;function U(ke,Pe){return Pe?U(ke[A[Pe]],Pe-1):ke[N]}var J="next"===this._ctx.dir?1:-1;function ge(ke,Pe){return(ke=U(ke,L))<(Pe=U(Pe,L))?-J:Pe<ke?J:0}return this.toArray(function(ke){return ke.sort(ge)}).then(I)},Qn.prototype.toArray=function(_){var I=this;return this._read(function(A){var N=I._ctx;if("next"===N.dir&&ba(N,!0)&&0<N.limit){var L=N.valueMapper,U=Ms(N,N.table.core.schema);return N.table.core.query({trans:A,limit:N.limit,values:!0,query:{index:U,range:N.range}}).then(function(ge){return ge=ge.result,L?ge.map(L):ge})}var J=[];return yu(N,function(ge){return J.push(ge)},A,N.table.core).then(function(){return J})},_)},Qn.prototype.offset=function(_){var I=this._ctx;return _<=0||(I.offset+=_,ba(I)?Zs(I,function(){var A=_;return function(N,L){return 0===A||(1===A?--A:L(function(){N.advance(A),A=0}),!1)}}):Zs(I,function(){var A=_;return function(){return--A<0}})),this},Qn.prototype.limit=function(_){return this._ctx.limit=Math.min(this._ctx.limit,_),Zs(this._ctx,function(){var I=_;return function(A,N,L){return--I<=0&&N(L),0<=I}},!0),this},Qn.prototype.until=function(_,I){return _u(this._ctx,function(A,N,L){return!_(A.value)||(N(L),I)}),this},Qn.prototype.first=function(_){return this.limit(1).toArray(function(I){return I[0]}).then(_)},Qn.prototype.last=function(_){return this.reverse().first(_)},Qn.prototype.filter=function(_){var I;return _u(this._ctx,function(A){return _(A.value)}),(I=this._ctx).isMatch=ya(I.isMatch,_),this},Qn.prototype.and=function(_){return this.filter(_)},Qn.prototype.or=function(_){return new this.db.WhereClause(this._ctx.table,_,this)},Qn.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Qn.prototype.desc=function(){return this.reverse()},Qn.prototype.eachKey=function(_){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(A,N){_(N.key,N)})},Qn.prototype.eachUniqueKey=function(_){return this._ctx.unique="unique",this.eachKey(_)},Qn.prototype.eachPrimaryKey=function(_){var I=this._ctx;return I.keysOnly=!I.isMatch,this.each(function(A,N){_(N.primaryKey,N)})},Qn.prototype.keys=function(_){var I=this._ctx;I.keysOnly=!I.isMatch;var A=[];return this.each(function(N,L){A.push(L.key)}).then(function(){return A}).then(_)},Qn.prototype.primaryKeys=function(_){var I=this._ctx;if("next"===I.dir&&ba(I,!0)&&0<I.limit)return this._read(function(N){var L=Ms(I,I.table.core.schema);return I.table.core.query({trans:N,values:!1,limit:I.limit,query:{index:L,range:I.range}})}).then(function(N){return N.result}).then(_);I.keysOnly=!I.isMatch;var A=[];return this.each(function(N,L){A.push(L.primaryKey)}).then(function(){return A}).then(_)},Qn.prototype.uniqueKeys=function(_){return this._ctx.unique="unique",this.keys(_)},Qn.prototype.firstKey=function(_){return this.limit(1).keys(function(I){return I[0]}).then(_)},Qn.prototype.lastKey=function(_){return this.reverse().firstKey(_)},Qn.prototype.distinct=function(){var _;if(!(_=(_=this._ctx).index&&_.table.schema.idxByName[_.index])||!_.multi)return this;var I={};return _u(this._ctx,function(L){var N=L.primaryKey.toString();return L=lt(I,N),I[N]=!0,!L}),this},Qn.prototype.modify=function(_){var I=this,A=this._ctx;return this._write(function(N){var L,U,J;function ge(je,rt){var We=rt.failures;Ke+=je-(rt=rt.numFailures);for(var It=0,Lt=fe(We);It<Lt.length;It++)Ne.push(We[Lt[It]])}J="function"==typeof _?_:(L=fe(_),U=L.length,function(je){for(var pt=!1,We=0;We<U;++We){var rt=L[We],It=_[rt],Lt=Be(je,rt);It instanceof qa?(dt(je,rt,It.execute(Lt)),pt=!0):Lt!==It&&(dt(je,rt,It),pt=!0)}return pt});var ke=A.table.core,Pe=ke.schema.primaryKey,et=Pe.outbound,Ce=Pe.extractKey,Qe=I.db._options.modifyChunkSize||200,Ne=[],Ke=0,Xe=[];return I.clone().primaryKeys().then(function(je){var We=ba(A)&&A.limit===1/0&&("function"!=typeof _||_===Oc)&&{index:A.index,range:A.range};return function pt(rt){var It=Math.min(Qe,je.length-rt);return ke.getMany({trans:N,keys:je.slice(rt,rt+It),cache:"immutable"}).then(function(Lt){for(var qt=[],Vt=[],Kt=et?[]:null,Wt=[],yt=0;yt<It;++yt){var Rn=Lt[yt],Nn={value:ce(Rn),primKey:je[rt+yt]};!1!==J.call(Nn,Nn.value,Nn)&&(null==Nn.value?Wt.push(je[rt+yt]):et||0===Gn(Ce(Rn),Ce(Nn.value))?(Vt.push(Nn.value),et&&Kt.push(je[rt+yt])):(Wt.push(je[rt+yt]),qt.push(Nn.value)))}return Promise.resolve(0<qt.length&&ke.mutate({trans:N,type:"add",values:qt}).then(function(Cn){for(var Ln in Cn.failures)Wt.splice(parseInt(Ln),1);ge(qt.length,Cn)})).then(function(){return(0<Vt.length||We&&"object"==typeof _)&&ke.mutate({trans:N,type:"put",keys:Kt,values:Vt,criteria:We,changeSpec:"function"!=typeof _&&_,isAdditionalChunk:0<rt}).then(function(Cn){return ge(Vt.length,Cn)})}).then(function(){return(0<Wt.length||We&&_===Oc)&&ke.mutate({trans:N,type:"delete",keys:Wt,criteria:We,isAdditionalChunk:0<rt}).then(function(Cn){return ge(Wt.length,Cn)})}).then(function(){return je.length>rt+It&&pt(rt+Qe)})})}(0).then(function(){if(0<Ne.length)throw new ye("Error modifying one or more objects",Ne,Ke,Xe);return je.length})})})},Qn.prototype.delete=function(){var _=this._ctx,I=_.range;return ba(_)&&(_.isPrimKey||3===I.type)?this._write(function(A){var L=I;return _.table.core.count({trans:A,query:{index:_.table.core.schema.primaryKey,range:L}}).then(function(U){return _.table.core.mutate({trans:A,type:"deleteRange",range:L}).then(function(J){var ge=J.failures;if(J=J.numFailures)throw new ye("Could not delete some values",Object.keys(ge).map(function(ke){return ge[ke]}),U-J);return U-J})})}):this.modify(Oc)},Qn);function Qn(){}var Oc=function(_,I){return I.value=null};function ep(_,I){return _<I?-1:_===I?0:1}function Eo(_,I){return I<_?-1:_===I?0:1}function to(_,I,A){return(_=_ instanceof Ae?new _.Collection(_):_)._ctx.error=new(A||TypeError)(I),_}function wo(_){return new _.Collection(_,function(){return $("")}).limit(0)}function Qa(_,I,A,N){var L,U,J,ge,ke,Pe,et,Ce=A.length;if(!A.every(function(Ke){return"string"==typeof Ke}))return to(_,Gd);function Qe(Ke){L="next"===Ke?function(je){return je.toUpperCase()}:function(je){return je.toLowerCase()},U="next"===Ke?function(je){return je.toLowerCase()}:function(je){return je.toUpperCase()},J="next"===Ke?ep:Eo;var Xe=A.map(function(je){return{lower:U(je),upper:L(je)}}).sort(function(je,pt){return J(je.lower,pt.lower)});ge=Xe.map(function(je){return je.upper}),ke=Xe.map(function(je){return je.lower}),et="next"===(Pe=Ke)?"":N}Qe("next"),(_=new _.Collection(_,function(){return rs(ge[0],ke[Ce-1]+N)}))._ondirectionchange=function(Ke){Qe(Ke)};var Ne=0;return _._addAlgorithm(function(Ke,Xe,je){var pt=Ke.key;if("string"!=typeof pt)return!1;var We=U(pt);if(I(We,ke,Ne))return!0;for(var rt=null,It=Ne;It<Ce;++It){var Lt=function(qt,Vt,Kt,Wt,yt,Rn){for(var Nn=Math.min(qt.length,Wt.length),Cn=-1,Ln=0;Ln<Nn;++Ln){var ra=Vt[Ln];if(ra!==Wt[Ln])return yt(qt[Ln],Kt[Ln])<0?qt.substr(0,Ln)+Kt[Ln]+Kt.substr(Ln+1):yt(qt[Ln],Wt[Ln])<0?qt.substr(0,Ln)+Wt[Ln]+Kt.substr(Ln+1):0<=Cn?qt.substr(0,Cn)+Vt[Cn]+Kt.substr(Cn+1):null;yt(qt[Ln],ra)<0&&(Cn=Ln)}return Nn<Wt.length&&"next"===Rn?qt+Kt.substr(qt.length):Nn<qt.length&&"prev"===Rn?qt.substr(0,Kt.length):Cn<0?null:qt.substr(0,Cn)+Wt[Cn]+Kt.substr(Cn+1)}(pt,We,ge[It],ke[It],J,Pe);null===Lt&&null===rt?Ne=It+1:(null===rt||0<J(rt,Lt))&&(rt=Lt)}return Xe(null!==rt?function(){Ke.continue(rt+et)}:je),!1}),_}function rs(_,I,A,N){return{type:2,lower:_,upper:I,lowerOpen:A,upperOpen:N}}function $(_){return{type:1,lower:_,upper:_}}var Ae=(Object.defineProperty(Ye.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ye.prototype.between=function(_,I,A,N){A=!1!==A,N=!0===N;try{return 0<this._cmp(_,I)||0===this._cmp(_,I)&&(A||N)&&(!A||!N)?wo(this):new this.Collection(this,function(){return rs(_,I,!A,!N)})}catch{return to(this,xi)}},Ye.prototype.equals=function(_){return null==_?to(this,xi):new this.Collection(this,function(){return $(_)})},Ye.prototype.above=function(_){return null==_?to(this,xi):new this.Collection(this,function(){return rs(_,void 0,!0)})},Ye.prototype.aboveOrEqual=function(_){return null==_?to(this,xi):new this.Collection(this,function(){return rs(_,void 0,!1)})},Ye.prototype.below=function(_){return null==_?to(this,xi):new this.Collection(this,function(){return rs(void 0,_,!1,!0)})},Ye.prototype.belowOrEqual=function(_){return null==_?to(this,xi):new this.Collection(this,function(){return rs(void 0,_)})},Ye.prototype.startsWith=function(_){return"string"!=typeof _?to(this,Gd):this.between(_,_+"\uffff",!0,!0)},Ye.prototype.startsWithIgnoreCase=function(_){return""===_?this.startsWith(_):Qa(this,function(I,A){return 0===I.indexOf(A[0])},[_],"\uffff")},Ye.prototype.equalsIgnoreCase=function(_){return Qa(this,function(I,A){return I===A[0]},[_],"")},Ye.prototype.anyOfIgnoreCase=function(){var _=rn.apply(yn,arguments);return 0===_.length?wo(this):Qa(this,function(I,A){return-1!==A.indexOf(I)},_,"")},Ye.prototype.startsWithAnyOfIgnoreCase=function(){var _=rn.apply(yn,arguments);return 0===_.length?wo(this):Qa(this,function(I,A){return A.some(function(N){return 0===I.indexOf(N)})},_,"\uffff")},Ye.prototype.anyOf=function(){var _=this,I=rn.apply(yn,arguments),A=this._cmp;try{I.sort(A)}catch{return to(this,xi)}if(0===I.length)return wo(this);var N=new this.Collection(this,function(){return rs(I[0],I[I.length-1])});N._ondirectionchange=function(U){I.sort(A="next"===U?_._ascending:_._descending)};var L=0;return N._addAlgorithm(function(U,J,ge){for(var ke=U.key;0<A(ke,I[L]);)if(++L===I.length)return J(ge),!1;return 0===A(ke,I[L])||(J(function(){U.continue(I[L])}),!1)}),N},Ye.prototype.notEqual=function(_){return this.inAnyRange([[-1/0,_],[_,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ye.prototype.noneOf=function(){var _=rn.apply(yn,arguments);if(0===_.length)return new this.Collection(this);try{_.sort(this._ascending)}catch{return to(this,xi)}var I=_.reduce(function(A,N){return A?A.concat([[A[A.length-1][1],N]]):[[-1/0,N]]},null);return I.push([_[_.length-1],this.db._maxKey]),this.inAnyRange(I,{includeLowers:!1,includeUppers:!1})},Ye.prototype.inAnyRange=function(pt,I){var A=this,N=this._cmp,L=this._ascending,U=this._descending,J=this._min,ge=this._max;if(0===pt.length)return wo(this);if(!pt.every(function(We){return void 0!==We[0]&&void 0!==We[1]&&L(We[0],We[1])<=0}))return to(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",q.InvalidArgument);var et,ke=!I||!1!==I.includeLowers,Pe=I&&!0===I.includeUppers,Ce=L;function Qe(We,rt){return Ce(We[0],rt[0])}try{(et=pt.reduce(function(We,rt){for(var It=0,Lt=We.length;It<Lt;++It){var qt=We[It];if(N(rt[0],qt[1])<0&&0<N(rt[1],qt[0])){qt[0]=J(qt[0],rt[0]),qt[1]=ge(qt[1],rt[1]);break}}return It===Lt&&We.push(rt),We},[])).sort(Qe)}catch{return to(this,xi)}var Ne=0,Ke=Pe?function(We){return 0<L(We,et[Ne][1])}:function(We){return 0<=L(We,et[Ne][1])},Xe=ke?function(We){return 0<U(We,et[Ne][0])}:function(We){return 0<=U(We,et[Ne][0])},je=Ke;return(pt=new this.Collection(this,function(){return rs(et[0][0],et[et.length-1][1],!ke,!Pe)}))._ondirectionchange=function(We){Ce="next"===We?(je=Ke,L):(je=Xe,U),et.sort(Qe)},pt._addAlgorithm(function(We,rt,It){for(var Lt,qt=We.key;je(qt);)if(++Ne===et.length)return rt(It),!1;return!Ke(Lt=qt)&&!Xe(Lt)||(0===A._cmp(qt,et[Ne][1])||0===A._cmp(qt,et[Ne][0])||rt(function(){We.continue(Ce===L?et[Ne][0]:et[Ne][1])}),!1)}),pt},Ye.prototype.startsWithAnyOf=function(){var _=rn.apply(yn,arguments);return _.every(function(I){return"string"==typeof I})?0===_.length?wo(this):this.inAnyRange(_.map(function(I){return[I,I+"\uffff"]})):to(this,"startsWithAnyOf() only works with strings")},Ye);function Ye(){}function ht(_){return gn(function(I){return kt(I),_(I.target.error),!1})}function kt(_){_.stopPropagation&&_.stopPropagation(),_.preventDefault&&_.preventDefault()}var An="storagemutated",jn="x-storagemutated-1",Zn=Ys(null,An),yr=(kr.prototype._lock=function(){return Oe(!Zt.global),++this._reculock,1!==this._reculock||Zt.global||(Zt.lockOwnerFor=this),this},kr.prototype._unlock=function(){if(Oe(!Zt.global),0==--this._reculock)for(Zt.global||(Zt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var _=this._blockedFuncs.shift();try{si(_[1],_[0])}catch{}}return this},kr.prototype._locked=function(){return this._reculock&&Zt.lockOwnerFor!==this},kr.prototype.create=function(_){var I=this;if(!this.mode)return this;var A=this.db.idbdb,N=this.db._state.dbOpenError;if(Oe(!this.idbtrans),!_&&!A)switch(N&&N.name){case"DatabaseClosedError":throw new q.DatabaseClosed(N);case"MissingAPIError":throw new q.MissingAPI(N.message,N);default:throw new q.OpenFailed(N)}if(!this.active)throw new q.TransactionInactive;return Oe(null===this._completion._state),(_=this.idbtrans=_||(this.db.core||A).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=gn(function(L){kt(L),I._reject(_.error)}),_.onabort=gn(function(L){kt(L),I.active&&I._reject(new q.Abort(_.error)),I.active=!1,I.on("abort").fire(L)}),_.oncomplete=gn(function(){I.active=!1,I._resolve(),"mutatedParts"in _&&Zn.storagemutated.fire(_.mutatedParts)}),this},kr.prototype._promise=function(_,I,A){var N=this;if("readwrite"===_&&"readwrite"!==this.mode)return br(new q.ReadOnly("Transaction is readonly"));if(!this.active)return br(new q.TransactionInactive);if(this._locked())return new Pt(function(U,J){N._blockedFuncs.push([function(){N._promise(_,I,A).then(U,J)},Zt])});if(A)return vr(function(){var U=new Pt(function(J,ge){N._lock();var ke=I(J,ge,N);ke&&ke.then&&ke.then(J,ge)});return U.finally(function(){return N._unlock()}),U._lib=!0,U});var L=new Pt(function(U,J){var ge=I(U,J,N);ge&&ge.then&&ge.then(U,J)});return L._lib=!0,L},kr.prototype._root=function(){return this.parent?this.parent._root():this},kr.prototype.waitFor=function(_){var I,A=this._root(),N=Pt.resolve(_);A._waitingFor?A._waitingFor=A._waitingFor.then(function(){return N}):(A._waitingFor=N,A._waitingQueue=[],I=A.idbtrans.objectStore(A.storeNames[0]),function U(){for(++A._spinCount;A._waitingQueue.length;)A._waitingQueue.shift()();A._waitingFor&&(I.get(-1/0).onsuccess=U)}());var L=A._waitingFor;return new Pt(function(U,J){N.then(function(ge){return A._waitingQueue.push(gn(U.bind(null,ge)))},function(ge){return A._waitingQueue.push(gn(J.bind(null,ge)))}).finally(function(){A._waitingFor===L&&(A._waitingFor=null)})})},kr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new q.Abort))},kr.prototype.table=function(_){var I=this._memoizedTables||(this._memoizedTables={});if(lt(I,_))return I[_];var A=this.schema[_];if(!A)throw new q.NotFound("Table "+_+" not part of transaction");return(A=new this.db.Table(_,A,this)).core=this.db.core.table(_),I[_]=A},kr);function kr(){}function Kr(_,I,A,N,L,U,J){return{name:_,keyPath:I,unique:A,multi:N,auto:L,compound:U,src:(A&&!J?"&":"")+(N?"*":"")+(L?"++":"")+ai(I)}}function ai(_){return"string"==typeof _?_:_?"["+[].join.call(_,"+")+"]":""}function No(_,I,A){return{name:_,primKey:I,indexes:A,mappedClass:null,idxByName:(N=function(L){return[L.name,L]},A.reduce(function(L,U,J){return(J=N(U))&&(L[J[0]]=J[1]),L},{}))};var N}var Js=function(_){try{return _.only([[]]),Js=function(){return[[]]},[[]]}catch{return Js=function(){return"\uffff"},"\uffff"}};function no(_){return null==_?function(){}:"string"==typeof _?1===(I=_).split(".").length?function(A){return A[I]}:function(A){return Be(A,I)}:function(A){return Be(A,_)};var I}function Io(_){return[].slice.call(_)}var ea=0;function ta(_){return null==_?":id":"string"==typeof _?_:"[".concat(_.join("+"),"]")}function Do(_,I,ke){function N(je){if(3===je.type)return null;if(4===je.type)throw new Error("Cannot convert never type to IDBKeyRange");var Ne=je.lower,Ke=je.upper,Xe=je.lowerOpen;return je=je.upperOpen,void 0===Ne?void 0===Ke?null:I.upperBound(Ke,!!je):void 0===Ke?I.lowerBound(Ne,!!Xe):I.bound(Ne,Ke,!!Xe,!!je)}var U,J,ge,Pe=(J=ke,ge=Io((U=_).objectStoreNames),et={schema:{name:U.name,tables:ge.map(function(Qe){return J.objectStore(Qe)}).map(function(Qe){var Ne=Qe.keyPath,je=Qe.autoIncrement,Ke=se(Ne),Xe={};return je={name:Qe.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==Ne,compound:Ke,keyPath:Ne,autoIncrement:je,unique:!0,extractKey:no(Ne)},indexes:Io(Qe.indexNames).map(function(pt){return Qe.index(pt)}).map(function(It){var rt=It.unique,Lt=It.multiEntry;return Lt={name:It.name,compound:se(It=It.keyPath),keyPath:It,unique:rt,multiEntry:Lt,extractKey:no(It)},Xe[ta(It)]=Lt}),getIndexByKeyPath:function(pt){return Xe[ta(pt)]}},Xe[":id"]=je.primaryKey,null!=Ne&&(Xe[ta(Ne)]=je.primaryKey),je})},hasGetAll:0<ge.length&&"getAll"in J.objectStore(ge[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).hasGetAll,et=(ke=et.schema).tables.map(function L(Qe){var Ne,Ke=Qe.name;return{name:Ke,schema:Qe,mutate:function(Xe){var je=Xe.trans,pt=Xe.type,We=Xe.keys,rt=Xe.values,It=Xe.range;return new Promise(function(Lt,qt){Lt=gn(Lt);var Vt=je.objectStore(Ke),Kt=null==Vt.keyPath,Wt="put"===pt||"add"===pt;if(!Wt&&"delete"!==pt&&"deleteRange"!==pt)throw new Error("Invalid operation type: "+pt);var yt,Rn=(We||rt||{length:1}).length;if(We&&rt&&We.length!==rt.length)throw new Error("Given keys array must have same length as given values array.");if(0===Rn)return Lt({numFailures:0,failures:{},results:[],lastResult:void 0});function Nn(Ki){++ra,kt(Ki)}var Cn=[],Ln=[],ra=0;if("deleteRange"===pt){if(4===It.type)return Lt({numFailures:ra,failures:Ln,results:[],lastResult:void 0});Cn.push(yt=3===It.type?Vt.clear():Vt.delete(N(It)))}else{var Hn=(Kt=Wt?Kt?[rt,We]:[rt,null]:[We,null])[0],ci=Kt[1];if(Wt)for(var vi=0;vi<Rn;++vi)Cn.push(yt=ci&&void 0!==ci[vi]?Vt[pt](Hn[vi],ci[vi]):Vt[pt](Hn[vi])),yt.onerror=Nn;else for(vi=0;vi<Rn;++vi)Cn.push(yt=Vt[pt](Hn[vi])),yt.onerror=Nn}function Za(Ki){Ki=Ki.target.result,Cn.forEach(function(Ja,up){return null!=Ja.error&&(Ln[up]=Ja.error)}),Lt({numFailures:ra,failures:Ln,results:"delete"===pt?We:Cn.map(function(Ja){return Ja.result}),lastResult:Ki})}yt.onerror=function(Ki){Nn(Ki),Za(Ki)},yt.onsuccess=Za})},getMany:function(Xe){var je=Xe.trans,pt=Xe.keys;return new Promise(function(We,rt){We=gn(We);for(var It,Lt=je.objectStore(Ke),qt=pt.length,Vt=new Array(qt),Kt=0,Wt=0,yt=function(Cn){Vt[(Cn=Cn.target)._pos]=Cn.result,++Wt===Kt&&We(Vt)},Rn=ht(rt),Nn=0;Nn<qt;++Nn)null!=pt[Nn]&&((It=Lt.get(pt[Nn]))._pos=Nn,It.onsuccess=yt,It.onerror=Rn,++Kt);0===Kt&&We(Vt)})},get:function(Xe){var je=Xe.trans,pt=Xe.key;return new Promise(function(We,rt){We=gn(We);var It=je.objectStore(Ke).get(pt);It.onsuccess=function(Lt){return We(Lt.target.result)},It.onerror=ht(rt)})},query:(Ne=Pe,function(Xe){return new Promise(function(je,pt){je=gn(je);var We,rt,It,Lt=Xe.values,qt=Xe.limit,Vt=qt===1/0?void 0:qt,Wt=(yt=Xe.query).index,yt=yt.range,Kt=(Kt=Xe.trans).objectStore(Ke);if(Wt=Wt.isPrimaryKey?Kt:Kt.index(Wt.name),yt=N(yt),0===qt)return je({result:[]});Ne?((Vt=Lt?Wt.getAll(yt,Vt):Wt.getAllKeys(yt,Vt)).onsuccess=function(Rn){return je({result:Rn.target.result})},Vt.onerror=ht(pt)):(We=0,rt=!Lt&&"openKeyCursor"in Wt?Wt.openKeyCursor(yt):Wt.openCursor(yt),It=[],rt.onsuccess=function(Rn){var Nn=rt.result;return Nn?(It.push(Lt?Nn.value:Nn.primaryKey),++We===qt?je({result:It}):void Nn.continue()):je({result:It})},rt.onerror=ht(pt))})}),openCursor:function(Xe){var je=Xe.trans,pt=Xe.values,We=Xe.query,rt=Xe.reverse,It=Xe.unique;return new Promise(function(Lt,qt){Lt=gn(Lt);var Wt=We.index,Vt=We.range,Kt=je.objectStore(Ke),yt=(Kt=Wt.isPrimaryKey?Kt:Kt.index(Wt.name),Wt=rt?It?"prevunique":"prev":It?"nextunique":"next",!pt&&"openKeyCursor"in Kt?Kt.openKeyCursor(N(Vt),Wt):Kt.openCursor(N(Vt),Wt));yt.onerror=ht(qt),yt.onsuccess=gn(function(Rn){var Nn,Cn,Ln,ra,Hn=yt.result;Hn?(Hn.___id=++ea,Hn.done=!1,Nn=Hn.continue.bind(Hn),Cn=(Cn=Hn.continuePrimaryKey)&&Cn.bind(Hn),Ln=Hn.advance.bind(Hn),ra=function(){throw new Error("Cursor not stopped")},Hn.trans=je,Hn.stop=Hn.continue=Hn.continuePrimaryKey=Hn.advance=function(){throw new Error("Cursor not started")},Hn.fail=gn(qt),Hn.next=function(){var ci=this,vi=1;return this.start(function(){return vi--?ci.continue():ci.stop()}).then(function(){return ci})},Hn.start=function(ci){function vi(){if(yt.result)try{ci()}catch(Ki){Hn.fail(Ki)}else Hn.done=!0,Hn.start=function(){throw new Error("Cursor behind last entry")},Hn.stop()}var Za=new Promise(function(Ki,Ja){Ki=gn(Ki),yt.onerror=ht(Ja),Hn.fail=Ja,Hn.stop=function(up){Hn.stop=Hn.continue=Hn.continuePrimaryKey=Hn.advance=ra,Ki(up)}});return yt.onsuccess=gn(function(Ki){yt.onsuccess=vi,vi()}),Hn.continue=Nn,Hn.continuePrimaryKey=Cn,Hn.advance=Ln,vi(),Za},Lt(Hn)):Lt(null)},qt)})},count:function(Xe){var je=Xe.query,pt=Xe.trans,We=je.index,rt=je.range;return new Promise(function(It,Lt){var qt=pt.objectStore(Ke),Vt=We.isPrimaryKey?qt:qt.index(We.name);(Vt=(qt=N(rt))?Vt.count(qt):Vt.count()).onsuccess=gn(function(Kt){return It(Kt.target.result)}),Vt.onerror=ht(Lt)})}}}),Ce={};return et.forEach(function(Qe){return Ce[Qe.name]=Qe}),{stack:"dbcore",transaction:_.transaction.bind(_),table:function(Qe){if(!Ce[Qe])throw new Error("Table '".concat(Qe,"' not found"));return Ce[Qe]},MIN_KEY:-1/0,MAX_KEY:Js(I),schema:ke}}function wa(_,N){N=function Os(_,I,A,N){return{dbcore:(N=Do(I,A.IDBKeyRange,N),_.dbcore.reduce(function(U,J){return J=J.create,M(M({},U),J(U))},N))}}(_._middlewares,N.db,_._deps,N),_.core=N.dbcore,_.tables.forEach(function(L){var U=L.name;_.core.schema.tables.some(function(J){return J.name===U})&&(L.core=_.core.table(U),_[U]instanceof _.Table&&(_[U].core=L.core))})}function ml(_,I,A,N){A.forEach(function(L){var U=N[L];I.forEach(function(J){var ge=function ke(Pe,et){return xe(Pe,et)||(Pe=ae(Pe))&&ke(Pe,et)}(J,L);(!ge||"value"in ge&&void 0===ge.value)&&(J===_.Transaction.prototype||J instanceof _.Transaction?he(J,L,{get:function(){return this.table(L)},set:function(ke){$e(this,L,{value:ke,writable:!0,configurable:!0,enumerable:!0})}}):J[L]=new _.Table(L,U))})})}function gl(_,I){I.forEach(function(A){for(var N in A)A[N]instanceof _.Table&&delete A[N]})}function vl(_,I){return _._cfg.version-I._cfg.version}function zt(_,I){var A,N={del:[],add:[],change:[]};for(A in _)I[A]||N.del.push(A);for(A in I){var L=_[A],U=I[A];if(L){var J={name:A,def:U,recreate:!1,del:[],add:[],change:[]};if(""+(L.primKey.keyPath||"")!=""+(U.primKey.keyPath||"")||L.primKey.auto!==U.primKey.auto)J.recreate=!0,N.change.push(J);else{var ge=L.idxByName,ke=U.idxByName,Pe=void 0;for(Pe in ge)ke[Pe]||J.del.push(Pe);for(Pe in ke){var et=ge[Pe],Ce=ke[Pe];et?et.src!==Ce.src&&J.change.push(Ce):J.add.push(Ce)}(0<J.del.length||0<J.add.length||0<J.change.length)&&N.change.push(J)}}else N.add.push([A,U])}return N}function is(_,I,A,N){var L=_.db.createObjectStore(I,A.keyPath?{keyPath:A.keyPath,autoIncrement:A.auto}:{autoIncrement:A.auto});return N.forEach(function(U){return bu(L,U)}),L}function Ia(_,I){fe(_).forEach(function(A){I.db.objectStoreNames.contains(A)||($t&&console.debug("Dexie: Creating missing table",A),is(I,A,_[A].primKey,_[A].indexes))})}function bu(_,I){_.createIndex(I.name,I.keyPath,{unique:I.unique,multiEntry:I.multi})}function _l(_,I,A){var N={};return Ue(I.objectStoreNames,0).forEach(function(L){for(var U=A.objectStore(L),J=Kr(ai(Pe=U.keyPath),Pe||"",!0,!1,!!U.autoIncrement,Pe&&"string"!=typeof Pe,!0),ge=[],ke=0;ke<U.indexNames.length;++ke){var Pe=(et=U.index(U.indexNames[ke])).keyPath,et=Kr(et.name,Pe,!!et.unique,!!et.multiEntry,!1,Pe&&"string"!=typeof Pe,!1);ge.push(et)}N[L]=No(L,J,ge)}),N}function yl(_,I,A){for(var N=A.db.objectStoreNames,L=0;L<N.length;++L){var U=N[L],J=A.objectStore(U);_._hasGetAll="getAll"in J;for(var ge=0;ge<J.indexNames.length;++ge){var ke=J.indexNames[ge],Pe=J.index(ke).keyPath,et="string"==typeof Pe?Pe:"["+Ue(Pe).join("+")+"]";!I[U]||(Pe=I[U].idxByName[et])&&(Pe.name=ke,delete I[U].idxByName[et],I[U].idxByName[ke]=Pe)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&ie.WorkerGlobalScope&&ie instanceof ie.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(_._hasGetAll=!1)}function bl(_){return _.split(",").map(function(I,A){var N=(I=I.trim()).replace(/([&*]|\+\+)/g,""),L=/^\[/.test(N)?N.match(/^\[(.*)\]$/)[1].split("+"):N;return Kr(N,L||null,/\&/.test(I),/\*/.test(I),/\+\+/.test(I),se(L),0===A)})}var os=(Co.prototype._parseStoresSpec=function(_,I){fe(_).forEach(function(A){if(null!==_[A]){var N=bl(_[A]),L=N.shift();if(L.unique=!0,L.multi)throw new q.Schema("Primary key cannot be multi-valued");N.forEach(function(U){if(U.auto)throw new q.Schema("Only primary key can be marked as autoIncrement (++)");if(!U.keyPath)throw new q.Schema("Index must have a name and cannot be an empty string")}),I[A]=No(A,L,N)}})},Co.prototype.stores=function(A){var I=this.db;this._cfg.storesSource=this._cfg.storesSource?te(this._cfg.storesSource,A):A;var N={},L={};return(A=I._versions).forEach(function(U){te(N,U._cfg.storesSource),L=U._cfg.dbschema={},U._parseStoresSpec(N,L)}),I._dbSchema=L,gl(I,[I._allTables,I,I.Transaction.prototype]),ml(I,[I._allTables,I,I.Transaction.prototype,this._cfg.tables],fe(L),L),I._storeNames=fe(L),this},Co.prototype.upgrade=function(_){return this._cfg.contentUpgrade=ln(this._cfg.contentUpgrade||oe,_),this},Co);function Co(){}function Xa(_,I){var A=_._dbNamesDB;return A||(A=_._dbNamesDB=new na(xs,{addons:[],indexedDB:_,IDBKeyRange:I})).version(1).stores({dbnames:"name"}),A.table("dbnames")}function ko(_){return _&&"function"==typeof _.databases}function Qd(_){return vr(function(){return Zt.letThrough=!0,_()})}function Pc(_){return!("from"in _)}var ri=function(_,I){if(!this){var A=new ri;return _&&"d"in _&&te(A,_),A}te(this,arguments.length?{d:1,from:_,to:1<arguments.length?I:_}:{d:0})};function El(_,I,A){var N=Gn(I,A);if(!isNaN(N)){if(0<N)throw RangeError();if(Pc(_))return te(_,{from:I,to:A,d:1});var L=_.l;if(N=_.r,Gn(A,_.from)<0)return L?El(L,I,A):_.l={from:I,to:A,d:1,l:null,r:null},ur(_);if(0<Gn(I,_.to))return N?El(N,I,A):_.r={from:I,to:A,d:1,l:null,r:null},ur(_);Gn(I,_.from)<0&&(_.from=I,_.l=null,_.d=N?N.d+1:1),0<Gn(A,_.to)&&(_.to=A,_.r=null,_.d=_.l?_.l.d+1:1),A=!_.r,L&&!_.l&&hr(_,L),N&&A&&hr(_,N)}}function hr(_,I){Pc(I)||function A(N,ke){var U=ke.from,J=ke.to,ge=ke.l;ke=ke.r,El(N,U,J),ge&&A(N,ge),ke&&A(N,ke)}(_,I)}function tp(_,I){var A=np(I),N=A.next();if(N.done)return!1;for(var L=N.value,U=np(_),J=U.next(L.from),ge=J.value;!N.done&&!J.done;){if(Gn(ge.from,L.to)<=0&&0<=Gn(ge.to,L.from))return!0;Gn(L.from,ge.from)<0?L=(N=A.next(ge.from)).value:ge=(J=U.next(L.from)).value}return!1}function np(_){var I=Pc(_)?null:{s:0,n:_};return{next:function(A){for(var N=0<arguments.length;I;)switch(I.s){case 0:if(I.s=1,N)for(;I.n.l&&Gn(A,I.n.from)<0;)I={up:I,n:I.n.l,s:1};else for(;I.n.l;)I={up:I,n:I.n.l,s:1};case 1:if(I.s=2,!N||Gn(A,I.n.to)<=0)return{value:I.n,done:!1};case 2:if(I.n.r){I.s=3,I={up:I,n:I.n.r,s:0};continue}case 3:I=I.up}return{done:!0}}}}function ur(_){var I,A,N=((null===(I=_.r)||void 0===I?void 0:I.d)||0)-((null===(A=_.l)||void 0===A?void 0:A.d)||0),L=1<N?"r":N<-1?"l":"";L&&(I="r"==L?"l":"r",A=M({},_),_.from=(N=_[L]).from,_.to=N.to,_[L]=N[L],A[L]=N[I],(_[I]=A).d=rp(A)),_.d=rp(_)}function rp(A){var I=A.r;return A=A.l,(I?A?Math.max(I.d,A.d):I.d:A?A.d:0)+1}function Wr(_,I){return fe(I).forEach(function(A){_[A]?hr(_[A],I[A]):_[A]=function N(L){var U,J,ge={};for(U in L)lt(L,U)&&(ge[U]=!(J=L[U])||"object"!=typeof J||at.has(J.constructor)?J:N(J));return ge}(I[A])}),_}function wl(_,I){return _.all||I.all||Object.keys(_).some(function(A){return I[A]&&tp(I[A],_[A])})}qe(ri.prototype,((oo={add:function(_){return hr(this,_),this},addKey:function(_){return El(this,_,_),this},addKeys:function(_){var I=this;return _.forEach(function(A){return El(I,A,A)}),this},hasKey:function(_){var I=np(this).next(_).value;return I&&Gn(I.from,_)<=0&&0<=Gn(I.to,_)}})[ft]=function(){return np(this)},oo));var Nc={},Xd={},Eu=!1;function bn(_){Wr(Xd,_),Eu||(Eu=!0,setTimeout(function(){Eu=!1,wu(Xd,!(Xd={}))},0))}function wu(_,I){void 0===I&&(I=!1);var A=new Set;if(_.all)for(var N=0,L=Object.values(Nc);N<L.length;N++)ro(J=L[N],_,A,I);else for(var U in _){var J,ge=/^idb\:\/\/(.*)\/(.*)\//.exec(U);ge&&(U=ge[1],ge=ge[2],(J=Nc["idb://".concat(U,"/").concat(ge)])&&ro(J,_,A,I))}A.forEach(function(ke){return ke()})}function ro(_,I,A,N){for(var L=[],U=0,J=Object.entries(_.queries.query);U<J.length;U++){for(var ge=J[U],ke=ge[0],Pe=[],et=0,Ce=ge[1];et<Ce.length;et++){var Qe=Ce[et];wl(I,Qe.obsSet)?Qe.subscribers.forEach(function(je){return A.add(je)}):N&&Pe.push(Qe)}N&&L.push([ke,Pe])}if(N)for(var Ne=0,Ke=L;Ne<Ke.length;Ne++){var Xe=Ke[Ne];_.queries.query[ke=Xe[0]]=Pe=Xe[1]}}function mb(_){var I=_._state,A=_._deps.indexedDB;if(I.isBeingOpened||_.idbdb)return I.dbReadyPromise.then(function(){return I.dbOpenError?br(I.dbOpenError):_});I.isBeingOpened=!0,I.dbOpenError=null,I.openComplete=!1;var N=I.openCanceller,L=Math.round(10*_.verno),U=!1;function J(){if(I.openCanceller!==N)throw new q.DatabaseClosed("db.open() was cancelled")}var ke,Pe=I.dbReadyResolve,et=null,Ce=!1;return Pt.race([N,(typeof navigator>"u"?Pt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Qe){function Ne(){return indexedDB.databases().finally(Qe)}ke=setInterval(Ne,100),Ne()}).finally(function(){return clearInterval(ke)}):Promise.resolve()).then(function ge(){return new Pt(function(Qe,Ne){if(J(),!A)throw new q.MissingAPI;var Ke=_.name,Xe=I.autoSchema||!L?A.open(Ke):A.open(Ke,L);if(!Xe)throw new q.MissingAPI;Xe.onerror=ht(Ne),Xe.onblocked=gn(_._fireOnBlocked),Xe.onupgradeneeded=gn(function(je){var pt;et=Xe.transaction,I.autoSchema&&!_._options.allowEmptyDB?(Xe.onerror=kt,et.abort(),Xe.result.close(),(pt=A.deleteDatabase(Ke)).onsuccess=pt.onerror=gn(function(){Ne(new q.NoSuchDatabase("Database ".concat(Ke," doesnt exist")))})):(et.onerror=ht(Ne),je=je.oldVersion>Math.pow(2,62)?0:je.oldVersion,Ce=je<1,_.idbdb=Xe.result,U&&function qd(_,I){Ia(_._dbSchema,I),I.db.version%10!=0||I.objectStoreNames.contains("$meta")||I.db.createObjectStore("$meta").add(Math.ceil(I.db.version/10-1),"version");var A=_l(0,_.idbdb,I);yl(_,_._dbSchema,I);for(var N=0,L=zt(A,_._dbSchema).change;N<L.length;N++){var U=function(J){if(J.change.length||J.recreate)return console.warn("Unable to patch indexes of table ".concat(J.name," because it has changes on the type of index or primary key.")),{value:void 0};var ge=I.objectStore(J.name);J.add.forEach(function(ke){$t&&console.debug("Dexie upgrade patch: Creating missing index ".concat(J.name,".").concat(ke.src)),bu(ge,ke)})}(L[N]);if("object"==typeof U)return U.value}}(_,et),function Dg(_,I,A,N){var L=_._dbSchema;A.objectStoreNames.contains("$meta")&&!L.$meta&&(L.$meta=No("$meta",bl("")[0],[]),_._storeNames.push("$meta"));var U=_._createTransaction("readwrite",_._storeNames,L);U.create(A),U._completion.catch(N);var J=U._reject.bind(U),ge=Zt.transless||Zt;vr(function(){return Zt.trans=U,Zt.transless=ge,0!==I?(wa(_,A),Pe=I,((ke=U).storeNames.includes("$meta")?ke.table("$meta").get("version").then(function(et){return et??Pe}):Pt.resolve(Pe)).then(function(et){return Qe=et,Ne=U,Xe=[],et=(Ce=_)._versions,je=Ce._dbSchema=_l(0,Ce.idbdb,Ke=A),0!==(et=et.filter(function(pt){return pt._cfg.version>=Qe})).length?(et.forEach(function(pt){Xe.push(function(){var We=je,rt=pt._cfg.dbschema;yl(Ce,We,Ke),yl(Ce,rt,Ke),je=Ce._dbSchema=rt;var It=zt(We,rt);It.add.forEach(function(Wt){is(Ke,Wt[0],Wt[1].primKey,Wt[1].indexes)}),It.change.forEach(function(Wt){if(Wt.recreate)throw new q.Upgrade("Not yet support for changing primary key");var yt=Ke.objectStore(Wt.name);Wt.add.forEach(function(Rn){return bu(yt,Rn)}),Wt.change.forEach(function(Rn){yt.deleteIndex(Rn.name),bu(yt,Rn)}),Wt.del.forEach(function(Rn){return yt.deleteIndex(Rn)})});var Lt=pt._cfg.contentUpgrade;if(Lt&&pt._cfg.version>Qe){wa(Ce,Ke),Ne._memoizedTables={};var qt=De(rt);It.del.forEach(function(Wt){qt[Wt]=We[Wt]}),gl(Ce,[Ce.Transaction.prototype]),ml(Ce,[Ce.Transaction.prototype],fe(qt),qt),Ne.schema=qt;var Vt,Kt=pn(Lt);return Kt&&Ts(),It=Pt.follow(function(){var Wt;(Vt=Lt(Ne))&&Kt&&(Wt=Ii.bind(null,null),Vt.then(Wt,Wt))}),Vt&&"function"==typeof Vt.then?Pt.resolve(Vt):It.then(function(){return Vt})}}),Xe.push(function(We){var rt,It;rt=pt._cfg.dbschema,[].slice.call((It=We).db.objectStoreNames).forEach(function(qt){return null==rt[qt]&&It.db.deleteObjectStore(qt)}),gl(Ce,[Ce.Transaction.prototype]),ml(Ce,[Ce.Transaction.prototype],Ce._storeNames,Ce._dbSchema),Ne.schema=Ce._dbSchema}),Xe.push(function(We){Ce.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(Ce.idbdb.version/10)===pt._cfg.version?(Ce.idbdb.deleteObjectStore("$meta"),delete Ce._dbSchema.$meta,Ce._storeNames=Ce._storeNames.filter(function(rt){return"$meta"!==rt})):We.objectStore("$meta").put(pt._cfg.version,"version"))})}),function pt(){return Xe.length?Pt.resolve(Xe.shift()(Ne.idbtrans)).then(pt):Pt.resolve()}().then(function(){Ia(je,Ke)})):Pt.resolve();var Ce,Qe,Ne,Ke,Xe,je}).catch(J)):(fe(L).forEach(function(et){is(A,et,L[et].primKey,L[et].indexes)}),wa(_,A),void Pt.follow(function(){return _.on.populate.fire(U)}).catch(J));var ke,Pe})}(_,je/10,et,Ne))},Ne),Xe.onsuccess=gn(function(){et=null;var je,pt,We,rt,It,Lt=_.idbdb=Xe.result,qt=Ue(Lt.objectStoreNames);if(0<qt.length)try{var Vt=Lt.transaction(1===(rt=qt).length?rt[0]:rt,"readonly");if(I.autoSchema)We=Vt,(je=_).verno=(pt=Lt).version/10,We=je._dbSchema=_l(0,pt,We),je._storeNames=Ue(pt.objectStoreNames,0),ml(je,[je._allTables],fe(We),We);else if(yl(_,_._dbSchema,Vt),((It=zt(_l(0,(It=_).idbdb,Vt),It._dbSchema)).add.length||It.change.some(function(Kt){return Kt.add.length||Kt.change.length}))&&!U)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Lt.close(),L=Lt.version+1,U=!0,Qe(ge());wa(_,Vt)}catch{}Qs.push(_),Lt.onversionchange=gn(function(Kt){I.vcFired=!0,_.on("versionchange").fire(Kt)}),Lt.onclose=gn(function(Kt){_.on("close").fire(Kt)}),Ce&&(Vt=Ke,Lt=(It=_._deps).indexedDB,It=It.IDBKeyRange,ko(Lt)||Vt===xs||Xa(Lt,It).put({name:Vt}).catch(oe)),Qe()},Ne)}).catch(function(Qe){switch(Qe?.name){case"UnknownError":if(0<I.PR1398_maxLoop)return I.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),ge();break;case"VersionError":if(0<L)return L=0,ge()}return Pt.reject(Qe)})})]).then(function(){return J(),I.onReadyBeingFired=[],Pt.resolve(Qd(function(){return _.on.ready.fire(_.vip)})).then(function Qe(){if(0<I.onReadyBeingFired.length){var Ne=I.onReadyBeingFired.reduce(ln,oe);return I.onReadyBeingFired=[],Pt.resolve(Qd(function(){return Ne(_.vip)})).then(Qe)}})}).finally(function(){I.openCanceller===N&&(I.onReadyBeingFired=null,I.isBeingOpened=!1)}).catch(function(Qe){I.dbOpenError=Qe;try{et&&et.abort()}catch{}return N===I.openCanceller&&_._close(),br(Qe)}).finally(function(){I.openComplete=!0,Pe()}).then(function(){var Qe;return Ce&&(Qe={},_.tables.forEach(function(Ne){Ne.schema.indexes.forEach(function(Ke){Ke.name&&(Qe["idb://".concat(_.name,"/").concat(Ne.name,"/").concat(Ke.name)]=new ri(-1/0,[[[]]]))}),Qe["idb://".concat(_.name,"/").concat(Ne.name,"/")]=Qe["idb://".concat(_.name,"/").concat(Ne.name,"/:dels")]=new ri(-1/0,[[[]]])}),Zn(An).fire(Qe),wu(Qe,!0)),_})}function Yd(_){function I(U){return _.next(U)}var A=L(I),N=L(function(U){return _.throw(U)});function L(U){return function(ke){var ge=U(ke);return ke=ge.value,ge.done?ke:ke&&"function"==typeof ke.then?ke.then(A,N):se(ke)?Promise.all(ke).then(A,N):A(ke)}}return L(I)()}function ip(_,I,A){for(var N=se(_)?_.slice():[_],L=0;L<A;++L)N.push(I);return N}var Ya={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(_){return M(M({},_),{table:function(I){var A=_.table(I),N=A.schema,L={},U=[];function J(Ce,Qe,Ne){var Ke=ta(Ce),Xe=L[Ke]=L[Ke]||[],je=null==Ce?0:"string"==typeof Ce?1:Ce.length,pt=0<Qe;return pt=M(M({},Ne),{name:pt?"".concat(Ke,"(virtual-from:").concat(Ne.name,")"):Ne.name,lowLevelIndex:Ne,isVirtual:pt,keyTail:Qe,keyLength:je,extractKey:no(Ce),unique:!pt&&Ne.unique}),Xe.push(pt),pt.isPrimaryKey||U.push(pt),1<je&&J(2===je?Ce[0]:Ce.slice(0,je-1),Qe+1,Ne),Xe.sort(function(We,rt){return We.keyTail-rt.keyTail}),pt}I=J(N.primaryKey.keyPath,0,N.primaryKey),L[":id"]=[I];for(var ge=0,ke=N.indexes;ge<ke.length;ge++){var Pe=ke[ge];J(Pe.keyPath,0,Pe)}function et(Ce){var Qe,Ne=Ce.query.index;return Ne.isVirtual?M(M({},Ce),{query:{index:Ne.lowLevelIndex,range:(Qe=Ce.query.range,Ne=Ne.keyTail,{type:1===Qe.type?2:Qe.type,lower:ip(Qe.lower,Qe.lowerOpen?_.MAX_KEY:_.MIN_KEY,Ne),lowerOpen:!0,upper:ip(Qe.upper,Qe.upperOpen?_.MIN_KEY:_.MAX_KEY,Ne),upperOpen:!0})}}):Ce}return M(M({},A),{schema:M(M({},N),{primaryKey:I,indexes:U,getIndexByKeyPath:function(Ce){return(Ce=L[ta(Ce)])&&Ce[0]}}),count:function(Ce){return A.count(et(Ce))},query:function(Ce){return A.query(et(Ce))},openCursor:function(Ce){var Qe=Ce.query.index,Ne=Qe.keyTail,Xe=Qe.keyLength;return Qe.isVirtual?A.openCursor(et(Ce)).then(function(pt){return pt&&function je(pt){return Object.create(pt,{continue:{value:function(We){null!=We?pt.continue(ip(We,Ce.reverse?_.MAX_KEY:_.MIN_KEY,Ne)):Ce.unique?pt.continue(pt.key.slice(0,Xe).concat(Ce.reverse?_.MIN_KEY:_.MAX_KEY,Ne)):pt.continue()}},continuePrimaryKey:{value:function(We,rt){pt.continuePrimaryKey(ip(We,_.MAX_KEY,Ne),rt)}},primaryKey:{get:function(){return pt.primaryKey}},key:{get:function(){var We=pt.key;return 1===Xe?We[0]:We.slice(0,Xe)}},value:{get:function(){return pt.value}}})}(pt)}):A.openCursor(Ce)}})}})}};function op(_,I,A,N){return A=A||{},N=N||"",fe(_).forEach(function(L){var U,J,ge;lt(I,L)?(J=I[L],"object"==typeof(U=_[L])&&"object"==typeof J&&U&&J?(ge=W(U))!==W(J)?A[N+L]=I[L]:"Object"===ge?op(U,J,A,N+L+"."):U!==J&&(A[N+L]=I[L]):U!==J&&(A[N+L]=I[L])):A[N+L]=void 0}),fe(I).forEach(function(L){lt(_,L)||(A[N+L]=I[L])}),A}function sp(_,I){return"delete"===I.type?I.keys:I.keys||I.values.map(_.extractKey)}var gb={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(_){return M(M({},_),{table:function(I){var A=_.table(I),N=A.schema.primaryKey;return M(M({},A),{mutate:function(L){var U=Zt.trans,J=U.table(I).hook,ge=J.deleting,ke=J.creating,Pe=J.updating;switch(L.type){case"add":if(ke.fire===oe)break;return U._promise("readwrite",function(){return et(L)},!0);case"put":if(ke.fire===oe&&Pe.fire===oe)break;return U._promise("readwrite",function(){return et(L)},!0);case"delete":if(ge.fire===oe)break;return U._promise("readwrite",function(){return et(L)},!0);case"deleteRange":if(ge.fire===oe)break;return U._promise("readwrite",function(){return function Ce(Qe,Ne,Ke){return A.query({trans:Qe,values:!1,query:{index:N,range:Ne},limit:Ke}).then(function(Xe){var je=Xe.result;return et({type:"delete",keys:je,trans:Qe}).then(function(pt){return 0<pt.numFailures?Promise.reject(pt.failures[0]):je.length<Ke?{failures:[],numFailures:0,lastResult:void 0}:Ce(Qe,M(M({},Ne),{lower:je[je.length-1],lowerOpen:!0}),Ke)})})}(L.trans,L.range,1e4)},!0)}return A.mutate(L);function et(Ce){var Qe,Ne,Ke,Xe=Zt.trans,je=Ce.keys||sp(N,Ce);if(!je)throw new Error("Keys missing");return"delete"!==(Ce="add"===Ce.type||"put"===Ce.type?M(M({},Ce),{keys:je}):M({},Ce)).type&&(Ce.values=m([],Ce.values,!0)),Ce.keys&&(Ce.keys=m([],Ce.keys,!0)),Qe=A,Ke=je,("add"===(Ne=Ce).type?Promise.resolve([]):Qe.getMany({trans:Ne.trans,keys:Ke,cache:"immutable"})).then(function(pt){var We=je.map(function(rt,It){var Lt,qt,Vt,Kt=pt[It],Wt={onerror:null,onsuccess:null};return"delete"===Ce.type?ge.fire.call(Wt,rt,Kt,Xe):"add"===Ce.type||void 0===Kt?(Lt=ke.fire.call(Wt,rt,Ce.values[It],Xe),null==rt&&null!=Lt&&(Ce.keys[It]=rt=Lt,N.outbound||dt(Ce.values[It],N.keyPath,rt))):(Lt=op(Kt,Ce.values[It]),(qt=Pe.fire.call(Wt,Lt,rt,Kt,Xe))&&(Vt=Ce.values[It],Object.keys(qt).forEach(function(yt){lt(Vt,yt)?Vt[yt]=qt[yt]:dt(Vt,yt,qt[yt])}))),Wt});return A.mutate(Ce).then(function(rt){for(var It=rt.failures,Lt=rt.results,qt=rt.numFailures,Vt=(rt=rt.lastResult,0);Vt<je.length;++Vt){var Kt=(Lt||je)[Vt],Wt=We[Vt];null==Kt?Wt.onerror&&Wt.onerror(It[Vt]):Wt.onsuccess&&Wt.onsuccess("put"===Ce.type&&pt[Vt]?Ce.values[Vt]:Kt)}return{failures:It,results:Lt,numFailures:qt,lastResult:rt}}).catch(function(rt){return We.forEach(function(It){return It.onerror&&It.onerror(rt)}),Promise.reject(rt)})})}}})}})}};function vb(_,I,A){try{if(!I||I.keys.length<_.length)return null;for(var N=[],L=0,U=0;L<I.keys.length&&U<_.length;++L)0===Gn(I.keys[L],_[U])&&(N.push(A?ce(I.values[L]):I.values[L]),++U);return N.length===_.length?N:null}catch{return null}}var _b={stack:"dbcore",level:-1,create:function(_){return{table:function(I){var A=_.table(I);return M(M({},A),{getMany:function(N){if(!N.cache)return A.getMany(N);var L=vb(N.keys,N.trans._cache,"clone"===N.cache);return L?Pt.resolve(L):A.getMany(N).then(function(U){return N.trans._cache={keys:N.keys,values:"clone"===N.cache?ce(U):U},U})},mutate:function(N){return"add"!==N.type&&(N.trans._cache=null),A.mutate(N)}})}}}};function Cg(_,I){return"readonly"===_.trans.mode&&!!_.subscr&&!_.trans.explicit&&"disabled"!==_.trans.db._options.cache&&!I.schema.primaryKey.outbound}function ap(_,I){switch(_){case"query":return I.values&&!I.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var yb={stack:"dbcore",level:0,name:"Observability",create:function(_){var I=_.schema.name,A=new ri(_.MIN_KEY,_.MAX_KEY);return M(M({},_),{transaction:function(N,L,U){if(Zt.subscr&&"readonly"!==L)throw new q.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Zt.querier));return _.transaction(N,L,U)},table:function(N){var L=_.table(N),U=L.schema,J=U.primaryKey,Ce=U.indexes,ge=J.extractKey,ke=J.outbound,Pe=J.autoIncrement&&Ce.filter(function(Ne){return Ne.compound&&Ne.keyPath.includes(J.keyPath)}),et=M(M({},L),{mutate:function(Ne){function Ke(yt){return yt="idb://".concat(I,"/").concat(N,"/").concat(yt),rt[yt]||(rt[yt]=new ri)}var Xe,je,pt,We=Ne.trans,rt=Ne.mutatedParts||(Ne.mutatedParts={}),It=Ke(""),Lt=Ke(":dels"),qt=Ne.type,Vt=(Wt="deleteRange"===Ne.type?[Ne.range]:"delete"===Ne.type?[Ne.keys]:Ne.values.length<50?[sp(J,Ne).filter(function(yt){return yt}),Ne.values]:[])[0],Kt=Wt[1],Wt=Ne.trans._cache;return se(Vt)?(It.addKeys(Vt),(Wt="delete"===qt||Vt.length===Kt.length?vb(Vt,Wt):null)||Lt.addKeys(Vt),(Wt||Kt)&&(Xe=Ke,je=Wt,pt=Kt,U.indexes.forEach(function(yt){var Rn=Xe(yt.name||"");function Nn(Ln){return null!=Ln?yt.extractKey(Ln):null}function Cn(Ln){return yt.multiEntry&&se(Ln)?Ln.forEach(function(ra){return Rn.addKey(ra)}):Rn.addKey(Ln)}(je||pt).forEach(function(Ln,ci){var Hn=je&&Nn(je[ci]);0!==Gn(Hn,ci=pt&&Nn(pt[ci]))&&(null!=Hn&&Cn(Hn),null!=ci&&Cn(ci))})}))):Vt?(Lt.add(Kt={from:Vt.lower,to:Vt.upper}),It.add(Kt)):(It.add(A),Lt.add(A),U.indexes.forEach(function(yt){return Ke(yt.name).add(A)})),L.mutate(Ne).then(function(yt){return!Vt||"add"!==Ne.type&&"put"!==Ne.type||(It.addKeys(yt.results),Pe&&Pe.forEach(function(Rn){var Nn=Ne.values.map(function(Ln){return Rn.extractKey(Ln)}),Cn=Rn.keyPath.findIndex(function(Ln){return Ln===J.keyPath});yt.results.forEach(function(Ln){return Nn[Cn]=Ln}),Ke(Rn.name).addKeys(Nn)})),We.mutatedParts=Wr(We.mutatedParts||{},rt),yt})}}),Qe={get:function(Ne){return[J,new ri(Ne.key)]},getMany:function(Ne){return[J,(new ri).addKeys(Ne.keys)]},count:Ce=function(Ke){var Xe;return[Ke=(Xe=Ke.query).index,new ri(null!==(Ke=(Xe=Xe.range).lower)&&void 0!==Ke?Ke:_.MIN_KEY,null!==(Xe=Xe.upper)&&void 0!==Xe?Xe:_.MAX_KEY)]},query:Ce,openCursor:Ce};return fe(Qe).forEach(function(Ne){et[Ne]=function(Ke){var je=!!(Xe=Zt.subscr),pt=Cg(Zt,L)&&ap(Ne,Ke)?Ke.obsSet={}:Xe;if(je){var We=function(Kt){return Kt="idb://".concat(I,"/").concat(N,"/").concat(Kt),pt[Kt]||(pt[Kt]=new ri)},rt=We(""),It=We(":dels"),Xe=(je=(Xe=Qe[Ne](Ke))[0],Xe[1]);if(("query"===Ne&&je.isPrimaryKey&&!Ke.values?It:We(je.name||"")).add(Xe),!je.isPrimaryKey){if("count"!==Ne){var Lt="query"===Ne&&ke&&Ke.values&&L.query(M(M({},Ke),{values:!1}));return L[Ne].apply(this,arguments).then(function(Kt){if("query"===Ne){if(ke&&Ke.values)return Lt.then(function(Nn){return rt.addKeys(Nn=Nn.result),Kt});var Wt=Ke.values?Kt.result.map(ge):Kt.result;(Ke.values?rt:It).addKeys(Wt)}else if("openCursor"===Ne){var yt=Kt,Rn=Ke.values;return yt&&Object.create(yt,{key:{get:function(){return It.addKey(yt.primaryKey),yt.key}},primaryKey:{get:function(){var Nn=yt.primaryKey;return It.addKey(Nn),Nn}},value:{get:function(){return Rn&&rt.addKey(yt.primaryKey),yt.value}}})}return Kt})}It.add(A)}}return L[Ne].apply(this,arguments)}}),et}})}};function To(_,I,A){return 0===A.numFailures?I:"deleteRange"===I.type||A.numFailures===(I.keys?I.keys.length:"values"in I&&I.values?I.values.length:1)?null:(I=M({},I),se(I.keys)&&(I.keys=I.keys.filter(function(L,U){return!(U in A.failures)})),"values"in I&&se(I.values)&&(I.values=I.values.filter(function(L,U){return!(U in A.failures)})),I)}function vn(_,I){return A=_,(void 0===(N=I).lower||(N.lowerOpen?0<Gn(A,N.lower):0<=Gn(A,N.lower)))&&(void 0===I.upper||(I.upperOpen?Gn(_,I.upper)<0:Gn(_,I.upper)<=0));var A,N}function Tg(_,I,Qe,N,L,U){if(!Qe||0===Qe.length)return _;var J=I.query.index,ge=J.multiEntry,ke=I.query.range,Pe=N.schema.primaryKey.extractKey,et=J.extractKey,Ce=(J.lowLevelIndex||J).extractKey;return(Qe=Qe.reduce(function(Ne,Ke){var Xe=Ne,je=[];if("add"===Ke.type||"put"===Ke.type)for(var pt=new ri,We=Ke.values.length-1;0<=We;--We){var rt,It=Ke.values[We],Lt=Pe(It);pt.hasKey(Lt)||(rt=et(It),(ge&&se(rt)?rt.some(function(Wt){return vn(Wt,ke)}):vn(rt,ke))&&(pt.addKey(Lt),je.push(It)))}switch(Ke.type){case"add":Xe=Ne.concat(I.values?je:je.map(function(yt){return Pe(yt)}));break;case"put":var qt=(new ri).addKeys(Ke.values.map(function(yt){return Pe(yt)}));Xe=Ne.filter(function(yt){return!qt.hasKey(I.values?Pe(yt):yt)}).concat(I.values?je:je.map(function(yt){return Pe(yt)}));break;case"delete":var Vt=(new ri).addKeys(Ke.keys);Xe=Ne.filter(function(yt){return!Vt.hasKey(I.values?Pe(yt):yt)});break;case"deleteRange":var Kt=Ke.range;Xe=Ne.filter(function(yt){return!vn(Pe(yt),Kt)})}return Xe},_))===_?_:(Qe.sort(function(Ne,Ke){return Gn(Ce(Ne),Ce(Ke))||Gn(Pe(Ne),Pe(Ke))}),I.limit&&I.limit<1/0&&(Qe.length>I.limit?Qe.length=I.limit:_.length===I.limit&&Qe.length<I.limit&&(L.dirty=!0)),U?Object.freeze(Qe):Qe)}function Er(_,I){return 0===Gn(_.lower,I.lower)&&0===Gn(_.upper,I.upper)&&!!_.lowerOpen==!!I.lowerOpen&&!!_.upperOpen==!!I.upperOpen}var cp={stack:"dbcore",level:0,name:"Cache",create:function(_){var I=_.schema.name;return M(M({},_),{transaction:function(A,N,L){var U,J,ge=_.transaction(A,N,L);return"readwrite"===N&&(J=(U=new AbortController).signal,ge.addEventListener("abort",(L=function(ke){return function(){if(U.abort(),"readwrite"===N){for(var Pe=new Set,et=0,Ce=A;et<Ce.length;et++){var Qe=Ce[et],Ne=Nc["idb://".concat(I,"/").concat(Qe)];if(Ne){var Ke=_.table(Qe),Xe=Ne.optimisticOps.filter(function(Rn){return Rn.trans===ge});if(ge._explicit&&ke&&ge.mutatedParts)for(var je=0,pt=Object.values(Ne.queries.query);je<pt.length;je++)for(var We=0,rt=(qt=pt[je]).slice();We<rt.length;We++)wl((Vt=rt[We]).obsSet,ge.mutatedParts)&&(xt(qt,Vt),Vt.subscribers.forEach(function(Rn){return Pe.add(Rn)}));else if(0<Xe.length){Ne.optimisticOps=Ne.optimisticOps.filter(function(Rn){return Rn.trans!==ge});for(var It=0,Lt=Object.values(Ne.queries.query);It<Lt.length;It++)for(var qt,Vt,Kt,Wt=0,yt=(qt=Lt[It]).slice();Wt<yt.length;Wt++)null!=(Vt=yt[Wt]).res&&ge.mutatedParts&&(ke&&!Vt.dirty?(Kt=Object.isFrozen(Vt.res),Kt=Tg(Vt.res,Vt.req,Xe,Ke,Vt,Kt),Vt.dirty?(xt(qt,Vt),Vt.subscribers.forEach(function(Rn){return Pe.add(Rn)})):Kt!==Vt.res&&(Vt.res=Kt,Vt.promise=Pt.resolve({result:Kt}))):(Vt.dirty&&xt(qt,Vt),Vt.subscribers.forEach(function(Rn){return Pe.add(Rn)})))}}}Pe.forEach(function(Rn){return Rn()})}}})(!1),{signal:J}),ge.addEventListener("error",L(!1),{signal:J}),ge.addEventListener("complete",L(!0),{signal:J})),ge},table:function(A){var N=_.table(A),L=N.schema.primaryKey;return M(M({},N),{mutate:function(U){var J=Zt.trans;if(L.outbound||"disabled"===J.db._options.cache||J.explicit)return N.mutate(U);var ge=Nc["idb://".concat(I,"/").concat(A)];return ge?(J=N.mutate(U),"add"!==U.type&&"put"!==U.type||!(50<=U.values.length||sp(L,U).some(function(ke){return null==ke}))?(ge.optimisticOps.push(U),U.mutatedParts&&bn(U.mutatedParts),J.then(function(ke){0<ke.numFailures&&(xt(ge.optimisticOps,U),(ke=To(0,U,ke))&&ge.optimisticOps.push(ke),U.mutatedParts&&bn(U.mutatedParts))}),J.catch(function(){xt(ge.optimisticOps,U),U.mutatedParts&&bn(U.mutatedParts)})):J.then(function(ke){var Pe=To(0,M(M({},U),{values:U.values.map(function(Ne,Ce){var Qe;return dt(Ne=null!==(Qe=L.keyPath)&&void 0!==Qe&&Qe.includes(".")?ce(Ne):M({},Ne),L.keyPath,ke.results[Ce]),Ne})}),ke);ge.optimisticOps.push(Pe),queueMicrotask(function(){return U.mutatedParts&&bn(U.mutatedParts)})}),J):N.mutate(U)},query:function(U){if(!Cg(Zt,N)||!ap("query",U))return N.query(U);var J="immutable"===(null===(Pe=Zt.trans)||void 0===Pe?void 0:Pe.db._options.cache),ge=(Ce=Zt).requery,ke=Ce.signal,Pe=function(Ke,Xe,je,pt){var We=Nc["idb://".concat(Ke,"/").concat(Xe)];if(!We)return[];if(!(Xe=We.queries.query))return[null,!1,We,null];var rt=Xe[(pt.query?pt.query.index.name:null)||""];if(!rt)return[null,!1,We,null];var It=rt.find(function(Lt){return Lt.req.limit===pt.limit&&Lt.req.values===pt.values&&Er(Lt.req.query.range,pt.query.range)});return It?[It,!0,We,rt]:[rt.find(function(Lt){return("limit"in Lt.req?Lt.req.limit:1/0)>=pt.limit&&(!pt.values||Lt.req.values)&&function io(_,I){return function(A,N,L,U){if(void 0===A)return void 0!==N?-1:0;if(void 0===N)return 1;if(0===(N=Gn(A,N))){if(L&&U)return 0;if(L)return 1;if(U)return-1}return N}(_.lower,I.lower,_.lowerOpen,I.lowerOpen)<=0&&0<=function(A,N,L,U){if(void 0===A)return void 0!==N?1:0;if(void 0===N)return-1;if(0===(N=Gn(A,N))){if(L&&U)return 0;if(L)return-1;if(U)return 1}return N}(_.upper,I.upper,_.upperOpen,I.upperOpen)}(Lt.req.query.range,pt.query.range)}),!1,We,rt]}(I,A,0,U),et=Pe[0],Ce=Pe[1],Qe=Pe[2],Ne=Pe[3];return et&&Ce?et.obsSet=U.obsSet:(Ce=N.query(U).then(function(Ke){var Xe=Ke.result;if(et&&(et.res=Xe),J){for(var je=0,pt=Xe.length;je<pt;++je)Object.freeze(Xe[je]);Object.freeze(Xe)}else Ke.result=ce(Xe);return Ke}).catch(function(Ke){return Ne&&et&&xt(Ne,et),Promise.reject(Ke)}),et={obsSet:U.obsSet,promise:Ce,subscribers:new Set,type:"query",req:U,dirty:!1},Ne?Ne.push(et):(Ne=[et],(Qe=Qe||(Nc["idb://".concat(I,"/").concat(A)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[U.query.index.name||""]=Ne)),function kc(_,I,A,N){_.subscribers.add(A),N.addEventListener("abort",function(){var L,U;_.subscribers.delete(A),0===_.subscribers.size&&(L=_,U=I,setTimeout(function(){0===L.subscribers.size&&xt(U,L)},3e3))})}(et,Ne,ge,ke),et.promise.then(function(Ke){return{result:Tg(Ke.result,U,Qe?.optimisticOps,N,et,J)}})}})}})}};function ir(_,I){return new Proxy(_,{get:function(A,N,L){return"db"===N?I:Reflect.get(A,N,L)}})}var na=(xr.prototype.version=function(_){if(isNaN(_)||_<.1)throw new q.Type("Given version is not a positive number");if(_=Math.round(10*_)/10,this.idbdb||this._state.isBeingOpened)throw new q.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,_);var I=this._versions,A=I.filter(function(N){return N._cfg.version===_})[0];return A||(A=new this.Version(_),I.push(A),I.sort(vl),A.stores({}),this._state.autoSchema=!1,A)},xr.prototype._whenReady=function(_){var I=this;return this.idbdb&&(this._state.openComplete||Zt.letThrough||this._vip)?_():new Pt(function(A,N){if(I._state.openComplete)return N(new q.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return void N(new q.DatabaseClosed);I.open().catch(oe)}I._state.dbReadyPromise.then(A,N)}).then(_)},xr.prototype.use=function(_){var I=_.stack,A=_.create,N=_.level,L=_.name;return L&&this.unuse({stack:I,name:L}),(_=this._middlewares[I]||(this._middlewares[I]=[])).push({stack:I,create:A,level:N??10,name:L}),_.sort(function(U,J){return U.level-J.level}),this},xr.prototype.unuse=function(_){var I=_.stack,A=_.name,N=_.create;return I&&this._middlewares[I]&&(this._middlewares[I]=this._middlewares[I].filter(function(L){return N?L.create!==N:!!A&&L.name!==A})),this},xr.prototype.open=function(){var _=this;return si(mr,function(){return mb(_)})},xr.prototype._close=function(){var _=this._state,I=Qs.indexOf(this);if(0<=I&&Qs.splice(I,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}_.isBeingOpened||(_.dbReadyPromise=new Pt(function(A){_.dbReadyResolve=A}),_.openCanceller=new Pt(function(A,N){_.cancelOpen=N}))},xr.prototype.close=function(A){var I=(void 0===A?{disableAutoOpen:!0}:A).disableAutoOpen;A=this._state,I?(A.isBeingOpened&&A.cancelOpen(new q.DatabaseClosed),this._close(),A.autoOpen=!1,A.dbOpenError=new q.DatabaseClosed):(this._close(),A.autoOpen=this._options.autoOpen||A.isBeingOpened,A.openComplete=!1,A.dbOpenError=null)},xr.prototype.delete=function(_){var I=this;void 0===_&&(_={disableAutoOpen:!0});var A=0<arguments.length&&"object"!=typeof arguments[0],N=this._state;return new Pt(function(L,U){function J(){I.close(_);var ge=I._deps.indexedDB.deleteDatabase(I.name);ge.onsuccess=gn(function(){var ke,Pe,et;Pe=I.name,et=(ke=I._deps).indexedDB,ke=ke.IDBKeyRange,ko(et)||Pe===xs||Xa(et,ke).delete(Pe).catch(oe),L()}),ge.onerror=ht(U),ge.onblocked=I._fireOnBlocked}if(A)throw new q.InvalidArgument("Invalid closeOptions argument to db.delete()");N.isBeingOpened?N.dbReadyPromise.then(J):J()})},xr.prototype.backendDB=function(){return this.idbdb},xr.prototype.isOpen=function(){return null!==this.idbdb},xr.prototype.hasBeenClosed=function(){var _=this._state.dbOpenError;return _&&"DatabaseClosed"===_.name},xr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},xr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(xr.prototype,"tables",{get:function(){var _=this;return fe(this._allTables).map(function(I){return _._allTables[I]})},enumerable:!1,configurable:!0}),xr.prototype.transaction=function(){var _=function(I,A,N){var L=arguments.length;if(L<2)throw new q.InvalidArgument("Too few arguments");for(var U=new Array(L-1);--L;)U[L-1]=arguments[L];return N=U.pop(),[I,be(U),N]}.apply(this,arguments);return this._transaction.apply(this,_)},xr.prototype._transaction=function(_,I,A){var N=this,L=Zt.trans;L&&L.db===this&&-1===_.indexOf("!")||(L=null);var U,J,ge=-1!==_.indexOf("?");_=_.replace("!","").replace("?","");try{if(J=I.map(function(Pe){if("string"!=typeof(Pe=Pe instanceof N.Table?Pe.name:Pe))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Pe}),"r"==_||_===_a)U=_a;else{if("rw"!=_&&_!=fl)throw new q.InvalidArgument("Invalid transaction mode: "+_);U=fl}if(L){if(L.mode===_a&&U===fl){if(!ge)throw new q.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");L=null}L&&J.forEach(function(Pe){if(L&&-1===L.storeNames.indexOf(Pe)){if(!ge)throw new q.SubTransaction("Table "+Pe+" not included in parent transaction.");L=null}}),ge&&L&&!L.active&&(L=null)}}catch(Pe){return L?L._promise(null,function(et,Ce){Ce(Pe)}):br(Pe)}var ke=function Pe(et,Ce,Qe,Ne,Ke){return Pt.resolve().then(function(){var Xe=Zt.transless||Zt,je=et._createTransaction(Ce,Qe,et._dbSchema,Ne);if(je.explicit=!0,Xe={trans:je,transless:Xe},Ne)je.idbtrans=Ne.idbtrans;else try{je.create(),je.idbtrans._explicit=!0,et._state.PR1398_maxLoop=3}catch(rt){return rt.name===H.InvalidState&&et.isOpen()&&0<--et._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),et.close({disableAutoOpen:!1}),et.open().then(function(){return Pe(et,Ce,Qe,null,Ke)})):br(rt)}var pt,We=pn(Ke);return We&&Ts(),Xe=Pt.follow(function(){var rt;(pt=Ke.call(je,je))&&(We?(rt=Ii.bind(null,null),pt.then(rt,rt)):"function"==typeof pt.next&&"function"==typeof pt.throw&&(pt=Yd(pt)))},Xe),(pt&&"function"==typeof pt.then?Pt.resolve(pt).then(function(rt){return je.active?rt:br(new q.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Xe.then(function(){return pt})).then(function(rt){return Ne&&je._resolve(),je._completion.then(function(){return rt})}).catch(function(rt){return je._reject(rt),br(rt)})})}.bind(null,this,U,J,L,A);return L?L._promise(U,ke,"lock"):Zt.trans?si(Zt.transless,function(){return N._whenReady(ke)}):this._whenReady(ke)},xr.prototype.table=function(_){if(!lt(this._allTables,_))throw new q.InvalidTable("Table ".concat(_," does not exist"));return this._allTables[_]},xr);function xr(_,I){var A=this;this._middlewares={},this.verno=0;var N=xr.dependencies;this._options=I=M({addons:xr.addons,autoOpen:!0,indexedDB:N.indexedDB,IDBKeyRange:N.IDBKeyRange,cache:"cloned"},I),this._deps={indexedDB:I.indexedDB,IDBKeyRange:I.IDBKeyRange},N=I.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var L,U,J,ge,ke,Pe={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:oe,dbReadyPromise:null,cancelOpen:oe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:I.autoOpen};Pe.dbReadyPromise=new Pt(function(Ce){Pe.dbReadyResolve=Ce}),Pe.openCanceller=new Pt(function(Ce,Qe){Pe.cancelOpen=Qe}),this._state=Pe,this.name=_,this.on=Ys(this,"populate","blocked","versionchange","close",{ready:[ln,oe]}),this.on.ready.subscribe=Te(this.on.ready.subscribe,function(Ce){return function(Qe,Ne){xr.vip(function(){var Ke,Xe=A._state;Xe.openComplete?(Xe.dbOpenError||Pt.resolve().then(Qe),Ne&&Ce(Qe)):Xe.onReadyBeingFired?(Xe.onReadyBeingFired.push(Qe),Ne&&Ce(Qe)):(Ce(Qe),Ke=A,Ne||Ce(function je(){Ke.on.ready.unsubscribe(Qe),Ke.on.ready.unsubscribe(je)}))})}}),this.Collection=(L=this,Mc(Ig.prototype,function(pt,je){this.db=L;var Ne=Jf,Ke=null;if(je)try{Ne=je()}catch(We){Ke=We}var Xe=pt._ctx;this._ctx={table:je=Xe.table,index:Xe.index,isPrimKey:!Xe.index||je.schema.primKey.keyPath&&Xe.index===je.schema.primKey.name,range:Ne,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Ke,or:Xe.or,valueMapper:(pt=je.hook.reading.fire)!==Je?pt:null}})),this.Table=(U=this,Mc(zi.prototype,function(Ce,Qe,Ne){this.db=U,this._tx=Ne,this.name=Ce,this.schema=Qe,this.hook=U._allTables[Ce]?U._allTables[Ce].hook:Ys(null,{creating:[Mt,oe],reading:[Ct,Je],updating:[on,oe],deleting:[jt,oe]})})),this.Transaction=(J=this,Mc(yr.prototype,function(Ce,Qe,Ne,Ke,Xe){var je=this;this.db=J,this.mode=Ce,this.storeNames=Qe,this.schema=Ne,this.chromeTransactionDurability=Ke,this.idbtrans=null,this.on=Ys(this,"complete","error","abort"),this.parent=Xe||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Pt(function(pt,We){je._resolve=pt,je._reject=We}),this._completion.then(function(){je.active=!1,je.on.complete.fire()},function(pt){var We=je.active;return je.active=!1,je.on.error.fire(pt),je.parent?je.parent._reject(pt):We&&je.idbtrans&&je.idbtrans.abort(),br(pt)})})),this.Version=(ge=this,Mc(os.prototype,function(Ce){this.db=ge,this._cfg={version:Ce,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ke=this,Mc(Ae.prototype,function(Ce,Qe,Ne){if(this.db=ke,this._ctx={table:Ce,index:":id"===Qe?null:Qe,or:Ne},this._cmp=this._ascending=Gn,this._descending=function(Ke,Xe){return Gn(Xe,Ke)},this._max=function(Ke,Xe){return 0<Gn(Ke,Xe)?Ke:Xe},this._min=function(Ke,Xe){return Gn(Ke,Xe)<0?Ke:Xe},this._IDBKeyRange=ke._deps.IDBKeyRange,!this._IDBKeyRange)throw new q.MissingAPI})),this.on("versionchange",function(Ce){0<Ce.newVersion?console.warn("Another connection wants to upgrade database '".concat(A.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(A.name,"'. Closing db now to resume the delete request.")),A.close({disableAutoOpen:!1})}),this.on("blocked",function(Ce){!Ce.newVersion||Ce.newVersion<Ce.oldVersion?console.warn("Dexie.delete('".concat(A.name,"') was blocked")):console.warn("Upgrade '".concat(A.name,"' blocked by other connection holding version ").concat(Ce.oldVersion/10))}),this._maxKey=Js(I.IDBKeyRange),this._createTransaction=function(Ce,Qe,Ne,Ke){return new A.Transaction(Ce,Qe,Ne,A._options.chromeTransactionDurability,Ke)},this._fireOnBlocked=function(Ce){A.on("blocked").fire(Ce),Qs.filter(function(Qe){return Qe.name===A.name&&Qe!==A&&!Qe._state.vcFired}).map(function(Qe){return Qe.on("versionchange").fire(Ce)})},this.use(_b),this.use(cp),this.use(yb),this.use(Ya),this.use(gb);var et=new Proxy(this,{get:function(Ce,Qe,Ne){if("_vip"===Qe)return!0;if("table"===Qe)return function(Xe){return ir(A.table(Xe),et)};var Ke=Reflect.get(Ce,Qe,Ne);return Ke instanceof zi?ir(Ke,et):"tables"===Qe?Ke.map(function(Xe){return ir(Xe,et)}):"_createTransaction"===Qe?function(){return ir(Ke.apply(this,arguments),et)}:Ke}});this.vip=et,N.forEach(function(Ce){return Ce(A)})}oo=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";var Da,Zd=(Il.prototype.subscribe=function(_,I,A){return this._subscribe(_&&"function"!=typeof _?_:{next:_,error:I,complete:A})},Il.prototype[oo]=function(){return this},Il);function Il(_){this._subscribe=_}try{Da={indexedDB:ie.indexedDB||ie.mozIndexedDB||ie.webkitIndexedDB||ie.msIndexedDB,IDBKeyRange:ie.IDBKeyRange||ie.webkitIDBKeyRange}}catch{Da={indexedDB:null,IDBKeyRange:null}}function Iu(_){var I,A=!1,N=new Zd(function(L){var J,U=pn(_),ge=!1,ke={},Pe={},et={get closed(){return ge},unsubscribe:function(){ge||(ge=!0,J&&J.abort(),Ce&&Zn.storagemutated.unsubscribe(Ne))}};L.start&&L.start(et);var Ce=!1,Qe=function(){return Rs(Ke)},Ne=function(Xe){Wr(ke,Xe),wl(Pe,ke)&&Qe()},Ke=function(){var Xe,je,pt;!ge&&Da.indexedDB&&(ke={},Xe={},J&&J.abort(),J=new AbortController,pt=function(We){var rt=gi();try{U&&Ts();var It=vr(_,We);return It=U?It.finally(Ii):It}finally{rt&&wi()}}(je={subscr:Xe,signal:J.signal,requery:Qe,querier:_,trans:null}),Promise.resolve(pt).then(function(We){A=!0,I=We,ge||je.signal.aborted||(ke={},function(rt){for(var It in rt)if(lt(rt,It))return;return 1}(Pe=Xe)||Ce||(Zn(An,Ne),Ce=!0),Rs(function(){return!ge&&L.next&&L.next(We)}))},function(We){A=!1,["DatabaseClosedError","AbortError"].includes(We?.name)||ge||Rs(function(){ge||L.error&&L.error(We)})}))};return setTimeout(Qe,0),et});return N.hasValue=function(){return A},N.getValue=function(){return I},N}var Fo=na;function Fc(_){var I=ss;try{ss=!0,Zn.storagemutated.fire(_),wu(_,!0)}finally{ss=I}}qe(Fo,M(M({},re),{delete:function(_){return new Fo(_,{addons:[]}).delete()},exists:function(_){return new Fo(_,{addons:[]}).open().then(function(I){return I.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(_){try{return A=(I=Fo.dependencies).indexedDB,I=I.IDBKeyRange,(ko(A)?Promise.resolve(A.databases()).then(function(N){return N.map(function(L){return L.name}).filter(function(L){return L!==xs})}):Xa(A,I).toCollection().primaryKeys()).then(_)}catch{return br(new q.MissingAPI)}var I,A},defineClass:function(){return function(_){te(this,_)}},ignoreTransaction:function(_){return Zt.trans?si(Zt.transless,_):_()},vip:Qd,async:function(_){return function(){try{var I=Yd(_.apply(this,arguments));return I&&"function"==typeof I.then?I:Pt.resolve(I)}catch(A){return br(A)}}},spawn:function(_,I,A){try{var N=Yd(_.apply(A,I||[]));return N&&"function"==typeof N.then?N:Pt.resolve(N)}catch(L){return br(L)}},currentTransaction:{get:function(){return Zt.trans||null}},waitFor:function(_,I){return I=Pt.resolve("function"==typeof _?Fo.ignoreTransaction(_):_).timeout(I||6e4),Zt.trans?Zt.trans.waitFor(I):I},Promise:Pt,debug:{get:function(){return $t},set:function(_){hn(_)}},derive:Ve,extend:te,props:qe,override:Te,Events:Ys,on:Zn,liveQuery:Iu,extendObservabilitySet:Wr,getByKeyPath:Be,setByKeyPath:dt,delByKeyPath:function(_,I){"string"==typeof I?dt(_,I,void 0):"length"in I&&[].map.call(I,function(A){dt(_,A,void 0)})},shallowClone:De,deepClone:ce,getObjectDiff:op,cmp:Gn,asap:pe,minKey:-1/0,addons:[],connections:Qs,errnames:H,dependencies:Da,cache:Nc,semVer:"4.0.8",version:"4.0.8".split(".").map(function(_){return parseInt(_)}).reduce(function(_,I,A){return _+I/Math.pow(10,2*A)})})),Fo.maxKey=Js(Fo.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Zn(An,function(_){ss||(_=new CustomEvent(jn,{detail:_}),ss=!0,dispatchEvent(_),ss=!1)}),addEventListener(jn,function(_){_=_.detail,ss||Fc(_)}));var Ca,ss=!1,Dn=function(){};return typeof BroadcastChannel<"u"&&((Dn=function(){(Ca=new BroadcastChannel(jn)).onmessage=function(_){return _.data&&Fc(_.data)}})(),"function"==typeof Ca.unref&&Ca.unref(),Zn(An,function(_){ss||Ca.postMessage(_)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(_){if(!na.disableBfCache&&_.persisted){$t&&console.debug("Dexie: handling persisted pagehide"),Ca?.close();for(var I=0,A=Qs;I<A.length;I++)A[I].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(_){!na.disableBfCache&&_.persisted&&($t&&console.debug("Dexie: handling persisted pageshow"),Dn(),Fc({all:new ri(-1/0,[[]])}))})),Pt.rejectionMapper=function(_,I){return!_||_ instanceof Ge||_ instanceof TypeError||_ instanceof SyntaxError||!_.name||!X[_.name]?_:(I=new X[_.name](I||_.message,_),"stack"in _&&he(I,"stack",{get:function(){return this.inner.stack}}),I)},hn($t),M(na,Object.freeze({__proto__:null,Dexie:na,liveQuery:Iu,Entity:ns,cmp:Gn,PropModSymbol:Po,PropModification:qa,replacePrefix:function(_,I){return new qa({replacePrefix:[_,I]})},add:function(_){return new qa({add:_})},remove:function(_){return new qa({remove:_})},default:na,RangeSet:ri,mergeRanges:hr,rangesOverlap:tp}),{default:na}),na}()},4412:(Bt,tt,M)=>{"use strict";M.d(tt,{t:()=>ie});var m=M(1413);class ie extends m.B{constructor(se){super(),this._value=se}get value(){return this.getValue()}_subscribe(se){const te=super._subscribe(se);return!te.closed&&se.next(this._value),te}getValue(){const{hasError:se,thrownError:te,_value:ae}=this;if(se)throw te;return this._throwIfClosed(),ae}next(se){super.next(this._value=se)}}},1985:(Bt,tt,M)=>{"use strict";M.d(tt,{c:()=>lt});var m=M(7707),ie=M(8359),fe=M(3494),se=M(1203),te=M(1026),ae=M(8071),de=M(9786);let lt=(()=>{class Ve{constructor(ee){ee&&(this._subscribe=ee)}lift(ee){const Ue=new Ve;return Ue.source=this,Ue.operator=ee,Ue}subscribe(ee,Ue,Te){const Oe=function he(Ve){return Ve&&Ve instanceof m.vU||function $e(Ve){return Ve&&(0,ae.T)(Ve.next)&&(0,ae.T)(Ve.error)&&(0,ae.T)(Ve.complete)}(Ve)&&(0,ie.Uv)(Ve)}(ee)?ee:new m.Ms(ee,Ue,Te);return(0,de.Y)(()=>{const{operator:pe,source:Be}=this;Oe.add(pe?pe.call(Oe,Be):Be?this._subscribe(Oe):this._trySubscribe(Oe))}),Oe}_trySubscribe(ee){try{return this._subscribe(ee)}catch(Ue){ee.error(Ue)}}forEach(ee,Ue){return new(Ue=qe(Ue))((Te,Oe)=>{const pe=new m.Ms({next:Be=>{try{ee(Be)}catch(dt){Oe(dt),pe.unsubscribe()}},error:Oe,complete:Te});this.subscribe(pe)})}_subscribe(ee){var Ue;return null===(Ue=this.source)||void 0===Ue?void 0:Ue.subscribe(ee)}[fe.s](){return this}pipe(...ee){return(0,se.m)(ee)(this)}toPromise(ee){return new(ee=qe(ee))((Ue,Te)=>{let Oe;this.subscribe(pe=>Oe=pe,pe=>Te(pe),()=>Ue(Oe))})}}return Ve.create=xe=>new Ve(xe),Ve})();function qe(Ve){var xe;return null!==(xe=Ve??te.$.Promise)&&void 0!==xe?xe:Promise}},1413:(Bt,tt,M)=>{"use strict";M.d(tt,{B:()=>de});var m=M(1985),ie=M(8359);const se=(0,M(1853).L)(qe=>function(){qe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var te=M(7908),ae=M(9786);let de=(()=>{class qe extends m.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(he){const Ve=new lt(this,this);return Ve.operator=he,Ve}_throwIfClosed(){if(this.closed)throw new se}next(he){(0,ae.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Ve of this.currentObservers)Ve.next(he)}})}error(he){(0,ae.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=he;const{observers:Ve}=this;for(;Ve.length;)Ve.shift().error(he)}})}complete(){(0,ae.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:he}=this;for(;he.length;)he.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var he;return(null===(he=this.observers)||void 0===he?void 0:he.length)>0}_trySubscribe(he){return this._throwIfClosed(),super._trySubscribe(he)}_subscribe(he){return this._throwIfClosed(),this._checkFinalizedStatuses(he),this._innerSubscribe(he)}_innerSubscribe(he){const{hasError:Ve,isStopped:xe,observers:ee}=this;return Ve||xe?ie.Kn:(this.currentObservers=null,ee.push(he),new ie.yU(()=>{this.currentObservers=null,(0,te.o)(ee,he)}))}_checkFinalizedStatuses(he){const{hasError:Ve,thrownError:xe,isStopped:ee}=this;Ve?he.error(xe):ee&&he.complete()}asObservable(){const he=new m.c;return he.source=this,he}}return qe.create=($e,he)=>new lt($e,he),qe})();class lt extends de{constructor($e,he){super(),this.destination=$e,this.source=he}next($e){var he,Ve;null===(Ve=null===(he=this.destination)||void 0===he?void 0:he.next)||void 0===Ve||Ve.call(he,$e)}error($e){var he,Ve;null===(Ve=null===(he=this.destination)||void 0===he?void 0:he.error)||void 0===Ve||Ve.call(he,$e)}complete(){var $e,he;null===(he=null===($e=this.destination)||void 0===$e?void 0:$e.complete)||void 0===he||he.call($e)}_subscribe($e){var he,Ve;return null!==(Ve=null===(he=this.source)||void 0===he?void 0:he.subscribe($e))&&void 0!==Ve?Ve:ie.Kn}}},7707:(Bt,tt,M)=>{"use strict";M.d(tt,{Ms:()=>Te,vU:()=>Ve});var m=M(8071),ie=M(8359),fe=M(1026),se=M(5334),te=M(5343);const ae=qe("C",void 0,void 0);function qe(De,He,be){return{kind:De,value:He,error:be}}var $e=M(9270),he=M(9786);class Ve extends ie.yU{constructor(He){super(),this.isStopped=!1,He?(this.destination=He,(0,ie.Uv)(He)&&He.add(this)):this.destination=dt}static create(He,be,at){return new Te(He,be,at)}next(He){this.isStopped?Be(function lt(De){return qe("N",De,void 0)}(He),this):this._next(He)}error(He){this.isStopped?Be(function de(De){return qe("E",void 0,De)}(He),this):(this.isStopped=!0,this._error(He))}complete(){this.isStopped?Be(ae,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(He){this.destination.next(He)}_error(He){try{this.destination.error(He)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const xe=Function.prototype.bind;function ee(De,He){return xe.call(De,He)}class Ue{constructor(He){this.partialObserver=He}next(He){const{partialObserver:be}=this;if(be.next)try{be.next(He)}catch(at){Oe(at)}}error(He){const{partialObserver:be}=this;if(be.error)try{be.error(He)}catch(at){Oe(at)}else Oe(He)}complete(){const{partialObserver:He}=this;if(He.complete)try{He.complete()}catch(be){Oe(be)}}}class Te extends Ve{constructor(He,be,at){let ot;if(super(),(0,m.T)(He)||!He)ot={next:He??void 0,error:be??void 0,complete:at??void 0};else{let ce;this&&fe.$.useDeprecatedNextContext?(ce=Object.create(He),ce.unsubscribe=()=>this.unsubscribe(),ot={next:He.next&&ee(He.next,ce),error:He.error&&ee(He.error,ce),complete:He.complete&&ee(He.complete,ce)}):ot=He}this.destination=new Ue(ot)}}function Oe(De){fe.$.useDeprecatedSynchronousErrorHandling?(0,he.l)(De):(0,se.m)(De)}function Be(De,He){const{onStoppedNotification:be}=fe.$;be&&$e.f.setTimeout(()=>be(De,He))}const dt={closed:!0,next:te.l,error:function pe(De){throw De},complete:te.l}},8359:(Bt,tt,M)=>{"use strict";M.d(tt,{Kn:()=>ae,yU:()=>te,Uv:()=>de});var m=M(8071);const fe=(0,M(1853).L)(qe=>function(he){qe(this),this.message=he?`${he.length} errors occurred during unsubscription:\n${he.map((Ve,xe)=>`${xe+1}) ${Ve.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=he});var se=M(7908);class te{constructor($e){this.initialTeardown=$e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $e;if(!this.closed){this.closed=!0;const{_parentage:he}=this;if(he)if(this._parentage=null,Array.isArray(he))for(const ee of he)ee.remove(this);else he.remove(this);const{initialTeardown:Ve}=this;if((0,m.T)(Ve))try{Ve()}catch(ee){$e=ee instanceof fe?ee.errors:[ee]}const{_finalizers:xe}=this;if(xe){this._finalizers=null;for(const ee of xe)try{lt(ee)}catch(Ue){$e=$e??[],Ue instanceof fe?$e=[...$e,...Ue.errors]:$e.push(Ue)}}if($e)throw new fe($e)}}add($e){var he;if($e&&$e!==this)if(this.closed)lt($e);else{if($e instanceof te){if($e.closed||$e._hasParent(this))return;$e._addParent(this)}(this._finalizers=null!==(he=this._finalizers)&&void 0!==he?he:[]).push($e)}}_hasParent($e){const{_parentage:he}=this;return he===$e||Array.isArray(he)&&he.includes($e)}_addParent($e){const{_parentage:he}=this;this._parentage=Array.isArray(he)?(he.push($e),he):he?[he,$e]:$e}_removeParent($e){const{_parentage:he}=this;he===$e?this._parentage=null:Array.isArray(he)&&(0,se.o)(he,$e)}remove($e){const{_finalizers:he}=this;he&&(0,se.o)(he,$e),$e instanceof te&&$e._removeParent(this)}}te.EMPTY=(()=>{const qe=new te;return qe.closed=!0,qe})();const ae=te.EMPTY;function de(qe){return qe instanceof te||qe&&"closed"in qe&&(0,m.T)(qe.remove)&&(0,m.T)(qe.add)&&(0,m.T)(qe.unsubscribe)}function lt(qe){(0,m.T)(qe)?qe():qe.unsubscribe()}},1026:(Bt,tt,M)=>{"use strict";M.d(tt,{$:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},4843:(Bt,tt,M)=>{"use strict";M.d(tt,{_:()=>fe});var m=M(9350),ie=M(7707);function fe(se,te){const ae="object"==typeof te;return new Promise((de,lt)=>{const qe=new ie.Ms({next:$e=>{de($e),qe.unsubscribe()},error:lt,complete:()=>{ae?de(te.defaultValue):lt(new m.G)}});se.subscribe(qe)})}},8793:(Bt,tt,M)=>{"use strict";M.d(tt,{x:()=>te});var m=M(6365),fe=M(9326),se=M(6648);function te(...ae){return function ie(){return(0,m.U)(1)}()((0,se.H)(ae,(0,fe.lI)(ae)))}},983:(Bt,tt,M)=>{"use strict";M.d(tt,{w:()=>ie});const ie=new(M(1985).c)(te=>te.complete())},6648:(Bt,tt,M)=>{"use strict";M.d(tt,{H:()=>at});var m=M(8750),ie=M(5225),fe=M(9974),se=M(4360);function te(ot,ce=0){return(0,fe.N)((ne,W)=>{ne.subscribe((0,se._)(W,ft=>(0,ie.N)(W,ot,()=>W.next(ft),ce),()=>(0,ie.N)(W,ot,()=>W.complete(),ce),ft=>(0,ie.N)(W,ot,()=>W.error(ft),ce)))})}function ae(ot,ce=0){return(0,fe.N)((ne,W)=>{W.add(ot.schedule(()=>ne.subscribe(W),ce))})}var qe=M(1985),he=M(4761),Ve=M(8071);function ee(ot,ce){if(!ot)throw new Error("Iterable cannot be null");return new qe.c(ne=>{(0,ie.N)(ne,ce,()=>{const W=ot[Symbol.asyncIterator]();(0,ie.N)(ne,ce,()=>{W.next().then(ft=>{ft.done?ne.complete():ne.next(ft.value)})},0,!0)})})}var Ue=M(5055),Te=M(9858),Oe=M(7441),pe=M(5397),Be=M(7953),dt=M(591),De=M(5196);function at(ot,ce){return ce?function be(ot,ce){if(null!=ot){if((0,Ue.l)(ot))return function de(ot,ce){return(0,m.Tg)(ot).pipe(ae(ce),te(ce))}(ot,ce);if((0,Oe.X)(ot))return function $e(ot,ce){return new qe.c(ne=>{let W=0;return ce.schedule(function(){W===ot.length?ne.complete():(ne.next(ot[W++]),ne.closed||this.schedule())})})}(ot,ce);if((0,Te.y)(ot))return function lt(ot,ce){return(0,m.Tg)(ot).pipe(ae(ce),te(ce))}(ot,ce);if((0,Be.T)(ot))return ee(ot,ce);if((0,pe.x)(ot))return function xe(ot,ce){return new qe.c(ne=>{let W;return(0,ie.N)(ne,ce,()=>{W=ot[he.l](),(0,ie.N)(ne,ce,()=>{let ft,At;try{({value:ft,done:At}=W.next())}catch(xt){return void ne.error(xt)}At?ne.complete():ne.next(ft)},0,!0)}),()=>(0,Ve.T)(W?.return)&&W.return()})}(ot,ce);if((0,De.U)(ot))return function He(ot,ce){return ee((0,De.C)(ot),ce)}(ot,ce)}throw(0,dt.L)(ot)}(ot,ce):(0,m.Tg)(ot)}},8750:(Bt,tt,M)=>{"use strict";M.d(tt,{Tg:()=>xe});var m=M(1635),ie=M(7441),fe=M(9858),se=M(1985),te=M(5055),ae=M(7953),de=M(591),lt=M(5397),qe=M(5196),$e=M(8071),he=M(5334),Ve=M(3494);function xe(De){if(De instanceof se.c)return De;if(null!=De){if((0,te.l)(De))return function ee(De){return new se.c(He=>{const be=De[Ve.s]();if((0,$e.T)(be.subscribe))return be.subscribe(He);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(De);if((0,ie.X)(De))return function Ue(De){return new se.c(He=>{for(let be=0;be<De.length&&!He.closed;be++)He.next(De[be]);He.complete()})}(De);if((0,fe.y)(De))return function Te(De){return new se.c(He=>{De.then(be=>{He.closed||(He.next(be),He.complete())},be=>He.error(be)).then(null,he.m)})}(De);if((0,ae.T)(De))return pe(De);if((0,lt.x)(De))return function Oe(De){return new se.c(He=>{for(const be of De)if(He.next(be),He.closed)return;He.complete()})}(De);if((0,qe.U)(De))return function Be(De){return pe((0,qe.C)(De))}(De)}throw(0,de.L)(De)}function pe(De){return new se.c(He=>{(function dt(De,He){var be,at,ot,ce;return(0,m.sH)(this,void 0,void 0,function*(){try{for(be=(0,m.xN)(De);!(at=yield be.next()).done;)if(He.next(at.value),He.closed)return}catch(ne){ot={error:ne}}finally{try{at&&!at.done&&(ce=be.return)&&(yield ce.call(be))}finally{if(ot)throw ot.error}}He.complete()})})(De,He).catch(be=>He.error(be))})}},7786:(Bt,tt,M)=>{"use strict";M.d(tt,{h:()=>ae});var m=M(6365),ie=M(8750),fe=M(983),se=M(9326),te=M(6648);function ae(...de){const lt=(0,se.lI)(de),qe=(0,se.R0)(de,1/0),$e=de;return $e.length?1===$e.length?(0,ie.Tg)($e[0]):(0,m.U)(qe)((0,te.H)($e,lt)):fe.w}},4360:(Bt,tt,M)=>{"use strict";M.d(tt,{_:()=>ie});var m=M(7707);function ie(se,te,ae,de,lt){return new fe(se,te,ae,de,lt)}class fe extends m.vU{constructor(te,ae,de,lt,qe,$e){super(te),this.onFinalize=qe,this.shouldUnsubscribe=$e,this._next=ae?function(he){try{ae(he)}catch(Ve){te.error(Ve)}}:super._next,this._error=lt?function(he){try{lt(he)}catch(Ve){te.error(Ve)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(he){te.error(he)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var te;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ae}=this;super.unsubscribe(),!ae&&(null===(te=this.onFinalize)||void 0===te||te.call(this))}}}},3294:(Bt,tt,M)=>{"use strict";M.d(tt,{F:()=>se});var m=M(3669),ie=M(9974),fe=M(4360);function se(ae,de=m.D){return ae=ae??te,(0,ie.N)((lt,qe)=>{let $e,he=!0;lt.subscribe((0,fe._)(qe,Ve=>{const xe=de(Ve);(he||!ae($e,xe))&&(he=!1,$e=xe,qe.next(Ve))}))})}function te(ae,de){return ae===de}},5964:(Bt,tt,M)=>{"use strict";M.d(tt,{p:()=>fe});var m=M(9974),ie=M(4360);function fe(se,te){return(0,m.N)((ae,de)=>{let lt=0;ae.subscribe((0,ie._)(de,qe=>se.call(te,qe,lt++)&&de.next(qe)))})}},6354:(Bt,tt,M)=>{"use strict";M.d(tt,{T:()=>fe});var m=M(9974),ie=M(4360);function fe(se,te){return(0,m.N)((ae,de)=>{let lt=0;ae.subscribe((0,ie._)(de,qe=>{de.next(se.call(te,qe,lt++))}))})}},6365:(Bt,tt,M)=>{"use strict";M.d(tt,{U:()=>fe});var m=M(1397),ie=M(3669);function fe(se=1/0){return(0,m.Z)(ie.D,se)}},1397:(Bt,tt,M)=>{"use strict";M.d(tt,{Z:()=>lt});var m=M(6354),ie=M(8750),fe=M(9974),se=M(5225),te=M(4360),de=M(8071);function lt(qe,$e,he=1/0){return(0,de.T)($e)?lt((Ve,xe)=>(0,m.T)((ee,Ue)=>$e(Ve,ee,xe,Ue))((0,ie.Tg)(qe(Ve,xe))),he):("number"==typeof $e&&(he=$e),(0,fe.N)((Ve,xe)=>function ae(qe,$e,he,Ve,xe,ee,Ue,Te){const Oe=[];let pe=0,Be=0,dt=!1;const De=()=>{dt&&!Oe.length&&!pe&&$e.complete()},He=at=>pe<Ve?be(at):Oe.push(at),be=at=>{ee&&$e.next(at),pe++;let ot=!1;(0,ie.Tg)(he(at,Be++)).subscribe((0,te._)($e,ce=>{xe?.(ce),ee?He(ce):$e.next(ce)},()=>{ot=!0},void 0,()=>{if(ot)try{for(pe--;Oe.length&&pe<Ve;){const ce=Oe.shift();Ue?(0,se.N)($e,Ue,()=>be(ce)):be(ce)}De()}catch(ce){$e.error(ce)}}))};return qe.subscribe((0,te._)($e,He,()=>{dt=!0,De()})),()=>{Te?.()}}(Ve,xe,qe,he)))}},7647:(Bt,tt,M)=>{"use strict";M.d(tt,{u:()=>te});var m=M(8750),ie=M(1413),fe=M(7707),se=M(9974);function te(de={}){const{connector:lt=(()=>new ie.B),resetOnError:qe=!0,resetOnComplete:$e=!0,resetOnRefCountZero:he=!0}=de;return Ve=>{let xe,ee,Ue,Te=0,Oe=!1,pe=!1;const Be=()=>{ee?.unsubscribe(),ee=void 0},dt=()=>{Be(),xe=Ue=void 0,Oe=pe=!1},De=()=>{const He=xe;dt(),He?.unsubscribe()};return(0,se.N)((He,be)=>{Te++,!pe&&!Oe&&Be();const at=Ue=Ue??lt();be.add(()=>{Te--,0===Te&&!pe&&!Oe&&(ee=ae(De,he))}),at.subscribe(be),!xe&&Te>0&&(xe=new fe.Ms({next:ot=>at.next(ot),error:ot=>{pe=!0,Be(),ee=ae(dt,qe,ot),at.error(ot)},complete:()=>{Oe=!0,Be(),ee=ae(dt,$e),at.complete()}}),(0,m.Tg)(He).subscribe(xe))})(Ve)}}function ae(de,lt,...qe){if(!0===lt)return void de();if(!1===lt)return;const $e=new fe.Ms({next:()=>{$e.unsubscribe(),de()}});return(0,m.Tg)(lt(...qe)).subscribe($e)}},6496:(Bt,tt,M)=>{"use strict";M.d(tt,{t:()=>te});var m=M(1413),ie=M(6129);class fe extends m.B{constructor(de=1/0,lt=1/0,qe=ie.U){super(),this._bufferSize=de,this._windowTime=lt,this._timestampProvider=qe,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=lt===1/0,this._bufferSize=Math.max(1,de),this._windowTime=Math.max(1,lt)}next(de){const{isStopped:lt,_buffer:qe,_infiniteTimeWindow:$e,_timestampProvider:he,_windowTime:Ve}=this;lt||(qe.push(de),!$e&&qe.push(he.now()+Ve)),this._trimBuffer(),super.next(de)}_subscribe(de){this._throwIfClosed(),this._trimBuffer();const lt=this._innerSubscribe(de),{_infiniteTimeWindow:qe,_buffer:$e}=this,he=$e.slice();for(let Ve=0;Ve<he.length&&!de.closed;Ve+=qe?1:2)de.next(he[Ve]);return this._checkFinalizedStatuses(de),lt}_trimBuffer(){const{_bufferSize:de,_timestampProvider:lt,_buffer:qe,_infiniteTimeWindow:$e}=this,he=($e?1:2)*de;if(de<1/0&&he<qe.length&&qe.splice(0,qe.length-he),!$e){const Ve=lt.now();let xe=0;for(let ee=1;ee<qe.length&&qe[ee]<=Ve;ee+=2)xe=ee;xe&&qe.splice(0,xe+1)}}}var se=M(7647);function te(ae,de,lt){let qe,$e=!1;return ae&&"object"==typeof ae?({bufferSize:qe=1/0,windowTime:de=1/0,refCount:$e=!1,scheduler:lt}=ae):qe=ae??1/0,(0,se.u)({connector:()=>new fe(qe,de,lt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$e})}},9172:(Bt,tt,M)=>{"use strict";M.d(tt,{Z:()=>se});var m=M(8793),ie=M(9326),fe=M(9974);function se(...te){const ae=(0,ie.lI)(te);return(0,fe.N)((de,lt)=>{(ae?(0,m.x)(te,de,ae):(0,m.x)(te,de)).subscribe(lt)})}},6129:(Bt,tt,M)=>{"use strict";M.d(tt,{U:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},9270:(Bt,tt,M)=>{"use strict";M.d(tt,{f:()=>m});const m={setTimeout(ie,fe,...se){const{delegate:te}=m;return te?.setTimeout?te.setTimeout(ie,fe,...se):setTimeout(ie,fe,...se)},clearTimeout(ie){const{delegate:fe}=m;return(fe?.clearTimeout||clearTimeout)(ie)},delegate:void 0}},4761:(Bt,tt,M)=>{"use strict";M.d(tt,{l:()=>ie});const ie=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3494:(Bt,tt,M)=>{"use strict";M.d(tt,{s:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},9350:(Bt,tt,M)=>{"use strict";M.d(tt,{G:()=>ie});const ie=(0,M(1853).L)(fe=>function(){fe(this),this.name="EmptyError",this.message="no elements in sequence"})},9326:(Bt,tt,M)=>{"use strict";M.d(tt,{R0:()=>ae,lI:()=>te,ms:()=>se});var m=M(8071),ie=M(9470);function fe(de){return de[de.length-1]}function se(de){return(0,m.T)(fe(de))?de.pop():void 0}function te(de){return(0,ie.m)(fe(de))?de.pop():void 0}function ae(de,lt){return"number"==typeof fe(de)?de.pop():lt}},7908:(Bt,tt,M)=>{"use strict";function m(ie,fe){if(ie){const se=ie.indexOf(fe);0<=se&&ie.splice(se,1)}}M.d(tt,{o:()=>m})},1853:(Bt,tt,M)=>{"use strict";function m(ie){const se=ie(te=>{Error.call(te),te.stack=(new Error).stack});return se.prototype=Object.create(Error.prototype),se.prototype.constructor=se,se}M.d(tt,{L:()=>m})},9786:(Bt,tt,M)=>{"use strict";M.d(tt,{Y:()=>fe,l:()=>se});var m=M(1026);let ie=null;function fe(te){if(m.$.useDeprecatedSynchronousErrorHandling){const ae=!ie;if(ae&&(ie={errorThrown:!1,error:null}),te(),ae){const{errorThrown:de,error:lt}=ie;if(ie=null,de)throw lt}}else te()}function se(te){m.$.useDeprecatedSynchronousErrorHandling&&ie&&(ie.errorThrown=!0,ie.error=te)}},5225:(Bt,tt,M)=>{"use strict";function m(ie,fe,se,te=0,ae=!1){const de=fe.schedule(function(){se(),ae?ie.add(this.schedule(null,te)):this.unsubscribe()},te);if(ie.add(de),!ae)return de}M.d(tt,{N:()=>m})},3669:(Bt,tt,M)=>{"use strict";function m(ie){return ie}M.d(tt,{D:()=>m})},7441:(Bt,tt,M)=>{"use strict";M.d(tt,{X:()=>m});const m=ie=>ie&&"number"==typeof ie.length&&"function"!=typeof ie},7953:(Bt,tt,M)=>{"use strict";M.d(tt,{T:()=>ie});var m=M(8071);function ie(fe){return Symbol.asyncIterator&&(0,m.T)(fe?.[Symbol.asyncIterator])}},8071:(Bt,tt,M)=>{"use strict";function m(ie){return"function"==typeof ie}M.d(tt,{T:()=>m})},5055:(Bt,tt,M)=>{"use strict";M.d(tt,{l:()=>fe});var m=M(3494),ie=M(8071);function fe(se){return(0,ie.T)(se[m.s])}},5397:(Bt,tt,M)=>{"use strict";M.d(tt,{x:()=>fe});var m=M(4761),ie=M(8071);function fe(se){return(0,ie.T)(se?.[m.l])}},9858:(Bt,tt,M)=>{"use strict";M.d(tt,{y:()=>ie});var m=M(8071);function ie(fe){return(0,m.T)(fe?.then)}},5196:(Bt,tt,M)=>{"use strict";M.d(tt,{C:()=>fe,U:()=>se});var m=M(1635),ie=M(8071);function fe(te){return(0,m.AQ)(this,arguments,function*(){const de=te.getReader();try{for(;;){const{value:lt,done:qe}=yield(0,m.N3)(de.read());if(qe)return yield(0,m.N3)(void 0);yield yield(0,m.N3)(lt)}}finally{de.releaseLock()}})}function se(te){return(0,ie.T)(te?.getReader)}},9470:(Bt,tt,M)=>{"use strict";M.d(tt,{m:()=>ie});var m=M(8071);function ie(fe){return fe&&(0,m.T)(fe.schedule)}},9974:(Bt,tt,M)=>{"use strict";M.d(tt,{N:()=>fe,S:()=>ie});var m=M(8071);function ie(se){return(0,m.T)(se?.lift)}function fe(se){return te=>{if(ie(te))return te.lift(function(ae){try{return se(ae,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5343:(Bt,tt,M)=>{"use strict";function m(){}M.d(tt,{l:()=>m})},1203:(Bt,tt,M)=>{"use strict";M.d(tt,{F:()=>ie,m:()=>fe});var m=M(3669);function ie(...se){return fe(se)}function fe(se){return 0===se.length?m.D:1===se.length?se[0]:function(ae){return se.reduce((de,lt)=>lt(de),ae)}}},5334:(Bt,tt,M)=>{"use strict";M.d(tt,{m:()=>fe});var m=M(1026),ie=M(9270);function fe(se){ie.f.setTimeout(()=>{const{onUnhandledError:te}=m.$;if(!te)throw se;te(se)})}},591:(Bt,tt,M)=>{"use strict";function m(ie){return new TypeError(`You provided ${null!==ie&&"object"==typeof ie?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}M.d(tt,{L:()=>m})},9969:(Bt,tt,M)=>{"use strict";M.d(tt,{FX:()=>ce,If:()=>m,K2:()=>ae,hZ:()=>fe,i0:()=>se,iF:()=>de,kY:()=>$e,kp:()=>ie,sf:()=>at,ui:()=>ot,wk:()=>lt});var m=function(ne){return ne[ne.State=0]="State",ne[ne.Transition=1]="Transition",ne[ne.Sequence=2]="Sequence",ne[ne.Group=3]="Group",ne[ne.Animate=4]="Animate",ne[ne.Keyframes=5]="Keyframes",ne[ne.Style=6]="Style",ne[ne.Trigger=7]="Trigger",ne[ne.Reference=8]="Reference",ne[ne.AnimateChild=9]="AnimateChild",ne[ne.AnimateRef=10]="AnimateRef",ne[ne.Query=11]="Query",ne[ne.Stagger=12]="Stagger",ne}(m||{});const ie="*";function fe(ne,W){return{type:m.Trigger,name:ne,definitions:W,options:{}}}function se(ne,W=null){return{type:m.Animate,styles:W,timings:ne}}function ae(ne,W=null){return{type:m.Sequence,steps:ne,options:W}}function de(ne){return{type:m.Style,styles:ne,offset:null}}function lt(ne,W,ft){return{type:m.State,name:ne,styles:W,options:ft}}function $e(ne,W,ft=null){return{type:m.Transition,expr:ne,animation:W,options:ft}}class at{constructor(W=0,ft=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=W+ft}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(W=>W()),this._onDoneFns=[])}onStart(W){this._originalOnStartFns.push(W),this._onStartFns.push(W)}onDone(W){this._originalOnDoneFns.push(W),this._onDoneFns.push(W)}onDestroy(W){this._onDestroyFns.push(W)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(W=>W()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(W=>W()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(W){this._position=this.totalTime?W*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(W){const ft="start"==W?this._onStartFns:this._onDoneFns;ft.forEach(At=>At()),ft.length=0}}class ot{constructor(W){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=W;let ft=0,At=0,xt=0;const yn=this.players.length;0==yn?queueMicrotask(()=>this._onFinish()):this.players.forEach(rn=>{rn.onDone(()=>{++ft==yn&&this._onFinish()}),rn.onDestroy(()=>{++At==yn&&this._onDestroy()}),rn.onStart(()=>{++xt==yn&&this._onStart()})}),this.totalTime=this.players.reduce((rn,pn)=>Math.max(rn,pn.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(W=>W()),this._onDoneFns=[])}init(){this.players.forEach(W=>W.init())}onStart(W){this._onStartFns.push(W)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(W=>W()),this._onStartFns=[])}onDone(W){this._onDoneFns.push(W)}onDestroy(W){this._onDestroyFns.push(W)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(W=>W.play())}pause(){this.players.forEach(W=>W.pause())}restart(){this.players.forEach(W=>W.restart())}finish(){this._onFinish(),this.players.forEach(W=>W.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(W=>W.destroy()),this._onDestroyFns.forEach(W=>W()),this._onDestroyFns=[])}reset(){this.players.forEach(W=>W.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(W){const ft=W*this.totalTime;this.players.forEach(At=>{const xt=At.totalTime?Math.min(1,ft/At.totalTime):1;At.setPosition(xt)})}getPosition(){const W=this.players.reduce((ft,At)=>null===ft||At.totalTime>ft.totalTime?At:ft,null);return null!=W?W.getPosition():0}beforeDestroy(){this.players.forEach(W=>{W.beforeDestroy&&W.beforeDestroy()})}triggerCallback(W){const ft="start"==W?this._onStartFns:this._onDoneFns;ft.forEach(At=>At()),ft.length=0}}const ce="!"},3953:(Bt,tt,M)=>{"use strict";M.d(tt,{bc$:()=>KF,iLQ:()=>Ha,sZ2:()=>vE,hnV:()=>yR,Hbi:()=>Xk,o8S:()=>za,BIS:()=>WF,gRc:()=>Wy,Ql9:()=>fV,OM3:()=>ru,Ocv:()=>jd,Z63:()=>sa,aKT:()=>Bp,uvJ:()=>Bo,zcH:()=>Ma,bkB:()=>Hc,$GK:()=>yt,nKC:()=>Dn,zZn:()=>Pi,_q3:()=>Xy,MKu:()=>BR,xe9:()=>AI,Co$:()=>Xu,Vns:()=>Qu,SKi:()=>Wn,Xx1:()=>Du,Agw:()=>xC,PLl:()=>UM,rOR:()=>Iv,sFG:()=>VP,_9s:()=>pc,czy:()=>Qv,WPN:()=>Lu,kdw:()=>eh,C4Q:()=>Bu,NYb:()=>sV,giA:()=>Mk,RxE:()=>vI,c1b:()=>id,gXe:()=>Tu,mal:()=>aS,Tzd:()=>sS,L39:()=>qV,Ol2:()=>A0,w6W:()=>IS,oH4:()=>TR,QZP:()=>C1,WQX:()=>sn,naY:()=>Ud,Hps:()=>I_,QuC:()=>Au,EmA:()=>nt,fpN:()=>UR,HJs:()=>n2,N4e:()=>zg,O8t:()=>ZV,An2:()=>tu,H3F:()=>ng,zAP:()=>$d,H8p:()=>jg,KH2:()=>js,TgB:()=>Bl,wOt:()=>zt,WHO:()=>Rk,e01:()=>xk,lNU:()=>qd,h9k:()=>Hv,$MX:()=>qp,ZF7:()=>dc,Kcf:()=>HC,e5t:()=>XF,UyX:()=>eO,cWb:()=>Uv,osQ:()=>tO,H5H:()=>al,mq5:()=>mw,JZv:()=>hr,LfX:()=>oo,plB:()=>iu,jNT:()=>wI,zjR:()=>Pk,ngT:()=>xo,TL$:()=>HF,Tbb:()=>Wr,rcV:()=>Ni,Vt3:()=>fa,GFd:()=>qu,OA$:()=>Qg,Jv_:()=>rR,aNF:()=>oI,R7$:()=>BO,BMQ:()=>_d,HbH:()=>XS,AVh:()=>J_,vxM:()=>ny,wni:()=>wy,VBU:()=>ED,FsC:()=>wD,jDH:()=>ir,G2t:()=>xr,$C:()=>kb,EJ8:()=>rh,rXU:()=>tm,nrm:()=>dw,k0s:()=>_f,j41:()=>Cd,RV6:()=>fA,xGo:()=>yM,KVO:()=>so,kS0:()=>_v,QTQ:()=>jO,bIt:()=>Um,lsd:()=>Hw,qSk:()=>uM,XpG:()=>xd,SdG:()=>LA,NAR:()=>_y,Y8G:()=>pu,mGM:()=>Iy,sdS:()=>Dy,Njj:()=>kD,eBV:()=>cM,n$t:()=>JC,DNE:()=>Rm,EFF:()=>Sy,GBs:()=>HA});let ie=null,fe=!1,se=1;const te=Symbol("SIGNAL");function ae(i){const o=ie;return ie=i,o}const $e={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xe(i){if((!be(i)||i.dirty)&&(i.dirty||i.lastCleanEpoch!==se)){if(!i.producerMustRecompute(i)&&!Be(i))return i.dirty=!1,void(i.lastCleanEpoch=se);i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=se}}function Te(i){i.dirty=!0,function ee(i){if(void 0===i.liveConsumerNode)return;const o=fe;fe=!0;try{for(const a of i.liveConsumerNode)a.dirty||Te(a)}finally{fe=o}}(i),i.consumerMarkedDirty?.(i)}function Oe(i){return i&&(i.nextProducerIndex=0),ae(i)}function pe(i,o){if(ae(o),i&&void 0!==i.producerNode&&void 0!==i.producerIndexOfThis&&void 0!==i.producerLastReadVersion){if(be(i))for(let a=i.nextProducerIndex;a<i.producerNode.length;a++)He(i.producerNode[a],i.producerIndexOfThis[a]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function Be(i){at(i);for(let o=0;o<i.producerNode.length;o++){const a=i.producerNode[o],c=i.producerLastReadVersion[o];if(c!==a.version||(xe(a),c!==a.version))return!0}return!1}function dt(i){if(at(i),be(i))for(let o=0;o<i.producerNode.length;o++)He(i.producerNode[o],i.producerIndexOfThis[o]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function He(i,o){if(function ot(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}(i),1===i.liveConsumerNode.length&&function ce(i){return void 0!==i.producerNode}(i))for(let c=0;c<i.producerNode.length;c++)He(i.producerNode[c],i.producerIndexOfThis[c]);const a=i.liveConsumerNode.length-1;if(i.liveConsumerNode[o]=i.liveConsumerNode[a],i.liveConsumerIndexOfThis[o]=i.liveConsumerIndexOfThis[a],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,o<i.liveConsumerNode.length){const c=i.liveConsumerIndexOfThis[o],l=i.liveConsumerNode[o];at(l),l.producerIndexOfThis[c]=o}}function be(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function at(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}let rn=null;const Je=()=>{},Ct={...$e,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{null!==i.schedule&&i.schedule(i.ref)},hasRun:!1,cleanupFn:Je};var Mt=M(4412),jt=M(1413),on=M(8359),en=M(6354);typeof navigator<"u"&&navigator,typeof navigator<"u"&&!/Opera/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||navigator),typeof navigator<"u"&&!/Opera|WebKit/.test(navigator.userAgent)&&navigator,typeof navigator<"u"&&navigator;const qd="https://g.co/ng/security#xss";class zt extends Error{constructor(o,a){super(function is(i,o){return`NG0${Math.abs(i)}${o?": "+o:""}`}(o,a)),this.code=o}}function os(i){return{toString:i}.toString()}const Xa="__parameters__";function ri(i,o,a){return os(()=>{const c=function Pc(i){return function(...a){if(i){const c=i(...a);for(const l in c)this[l]=c[l]}}}(o);function l(...h){if(this instanceof l)return c.apply(this,h),this;const p=new l(...h);return E.annotation=p,E;function E(T,x,k){const z=T.hasOwnProperty(Xa)?T[Xa]:Object.defineProperty(T,Xa,{value:[]})[Xa];for(;z.length<=k;)z.push(null);return(z[k]=z[k]||[]).push(p),T}}return a&&(l.prototype=Object.create(a.prototype)),l.prototype.ngMetadataName=i,l.annotationCls=l,l})}const hr=globalThis;function ur(i){for(let o in i)if(i[o]===ur)return o;throw Error("Could not find renamed property on target object.")}function rp(i,o){for(const a in o)o.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=o[a])}function Wr(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Wr).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function wl(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const Xd=ur({__forward_ref__:ur});function Eu(i){return i.__forward_ref__=Eu,i.toString=function(){return Wr(this())},i}function bn(i){return wu(i)?i():i}function wu(i){return"function"==typeof i&&i.hasOwnProperty(Xd)&&i.__forward_ref__===Eu}function ir(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function xr(i){return{providers:i.providers||[],imports:i.imports||[]}}function Da(i){return Zd(i,Fo)||Zd(i,Ca)}function oo(i){return null!==Da(i)}function Zd(i,o){return i.hasOwnProperty(o)?i[o]:null}function Iu(i){return i&&(i.hasOwnProperty(Fc)||i.hasOwnProperty(ss))?i[Fc]:null}const Fo=ur({\u0275prov:ur}),Fc=ur({\u0275inj:ur}),Ca=ur({ngInjectableDef:ur}),ss=ur({ngInjectorDef:ur});class Dn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=ir({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function et(i){return i&&!!i.\u0275providers}const Ce=ur({\u0275cmp:ur}),Qe=ur({\u0275dir:ur}),Ne=ur({\u0275pipe:ur}),Ke=ur({\u0275mod:ur}),Xe=ur({\u0275fac:ur}),je=ur({__NG_ELEMENT_ID__:ur}),pt=ur({__NG_ENV_ID__:ur});function We(i){return"string"==typeof i?i:null==i?"":String(i)}function Wt(i,o){throw new zt(-201,!1)}var yt=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(yt||{});let Rn;function Nn(){return Rn}function Cn(i){const o=Rn;return Rn=i,o}function Ln(i,o,a){const c=Da(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&yt.Optional?null:void 0!==o?o:void Wt()}const ci={},vi="__NG_DI_FLAG__",Za="ngTempTokenPath",Ja=/\n/gm,Sg="__source";let ec;function ia(i){const o=ec;return ec=i,o}function zx(i,o=yt.Default){if(void 0===ec)throw new zt(-203,!1);return null===ec?Ln(i,void 0,o):ec.get(i,o&yt.Optional?null:void 0,o)}function so(i,o=yt.Default){return(Nn()||zx)(bn(i),o)}function sn(i,o=yt.Default){return so(i,tc(o))}function tc(i){return typeof i>"u"||"number"==typeof i?i:(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function lp(i){const o=[];for(let a=0;a<i.length;a++){const c=bn(i[a]);if(Array.isArray(c)){if(0===c.length)throw new zt(900,!1);let l,h=yt.Default;for(let p=0;p<c.length;p++){const E=c[p],T=bb(E);"number"==typeof T?-1===T?l=E.token:h|=T:l=E}o.push(so(l,h))}else o.push(so(c))}return o}function Dl(i,o){return i[vi]=o,i.prototype[vi]=o,i}function bb(i){return i[vi]}const Du=Dl(ri("Optional"),8),eh=Dl(ri("SkipSelf"),4);function nc(i,o){return i.hasOwnProperty(Xe)?i[Xe]:null}function Cl(i,o){i.forEach(a=>Array.isArray(a)?Cl(a,o):o(a))}function Ib(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function hp(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}function as(i,o,a){let c=Cu(i,o);return c>=0?i[1|c]=a:(c=~c,function pp(i,o,a,c){let l=i.length;if(l==o)i.push(a,c);else if(1===l)i.push(c,i[0]),i[0]=a;else{for(l--,i.push(i[l-1],i[l]);l>o;)i[l]=i[l-2],l--;i[o]=a,i[o+1]=c}}(i,c,o,a)),c}function Cb(i,o){const a=Cu(i,o);if(a>=0)return i[1|a]}function Cu(i,o){return function mp(i,o,a){let c=0,l=i.length>>a;for(;l!==c;){const h=c+(l-c>>1),p=i[h<<a];if(o===p)return h<<a;p>o?l=h:c=h+1}return~(l<<a)}(i,o,1)}const oa={},er=[],sa=new Dn(""),Og=new Dn("",-1),Pg=new Dn("");class gp{get(o,a=ci){if(a===ci){const c=new Error(`NullInjectorError: No provider for ${Wr(o)}!`);throw c.name="NullInjectorError",c}return a}}var vp=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(vp||{}),Tu=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(Tu||{}),Su=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(Su||{});function Tb(i,o,a){let c=i.length;for(;;){const l=i.indexOf(o,a);if(-1===l)return l;if(0===l||i.charCodeAt(l-1)<=32){const h=o.length;if(l+h===c||i.charCodeAt(l+h)<=32)return l}a=l+1}}function Sb(i,o,a){let c=0;for(;c<a.length;){const l=a[c];if("number"==typeof l){if(0!==l)break;c++;const h=a[c++],p=a[c++],E=a[c++];i.setAttribute(o,p,E,h)}else{const h=l,p=a[++c];Rb(h)?i.setProperty(o,h,p):i.setAttribute(o,h,p),c++}}return c}function Ab(i){return 3===i||4===i||6===i}function Rb(i){return 64===i.charCodeAt(0)}function th(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const l=o[c];"number"==typeof l?a=l:0===a||Ng(i,a,l,null,-1===a||2===a?o[++c]:null)}}return i}function Ng(i,o,a,c,l){let h=0,p=i.length;if(-1===o)p=-1;else for(;h<i.length;){const E=i[h++];if("number"==typeof E){if(E===o){p=-1;break}if(E>o){p=h-1;break}}}for(;h<i.length;){const E=i[h];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==l&&(i[h+1]=l));if(c===i[h+1])return void(i[h+2]=l)}h++,null!==c&&h++,null!==l&&h++}-1!==p&&(i.splice(p,0,o),h=p+1),i.splice(h++,0,a),null!==c&&i.splice(h++,0,c),null!==l&&i.splice(h++,0,l)}const xb="ng-template";function Mb(i,o,a,c){let l=0;if(c){for(;l<o.length&&"string"==typeof o[l];l+=2)if("class"===o[l]&&-1!==Tb(o[l+1].toLowerCase(),a,0))return!0}else if(nh(i))return!1;if(l=o.indexOf(1,l),l>-1){let h;for(;++l<o.length&&"string"==typeof(h=o[l]);)if(h.toLowerCase()===a)return!0}return!1}function nh(i){return 4===i.type&&i.value!==xb}function kg(i,o,a){return o===(4!==i.type||a?i.value:xb)}function _D(i,o,a){let c=4;const l=i.attrs,h=null!==l?function Fg(i){for(let o=0;o<i.length;o++)if(Ab(i[o]))return o;return i.length}(l):0;let p=!1;for(let E=0;E<o.length;E++){const T=o[E];if("number"!=typeof T){if(!p)if(4&c){if(c=2|1&c,""!==T&&!kg(i,T,a)||""===T&&1===o.length){if(Ta(c))return!1;p=!0}}else if(8&c){if(null===l||!Mb(i,l,T,a)){if(Ta(c))return!1;p=!0}}else{const x=o[++E],k=Wx(T,l,nh(i),a);if(-1===k){if(Ta(c))return!1;p=!0;continue}if(""!==x){let z;if(z=k>h?"":l[k+1].toLowerCase(),2&c&&x!==z){if(Ta(c))return!1;p=!0}}}}else{if(!p&&!Ta(c)&&!Ta(T))return!1;if(p&&Ta(T))continue;p=!1,c=T|1&c}}return Ta(c)||p}function Ta(i){return!(1&i)}function Wx(i,o,a,c){if(null===o)return-1;let l=0;if(c||!a){let h=!1;for(;l<o.length;){const p=o[l];if(p===i)return l;if(3===p||6===p)h=!0;else{if(1===p||2===p){let E=o[++l];for(;"string"==typeof E;)E=o[++l];continue}if(4===p)break;if(0===p){l+=4;continue}}l+=h?1:2}return-1}return function Vo(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function Ob(i,o,a=!1){for(let c=0;c<o.length;c++)if(_D(i,o[c],a))return!0;return!1}function Nb(i,o){e:for(let a=0;a<o.length;a++){const c=o[a];if(i.length===c.length){for(let l=0;l<i.length;l++)if(i[l]!==c[l])continue e;return!0}}return!1}function yD(i,o){return i?":not("+o.trim()+")":o}function Gx(i){let o=i[0],a=1,c=2,l="",h=!1;for(;a<i.length;){let p=i[a];if("string"==typeof p)if(2&c){const E=i[++a];l+="["+p+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?l+="."+p:4&c&&(l+=" "+p);else""!==l&&!Ta(p)&&(o+=yD(h,l),l=""),c=p,h=h||!Ta(c);a++}return""!==l&&(o+=yD(h,l)),o}function ED(i){return os(()=>{const o=ID(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===vp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||Tu.Emulated,styles:i.styles||er,_:null,schemas:i.schemas||null,tView:null,id:""};DD(a);const c=i.dependencies;return a.directiveDefs=Lg(c,!1),a.pipeDefs=Lg(c,!0),a.id=function Zx(i){let o=0;const a=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(const l of a)o=Math.imul(31,o)+l.charCodeAt(0)|0;return o+=2147483648,"c"+o}(a),a})}function Qx(i){return zn(i)||Vr(i)}function Xx(i){return null!==i}function kb(i){return os(()=>({type:i.type,bootstrap:i.bootstrap||er,declarations:i.declarations||er,imports:i.imports||er,exports:i.exports||er,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function Fb(i,o){if(null==i)return oa;const a={};for(const c in i)if(i.hasOwnProperty(c)){const l=i[c];let h,p,E=Su.None;Array.isArray(l)?(E=l[0],h=l[1],p=l[2]??h):(h=l,p=l),o?(a[h]=E!==Su.None?[c,E]:c,o[h]=p):a[h]=c}return a}function wD(i){return os(()=>{const o=ID(i);return DD(o),o})}function rh(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function zn(i){return i[Ce]||null}function Vr(i){return i[Qe]||null}function _i(i){return i[Ne]||null}function Au(i){const o=zn(i)||Vr(i)||_i(i);return null!==o&&o.standalone}function ao(i,o){const a=i[Ke]||null;if(!a&&!0===o)throw new Error(`Type ${Wr(i)} does not have '\u0275mod' property.`);return a}function ID(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:i.inputs||oa,exportAs:i.exportAs||null,standalone:!0===i.standalone,signals:!0===i.signals,selectors:i.selectors||er,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Fb(i.inputs,o),outputs:Fb(i.outputs),debugInfo:null}}function DD(i){i.features?.forEach(o=>o(i))}function Lg(i,o){if(!i)return null;const a=o?_i:Qx;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(Xx)}function nt(i){return{\u0275providers:i}}function Ps(...i){return{\u0275providers:co(0,i),\u0275fromNgModule:!0}}function co(i,...o){const a=[],c=new Set;let l;const h=p=>{a.push(p)};return Cl(o,p=>{const E=p;yi(E,h,[],c)&&(l||=[],l.push(E))}),void 0!==l&&Lb(l,h),a}function Lb(i,o){for(let a=0;a<i.length;a++){const{ngModule:c,providers:l}=i[a];cn(l,h=>{o(h,c)})}}function yi(i,o,a,c){if(!(i=bn(i)))return!1;let l=null,h=Iu(i);const p=!h&&zn(i);if(h||p){if(p&&!p.standalone)return!1;l=i}else{const T=i.ngModule;if(h=Iu(T),!h)return!1;l=T}const E=c.has(l);if(p){if(E)return!1;if(c.add(l),p.dependencies){const T="function"==typeof p.dependencies?p.dependencies():p.dependencies;for(const x of T)yi(x,o,a,c)}}else{if(!h)return!1;{if(null!=h.imports&&!E){let x;c.add(l);try{Cl(h.imports,k=>{yi(k,o,a,c)&&(x||=[],x.push(k))})}finally{}void 0!==x&&Lb(x,o)}if(!E){const x=nc(l)||(()=>new l);o({provide:l,useFactory:x,deps:er},l),o({provide:Pg,useValue:l,multi:!0},l),o({provide:sa,useValue:()=>so(l),multi:!0},l)}const T=h.providers;if(null!=T&&!E){const x=i;cn(T,k=>{o(k,x)})}}}return l!==i&&void 0!==i.providers}function cn(i,o){for(let a of i)et(a)&&(a=a.\u0275providers),Array.isArray(a)?cn(a,o):o(a)}const Di=ur({provide:String,useValue:ur});function Vg(i){return null!==i&&"object"==typeof i&&Di in i}function rc(i){return"function"==typeof i}const jg=new Dn(""),Lc={},kn={};let Ug;function _p(){return void 0===Ug&&(Ug=new gp),Ug}class Bo{}class Ru extends Bo{get destroyed(){return this._destroyed}constructor(o,a,c,l){super(),this.parent=a,this.source=c,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mu(o,p=>this.processProvider(p)),this.records.set(Og,Vc(void 0,this)),l.has("environment")&&this.records.set(Bo,Vc(void 0,this));const h=this.records.get(jg);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Pg,er,yt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const o=ae(null);try{for(const c of this._ngOnDestroyHooks)c.ngOnDestroy();const a=this._onDestroyHooks;this._onDestroyHooks=[];for(const c of a)c()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ae(o)}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=ia(this),c=Cn(void 0);try{return o()}finally{ia(a),Cn(c)}}get(o,a=ci,c=yt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(pt))return o[pt](this);c=tc(c);const h=ia(this),p=Cn(void 0);try{if(!(c&yt.SkipSelf)){let T=this.records.get(o);if(void 0===T){const x=function Sa(i){return"function"==typeof i||"object"==typeof i&&i instanceof Dn}(o)&&Da(o);T=x&&this.injectableDefInScope(x)?Vc(ui(o),Lc):null,this.records.set(o,T)}if(null!=T)return this.hydrate(o,T)}return(c&yt.Self?_p():this.parent).get(o,a=c&yt.Optional&&a===ci?null:a)}catch(E){if("NullInjectorError"===E.name){if((E[Za]=E[Za]||[]).unshift(Wr(o)),h)throw E;return function Eb(i,o,a,c){const l=i[Za];throw o[Sg]&&l.unshift(o[Sg]),i.message=function Jd(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let l=Wr(o);if(Array.isArray(o))l=o.map(Wr).join(" -> ");else if("object"==typeof o){let h=[];for(let p in o)if(o.hasOwnProperty(p)){let E=o[p];h.push(p+":"+("string"==typeof E?JSON.stringify(E):Wr(E)))}l=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${l}]: ${i.replace(Ja,"\n  ")}`}("\n"+i.message,l,a,c),i.ngTokenPath=l,i[Za]=null,i}(E,o,"R3InjectorError",this.source)}throw E}finally{Cn(p),ia(h)}}resolveInjectorInitializers(){const o=ae(null),a=ia(this),c=Cn(void 0);try{const h=this.get(sa,er,yt.Self);for(const p of h)p()}finally{ia(a),Cn(c),ae(o)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Wr(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new zt(205,!1)}processProvider(o){let a=rc(o=bn(o))?o:bn(o&&o.provide);const c=function xu(i){return Vg(i)?Vc(void 0,i.useValue):Vc(Hg(i),Lc)}(o);if(!rc(o)&&!0===o.multi){let l=this.records.get(a);l||(l=Vc(void 0,Lc,!0),l.factory=()=>lp(l.multi),this.records.set(a,l)),a=o,l.multi.push(o)}this.records.set(a,c)}hydrate(o,a){const c=ae(null);try{return a.value===Lc&&(a.value=kn,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ah(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}finally{ae(c)}}injectableDefInScope(o){if(!o.providedIn)return!1;const a=bn(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function ui(i){const o=Da(i),a=null!==o?o.factory:nc(i);if(null!==a)return a;if(i instanceof Dn)throw new zt(204,!1);if(i instanceof Function)return function $g(i){if(i.length>0)throw new zt(204,!1);const a=function Il(i){return i&&(i[Fo]||i[Ca])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new zt(204,!1)}function Hg(i,o,a){let c;if(rc(i)){const l=bn(i);return nc(l)||ui(l)}if(Vg(i))c=()=>bn(i.useValue);else if(function oh(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...lp(i.deps||[]));else if(function Bg(i){return!(!i||!i.useExisting)}(i))c=()=>so(bn(i.useExisting));else{const l=bn(i&&(i.useClass||i.provide));if(!function sh(i){return!!i.deps}(i))return nc(l)||ui(l);c=()=>new l(...lp(i.deps))}return c}function Vc(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function Mu(i,o){for(const a of i)Array.isArray(a)?Mu(a,o):a&&et(a)?Mu(a.\u0275providers,o):o(a)}function zg(i,o){i instanceof Ru&&i.assertNotDestroyed();const c=ia(i),l=Cn(void 0);try{return o()}finally{ia(c),Cn(l)}}function Bc(){return void 0!==Nn()||null!=function Hx(){return ec}()}function cs(i){if(!Bc())throw new zt(-203,!1)}const On=0,y=1,b=2,C=3,w=4,O=5,B=6,Y=7,Z=8,ve=9,st=10,Se=11,wt=12,nn=13,Yt=14,mn=15,Un=16,Fn=17,lr=18,di=19,jo=20,or=21,uo=22,lo=23,an=25,bp=1,Uo=7,xa=9,Mr=10;var us=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(us||{});function Tn(i){return Array.isArray(i)&&"object"==typeof i[bp]}function $r(i){return Array.isArray(i)&&!0===i[bp]}function jb(i){return!!(4&i.flags)}function Ns(i){return i.componentOffset>-1}function Wg(i){return!(1&~i.flags)}function Ao(i){return!!i.template}function Ou(i){return!!(512&i[b])}class Al{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function RD(i,o,a,c){null!==o?o.applyValueToInputSignal(o,c):i[a]=c}function Qg(){return zb}function zb(i){return i.type.prototype.ngOnChanges&&(i.setInput=Ep),Xg}function Xg(){const i=Kb(this),o=i?.current;if(o){const a=i.previous;if(a===oa)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Ep(i,o,a,c,l){const h=this.declaredInputs[c],p=Kb(i)||function xD(i,o){return i[Yg]=o}(i,{previous:oa,current:null}),E=p.current||(p.current={}),T=p.previous,x=T[h];E[h]=new Al(x&&x.currentValue,a,T===oa),RD(i,o,l,a)}Qg.ngInherit=!0;const Yg="__ngSimpleChanges__";function Kb(i){return i[Yg]||null}const ic=function(i,o,a){},MD="svg";function sr(i){for(;Array.isArray(i);)i=i[On];return i}function ho(i,o){return sr(o[i.index])}function uh(i,o){return i.data[o]}function fo(i,o){const a=o[i];return Tn(a)?a:a[On]}function aa(i){return!(128&~i[b])}function Ci(i,o){return null==o?null:i[o]}function ls(i){i[Fn]=0}function Ip(i){1024&i[b]||(i[b]|=1024,aa(i)&&Cp(i))}function oc(i){return!!(9216&i[b]||i[lo]?.dirty)}function Dp(i){i[st].changeDetectionScheduler?.notify(7),64&i[b]&&(i[b]|=1024),oc(i)&&Cp(i)}function Cp(i){i[st].changeDetectionScheduler?.notify(0);let o=Uc(i);for(;null!==o&&!(8192&o[b])&&(o[b]|=8192,aa(o));)o=Uc(o)}function ev(i,o){if(!(256&~i[b]))throw new zt(911,!1);null===i[or]&&(i[or]=[]),i[or].push(o)}function Uc(i){const o=i[C];return $r(o)?o[C]:o}const xn={lFrame:jD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let PD=!1;function nv(){return xn.bindingsEnabled}function sc(){return null!==xn.skipHydrationRootTNode}function bt(){return xn.lFrame.lView}function Kn(){return xn.lFrame.tView}function cM(i){return xn.lFrame.contextLView=i,i[Z]}function kD(i){return xn.lFrame.contextLView=null,i}function Tr(){let i=ca();for(;null!==i&&64===i.type;)i=i.parent;return i}function ca(){return xn.lFrame.currentTNode}function $o(i,o){const a=xn.lFrame;a.currentTNode=i,a.isParent=o}function Qb(){return xn.lFrame.isParent}function xl(){xn.lFrame.isParent=!1}function Ml(){return PD}function Yb(i){PD=i}function ds(){return xn.lFrame.bindingIndex++}function la(i){const o=xn.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}function BD(i,o){const a=xn.lFrame;a.bindingIndex=a.bindingRootIndex=i,Sp(o)}function Sp(i){xn.lFrame.currentDirectiveIndex=i}function Ap(){return xn.lFrame.currentQueryIndex}function lh(i){xn.lFrame.currentQueryIndex=i}function ov(i){const o=i[y];return 2===o.type?o.declTNode:1===o.type?i[O]:null}function Jb(i,o,a){if(a&yt.SkipSelf){let l=o,h=i;for(;!(l=l.parent,null!==l||a&yt.Host||(l=ov(h),null===l||(h=h[Yt],10&l.type))););if(null===l)return!1;o=l,i=h}const c=xn.lFrame=dh();return c.currentTNode=o,c.lView=i,!0}function eE(i){const o=dh(),a=i[y];xn.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function dh(){const i=xn.lFrame,o=null===i?null:i.child;return null===o?jD(i):o}function jD(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function UD(){const i=xn.lFrame;return xn.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const sv=UD;function av(){const i=UD();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function qi(){return xn.lFrame.selectedIndex}function Pl(i){xn.lFrame.selectedIndex=i}function Fr(){const i=xn.lFrame;return uh(i.tView,i.selectedIndex)}function uM(){xn.lFrame.currentNamespace=MD}let HD=!0;function xp(){return HD}function Ho(i){HD=i}function uv(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:E,ngAfterViewInit:T,ngAfterViewChecked:x,ngOnDestroy:k}=h;p&&(i.contentHooks??=[]).push(-a,p),E&&((i.contentHooks??=[]).push(a,E),(i.contentCheckHooks??=[]).push(a,E)),T&&(i.viewHooks??=[]).push(-a,T),x&&((i.viewHooks??=[]).push(a,x),(i.viewCheckHooks??=[]).push(a,x)),null!=k&&(i.destroyHooks??=[]).push(a,k)}}function lv(i,o,a){zD(i,o,3,a)}function ku(i,o,a,c){(3&i[b])===a&&zD(i,o,a,c)}function Nl(i,o){let a=i[b];(3&a)===o&&(a&=16383,a+=1,i[b]=a)}function zD(i,o,a,c){const h=c??-1,p=o.length-1;let E=0;for(let T=void 0!==c?65535&i[Fn]:0;T<p;T++)if("number"==typeof o[T+1]){if(E=o[T],null!=c&&E>=c)break}else o[T]<0&&(i[Fn]+=65536),(E<h||-1==h)&&(hM(i,a,o,T),i[Fn]=(4294901760&i[Fn])+T+2),T++}function KD(i,o){ic(4,i,o);const a=ae(null);try{o.call(i)}finally{ae(a),ic(5,i,o)}}function hM(i,o,a,c){const l=a[c]<0,h=a[c+1],E=i[l?-a[c]:a[c]];l?i[b]>>14<i[Fn]>>16&&(3&i[b])===o&&(i[b]+=16384,KD(E,h)):KD(E,h)}const hh=-1;class Op{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}const tE={};class kl{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=tc(c);const l=this.injector.get(o,tE,c);return l!==tE||a===tE?l:this.parentInjector.get(o,a,c)}}function nE(i){return i!==hh}function Np(i){return 32767&i}function kp(i,o){let a=function mM(i){return i>>16}(i),c=o;for(;a>0;)c=c[Yt],a--;return c}let hv=!0;function fv(i){const o=hv;return hv=i,o}const Fp=255,Fl=5;let PF=0;const ac={};function pv(i,o){const a=GD(i,o);if(-1!==a)return a;const c=o[y];c.firstCreatePass&&(i.injectorIndex=o.length,Lp(c.data,i),Lp(o,null),Lp(c.blueprint,null));const l=ph(i,o),h=i.injectorIndex;if(nE(l)){const p=Np(l),E=kp(l,o),T=E[y].data;for(let x=0;x<8;x++)o[h+x]=E[p+x]|T[p+x]}return o[h+8]=l,h}function Lp(i,o){i.push(0,0,0,0,0,0,0,0,o)}function GD(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function ph(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,l=o;for(;null!==l;){if(c=rC(l),null===c)return hh;if(a++,l=l[Yt],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return hh}function rE(i,o,a){!function vM(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(je)&&(c=a[je]),null==c&&(c=a[je]=PF++);const l=c&Fp;o.data[i+(l>>Fl)]|=1<<l}(i,o,a)}function QD(i,o,a){if(a&yt.Optional||void 0!==i)return i;Wt()}function XD(i,o,a,c){if(a&yt.Optional&&void 0===c&&(c=null),!(a&(yt.Self|yt.Host))){const l=i[ve],h=Cn(void 0);try{return l?l.get(o,c,a&yt.Optional):Ln(o,c,a&yt.Optional)}finally{Cn(h)}}return QD(c,0,a)}function YD(i,o,a,c=yt.Default,l){if(null!==i){if(2048&o[b]&&!(c&yt.Self)){const p=function nC(i,o,a,c,l){let h=i,p=o;for(;null!==h&&null!==p&&2048&p[b]&&!(512&p[b]);){const E=ZD(h,p,a,c|yt.Self,ac);if(E!==ac)return E;let T=h.parent;if(!T){const x=p[jo];if(x){const k=x.get(a,ac,c);if(k!==ac)return k}T=rC(p),p=p[Yt]}h=T}return l}(i,o,a,c,ac);if(p!==ac)return p}const h=ZD(i,o,a,c,ac);if(h!==ac)return h}return XD(o,a,c,l)}function ZD(i,o,a,c,l){const h=function _M(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(je)?i[je]:void 0;return"number"==typeof o?o>=0?o&Fp:tC:o}(a);if("function"==typeof h){if(!Jb(o,i,c))return c&yt.Host?QD(l,0,c):XD(o,a,c,l);try{let p;if(p=h(c),null!=p||c&yt.Optional)return p;Wt()}finally{sv()}}else if("number"==typeof h){let p=null,E=GD(i,o),T=hh,x=c&yt.Host?o[mn][O]:null;for((-1===E||c&yt.SkipSelf)&&(T=-1===E?ph(i,o):o[E+8],T!==hh&&eC(c,!1)?(p=o[y],E=Np(T),o=kp(T,o)):E=-1);-1!==E;){const k=o[y];if(JD(h,E,k.data)){const z=mv(E,o,a,p,c,x);if(z!==ac)return z}T=o[E+8],T!==hh&&eC(c,o[y].data[E+8]===x)&&JD(h,E,o)?(p=k,E=Np(T),o=kp(T,o)):E=-1}}return l}function mv(i,o,a,c,l,h){const p=o[y],E=p.data[i+8],k=gv(E,p,a,null==c?Ns(E)&&hv:c!=p&&!!(3&E.type),l&yt.Host&&h===E);return null!==k?Ll(o,p,k,E):ac}function gv(i,o,a,c,l){const h=i.providerIndexes,p=o.data,E=1048575&h,T=i.directiveStart,k=h>>20,le=l?E+k:i.directiveEnd;for(let _e=c?E:E+k;_e<le;_e++){const Ze=p[_e];if(_e<T&&a===Ze||_e>=T&&Ze.type===a)return _e}if(l){const _e=p[T];if(_e&&Ao(_e)&&_e.type===a)return T}return null}function Ll(i,o,a,c){let l=i[a];const h=o.data;if(function fM(i){return i instanceof Op}(l)){const p=l;p.resolving&&function qt(i,o){throw o&&o.join(" > "),new zt(-200,i)}(function rt(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():We(i)}(h[a]));const E=fv(p.canSeeViewProviders);p.resolving=!0;const x=p.injectImpl?Cn(p.injectImpl):null;Jb(i,c,yt.Default);try{l=i[a]=p.factory(void 0,h,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Mp(i,o,a){const{ngOnChanges:c,ngOnInit:l,ngDoCheck:h}=o.type.prototype;if(c){const p=zb(o);(a.preOrderHooks??=[]).push(i,p),(a.preOrderCheckHooks??=[]).push(i,p)}l&&(a.preOrderHooks??=[]).push(0-i,l),h&&((a.preOrderHooks??=[]).push(i,h),(a.preOrderCheckHooks??=[]).push(i,h))}(a,h[a],o)}finally{null!==x&&Cn(x),fv(E),p.resolving=!1,sv()}}return l}function JD(i,o,a){return!!(a[o+(i>>Fl)]&1<<i)}function eC(i,o){return!(i&yt.Self||i&yt.Host&&o)}class Oi{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return YD(this._tNode,this._lView,o,tc(c),a)}}function tC(){return new Oi(Tr(),bt())}function yM(i){return os(()=>{const o=i.prototype.constructor,a=o[Xe]||vv(o),c=Object.prototype;let l=Object.getPrototypeOf(i.prototype).constructor;for(;l&&l!==c;){const h=l[Xe]||vv(l);if(h&&h!==a)return h;l=Object.getPrototypeOf(l)}return h=>new h})}function vv(i){return wu(i)?()=>{const o=vv(bn(i));return o&&o()}:nc(i)}function rC(i){const o=i[y],a=o.type;return 2===a?o.declTNode:1===a?i[O]:null}function _v(i){return function qD(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let l=0;for(;l<c;){const h=a[l];if(Ab(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<c&&"string"==typeof a[l];)l++;else{if(h===o)return a[l+1];l+=2}}}return null}(Tr(),i)}function cE(i,o=null,a=null,c){const l=Ev(i,o,a,c);return l.resolveInjectorInitializers(),l}function Ev(i,o=null,a=null,c,l=new Set){const h=[a||er,Ps(i)];return c=c||("object"==typeof i?void 0:Wr(i)),new Ru(h,o||_p(),c||null,l)}class Pi{static#e=this.THROW_IF_NOT_FOUND=ci;static#t=this.NULL=new gp;static create(o,a){if(Array.isArray(o))return cE({name:""},a,o,"");{const c=o.name??"";return cE({name:c},o.parent,o.providers,c)}}static#n=this.\u0275prov=ir({token:Pi,providedIn:"any",factory:()=>so(Og)});static#r=this.__NG_ELEMENT_ID__=-1}new Dn("").__NG_ELEMENT_ID__=i=>{const o=Tr();if(null===o)throw new zt(204,!1);if(2&o.type)return o.value;if(i&yt.Optional)return null;throw new zt(204,!1)};function _h(i){return i.ngOriginalError}class Ma{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&_h(o);for(;a&&_h(a);)a=_h(a);return a||null}}const uC=new Dn("",{providedIn:"root",factory:()=>sn(Ma).handleError.bind(void 0)});let Vp=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=lC;static#t=this.__NG_ENV_ID__=a=>a}return i})();class DM extends Vp{constructor(o){super(),this._lView=o}onDestroy(o){return ev(this._lView,o),()=>function Gb(i,o){if(null===i[or])return;const a=i[or].indexOf(o);-1!==a&&i[or].splice(a,1)}(this._lView,o)}}function lC(){return new DM(bt())}function cc(){return yh(Tr(),bt())}function yh(i,o){return new Bp(ho(i,o))}let Bp=(()=>{class i{constructor(a){this.nativeElement=a}static#e=this.__NG_ELEMENT_ID__=cc}return i})();function jp(i){return i instanceof Bp?i.nativeElement:i}let Bl=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Mt.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275prov=ir({token:i,providedIn:"root",factory:()=>new i})}return i})();const Hc=class hC extends jt.B{constructor(o=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=o,Bc()&&(this.destroyRef=sn(Vp,{optional:!0})??void 0,this.pendingTasks=sn(Bl,{optional:!0})??void 0)}emit(o){const a=ae(null);try{super.next(o)}finally{ae(a)}}subscribe(o,a,c){let l=o,h=a||(()=>null),p=c;if(o&&"object"==typeof o){const T=o;l=T.next?.bind(T),h=T.error?.bind(T),p=T.complete?.bind(T)}this.__isAsync&&(h=this.wrapInTimeout(h),l&&(l=this.wrapInTimeout(l)),p&&(p=this.wrapInTimeout(p)));const E=super.subscribe({next:l,error:h,complete:p});return o instanceof on.yU&&o.add(E),E}wrapInTimeout(o){return a=>{const c=this.pendingTasks?.add();setTimeout(()=>{o(a),void 0!==c&&this.pendingTasks?.remove(c)})}}};function jF(){return this._results[Symbol.iterator]()}class Iv{static#e=Symbol.iterator;get changes(){return this._changes??=new Hc}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const a=Iv.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=jF)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){this.dirty=!1;const c=function Lo(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function wb(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let l=i[c],h=o[c];if(a&&(l=a(l),h=a(h)),h!==l)return!1}return!0}(this._results,c,a))&&(this._results=c,this.length=c.length,this.last=c[this.length-1],this.first=c[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(o){this._onDirty=o}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function ks(i){return!(128&~i.flags)}const pC=new Map;let UF=0;const Cv="__ngContext__";function zo(i,o){Tn(o)?(i[Cv]=o[di],function mC(i){pC.set(i[di],i)}(o)):i[Cv]=o}function PM(i){return kM(i[wt])}function NM(i){return kM(i[w])}function kM(i){for(;null!==i&&!$r(i);)i=i[w];return i}let wh;function HF(i){wh=i}const vE=new Dn("",{providedIn:"root",factory:()=>zF}),zF="ng",UM=new Dn(""),xC=new Dn("",{providedIn:"platform",factory:()=>"unknown"}),KF=new Dn(""),WF=new Dn("",{providedIn:"root",factory:()=>function Ul(){if(void 0!==wh)return wh;if(typeof document<"u")return document;throw new zt(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Ov=()=>null;function Pv(i,o,a=!1){return Ov(i,o,a)}const GM=new Dn("",{providedIn:"root",factory:()=>!1});let Fu,jv;function lc(i){return function Gp(){if(void 0===Fu&&(Fu=null,hr.trustedTypes))try{Fu=hr.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Fu}()?.createHTML(i)||i}function UC(i){return function EE(){if(void 0===jv&&(jv=null,hr.trustedTypes))try{jv=hr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return jv}()?.createScriptURL(i)||i}class Hl{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${qd})`}}class XM extends Hl{getTypeName(){return"HTML"}}class $C extends Hl{getTypeName(){return"Style"}}class wE extends Hl{getTypeName(){return"Script"}}class YM extends Hl{getTypeName(){return"URL"}}class ZM extends Hl{getTypeName(){return"ResourceURL"}}function Ni(i){return i instanceof Hl?i.changingThisBreaksApplicationSecurity:i}function dc(i,o){const a=function JM(i){return i instanceof Hl&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${qd})`)}return a===o}function HC(i){return new XM(i)}function Uv(i){return new $C(i)}function eO(i){return new wE(i)}function tO(i){return new YM(i)}function XF(i){return new ZM(i)}class nO{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(lc(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class rO{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const a=this.inertDocument.createElement("template");return a.innerHTML=lc(o),a}}const oO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qp(i){return(i=String(i)).match(oO)?i:"unsafe:"+i}function qc(i){const o={};for(const a of i.split(","))o[a]=!0;return o}function Ch(...i){const o={};for(const a of i)for(const c in a)a.hasOwnProperty(c)&&(o[c]=!0);return o}const KC=qc("area,br,col,hr,img,wbr"),WC=qc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),GC=qc("rp,rt"),IE=Ch(KC,Ch(WC,qc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ch(GC,qc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ch(GC,WC)),DE=qc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),CE=Ch(DE,qc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),qc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),aO=qc("script,style,template");class cO{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,c=!0,l=[];for(;a;)if(a.nodeType===Node.ELEMENT_NODE?c=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,c&&a.firstChild)l.push(a),a=dO(a);else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let h=lO(a);if(h){a=h;break}a=l.pop()}return this.buf.join("")}startElement(o){const a=qC(o).toLowerCase();if(!IE.hasOwnProperty(a))return this.sanitizedSomething=!0,!aO.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const c=o.attributes;for(let l=0;l<c.length;l++){const h=c.item(l),p=h.name,E=p.toLowerCase();if(!CE.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let T=h.value;DE[E]&&(T=qp(T)),this.buf.push(" ",p,'="',SE(T),'"')}return this.buf.push(">"),!0}endElement(o){const a=qC(o).toLowerCase();IE.hasOwnProperty(a)&&!KC.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(SE(o))}}function lO(i){const o=i.nextSibling;if(o&&i!==o.previousSibling)throw TE(o);return o}function dO(i){const o=i.firstChild;if(o&&function uO(i,o){return(i.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(i,o))throw TE(o);return o}function qC(i){const o=i.nodeName;return"string"==typeof o?o:"FORM"}function TE(i){return new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`)}const hO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fO=/([^\#-~ |!])/g;function SE(i){return i.replace(/&/g,"&amp;").replace(hO,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(fO,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let $v;function Hv(i,o){let a=null;try{$v=$v||function zC(i){const o=new rO(i);return function iO(){try{return!!(new window.DOMParser).parseFromString(lc(""),"text/html")}catch{return!1}}()?new nO(o):o}(i);let c=o?String(o):"";a=$v.getInertBodyElement(c);let l=5,h=c;do{if(0===l)throw new Error("Failed to sanitize html because the input is unstable");l--,c=h,h=a.innerHTML,a=$v.getInertBodyElement(c)}while(c!==h);return lc((new cO).sanitizeChildren(AE(a)||a))}finally{if(a){const c=AE(a)||a;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function AE(i){return"content"in i&&function pO(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var Lu=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Lu||{});function QC(i){const o=zl();return o?o.sanitize(Lu.URL,i)||"":dc(i,"URL")?Ni(i):qp(We(i))}function XC(i){const o=zl();if(o)return UC(o.sanitize(Lu.RESOURCE_URL,i)||"");if(dc(i,"ResourceURL"))return UC(Ni(i));throw new zt(904,!1)}function JC(i,o,a){return function ZC(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?XC:QC}(o,a)(i)}function zl(){const i=bt();return i&&i[st].sanitizer}function Fs(i){return i instanceof Function?i():i}function ps(i){return"browser"===(i??sn(Pi)).get(xC)}var Qv=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Qv||{});let Sh;function xE(i,o){return Sh(i,o)}function Wl(i,o,a,c,l){if(null!=c){let h,p=!1;$r(c)?h=c:Tn(c)&&(p=!0,c=c[On]);const E=sr(c);0===i&&null!==a?null==l?ql(o,a,E):Gl(o,a,E,l||null,!0):1===i&&null!==a?Gl(o,a,E,l||null,!0):2===i?function Qc(i,o,a){const c=Zp(i,o);c&&function MO(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,E,p):3===i&&o.destroyNode(E),null!=h&&function mL(i,o,a,c,l){const h=a[Uo];h!==sr(a)&&Wl(o,i,c,h,l);for(let E=Mr;E<a.length;E++){const T=a[E];VE(T[y],T,i,o,c,h)}}(o,i,h,a,l)}}function Oa(i,o,a){return i.createElement(o,a)}function SO(i,o){o[st].changeDetectionScheduler?.notify(8),VE(i,o,o[Se],2,null,null)}function RO(i,o){const a=i[xa],c=o[C];(Tn(c)||o[mn]!==c[C][mn])&&(i[b]|=us.HasTransplantedViews),null===a?i[xa]=[o]:a.push(o)}function fT(i,o){const a=i[xa],c=a.indexOf(o);a.splice(c,1)}function Xv(i,o){if(i.length<=Mr)return;const a=Mr+o,c=i[a];if(c){const l=c[Un];null!==l&&l!==i&&fT(l,c),o>0&&(i[a-1][w]=c[w]);const h=hp(i,Mr+o);!function lL(i,o){SO(i,o),o[On]=null,o[O]=null}(c[y],c);const p=h[lr];null!==p&&p.detachView(h[y]),c[C]=null,c[w]=null,c[b]&=-129}return c}function PE(i,o){if(!(256&o[b])){const a=o[Se];a.destroyNode&&VE(i,o,a,3,null,null),function AO(i){let o=i[wt];if(!o)return pT(i[y],i);for(;o;){let a=null;if(Tn(o))a=o[wt];else{const c=o[Mr];c&&(a=c)}if(!a){for(;o&&!o[w]&&o!==i;)Tn(o)&&pT(o[y],o),o=o[C];null===o&&(o=i),Tn(o)&&pT(o[y],o),a=o&&o[w]}o=a}}(o)}}function pT(i,o){if(256&o[b])return;const a=ae(null);try{o[b]&=-129,o[b]|=256,o[lo]&&dt(o[lo]),function gT(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const l=o[a[c]];if(!(l instanceof Op)){const h=a[c+1];if(Array.isArray(h))for(let p=0;p<h.length;p+=2){const E=l[h[p]],T=h[p+1];ic(4,E,T);try{T.call(E)}finally{ic(5,E,T)}}else{ic(4,l,h);try{h.call(l)}finally{ic(5,l,h)}}}}}(i,o),function mT(i,o){const a=i.cleanup,c=o[Y];if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const p=a[h+3];p>=0?c[p]():c[-p].unsubscribe(),h+=2}else a[h].call(c[a[h+1]]);null!==c&&(o[Y]=null);const l=o[or];if(null!==l){o[or]=null;for(let h=0;h<l.length;h++)(0,l[h])()}}(i,o),1===o[y].type&&o[Se].destroy();const c=o[Un];if(null!==c&&$r(o[C])){c!==o[C]&&fT(c,o);const l=o[lr];null!==l&&l.detachView(i)}!function dE(i){pC.delete(i[di])}(o)}finally{ae(a)}}function NE(i,o,a){return function xO(i,o,a){let c=o;for(;null!==c&&168&c.type;)c=(o=c).parent;if(null===c)return a[On];{const{componentOffset:l}=c;if(l>-1){const{encapsulation:h}=i.data[c.directiveStart+l];if(h===Tu.None||h===Tu.Emulated)return null}return ho(c,a)}}(i,o.parent,a)}function Gl(i,o,a,c,l){i.insertBefore(o,a,c,l)}function ql(i,o,a){i.appendChild(o,a)}function kE(i,o,a,c,l){null!==c?Gl(i,o,a,c,l):ql(i,o,a)}function Zp(i,o){return i.parentNode(o)}function Jp(i,o,a){return PO(i,o,a)}let vT,PO=function OO(i,o,a){return 40&i.type?ho(i,a):null};function FE(i,o,a,c){const l=NE(i,c,o),h=o[Se],E=Jp(c.parent||o[O],c,o);if(null!=l)if(Array.isArray(a))for(let T=0;T<a.length;T++)kE(h,l,a[T],E,!1);else kE(h,l,a,E,!1);void 0!==vT&&vT(h,c,o,a,l)}function em(i,o){if(null!==o){const a=o.type;if(3&a)return ho(o,i);if(4&a)return _T(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return em(i,c);{const l=i[o.index];return $r(l)?_T(-1,l):sr(l)}}if(32&a)return xE(o,i)()||sr(i[o.index]);{const c=kO(i,o);return null!==c?Array.isArray(c)?c[0]:em(Uc(i[mn]),c):em(i,o.next)}}return null}function kO(i,o){return null!==o?i[mn][O].projection[o.projection]:null}function _T(i,o){const a=Mr+i+1;if(a<o.length){const c=o[a],l=c[y].firstChild;if(null!==l)return em(c,l)}return o[Uo]}function yT(i,o,a,c,l,h,p){for(;null!=a;){if(128===a.type){a=a.next;continue}const E=c[a.index],T=a.type;if(p&&0===o&&(E&&zo(sr(E),c),a.flags|=2),32&~a.flags)if(8&T)yT(i,o,a.child,c,l,h,!1),Wl(o,i,l,E,h);else if(32&T){const x=xE(a,c);let k;for(;k=x();)Wl(o,i,l,k,h);Wl(o,i,l,E,h)}else 16&T?FO(i,o,c,a,l,h):Wl(o,i,l,E,h);a=p?a.projectionNext:a.next}}function VE(i,o,a,c,l,h){yT(a,c,i.firstChild,o,l,h,!1)}function FO(i,o,a,c,l,h){const p=a[mn],T=p[O].projection[c.projection];if(Array.isArray(T))for(let x=0;x<T.length;x++)Wl(o,i,l,T[x],h);else{let x=T;const k=p[C];ks(c)&&(x.flags|=128),yT(i,o,x,k,l,h,!0)}}function VO(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function bT(i,o,a){const{mergedAttrs:c,classes:l,styles:h}=a;null!==c&&Sb(i,o,c),null!==l&&VO(i,o,l),null!==h&&function LO(i,o,a){i.setAttribute(o,"style",a)}(i,o,h)}const Pn={};function BO(i=1){Yv(Kn(),bt(),qi()+i,!1)}function Yv(i,o,a,c){if(!c)if(3&~o[b]){const h=i.preOrderHooks;null!==h&&ku(o,h,0,a)}else{const h=i.preOrderCheckHooks;null!==h&&lv(o,h,a)}Pl(a)}function tm(i,o=yt.Default){const a=bt();return null===a?so(i,o):YD(Tr(),a,bn(i),o)}function jO(){throw new Error("invalid")}function UO(i,o,a,c,l,h){const p=ae(null);try{let E=null;l&Su.SignalBased&&(E=o[c][te]),null!==E&&void 0!==E.transformFn&&(h=E.transformFn(h)),l&Su.HasDecoratorInputTransform&&(h=i.inputTransforms[c].call(o,h)),null!==i.setInput?i.setInput(o,E,h,a,c):RD(o,E,c,h)}finally{ae(p)}}function BE(i,o,a,c,l,h,p,E,T,x,k){const z=o.blueprint.slice();return z[On]=l,z[b]=204|c,(null!==x||i&&2048&i[b])&&(z[b]|=2048),ls(z),z[C]=z[Yt]=i,z[Z]=a,z[st]=p||i&&i[st],z[Se]=E||i&&i[Se],z[ve]=T||i&&i[ve]||null,z[O]=h,z[di]=function $F(){return UF++}(),z[B]=k,z[jo]=x,z[mn]=2==o.type?i[mn]:z,z}function Ah(i,o,a,c,l){let h=i.data[o];if(null===h)h=function jE(i,o,a,c,l){const h=ca(),p=Qb(),T=i.data[o]=function ar(i,o,a,c,l,h){let p=o?o.injectorIndex:-1,E=0;return sc()&&(E|=128),{type:a,index:c,insertBeforeIndex:null,injectorIndex:p,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:E,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?h:h&&h.parent,a,o,c,l);return null===i.firstChild&&(i.firstChild=T),null!==h&&(p?null==h.child&&null!==T.parent&&(h.child=T):null===h.next&&(h.next=T,T.prev=h)),T}(i,o,a,c,l),function VD(){return xn.lFrame.inI18n}()&&(h.flags|=32);else if(64&h.type){h.type=a,h.value=c,h.attrs=l;const p=function Tp(){const i=xn.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();h.injectorIndex=null===p?-1:p.injectorIndex}return $o(h,!0),h}function nm(i,o,a,c){if(0===a)return-1;const l=o.length;for(let h=0;h<a;h++)o.push(c),i.blueprint.push(c),i.data.push(null);return l}function ET(i,o,a,c,l){const h=qi(),p=2&c;try{Pl(-1),p&&o.length>an&&Yv(i,o,an,!1),ic(p?2:0,l),a(c,l)}finally{Pl(h),ic(p?3:1,l)}}function UE(i,o,a){if(jb(o)){const c=ae(null);try{const h=o.directiveEnd;for(let p=o.directiveStart;p<h;p++){const E=i.data[p];E.contentQueries&&E.contentQueries(1,a[p],p)}}finally{ae(c)}}}function wT(i,o,a){nv()&&(function ST(i,o,a,c){const l=a.directiveStart,h=a.directiveEnd;Ns(a)&&function ZO(i,o,a){const c=ho(o,i),l=DT(a);let p=16;a.signals?p=4096:a.onPush&&(p=64);const E=e_(i,BE(i,l,null,p,c,o,null,i[st].rendererFactory.createRenderer(c,a),null,null,null));i[o.index]=E}(o,a,i.data[l+a.componentOffset]),i.firstCreatePass||pv(a,o),zo(c,o);const p=a.initialInputs;for(let E=l;E<h;E++){const T=i.data[E],x=Ll(o,i,E,a);zo(x,o),null!==p&&GE(0,E-l,x,T,0,p),Ao(T)&&(fo(a.index,o)[Z]=Ll(o,i,E,a))}}(i,o,a,ho(a,o)),!(64&~a.flags)&&Jv(i,o,a))}function IT(i,o,a=ho){const c=o.localNames;if(null!==c){let l=o.index+1;for(let h=0;h<c.length;h+=2){const p=c[h+1],E=-1===p?a(o,i):i[p];i[l++]=E}}}function DT(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Wo(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):o}function Wo(i,o,a,c,l,h,p,E,T,x,k){const z=an+c,le=z+l,_e=function rm(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Pn);return a}(z,le),Ze="function"==typeof x?x():x;return _e[y]={type:i,blueprint:_e,template:a,queries:null,viewQuery:E,declTNode:o,data:_e.slice().fill(null,z),bindingStartIndex:z,expandoStartIndex:le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:T,consts:Ze,incompleteFirstPass:!1,ssrId:k}}let CT=()=>null;function HE(i,o,a,c,l){for(let h in o){if(!o.hasOwnProperty(h))continue;const p=o[h];if(void 0===p)continue;c??={};let E,T=Su.None;Array.isArray(p)?(E=p[0],T=p[1]):E=p;let x=h;if(null!==l){if(!l.hasOwnProperty(h))continue;x=l[h]}0===i?TT(c,a,x,E,T):TT(c,a,x,E)}return c}function TT(i,o,a,c,l){let h;i.hasOwnProperty(a)?(h=i[a]).push(o,c):h=i[a]=[o,c],void 0!==l&&h.push(l)}function Zv(i,o,a,c){if(nv()){const l=null===c?null:{"":-1},h=function KE(i,o){const a=i.directiveRegistry;let c=null,l=null;if(a)for(let h=0;h<a.length;h++){const p=a[h];if(Ob(o,p.selectors,!1))if(c||(c=[]),Ao(p))if(null!==p.findHostDirectiveDefs){const E=[];l=l||new Map,p.findHostDirectiveDefs(p,E,l),c.unshift(...E,p),im(i,o,E.length)}else c.unshift(p),im(i,o,0);else l=l||new Map,p.findHostDirectiveDefs?.(p,c,l),c.push(p)}return null===c?null:[c,l]}(i,a);let p,E;null===h?p=E=null:[p,E]=h,null!==p&&zE(i,o,a,p,l,E),l&&function QO(i,o,a){if(o){const c=i.localNames=[];for(let l=0;l<o.length;l+=2){const h=a[o[l+1]];if(null==h)throw new zt(-301,!1);c.push(o[l],h)}}}(a,c,l)}a.mergedAttrs=th(a.mergedAttrs,a.attrs)}function zE(i,o,a,c,l,h){for(let x=0;x<c.length;x++)rE(pv(a,o),i,c[x].type);!function WE(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let x=0;x<c.length;x++){const k=c[x];k.providersResolver&&k.providersResolver(k)}let p=!1,E=!1,T=nm(i,o,c.length,null);for(let x=0;x<c.length;x++){const k=c[x];a.mergedAttrs=th(a.mergedAttrs,k.hostAttrs),YO(i,a,o,T,k),XO(T,k,l),null!==k.contentQueries&&(a.flags|=4),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=64);const z=k.type.prototype;!p&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks??=[]).push(a.index),p=!0),!E&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(a.index),E=!0),T++}!function KO(i,o,a){const l=o.directiveEnd,h=i.data,p=o.attrs,E=[];let T=null,x=null;for(let k=o.directiveStart;k<l;k++){const z=h[k],le=a?a.get(z):null,Ze=le?le.outputs:null;T=HE(0,z.inputs,k,T,le?le.inputs:null),x=HE(1,z.outputs,k,x,Ze);const _t=null===T||null===p||nh(o)?null:JO(T,k,p);E.push(_t)}null!==T&&(T.hasOwnProperty("class")&&(o.flags|=8),T.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=E,o.inputs=T,o.outputs=x}(i,a,h)}function Jv(i,o,a){const c=a.directiveStart,l=a.directiveEnd,h=a.index,p=function Zb(){return xn.lFrame.currentDirectiveIndex}();try{Pl(h);for(let E=c;E<l;E++){const T=i.data[E],x=o[E];Sp(E),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&AT(T,x)}}finally{Pl(-1),Sp(p)}}function AT(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function im(i,o,a){o.componentOffset=a,(i.components??=[]).push(o.index)}function XO(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Ao(o)&&(a[""]=i)}}function YO(i,o,a,c,l){i.data[c]=l;const h=l.factory||(l.factory=nc(l.type)),p=new Op(h,Ao(l),tm);i.blueprint[c]=p,a[c]=p,function GO(i,o,a,c,l){const h=l.hostBindings;if(h){let p=i.hostBindingOpCodes;null===p&&(p=i.hostBindingOpCodes=[]);const E=~o.index;(function qO(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(p)!=E&&p.push(E),p.push(a,c,h)}}(i,o,c,nm(i,a,l.hostVars,Pn),l)}function hc(i,o,a,c,l,h){const p=ho(i,o);!function fc(i,o,a,c,l,h,p){if(null==h)i.removeAttribute(o,l,a);else{const E=null==p?We(h):p(h,c||"",l);i.setAttribute(o,l,E,a)}}(o[Se],p,h,i.value,a,c,l)}function GE(i,o,a,c,l,h){const p=h[o];if(null!==p)for(let E=0;E<p.length;)UO(c,a,p[E++],p[E++],p[E++],p[E++])}function JO(i,o,a){let c=null,l=0;for(;l<a.length;){const h=a[l];if(0!==h)if(5!==h){if("number"==typeof h)break;if(i.hasOwnProperty(h)){null===c&&(c=[]);const p=i[h];for(let E=0;E<p.length;E+=3)if(p[E]===o){c.push(h,p[E+1],p[E+2],a[l+1]);break}}l+=2}else l+=2;else l+=4}return c}function eP(i,o,a,c){return[i,!0,0,o,null,c,null,a,null,null]}function RT(i,o){const a=i.contentQueries;if(null!==a){const c=ae(null);try{for(let l=0;l<a.length;l+=2){const p=a[l+1];if(-1!==p){const E=i.data[p];lh(a[l]),E.contentQueries(2,o[p],p)}}}finally{ae(c)}}}function e_(i,o){return i[wt]?i[nn][w]=o:i[wt]=o,i[nn]=o,o}function om(i,o,a){lh(0);const c=ae(null);try{o(i,a)}finally{ae(c)}}function xT(i){return i[Y]??=[]}function MT(i){return i.cleanup??=[]}function Rh(i,o){const a=i[ve],c=a?a.get(Ma,null):null;c&&c.handleError(o)}function Xc(i,o,a,c,l){for(let h=0;h<a.length;){const p=a[h++],E=a[h++],T=a[h++];UO(i.data[p],o[p],c,E,T,l)}}function nP(i,o){const a=fo(o,i),c=a[y];!function rP(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])}(c,a);const l=a[On];null!==l&&null===a[B]&&(a[B]=Pv(l,a[ve])),qE(c,a,a[Z])}function qE(i,o,a){eE(o);try{const c=i.viewQuery;null!==c&&om(1,c,a);const l=i.template;null!==l&&ET(i,o,l,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),o[lr]?.finishViewCreation(i),i.staticContentQueries&&RT(i,o),i.staticViewQueries&&om(2,i.viewQuery,a);const h=i.components;null!==h&&function iP(i,o){for(let a=0;a<o.length;a++)nP(i,o[a])}(o,h)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[b]&=-5,av()}}function xh(i,o,a,c){const l=ae(null);try{const h=o.tView,T=BE(i,h,a,4096&i[b]?4096:16,null,o,null,null,c?.injector??null,c?.embeddedViewInjector??null,c?.dehydratedView??null);T[Un]=i[o.index];const k=i[lr];return null!==k&&(T[lr]=k.createEmbeddedView(h)),qE(h,T,a),T}finally{ae(l)}}function Xl(i,o){return!o||null===o.firstChild||ks(i)}function Mh(i,o,a,c=!0){const l=o[y];if(function dL(i,o,a,c){const l=Mr+c,h=a.length;c>0&&(a[l-1][w]=o),c<h-Mr?(o[w]=a[l],Ib(a,Mr+c,o)):(a.push(o),o[w]=null),o[C]=a;const p=o[Un];null!==p&&a!==p&&RO(p,o);const E=o[lr];null!==E&&E.insertView(i),Dp(o),o[b]|=128}(l,o,i,a),c){const p=_T(a,i),E=o[Se],T=Zp(E,i[Uo]);null!==T&&function TO(i,o,a,c,l,h){c[On]=l,c[O]=o,VE(i,c,a,1,l,h)}(l,i[O],E,o,T,p)}const h=o[B];null!==h&&null!==h.firstChild&&(h.firstChild=null)}function am(i,o,a,c,l=!1){for(;null!==a;){if(128===a.type){a=l?a.projectionNext:a.next;continue}const h=o[a.index];null!==h&&c.push(sr(h)),$r(h)&&PT(h,c);const p=a.type;if(8&p)am(i,o,a.child,c);else if(32&p){const E=xE(a,o);let T;for(;T=E();)c.push(T)}else if(16&p){const E=kO(o,a);if(Array.isArray(E))c.push(...E);else{const T=Uc(o[mn]);am(T[y],T,E,c,!0)}}a=l?a.projectionNext:a.next}return c}function PT(i,o){for(let a=Mr;a<i.length;a++){const c=i[a],l=c[y].firstChild;null!==l&&am(c[y],c,l,o)}i[Uo]!==i[On]&&o.push(i[Uo])}let NT=[];const cP={...$e,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{Cp(i.lView)},consumerOnSignalRead(){this.lView[lo]=this}},lP={...$e,consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{let o=Uc(i.lView);for(;o&&!kT(o[y]);)o=Uc(o);o&&Ip(o)},consumerOnSignalRead(){this.lView[lo]=this}};function kT(i){return 2!==i.type}const dP=100;function t_(i,o=!0,a=0){const c=i[st],l=c.rendererFactory;l.begin?.();try{!function hP(i,o){const a=Ml();try{Yb(!0),Yl(i,o);let c=0;for(;oc(i);){if(c===dP)throw new zt(103,!1);c++,Yl(i,1)}}finally{Yb(a)}}(i,a)}catch(p){throw o&&Rh(i,p),p}finally{l.end?.(),c.inlineEffectRunner?.flush()}}function fP(i,o,a,c){const l=o[b];if(!(256&~l))return;o[st].inlineEffectRunner?.flush(),eE(o);let E=!0,T=null,x=null;kT(i)?(x=function oP(i){return i[lo]??function sP(i){const o=NT.pop()??Object.create(cP);return o.lView=i,o}(i)}(o),T=Oe(x)):null===function de(){return ie}()?(E=!1,x=function uP(i){const o=i[lo]??Object.create(lP);return o.lView=i,o}(o),T=Oe(x)):o[lo]&&(dt(o[lo]),o[lo]=null);try{ls(o),function Ol(i){return xn.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&ET(i,o,a,2,c);const k=!(3&~l);if(k){const _e=i.preOrderCheckHooks;null!==_e&&lv(o,_e,null)}else{const _e=i.preOrderHooks;null!==_e&&ku(o,_e,0,null),Nl(o,0)}if(function n_(i){for(let o=PM(i);null!==o;o=NM(o)){if(!(o[b]&us.HasTransplantedViews))continue;const a=o[xa];for(let c=0;c<a.length;c++)Ip(a[c])}}(o),LT(o,0),null!==i.contentQueries&&RT(i,o),k){const _e=i.contentCheckHooks;null!==_e&&lv(o,_e)}else{const _e=i.contentHooks;null!==_e&&ku(o,_e,1),Nl(o,1)}!function vL(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const l=a[c];if(l<0)Pl(~l);else{const h=l,p=a[++c],E=a[++c];BD(p,h),E(2,o[h])}}}finally{Pl(-1)}}(i,o);const z=i.components;null!==z&&Oh(o,z,0);const le=i.viewQuery;if(null!==le&&om(2,le,c),k){const _e=i.viewCheckHooks;null!==_e&&lv(o,_e)}else{const _e=i.viewHooks;null!==_e&&ku(o,_e,2),Nl(o,2)}if(!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[uo]){for(const _e of o[uo])_e();o[uo]=null}o[b]&=-73}catch(k){throw Cp(o),k}finally{null!==x&&(pe(x,T),E&&function aP(i){i.lView[lo]!==i&&(i.lView=null,NT.push(i))}(x)),av()}}function LT(i,o){for(let a=PM(i);null!==a;a=NM(a))for(let c=Mr;c<a.length;c++)Vu(a[c],o)}function pP(i,o,a){Vu(fo(o,i),a)}function Vu(i,o){aa(i)&&Yl(i,o)}function Yl(i,o){const c=i[y],l=i[b],h=i[lo];let p=!!(0===o&&16&l);if(p||=!!(64&l&&0===o),p||=!!(1024&l),p||=!(!h?.dirty||!Be(h)),p||=!1,h&&(h.dirty=!1),i[b]&=-9217,p)fP(c,i,c.template,i[Z]);else if(8192&l){LT(i,1);const E=c.components;null!==E&&Oh(i,E,1)}}function Oh(i,o,a){for(let c=0;c<o.length;c++)pP(i,o[c],a)}function Ph(i,o){const a=Ml()?64:1088;for(i[st].changeDetectionScheduler?.notify(o);i;){i[b]|=a;const c=Uc(i);if(Ou(i)&&!c)return i;i=c}return null}class r_{get rootNodes(){const o=this._lView,a=o[y];return am(a,o,a.firstChild,[])}constructor(o,a,c=!0){this._lView=o,this._cdRefInjectingView=a,this.notifyErrorHandler=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Z]}set context(o){this._lView[Z]=o}get destroyed(){return!(256&~this._lView[b])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[C];if($r(o)){const a=o[8],c=a?a.indexOf(this):-1;c>-1&&(Xv(o,c),hp(a,c))}this._attachedToViewContainer=!1}PE(this._lView[y],this._lView)}onDestroy(o){ev(this._lView,o)}markForCheck(){Ph(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[b]&=-129}reattach(){Dp(this._lView),this._lView[b]|=128}detectChanges(){this._lView[b]|=1024,t_(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new zt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const o=Ou(this._lView),a=this._lView[Un];null!==a&&!o&&fT(a,this._lView),SO(this._lView[y],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new zt(902,!1);this._appRef=o;const a=Ou(this._lView),c=this._lView[Un];null!==c&&!a&&RO(c,this._lView),Dp(this._lView)}}let Bu=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=mP}return i})();const VT=Bu,EL=class extends VT{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a)}createEmbeddedViewImpl(o,a,c){const l=xh(this._declarationLView,this._declarationTContainer,o,{embeddedViewInjector:a,dehydratedView:c});return new r_(l)}};function mP(){return XE(Tr(),bt())}function XE(i,o){return 4&i.type?new EL(o,i,yh(i,o)):null}let td=()=>null;function Li(i,o){return td(i,o)}class tu{}const Vh=new Dn("",{providedIn:"root",factory:()=>!1}),nu=new Dn("");class c0{}class ct{}class LP{resolveComponentFactory(o){throw function f_(i){const o=Error(`No component factory found for ${Wr(i)}.`);return o.ngComponent=i,o}(o)}}class ru{static#e=this.NULL=new LP}class pc{}let VP=(()=>{class i{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function nd(){const i=bt(),a=fo(Tr().index,i);return(Tn(a)?a:i)[Se]}()}return i})(),JT=(()=>{class i{static#e=this.\u0275prov=ir({token:i,providedIn:"root",factory:()=>null})}return i})();const tS=new Set;function xo(i){tS.has(i)||(tS.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}function ms(i){let o=!0;return setTimeout(()=>{o&&(o=!1,i())}),"function"==typeof hr.requestAnimationFrame&&hr.requestAnimationFrame(()=>{o&&(o=!1,i())}),()=>{o=!1}}function Bh(i){let o=!0;return queueMicrotask(()=>{o&&i()}),()=>{o=!1}}function jh(...i){}class Wn{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hc(!1),this.onMicrotaskEmpty=new Hc(!1),this.onStable=new Hc(!1),this.onError=new Hc(!1),typeof Zone>"u")throw new zt(908,!1);Zone.assertZonePatched();const l=this;l._nesting=0,l._outer=l._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!c&&a,l.shouldCoalesceRunChangeDetection=c,l.callbackScheduled=!1,function nS(i){const o=()=>{!function mc(i){i.isCheckStableRunning||i.callbackScheduled||(i.callbackScheduled=!0,Zone.root.run(()=>{ms(()=>{i.callbackScheduled=!1,Uh(i),i.isCheckStableRunning=!0,p_(i),i.isCheckStableRunning=!1})}),Uh(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,l,h,p,E)=>{if(function UP(i){return iS(i,"__ignore_ng_zone__")}(E))return a.invokeTask(l,h,p,E);try{return u0(i),a.invokeTask(l,h,p,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&o(),rS(i)}},onInvoke:(a,c,l,h,p,E,T)=>{try{return u0(i),a.invoke(l,h,p,E,T)}finally{i.shouldCoalesceRunChangeDetection&&!i.callbackScheduled&&!function $P(i){return iS(i,"__scheduler_tick__")}(E)&&o(),rS(i)}},onHasTask:(a,c,l,h)=>{a.hasTask(l,h),c===l&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,Uh(i),p_(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,l,h)=>(a.handleError(l,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Wn.isInAngularZone())throw new zt(909,!1)}static assertNotInAngularZone(){if(Wn.isInAngularZone())throw new zt(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,l){const h=this._inner,p=h.scheduleEventTask("NgZoneEvent: "+l,o,jP,jh,jh);try{return h.runTask(p,a,c)}finally{h.cancelTask(p)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const jP={};function p_(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Uh(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&!0===i.callbackScheduled)}function u0(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function rS(i){i._nesting--,p_(i)}class l0{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hc,this.onMicrotaskEmpty=new Hc,this.onStable=new Hc,this.onError=new Hc}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,l){return o.apply(a,c)}}function iS(i,o){return!(!Array.isArray(i)||1!==i.length)&&!0===i[0]?.data?.[o]}var Qo=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(Qo||{});const oS={destroy(){}};function sS(i,o){!o&&cs();const a=o?.injector??sn(Pi);return ps(a)?(xo("NgAfterRender"),cS(i,a,!1,o?.phase??Qo.MixedReadWrite)):oS}function aS(i,o){!o&&cs();const a=o?.injector??sn(Pi);return ps(a)?(xo("NgAfterNextRender"),cS(i,a,!0,o?.phase??Qo.MixedReadWrite)):oS}function cS(i,o,a,c){const l=function zP(i,o){if(i instanceof Function)switch(o){case Qo.EarlyRead:return{earlyRead:i};case Qo.Write:return{write:i};case Qo.MixedReadWrite:return{mixedReadWrite:i};case Qo.Read:return{read:i}}return i}(i,c),h=o.get(fm),p=h.handler??=new WP,E=[],T=[],x=()=>{for(const _e of T)p.unregister(_e);k()},k=o.get(Vp).onDestroy(x);let z=0;const le=(_e,Ze)=>{if(!Ze)return;const _t=a?(...Ut)=>{z--,z<1&&x(),Ze(...Ut)}:Ze,Nt=zg(o,()=>new KP(_e,E,_t));p.register(Nt),T.push(Nt),z++};return le(Qo.EarlyRead,l.earlyRead),le(Qo.Write,l.write),le(Qo.MixedReadWrite,l.mixedReadWrite),le(Qo.Read,l.read),{destroy:x}}class KP{constructor(o,a,c){this.phase=o,this.pipelinedArgs=a,this.callbackFn=c,this.zone=sn(Wn),this.errorHandler=sn(Ma,{optional:!0}),sn(tu,{optional:!0})?.notify(6)}invoke(){try{const o=this.zone.runOutsideAngular(()=>this.callbackFn.apply(null,this.pipelinedArgs));this.pipelinedArgs.splice(0,this.pipelinedArgs.length,o)}catch(o){this.errorHandler?.handleError(o)}}}class WP{constructor(){this.executingCallbacks=!1,this.buckets={[Qo.EarlyRead]:new Set,[Qo.Write]:new Set,[Qo.MixedReadWrite]:new Set,[Qo.Read]:new Set},this.deferredCallbacks=new Set}register(o){(this.executingCallbacks?this.deferredCallbacks:this.buckets[o.phase]).add(o)}unregister(o){this.buckets[o.phase].delete(o),this.deferredCallbacks.delete(o)}execute(){this.executingCallbacks=!0;for(const o of Object.values(this.buckets))for(const a of o)a.invoke();this.executingCallbacks=!1;for(const o of this.deferredCallbacks)this.buckets[o.phase].add(o);this.deferredCallbacks.clear()}destroy(){for(const o of Object.values(this.buckets))o.clear();this.deferredCallbacks.clear()}}let fm=(()=>{class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const a=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const c of a)c()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=ir({token:i,providedIn:"root",factory:()=>new i})}return i})();function iu(i){return!!ao(i)}function rd(i,o,a){let c=a?i.styles:null,l=a?i.classes:null,h=0;if(null!==o)for(let p=0;p<o.length;p++){const E=o[p];"number"==typeof E?h=E:1==h?l=wl(l,E):2==h&&(c=wl(c,E+": "+o[++p]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=l:i.classesWithoutHost=l}class Yi extends ru{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=zn(o);return new gc(a,this.ngModule)}}function Ar(i,o){const a=[];for(const c in i){if(!i.hasOwnProperty(c))continue;const l=i[c];if(void 0===l)continue;const h=Array.isArray(l),p=h?l[0]:l;a.push(o?{propName:p,templateName:c,isSignal:!!((h?l[1]:Su.None)&Su.SignalBased)}:{propName:p,templateName:c})}return a}class gc extends ct{get inputs(){const o=this.componentDef,a=o.inputTransforms,c=Ar(o.inputs,!0);if(null!==a)for(const l of c)a.hasOwnProperty(l.propName)&&(l.transform=a[l.propName]);return c}get outputs(){return Ar(this.componentDef.outputs,!1)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function qx(i){return i.map(Gx).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,l){const h=ae(null);try{let p=(l=l||this.ngModule)instanceof Bo?l:l?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const E=p?new kl(o,p):o,T=E.get(pc,null);if(null===T)throw new zt(407,!1);const x=E.get(JT,null),le={rendererFactory:T,sanitizer:x,inlineEffectRunner:null,afterRenderEventManager:E.get(fm,null),changeDetectionScheduler:E.get(tu,null)},_e=T.createRenderer(null,this.componentDef),Ze=this.componentDef.selectors[0][0]||"div",_t=c?function Ql(i,o,a,c){const h=c.get(GM,!1)||a===Tu.ShadowDom,p=i.selectRootElement(o,h);return function $O(i){CT(i)}(p),p}(_e,c,this.componentDef.encapsulation,E):Oa(_e,Ze,function uS(i){const o=i.toLowerCase();return"svg"===o?MD:"math"===o?"math":null}(Ze));let Nt=512;this.componentDef.signals?Nt|=4096:this.componentDef.onPush||(Nt|=16);let Ut=null;null!==_t&&(Ut=Pv(_t,E,!0));const Tt=Wo(0,null,null,1,0,null,null,null,null,null,null),Sn=BE(null,Tt,null,Nt,null,null,le,_e,E,null,Ut);let cr,Lr;eE(Sn);try{const Ji=this.componentDef;let $s,fg=null;Ji.findHostDirectiveDefs?($s=[],fg=new Map,Ji.findHostDirectiveDefs(Ji,$s,fg),$s.push(Ji)):$s=[Ji];const T1=function lS(i,o){const a=i[y],c=an;return i[c]=o,Ah(a,c,2,"#host",null)}(Sn,_t),r2=function TL(i,o,a,c,l,h,p){const E=l[y];!function Vi(i,o,a,c){for(const l of i)o.mergedAttrs=th(o.mergedAttrs,l.hostAttrs);null!==o.mergedAttrs&&(rd(o,o.mergedAttrs,!0),null!==a&&bT(c,a,o))}(c,i,o,p);let T=null;null!==o&&(T=Pv(o,l[ve]));const x=h.rendererFactory.createRenderer(o,a);let k=16;a.signals?k=4096:a.onPush&&(k=64);const z=BE(l,DT(a),null,k,l[i.index],i,h,x,null,null,T);return E.firstCreatePass&&im(E,i,c.length-1),e_(l,z),l[i.index]=z}(T1,_t,Ji,$s,Sn,le,_e);Lr=uh(Tt,an),_t&&function au(i,o,a,c){if(c)Sb(i,a,["ng-version","18.1.1"]);else{const{attrs:l,classes:h}=function bD(i){const o=[],a=[];let c=1,l=2;for(;c<i.length;){let h=i[c];if("string"==typeof h)2===l?""!==h&&o.push(h,i[++c]):8===l&&a.push(h);else{if(!Ta(l))break;l=h}c++}return{attrs:o,classes:a}}(o.selectors[0]);l&&Sb(i,a,l),h&&h.length>0&&VO(i,a,h.join(" "))}}(_e,Ji,_t,c),void 0!==a&&function fi(i,o,a){const c=i.projection=[];for(let l=0;l<o.length;l++){const h=a[l];c.push(null!=h?Array.from(h):null)}}(Lr,this.ngContentSelectors,a),cr=function GP(i,o,a,c,l,h){const p=Tr(),E=l[y],T=ho(p,l);zE(E,l,p,a,null,c);for(let k=0;k<a.length;k++)zo(Ll(l,E,p.directiveStart+k,p),l);Jv(E,l,p),T&&zo(T,l);const x=Ll(l,E,p.directiveStart+p.componentOffset,p);if(i[Z]=l[Z]=x,null!==h)for(const k of h)k(x,o);return UE(E,p,l),x}(r2,Ji,$s,fg,Sn,[cu]),qE(Tt,Sn,null)}finally{av()}return new gs(this.componentType,cr,yh(Lr,Sn),Sn,Lr)}finally{ae(h)}}}class gs extends c0{constructor(o,a,c,l,h){super(),this.location=c,this._rootLView=l,this._tNode=h,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new r_(l,void 0,!1),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let l;if(null!==c&&(l=c[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const h=this._rootLView;Xc(h[y],h,l,o,a),this.previousInputValues.set(o,a),Ph(fo(this._tNode.index,h),1)}}get injector(){return new Oi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function cu(){const i=Tr();uv(bt()[y],i)}let id=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=g_}return i})();function g_(){return vm(Tr(),bt())}const gm=id,dS=class extends gm{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return yh(this._hostTNode,this._hostLView)}get injector(){return new Oi(this._hostTNode,this._hostLView)}get parentInjector(){const o=ph(this._hostTNode,this._hostLView);if(nE(o)){const a=kp(o,this._hostLView),c=Np(o);return new Oi(a[y].data[c+8],a)}return new Oi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=Hu(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Mr}createEmbeddedView(o,a,c){let l,h;"number"==typeof c?l=c:null!=c&&(l=c.index,h=c.injector);const p=Li(this._lContainer,o.ssrId),E=o.createEmbeddedViewImpl(a||{},h,p);return this.insertImpl(E,l,Xl(this._hostTNode,p)),E}createComponent(o,a,c,l,h){const p=o&&!function Gr(i){return"function"==typeof i}(o);let E;if(p)E=a;else{const Ze=a||{};E=Ze.index,c=Ze.injector,l=Ze.projectableNodes,h=Ze.environmentInjector||Ze.ngModuleRef}const T=p?o:new gc(zn(o)),x=c||this.parentInjector;if(!h&&null==T.ngModule){const _t=(p?x:this.parentInjector).get(Bo,null);_t&&(h=_t)}const k=zn(T.componentType??{}),z=Li(this._lContainer,k?.id??null),_e=T.create(x,l,z?.firstChild??null,h);return this.insertImpl(_e.hostView,E,Xl(this._hostTNode,z)),_e}insert(o,a){return this.insertImpl(o,a,!0)}insertImpl(o,a,c){const l=o._lView;if(function Jg(i){return $r(i[C])}(l)){const E=this.indexOf(o);if(-1!==E)this.detach(E);else{const T=l[C],x=new dS(T,T[O],T[C]);x.detach(x.indexOf(o))}}const h=this._adjustIndex(a),p=this._lContainer;return Mh(p,l,h,c),o.attachToViewContainerRef(),Ib(vc(p),h,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=Hu(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Xv(this._lContainer,a);c&&(hp(vc(this._lContainer),a),PE(c[y],c))}detach(o){const a=this._adjustIndex(o,-1),c=Xv(this._lContainer,a);return c&&null!=hp(vc(this._lContainer),a)?new r_(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function Hu(i){return i[8]}function vc(i){return i[8]||(i[8]=[])}function vm(i,o){let a;const c=o[i.index];return $r(c)?a=c:(a=eP(c,o,null,i),o[i.index]=a,e_(o,a)),Fa(a,o,i,c),new dS(a,i,o)}let Fa=function m0(i,o,a,c){if(i[Uo])return;let l;l=8&a.type?sr(c):function zu(i,o){const a=i[Se],c=a.createComment(""),l=ho(o,i);return Gl(a,Zp(a,l),c,function fL(i,o){return i.nextSibling(o)}(a,l),!1),c}(o,a),i[Uo]=l},od=()=>!1;class lu{constructor(o){this.queryList=o,this.matches=null}clone(){return new lu(this.queryList)}setDirty(){this.queryList.setDirty()}}class _m{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,l=[];for(let h=0;h<c;h++){const p=a.getByIndex(h);l.push(this.queries[p.indexInDeclarationView].clone())}return new _m(l)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}finishViewCreation(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==sd(o,a).matches&&this.queries[a].setDirty()}}class zh{constructor(o,a,c=null){this.flags=a,this.read=c,this.predicate="string"==typeof o?function Ku(i){return i.split(",").map(o=>o.trim())}(o):o}}class __{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const l=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(o,l);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new __(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class y_{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new y_(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1&~this.metadata.flags){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let l=0;l<c.length;l++){const h=c[l];this.matchTNodeWithReadOption(o,a,b_(a,h)),this.matchTNodeWithReadOption(o,a,gv(a,o,h,!1,!1))}else c===Bu?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,gv(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const l=this.metadata.read;if(null!==l)if(l===Bp||l===id||l===Bu&&4&a.type)this.addMatch(a.index,-2);else{const h=gv(a,o,l,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function b_(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function hS(i,o,a,c){return-1===a?function ym(i,o){return 11&i.type?yh(i,o):4&i.type?XE(i,o):null}(o,i):-2===a?function qP(i,o,a){return a===Bp?yh(o,i):a===Bu?XE(o,i):a===id?vm(o,i):void 0}(i,o,c):Ll(i,i[y],a,o)}function fS(i,o,a,c){const l=o[lr].queries[c];if(null===l.matches){const h=i.data,p=a.matches,E=[];for(let T=0;null!==p&&T<p.length;T+=2){const x=p[T];E.push(x<0?null:hS(o,h[x],p[T+1],a.metadata.read))}l.matches=E}return l.matches}function E_(i,o,a,c){const l=i.queries.getByIndex(a),h=l.matches;if(null!==h){const p=fS(i,o,l,a);for(let E=0;E<h.length;E+=2){const T=h[E];if(T>0)c.push(p[E/2]);else{const x=h[E+1],k=o[-T];for(let z=Mr;z<k.length;z++){const le=k[z];le[Un]===le[C]&&E_(le[y],le,x,c)}if(null!==k[xa]){const z=k[xa];for(let le=0;le<z.length;le++){const _e=z[le];E_(_e[y],_e,x,c)}}}}}return c}function Zi(i,o,a){const c=new Iv(!(4&~a));return function $E(i,o,a,c){const l=xT(o);l.push(a),i.firstCreatePass&&MT(i).push(c,l.length-1)}(i,o,c,c.destroy),(o[lr]??=new _m).queries.push(new lu(c))-1}function _0(i,o,a){null===i.queries&&(i.queries=new __),i.queries.track(new y_(o,a))}function sd(i,o){return i.queries.getByIndex(o)}function mS(i,o){const a=i[y],c=sd(a,o);return c.crossesNgTemplate?E_(a,i,o,[]):fS(a,i,c,o)}function I_(i){return"function"==typeof i&&void 0!==i[te]}function fa(i){let o=function T0(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;o;){let l;if(Ao(i))l=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new zt(903,!1);l=o.\u0275dir}if(l){if(a){c.push(l);const p=i;p.inputs=P_(i.inputs),p.inputTransforms=P_(i.inputTransforms),p.declaredInputs=P_(i.declaredInputs),p.outputs=P_(i.outputs);const E=l.hostBindings;E&&sN(i,E);const T=l.viewQuery,x=l.contentQueries;if(T&&oN(i,T),x&&Bn(i,x),_S(i,l),rp(i.outputs,l.outputs),Ao(l)&&l.data.animation){const k=i.data;k.animation=(k.animation||[]).concat(l.data.animation)}}const h=l.features;if(h)for(let p=0;p<h.length;p++){const E=h[p];E&&E.ngInherit&&E(i),E===fa&&(a=!1)}}o=Object.getPrototypeOf(o)}!function Dm(i){let o=0,a=null;for(let c=i.length-1;c>=0;c--){const l=i[c];l.hostVars=o+=l.hostVars,l.hostAttrs=th(l.hostAttrs,a=th(a,l.hostAttrs))}}(c)}function _S(i,o){for(const a in o.inputs){if(!o.inputs.hasOwnProperty(a)||i.inputs.hasOwnProperty(a))continue;const c=o.inputs[a];if(void 0!==c&&(i.inputs[a]=c,i.declaredInputs[a]=o.declaredInputs[a],null!==o.inputTransforms)){const l=Array.isArray(c)?c[0]:c;if(!o.inputTransforms.hasOwnProperty(l))continue;i.inputTransforms??={},i.inputTransforms[l]=o.inputTransforms[l]}}}function P_(i){return i===oa?{}:i===er?[]:i}function oN(i,o){const a=i.viewQuery;i.viewQuery=a?(c,l)=>{o(c,l),a(c,l)}:o}function Bn(i,o){const a=i.contentQueries;i.contentQueries=a?(c,l,h)=>{o(c,l,h),a(c,l,h)}:o}function sN(i,o){const a=i.hostBindings;i.hostBindings=a?(c,l)=>{o(c,l),a(c,l)}:o}function qu(i){const o=i.inputConfig,a={};for(const c in o)if(o.hasOwnProperty(c)){const l=o[c];Array.isArray(l)&&l[3]&&(a[c]=l[3])}i.inputTransforms=a}class Qu{}class Xu{}function IS(i,o){return new N_(i,o??null,[])}class N_ extends Qu{constructor(o,a,c){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Yi(this);const l=ao(o);this._bootstrapComponents=Fs(l.bootstrap),this._r3Injector=Ev(o,a,[{provide:Qu,useValue:this},{provide:ru,useValue:this.componentFactoryResolver},...c],Wr(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class k_ extends Xu{constructor(o){super(),this.moduleType=o}create(o){return new N_(this.moduleType,o,[])}}class DS extends Qu{constructor(o){super(),this.componentFactoryResolver=new Yi(this),this.instance=null;const a=new Ru([...o.providers,{provide:Qu,useValue:this},{provide:ru,useValue:this.componentFactoryResolver}],o.parent||_p(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function A0(i,o,a=null){return new DS({providers:i,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}function cd(i){return!!ud(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function ud(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Rr(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function ld(i,o,a,c,l,h,p,E,T,x){const k=a+an,z=o.firstCreatePass?function x0(i,o,a,c,l,h,p,E,T){const x=o.consts,k=Ah(o,i,4,p||null,E||null);Zv(o,a,k,Ci(x,T)),uv(o,k);const z=k.tView=Wo(2,k,c,l,h,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x,null);return null!==o.queries&&(o.queries.template(o,k),z.queries=o.queries.embeddedTView(k)),k}(k,o,i,c,l,h,p,E,T):o.data[k];$o(z,!1);const le=F_(o,i,z,a);xp()&&FE(o,i,le,z),zo(le,i);const _e=eP(le,i,le,z);return i[k]=_e,e_(i,_e),function uu(i,o,a){return od(i,o,a)}(_e,z,i),Wg(z)&&wT(o,i,z),null!=T&&IT(i,z,x),z}function Rm(i,o,a,c,l,h,p,E){const T=bt(),x=Kn();return ld(T,x,i,o,a,c,l,Ci(x.consts,h),p,E),Rm}let F_=function M0(i,o,a,c){return Ho(!0),o[Se].createComment("")};function _d(i,o,a,c){const l=bt();return Rr(l,ds(),o)&&(Kn(),hc(Fr(),l,i,o,a,c)),_d}function fu(i,o){return i<<17|o<<2}function ma(i){return i>>17&32767}function Q_(i){return 2|i}function pi(i){return(131068&i)>>2}function X_(i,o){return-131069&i|o<<2}function lf(i){return 1|i}function nl(i,o,a,c){const l=i[a+1],h=null===o;let p=c?ma(l):pi(l),E=!1;for(;0!==p&&(!1===E||h);){const x=i[p+1];CN(i[p],o)&&(E=!0,i[p+1]=c?lf(x):Q_(x)),p=c?ma(x):pi(x)}E&&(i[a+1]=c?Q_(l):lf(l))}function CN(i,o){return null===i||null==o||(Array.isArray(i)?i[1]:i)===o||!(!Array.isArray(i)||"string"!=typeof o)&&Cu(i,o)>=0}const Zr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function q0(i){return i.substring(Zr.key,Zr.keyEnd)}function $S(i,o){const a=Zr.textEnd;return a===o?-1:(o=Zr.keyEnd=function Z_(i,o,a){for(;o<a&&i.charCodeAt(o)>32;)o++;return o}(i,Zr.key=o,a),hf(i,o,a))}function hf(i,o,a){for(;o<a&&i.charCodeAt(o)<=32;)o++;return o}function pu(i,o,a){const c=bt();return Rr(c,ds(),o)&&function Go(i,o,a,c,l,h,p,E){const T=ho(o,a);let k,x=o.inputs;!E&&null!=x&&(k=x[c])?(Xc(i,a,k,c,l),Ns(o)&&function _L(i,o){const a=fo(o,i);16&a[b]||(a[b]|=64)}(a,o.index)):3&o.type&&(c=function WO(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),l=null!=p?p(l,o.value||"",c):l,h.setProperty(T,c,l))}(Kn(),Fr(),c,i,o,c[Se],a,!1),pu}function Dd(i,o,a,c,l){const p=l?"class":"style";Xc(i,a,o.inputs[p],p,c)}function J_(i,o){return function Bs(i,o,a,c){const l=bt(),h=Kn(),p=la(2);h.firstUpdatePass&&ZS(h,i,p,c),o!==Pn&&Rr(l,p,o)&&pf(h,h.data[qi()],l,l[Se],i,l[p+1]=function tw(i,o){return null==i||""===i||("string"==typeof o?i+=o:"object"==typeof i&&(i=Wr(Ni(i)))),i}(o,a),c,p)}(i,o,null,!0),J_}function XS(i){!function Pr(i,o,a,c){const l=Kn(),h=la(2);l.firstUpdatePass&&ZS(l,null,h,c);const p=bt();if(a!==Pn&&Rr(p,h,a)){const E=l.data[qi()];if(JS(E,c)&&!YS(l,h)){let T=c?E.classesWithoutHost:E.stylesWithoutHost;null!==T&&(a=wl(T,a||"")),Dd(l,E,p,a,c)}else!function ew(i,o,a,c,l,h,p,E){l===Pn&&(l=er);let T=0,x=0,k=0<l.length?l[0]:null,z=0<h.length?h[0]:null;for(;null!==k||null!==z;){const le=T<l.length?l[T+1]:void 0,_e=x<h.length?h[x+1]:void 0;let _t,Ze=null;k===z?(T+=2,x+=2,le!==_e&&(Ze=z,_t=_e)):null===z||null!==k&&k<z?(T+=2,Ze=k):(x+=2,Ze=z,_t=_e),null!==Ze&&pf(i,o,a,c,Ze,_t,p,E),k=T<l.length?l[T]:null,z=x<h.length?h[x]:null}}(l,E,p,p[Se],p[h+1],p[h+1]=function xN(i,o,a){if(null==a||""===a)return er;const c=[],l=Ni(a);if(Array.isArray(l))for(let h=0;h<l.length;h++)i(c,l[h],!0);else if("object"==typeof l)for(const h in l)l.hasOwnProperty(h)&&i(c,h,l[h]);else"string"==typeof l&&o(c,l);return c}(i,o,a),c,h)}}(J0,wc,i,!0)}function wc(i,o){for(let a=function US(i){return function Q0(i){Zr.key=0,Zr.keyEnd=0,Zr.value=0,Zr.valueEnd=0,Zr.textEnd=i.length}(i),$S(i,hf(i,0,Zr.textEnd))}(o);a>=0;a=$S(o,a))as(i,q0(o),!0)}function YS(i,o){return o>=i.expandoStartIndex}function ZS(i,o,a,c){const l=i.data;if(null===l[a+1]){const h=l[qi()],p=YS(i,a);JS(h,c)&&null===o&&!p&&(o=!1),o=function SN(i,o,a,c){const l=function iv(i){const o=xn.lFrame.currentDirectiveIndex;return-1===o?null:i[o]}(i);let h=c?o.residualClasses:o.residualStyles;if(null===l)0===(c?o.classBindings:o.styleBindings)&&(a=il(a=ff(null,i,o,a,c),o.attrs,c),h=null);else{const p=o.directiveStylingLast;if(-1===p||i[p]!==l)if(a=ff(l,i,o,a,c),null===h){let T=function AN(i,o,a){const c=a?o.classBindings:o.styleBindings;if(0!==pi(c))return i[ma(c)]}(i,o,c);void 0!==T&&Array.isArray(T)&&(T=ff(null,i,o,T[1],c),T=il(T,o.attrs,c),function Y0(i,o,a,c){i[ma(a?o.classBindings:o.styleBindings)]=c}(i,o,c,T))}else h=function RN(i,o,a){let c;const l=o.directiveEnd;for(let h=1+o.directiveStylingLast;h<l;h++)c=il(c,i[h].hostAttrs,a);return il(c,o.attrs,a)}(i,o,c)}return void 0!==h&&(c?o.residualClasses=h:o.residualStyles=h),a}(l,h,o,c),function df(i,o,a,c,l,h){let p=h?o.classBindings:o.styleBindings,E=ma(p),T=pi(p);i[c]=a;let k,x=!1;if(Array.isArray(a)?(k=a[1],(null===k||Cu(a,k)>0)&&(x=!0)):k=a,l)if(0!==T){const le=ma(i[E+1]);i[c+1]=fu(le,E),0!==le&&(i[le+1]=X_(i[le+1],c)),i[E+1]=function BS(i,o){return 131071&i|o<<17}(i[E+1],c)}else i[c+1]=fu(E,0),0!==E&&(i[E+1]=X_(i[E+1],c)),E=c;else i[c+1]=fu(T,0),0===E?E=c:i[T+1]=X_(i[T+1],c),T=c;x&&(i[c+1]=Q_(i[c+1])),nl(i,k,c,!0),nl(i,k,c,!1),function jS(i,o,a,c,l){const h=l?i.residualClasses:i.residualStyles;null!=h&&"string"==typeof o&&Cu(h,o)>=0&&(a[c+1]=lf(a[c+1]))}(o,k,i,c,h),p=fu(E,T),h?o.classBindings=p:o.styleBindings=p}(l,h,o,a,p,c)}}function ff(i,o,a,c,l){let h=null;const p=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<p&&(h=o[E],c=il(c,h.hostAttrs,l),h!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function il(i,o,a){const c=a?1:2;let l=-1;if(null!==o)for(let h=0;h<o.length;h++){const p=o[h];"number"==typeof p?l=p:l===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),as(i,p,!!a||o[++h]))}return void 0===i?null:i}function J0(i,o,a){const c=String(o);""!==c&&!c.includes(" ")&&as(i,c,a)}function pf(i,o,a,c,l,h,p,E){if(!(3&o.type))return;const T=i.data,x=T[E+1],k=function Y_(i){return!(1&~i)}(x)?Bm(T,o,a,l,pi(x),p):void 0;mf(k)||(mf(h)||function uf(i){return!(2&~i)}(x)&&(h=Bm(T,null,a,l,E,p)),function gL(i,o,a,c,l){if(o)l?i.addClass(a,c):i.removeClass(a,c);else{let h=-1===c.indexOf("-")?void 0:Qv.DashCase;null==l?i.removeStyle(a,c,h):("string"==typeof l&&l.endsWith("!important")&&(l=l.slice(0,-10),h|=Qv.Important),i.setStyle(a,c,l,h))}}(c,p,function wp(i,o){return sr(o[i])}(qi(),a),l,h))}function Bm(i,o,a,c,l,h){const p=null===o;let E;for(;l>0;){const T=i[l],x=Array.isArray(T),k=x?T[1]:T,z=null===k;let le=a[l+1];le===Pn&&(le=z?er:void 0);let _e=z?Cb(le,c):k===c?le:void 0;if(x&&!mf(_e)&&(_e=Cb(T,c)),mf(_e)&&(E=_e,p))return E;const Ze=i[l+1];l=p?ma(Ze):pi(Ze)}if(null!==o){let T=h?o.residualClasses:o.residualStyles;null!=T&&(E=Cb(T,c))}return E}function mf(i){return void 0!==i}function JS(i,o){return!!(i.flags&(o?8:16))}function ny(i,o){xo("NgControlFlow");const a=bt(),c=ds(),l=a[c]!==Pn?a[c]:-1,h=-1!==l?vf(a,an+l):void 0;if(Rr(a,c,i)){const E=ae(null);try{if(void 0!==h&&function QE(i,o){const a=Xv(i,o);return void 0!==a&&PE(a[y],a),a}(h,0),-1!==i){const T=an+i,x=vf(a,T),k=function lw(i,o){return uh(i,o)}(a[y],T),z=Li(x,k.tView.ssrId);Mh(x,xh(a,k,o,{dehydratedView:z}),0,Xl(k,z))}}finally{ae(E)}}else if(void 0!==h){const E=function OT(i,o){const a=Mr+o;if(a<i.length)return i[a]}(h,0);void 0!==E&&(E[Z]=o)}}function vf(i,o){return i[o]}function Cd(i,o,a,c){const l=bt(),h=Kn(),p=an+i,E=l[Se],T=h.firstCreatePass?function lA(i,o,a,c,l,h){const p=o.consts,T=Ah(o,i,2,c,Ci(p,l));return Zv(o,a,T,Ci(p,h)),null!==T.attrs&&rd(T,T.attrs,!1),null!==T.mergedAttrs&&rd(T,T.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,T),T}(p,h,l,o,a,c):h.data[p],x=dA(h,l,T,E,o,i);l[p]=x;const k=Wg(T);return $o(T,!0),bT(E,x,T),!function Ba(i){return!(32&~i.flags)}(T)&&xp()&&FE(h,l,x,T),0===function oM(){return xn.lFrame.elementDepthCount}()&&zo(x,l),function sM(){xn.lFrame.elementDepthCount++}(),k&&(wT(h,l,T),UE(h,T,l)),null!==c&&IT(l,T),Cd}function _f(){let i=Tr();Qb()?xl():(i=i.parent,$o(i,!1));const o=i;(function SF(i){return xn.skipHydrationRootTNode===i})(o)&&function xF(){xn.skipHydrationRootTNode=null}(),function ND(){xn.lFrame.elementDepthCount--}();const a=Kn();return a.firstCreatePass&&(uv(a,i),jb(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function fh(i){return!!(8&i.flags)}(o)&&Dd(a,o,bt(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function pM(i){return!!(16&i.flags)}(o)&&Dd(a,o,bt(),o.stylesWithoutHost,!1),_f}function dw(i,o,a,c){return Cd(i,o,a,c),_f(),dw}let dA=(i,o,a,c,l,h)=>(Ho(!0),Oa(c,l,function Rp(){return xn.lFrame.currentNamespace}()));function fA(){return bt()}const Ua=void 0;var bf=["en",[["a","p"],["AM","PM"],Ua],[["AM","PM"],Ua,Ua],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ua,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ua,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ua,"{1} 'at' {0}",Ua],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fw(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let sl={};function al(i){const o=function _A(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=sy(o);if(a)return a;const c=o.split("-")[0];if(a=sy(c),a)return a;if("en"===c)return bf;throw new zt(701,!1)}function mw(i){return al(i)[js.PluralCase]}function sy(i){return i in sl||(sl[i]=hr.ng&&hr.ng.common&&hr.ng.common.locales&&hr.ng.common.locales[i]),sl[i]}var js=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(js||{});const Ef="en-US";let cy=Ef;let my=(i,o,a)=>{};function Um(i,o,a,c){const l=bt(),h=Kn(),p=Tr();return function Uw(i,o,a,c,l,h,p){const E=Wg(c),x=i.firstCreatePass&&MT(i),k=o[Z],z=xT(o);let le=!0;if(3&c.type||p){const _t=ho(c,o),Nt=p?p(_t):_t,Ut=z.length,Tt=p?cr=>p(sr(cr[c.index])):c.index;let Sn=null;if(!p&&E&&(Sn=function jw(i,o,a,c){const l=i.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const p=l[h];if(p===a&&l[h+1]===c){const E=o[Y],T=l[h+2];return E.length>T?E[T]:null}"string"==typeof p&&(h+=2)}return null}(i,o,l,c.index)),null!==Sn)(Sn.__ngLastListenerFn__||Sn).__ngNextListenerFn__=h,Sn.__ngLastListenerFn__=h,le=!1;else{h=vy(c,o,k,h),my(_t,l,h);const cr=a.listen(Nt,l,h);z.push(h,cr),x&&x.push(l,Tt,Ut,Ut+1)}}else h=vy(c,o,k,h);const _e=c.outputs;let Ze;if(le&&null!==_e&&(Ze=_e[l])){const _t=Ze.length;if(_t)for(let Nt=0;Nt<_t;Nt+=2){const Lr=o[Ze[Nt]][Ze[Nt+1]].subscribe(h),Ji=z.length;z.push(h,Lr),x&&x.push(l,c.index,Ji,-(Ji+1))}}}(h,l,l[Se],p,i,o,c),Um}function gy(i,o,a,c){const l=ae(null);try{return ic(6,o,a),!1!==a(c)}catch(h){return Rh(i,h),!1}finally{ic(7,o,a),ae(l)}}function vy(i,o,a,c){return function l(h){if(h===Function)return c;Ph(i.componentOffset>-1?fo(i.index,o):o,5);let E=gy(o,a,c,h),T=l.__ngNextListenerFn__;for(;T;)E=gy(o,a,T,h)&&E,T=T.__ngNextListenerFn__;return E}}function xd(i=1){return function cv(i){return(xn.lFrame.contextLView=function Nu(i,o){for(;i>0;)o=o[Yt],i--;return o}(i,xn.lFrame.contextLView))[Z]}(i)}function FA(i,o){let a=null;const c=function Pb(i){const o=i.attrs;if(null!=o){const a=o.indexOf(5);if(!(1&a))return o[a+1]}return null}(i);for(let l=0;l<o.length;l++){const h=o[l];if("*"!==h){if(null===c?Ob(i,h,!0):Nb(c,h))return l}else a=l}return a}function _y(i){const o=bt()[mn][O];if(!o.projection){const c=o.projection=function fp(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(i?i.length:1,null),l=c.slice();let h=o.child;for(;null!==h;){if(128!==h.type){const p=i?FA(h,i):0;null!==p&&(l[p]?l[p].projectionNext=h:c[p]=h,l[p]=h)}h=h.next}}}function LA(i,o=0,a,c,l,h){const p=bt(),E=Kn(),T=c?i+1:null;null!==T&&ld(p,E,T,c,l,h,null,a);const x=Ah(E,an+i,16,null,a||null);null===x.projection&&(x.projection=o),xl();const z=!p[B]||sc();null===p[mn][O].projection[x.projection]&&null!==T?function $w(i,o,a){const c=an+a,l=o.data[c],h=i[c],p=Li(h,l.tView.ssrId);Mh(h,xh(i,l,void 0,{dehydratedView:p}),0,Xl(l,p))}(p,E,T):z&&32&~x.flags&&function pL(i,o,a){FO(o[Se],0,o,a,NE(i,a,o),Jp(a.parent||o[O],a,o))}(E,p,x)}function wy(i,o,a,c){!function Br(i,o,a,c){const l=Kn();if(l.firstCreatePass){const h=Tr();_0(l,new zh(o,a,c),h.index),function pS(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(l,i),!(2&~a)&&(l.staticContentQueries=!0)}return Zi(l,bt(),a)}(i,o,a,c)}function HA(i,o,a){!function v0(i,o,a){const c=Kn();return c.firstCreatePass&&(_0(c,new zh(i,o,a),-1),!(2&~o)&&(c.staticViewQueries=!0)),Zi(c,bt(),o)}(i,o,a)}function Iy(i){const o=bt(),a=Kn(),c=Ap();lh(c+1);const l=sd(a,c);if(i.dirty&&function tr(i){return!(4&~i[b])}(o)===!(2&~l.metadata.flags)){if(null===l.matches)i.reset([]);else{const h=mS(o,c);i.reset(h,jp),i.notifyOnChanges()}return!0}return!1}function Hw(){return function w_(i,o){return i[lr].queries[o].queryList}(bt(),Ap())}function Dy(i){return function Pu(i,o){return i[o]}(function Xb(){return xn.lFrame.contextLView}(),an+i)}function Sy(i,o=""){const a=bt(),c=Kn(),l=i+an,h=c.firstCreatePass?Ah(c,l,1,o,null):c.data[l],p=Ay(c,a,h,o,i);a[l]=p,xp()&&FE(c,a,p,h),$o(h,!1)}let Ay=(i,o,a,c,l)=>(Ho(!0),function hT(i,o){return i.createText(o)}(o[Se],c));function tI(i,o,a,c,l){if(i=bn(i),Array.isArray(i))for(let h=0;h<i.length;h++)tI(i[h],o,a,c,l);else{const h=Kn(),p=bt(),E=Tr();let T=rc(i)?i:bn(i.provide);const x=Hg(i),k=1048575&E.providerIndexes,z=E.directiveStart,le=E.providerIndexes>>20;if(rc(i)||!i.multi){const _e=new Op(x,l,tm),Ze=rI(T,o,l?k:k+le,z);-1===Ze?(rE(pv(E,p),h,T),nI(h,i,o.length),o.push(T),E.directiveStart++,E.directiveEnd++,l&&(E.providerIndexes+=1048576),a.push(_e),p.push(_e)):(a[Ze]=_e,p[Ze]=_e)}else{const _e=rI(T,o,k+le,z),Ze=rI(T,o,k,k+le),Nt=Ze>=0&&a[Ze];if(l&&!Nt||!l&&!(_e>=0&&a[_e])){rE(pv(E,p),h,T);const Ut=function iI(i,o,a,c,l){const h=new Op(i,a,tm);return h.multi=[],h.index=o,h.componentProviders=0,tR(h,l,c&&!a),h}(l?nR:ck,a.length,l,c,x);!l&&Nt&&(a[Ze].providerFactory=Ut),nI(h,i,o.length,0),o.push(T),E.directiveStart++,E.directiveEnd++,l&&(E.providerIndexes+=1048576),a.push(Ut),p.push(Ut)}else nI(h,i,_e>-1?_e:Ze,tR(a[l?Ze:_e],x,!l&&c));!l&&c&&Nt&&a[Ze].componentProviders++}}}function nI(i,o,a,c){const l=rc(o),h=function Vb(i){return!!i.useClass}(o);if(l||h){const T=(h?bn(o.useClass):o).prototype.ngOnDestroy;if(T){const x=i.destroyHooks||(i.destroyHooks=[]);if(!l&&o.multi){const k=x.indexOf(a);-1===k?x.push(a,[c,T]):x[k+1].push(c,T)}else x.push(a,T)}}}function tR(i,o,a){return a&&i.componentProviders++,i.multi.push(o)-1}function rI(i,o,a,c){for(let l=a;l<c;l++)if(o[l]===i)return l;return-1}function ck(i,o,a,c){return Py(this.multi,[])}function nR(i,o,a,c){const l=this.multi;let h;if(this.providerFactory){const p=this.providerFactory.componentProviders,E=Ll(a,a[y],this.providerFactory.index,c);h=E.slice(0,p),Py(l,h);for(let T=p;T<E.length;T++)h.push(E[T])}else h=[],Py(l,h);return h}function Py(i,o){for(let a=0;a<i.length;a++)o.push((0,i[a])());return o}function rR(i,o=[]){return a=>{a.providersResolver=(c,l)=>function ak(i,o,a){const c=Kn();if(c.firstCreatePass){const l=Ao(i);tI(a,c.data,c.blueprint,l,!0),tI(o,c.data,c.blueprint,l,!1)}}(c,l?l(i):i,o)}}let iR=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const c=co(0,a.type),l=c.length>0?A0([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,l)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=ir({token:i,providedIn:"environment",factory:()=>new i(so(Bo))})}return i})();function oI(i){xo("NgStandalone"),i.getStandaloneInjector=o=>o.get(iR).getOrCreateStandaloneInjector(i)}class vI{constructor(o){this.full=o;const a=o.split(".");this.major=a[0],this.minor=a[1],this.patch=a.slice(2).join(".")}}let ng=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();const Rk=new Dn(""),xk=new Dn("");let EI,sV=(()=>{class i{constructor(a,c,l){this._ngZone=a,this.registry=c,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,EI||(function Ok(i){EI=i}(l),l.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Wn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb()}});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,l){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==h),a()},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:l})}whenStable(a,c,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,l),this._runCallbacksIfReady()}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,l){return[]}static#e=this.\u0275fac=function(c){return new(c||i)(so(Wn),so(Mk),so(xk))};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac})}return i})(),Mk=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return EI?.findTestabilityInTree(this,a,c)??null}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})();function wI(i){return!!i&&"function"==typeof i.then}function Pk(i){return!!i&&"function"==typeof i.subscribe}const yR=new Dn("");let II=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,c)=>{this.resolve=a,this.reject=c}),this.appInits=sn(yR,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const l of this.appInits){const h=l();if(wI(h))a.push(h);else if(Pk(h)){const p=new Promise((E,T)=>{h.subscribe({complete:E,error:T})});a.push(p)}}const c=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{c()}).catch(l=>{this.reject(l)}),0===a.length&&c(),this.initialized=!0}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const Ha=new Dn("");function kk(i,o){return Array.isArray(o)?o.reduce(kk,i):{...i,...o}}let za=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=sn(uC),this.afterRenderEffectManager=sn(fm),this.zonelessEnabled=sn(Vh),this.externalTestViews=new Set,this.beforeRender=new jt.B,this.afterTick=new jt.B,this.componentTypes=[],this.components=[],this.isStable=sn(Bl).hasPendingTasks.pipe((0,en.T)(a=>!a)),this._injector=sn(Bo)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const l=a instanceof ct;if(!this._injector.get(II).done)throw!l&&Au(a),new zt(405,!1);let p;p=l?a:this._injector.get(ru).resolveComponentFactory(a),this.componentTypes.push(p.componentType);const E=function cV(i){return i.isBoundToModule}(p)?void 0:this._injector.get(Qu),x=p.create(Pi.NULL,[],c||p.selector,E),k=x.location.nativeElement,z=x.injector.get(Rk,null);return z?.registerApplication(k),x.onDestroy(()=>{this.detachView(x.hostView),CI(this.components,x),z?.unregisterApplication(k)}),this._loadComponent(x),x}tick(){this._tick(!0)}_tick(a){if(this._runningTick)throw new zt(101,!1);const c=ae(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(a)}catch(l){this.internalErrorHandler(l)}finally{this._runningTick=!1,ae(c),this.afterTick.next()}}detectChangesInAttachedViews(a){let c=null;this._injector.destroyed||(c=this._injector.get(pc,null,{optional:!0}));let l=0;const h=this.afterRenderEffectManager;for(;l<10;){const p=0===l;if(a||!p){this.beforeRender.next(p);for(let{_lView:E,notifyErrorHandler:T}of this._views)dV(E,T,p,this.zonelessEnabled)}else c?.begin?.(),c?.end?.();if(l++,h.executeInternalCallbacks(),!this.allViews.some(({_lView:E})=>oc(E))&&(h.execute(),!this.allViews.some(({_lView:E})=>oc(E))))break}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;CI(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(Ha,[]);[...this._bootstrapListeners,...c].forEach(l=>l(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>CI(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new zt(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function CI(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function dV(i,o,a,c){(a||oc(i))&&t_(i,o,a&&!c?0:1)}class hV{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let fV=(()=>{class i{compileModuleSync(a){return new k_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),h=Fs(ao(a).declarations).reduce((p,E)=>{const T=zn(E);return T&&p.push(new gc(T)),p},[]);return new hV(c,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),mV=(()=>{class i{constructor(){this.zone=sn(Wn),this.changeDetectionScheduler=sn(tu),this.applicationRef=sn(za)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function ig({ngZoneFactory:i,ignoreChangesOutsideZone:o}){return i??=()=>new Wn(TI()),[{provide:Wn,useFactory:i},{provide:sa,multi:!0,useFactory:()=>{const a=sn(mV,{optional:!0});return()=>a.initialize()}},{provide:sa,multi:!0,useFactory:()=>{const a=sn(Vk);return()=>{a.initialize()}}},{provide:uC,useFactory:zy},!0===o?{provide:nu,useValue:!0}:[]]}function zy(){const i=sn(Wn),o=sn(Ma);return a=>i.runOutsideAngular(()=>o.handleError(a))}function TI(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}let Vk=(()=>{class i{constructor(){this.subscription=new on.yU,this.initialized=!1,this.zone=sn(Wn),this.pendingTasks=sn(Bl)}initialize(){if(this.initialized)return;this.initialized=!0;let a=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(a=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Wn.assertNotInAngularZone(),queueMicrotask(()=>{null!==a&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(a),a=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Wn.assertInAngularZone(),a??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),og=(()=>{class i{constructor(){this.appRef=sn(za),this.taskService=sn(Bl),this.ngZone=sn(Wn),this.zonelessEnabled=sn(Vh),this.disableScheduling=sn(nu,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new on.yU,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof l0||!this.zoneIsDefined)}notify(a){if(!this.zonelessEnabled&&5===a)return;switch(a){case 3:case 2:case 0:case 4:case 5:case 1:this.shouldRefreshViews=!0}if(!this.shouldScheduleTick())return;const c=this.useMicrotaskScheduler?Bh:ms;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=c(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=c(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Wn.isInAngularZone())}tick(a){if(this.runningTick||this.appRef.destroyed)return;const c=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(a)},void 0,this.schedulerTickApplyArgs)}catch(l){throw this.taskService.remove(c),l}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Bh(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(c)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const a=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(a)}}static#e=this.\u0275fac=function(c){return new(c||i)};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const AI=new Dn("",{providedIn:"root",factory:()=>sn(AI,yt.Optional|yt.SkipSelf)||function bV(){return typeof $localize<"u"&&$localize.locale||Ef}()}),jd=new Dn("",{providedIn:"root",factory:()=>"USD"}),RI=new Dn("");let DR=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const l=function HP(i="zone.js",o){return"noop"===i?new l0:"zone.js"===i?new Wn(o):i}(c?.ngZone,TI({eventCoalescing:c?.ngZoneEventCoalescing,runCoalescing:c?.ngZoneRunCoalescing}));return l.run(()=>{const h=c?.ignoreChangesOutsideZone,p=function Sm(i,o,a){return new N_(i,o,a)}(a.moduleType,this.injector,[...ig({ngZoneFactory:()=>l,ignoreChangesOutsideZone:h}),{provide:tu,useExisting:og}]),E=p.injector.get(Ma,null);return l.runOutsideAngular(()=>{const T=l.onError.subscribe({next:x=>{E.handleError(x)}});p.onDestroy(()=>{CI(this._modules,p),T.unsubscribe()})}),function Nk(i,o,a){try{const c=a();return wI(c)?c.catch(l=>{throw o.runOutsideAngular(()=>i.handleError(l)),l}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(E,l,()=>{const T=p.injector.get(II);return T.runInitializers(),T.donePromise.then(()=>(function jm(i){"string"==typeof i&&(cy=i.toLowerCase().replace(/_/g,"-"))}(p.injector.get(AI,Ef)||Ef),this._moduleDoBootstrap(p),p))})})}bootstrapModule(a,c=[]){const l=kk({},c);return function ER(i,o,a){const c=new k_(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(a){const c=a.injector.get(za);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(l=>c.bootstrap(l));else{if(!a.instance.ngDoBootstrap)throw new zt(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new zt(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(RI,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(c){return new(c||i)(so(Pi))};static#t=this.\u0275prov=ir({token:i,factory:i.\u0275fac,providedIn:"platform"})}return i})(),dl=null;const ys=new Dn("");function TR(i,o,a=[]){const c=`Platform: ${o}`,l=new Dn(c);return(h=[])=>{let p=MI();if(!p||p.injector.get(ys,!1)){const E=[...a,...h,{provide:l,useValue:!0}];i?i(E):function CR(i){if(dl&&!dl.get(ys,!1))throw new zt(400,!1);(function DI(){!function $n(i){rn=i}(()=>{throw new zt(600,!1)})})(),dl=i;const o=i.get(DR);(function SR(i){i.get(UM,null)?.forEach(a=>a())})(i)}(function xI(i=[],o){return Pi.create({name:o,providers:[{provide:jg,useValue:"platform"},{provide:RI,useValue:new Set([()=>dl=null])},...i]})}(E,c))}return function Uk(i){const o=MI();if(!o)throw new zt(401,!1);return o}()}}function MI(){return dl?.get(DR)??null}function Ud(){return!1}let Wy=(()=>{class i{static#e=this.__NG_ELEMENT_ID__=Gy}return i})();function Gy(i){return function qy(i,o,a){if(Ns(i)&&!a){const c=fo(i.index,o);return new r_(c,c)}return 175&i.type?new r_(o[mn],o):null}(Tr(),bt(),!(16&~i))}class Gk{constructor(){}supports(o){return cd(o)}create(o){return new AV(o)}}const FI=(i,o)=>o;class AV{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||FI}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,l=0,h=null;for(;a||c;){const p=!c||a&&a.currentIndex<BI(c,l,h)?a:c,E=BI(p,l,h),T=p.currentIndex;if(p===c)l--,c=c._nextRemoved;else if(a=a._next,null==p.previousIndex)l++;else{h||(h=[]);const x=E-l,k=T-l;if(x!=k){for(let le=0;le<x;le++){const _e=le<h.length?h[le]:h[le]=0,Ze=_e+le;k<=Ze&&Ze<x&&(h[le]=_e+1)}h[p.previousIndex]=k-x}}E!==T&&o(p,E,T)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!cd(o))throw new zt(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l,h,p,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)h=o[E],p=this._trackByFn(E,h),null!==a&&Object.is(a.trackById,p)?(c&&(a=this._verifyReinsertion(a,h,p,E)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,p,E),c=!0),a=a._next}else l=0,function uN(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,E=>{p=this._trackByFn(l,E),null!==a&&Object.is(a.trackById,p)?(c&&(a=this._verifyReinsertion(a,E,p,l)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,p,l),c=!0),a=a._next,l++}),this.length=l;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,l){let h;return null===o?h=this._itTail:(h=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,h,l)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,l))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,h,l)):o=this._addAfter(new qk(a,c),h,l),o}_verifyReinsertion(o,a,c,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?o=this._reinsertAfter(h,o._prev,l):o.currentIndex!=l&&(o.currentIndex=l,this._addToMoves(o,l)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const l=o._prevRemoved,h=o._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const l=null===a?this._itHead:a._next;return o._next=l,o._prev=a,null===l?this._itTail=o:l._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new VI),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new VI),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class qk{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class VI{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new LI,this.map.set(a,c)),c.add(o)}get(o,a){const l=this.map.get(o);return l?l.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BI(i,o,a){const c=i.previousIndex;if(null===c)return c;let l=0;return a&&c<a.length&&(l=a[c]),c+o+l}class Qy{constructor(){}supports(o){return o instanceof Map||ud(o)}create(){return new FR}}class FR{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||ud(o)))throw new zt(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,l)=>{if(a&&a.key===l)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(l,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const l=this._records.get(o);this._maybeAddToChanges(l,a);const h=l._prev,p=l._next;return h&&(h._next=p),p&&(p._prev=h),l._next=null,l._prev=null,l}const c=new LR(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class LR{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function VR(){return new Xy([new Gk])}let Xy=(()=>{class i{static#e=this.\u0275prov=ir({token:i,providedIn:"root",factory:VR});constructor(a){this.factories=a}static create(a,c){if(null!=c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||VR()),deps:[[i,new eh,new Du]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(null!=c)return c;throw new zt(901,!1)}}return i})();function jI(){return new BR([new Qy])}let BR=(()=>{class i{static#e=this.\u0275prov=ir({token:i,providedIn:"root",factory:jI});constructor(a){this.factories=a}static create(a,c){if(c){const l=c.factories.slice();a=a.concat(l)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||jI()),deps:[[i,new eh,new Du]]}}find(a){const c=this.factories.find(l=>l.supports(a));if(c)return c;throw new zt(901,!1)}}return i})();const UR=TR(null,"core",[]);let Xk=(()=>{class i{constructor(a){}static#e=this.\u0275fac=function(c){return new(c||i)(so(za))};static#t=this.\u0275mod=kb({type:i});static#n=this.\u0275inj=xr({})}return i})();const $d=new Dn("");function qV(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}function ZV(i){const o=ae(null);try{return i()}finally{ae(o)}}const JV=new Dn("",{providedIn:"root",factory:()=>sn(e2)});let e2=(()=>{class i{static#e=this.\u0275prov=ir({token:i,providedIn:"root",factory:()=>new D1})}return i})();class D1{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=sn(Bl),this.taskId=null}scheduleEffect(o){if(this.enqueue(o),null===this.taskId){const a=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(a),this.taskId=null})}}enqueue(o){const a=o.creationZone;this.queues.has(a)||this.queues.set(a,new Set);const c=this.queues.get(a);c.has(o)||(this.queuedEffectCount++,c.add(o))}flush(){for(;this.queuedEffectCount>0;)for(const[o,a]of this.queues)null===o?this.flushQueue(a):o.run(()=>this.flushQueue(a))}flushQueue(o){for(const a of o)o.delete(a),this.queuedEffectCount--,a.run()}}class t2{constructor(o,a,c,l,h,p){this.scheduler=o,this.effectFn=a,this.creationZone=c,this.injector=h,this.watcher=function oe(i,o,a){const c=Object.create(Ct);a&&(c.consumerAllowSignalWrites=!0),c.fn=i,c.schedule=o;const l=T=>{c.cleanupFn=T};return c.ref={notify:()=>Te(c),run:()=>{if(null===c.fn)return;if(function lt(){return fe}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(c.dirty=!1,c.hasRun&&!Be(c))return;c.hasRun=!0;const T=Oe(c);try{c.cleanupFn(),c.cleanupFn=Je,c.fn(l)}finally{pe(c,T)}},cleanup:()=>c.cleanupFn(),destroy:()=>function p(T){(function h(T){return null===T.fn&&null===T.schedule})(T)||(dt(T),T.cleanupFn(),T.fn=null,T.schedule=null,T.cleanupFn=Je)}(c),[te]:c},c.ref}(E=>this.runEffect(E),()=>this.schedule(),p),this.unregisterOnDestroy=l?.onDestroy(()=>this.destroy())}runEffect(o){try{this.effectFn(o)}catch(a){this.injector.get(Ma,null,{optional:!0})?.handleError(a)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function C1(i,o){xo("NgSignals"),!o?.injector&&cs();const a=o?.injector??sn(Pi),c=!0!==o?.manualCleanup?a.get(Vp):null,l=new t2(a.get(JV),i,typeof Zone>"u"?null:Zone.current,c,a,o?.allowSignalWrites??!1),h=a.get(Wy,null,{optional:!0});return h&&8&h._lView[b]?(h._lView[uo]??=[]).push(l.watcher.notify):l.watcher.notify(),l}function n2(i){const o=zn(i);if(!o)return null;const a=new gc(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},9556:(Bt,tt,M)=>{"use strict";M.d(tt,{p4:()=>m});class m{ttl;map=new Map;_to=!1;constructor(te){this.ttl=te}has(te){return this.map.has(te)}add(te){this.map.set(te,fe()),this._to||(this._to=!0,setTimeout(()=>{this._to=!1,function ie(se){const te=fe()-se.ttl,ae=se.map[Symbol.iterator]();for(;;){const de=ae.next().value;if(!de)return;if(!(de[1]<te))return;se.map.delete(de[0])}}(this)},0))}clear(){this.map.clear()}}function fe(){return Date.now()}},9825:(Bt,tt,M)=>{"use strict";M.d(tt,{K:()=>de,X:()=>qe});var m=M(6126),ie=M(5520),fe=M(9403),se=M(6434),te=M(6568),ae=M(3896),de=function(){function ee(Te,Oe,pe){this.cacheItemByDocId=new Map,this.tasks=new Set,this.registry="function"==typeof FinalizationRegistry?new FinalizationRegistry(Be=>{var dt=Be.docId,De=this.cacheItemByDocId.get(dt);De&&(De[0].delete(Be.revisionHeight),0===De[0].size&&this.cacheItemByDocId.delete(dt))}):void 0,this.primaryPath=Te,this.changes$=Oe,this.documentCreator=pe,Oe.subscribe(Be=>{this.tasks.add(()=>{for(var dt=this.cacheItemByDocId,De=0;De<Be.length;De++){var He=Be[De],be=dt.get(He.documentId);if(be){var at=He.documentData;at||(at=He.previousDocumentData),be[1]=at}}}),this.tasks.size<=1&&(0,ie.vN)().then(()=>{this.processTasks()})})}var Ue=ee.prototype;return Ue.processTasks=function(){0!==this.tasks.size&&(Array.from(this.tasks).forEach(pe=>pe()),this.tasks.clear())},Ue.getLatestDocumentData=function(Oe){return this.processTasks(),(0,fe.m)(this.cacheItemByDocId,Oe)[1]},Ue.getLatestDocumentDataIfExists=function(Oe){this.processTasks();var pe=this.cacheItemByDocId.get(Oe);if(pe)return pe[1]},(0,m.A)(ee,[{key:"getCachedRxDocuments",get:function(){var Te=lt(this);return(0,se.Ns)(this,"getCachedRxDocuments",Te)}},{key:"getCachedRxDocument",get:function(){var Te=lt(this);return(0,se.Ns)(this,"getCachedRxDocument",Oe=>Te([Oe])[0])}}])}();function lt(ee){var Ue=ee.primaryPath,Te=ee.cacheItemByDocId,Oe=ee.registry,pe=ae.h.deepFreezeWhenDevMode,Be=ee.documentCreator;return De=>{for(var He=new Array(De.length),be=[],at=0;at<De.length;at++){var ot=De[at],ce=ot[Ue],ne=(0,te.Wg)(ot._rev),W=void 0,ft=void 0,At=Te.get(ce);At?ft=(W=At[0]).get(ne):Te.set(ce,At=[W=new Map,ot]);var xt=ft?ft.deref():void 0;xt||(ot=pe(ot),xt=Be(ot),W.set(ne,he(xt)),Oe&&be.push(xt)),He[at]=xt}return be.length>0&&Oe&&(ee.tasks.add(()=>{for(var yn=0;yn<be.length;yn++){var rn=be[yn];Oe.register(rn,{docId:rn.primary,revisionHeight:(0,te.Wg)(rn.revision)})}}),ee.tasks.size<=1&&(0,ie.vN)().then(()=>{ee.processTasks()})),He}}function qe(ee,Ue){return(0,ee.getCachedRxDocuments)(Ue)}var he="function"==typeof WeakRef?function Ve(ee){return new WeakRef(ee)}:function xe(ee){return{deref:()=>ee}}},2284:(Bt,tt,M)=>{"use strict";M.d(tt,{FX:()=>fe,Xi:()=>ie,r:()=>m});var m={preAddRxPlugin:[],preCreateRxDatabase:[],createRxDatabase:[],preCreateRxCollection:[],createRxCollection:[],createRxState:[],postDestroyRxCollection:[],postRemoveRxCollection:[],preCreateRxSchema:[],createRxSchema:[],preCreateRxQuery:[],prePrepareQuery:[],createRxDocument:[],postCreateRxDocument:[],preCreateRxStorageInstance:[],preStorageWrite:[],preMigrateDocument:[],postMigrateDocument:[],preDestroyRxDatabase:[],postRemoveRxDatabase:[],preReplicationMasterWrite:[],preReplicationMasterWriteDocumentsHandle:[]};function ie(te,ae){m[te].length>0&&m[te].forEach(de=>de(ae))}function fe(te,ae){return Promise.all(m[te].map(de=>de(ae)))}},6706:(Bt,tt,M)=>{"use strict";M.d(tt,{Hl:()=>$e,N6:()=>qe});var m=M(467),ie=M(7650),fe=M(9403),se=M(8663),te=M(6434),ae=M(2060),de=M(6568),lt=M(6893),qe=function(){function Ve(ee,Ue,Te,Oe){this.queueByDocId=new Map,this.isRunning=!1,this.storageInstance=ee,this.primaryPath=Ue,this.preWrite=Te,this.postWrite=Oe}var xe=Ve.prototype;return xe.addWrite=function(Ue,Te){var pe=(0,fe.q)(this.queueByDocId,Ue[this.primaryPath],()=>[]);return new Promise((dt,De)=>{var He={lastKnownDocumentState:Ue,modifier:Te,resolve:dt,reject:De};(0,se.ZN)(pe).push(He),this.triggerRun()})},xe.triggerRun=function(){var ee=(0,m.A)(function*(){var Te=this;if(!0!==this.isRunning&&0!==this.queueByDocId.size){this.isRunning=!0;var Oe=[],pe=this.queueByDocId;this.queueByDocId=new Map,yield Promise.all(Array.from(pe.entries()).map(function(){var dt=(0,m.A)(function*([De,He]){var be=function he(Ve){var xe=Ve[0],ee=(0,de.Wg)(xe._rev);return Ve.forEach(Ue=>{var Te=(0,de.Wg)(Ue._rev);Te>ee&&(xe=Ue,ee=Te)}),xe}(He.map(ce=>ce.lastKnownDocumentState)),at=be;for(var ot of He)try{at=yield ot.modifier((0,te.o8)(at))}catch(ce){ot.reject(ce),ot.reject=()=>{},ot.resolve=()=>{}}try{yield Te.preWrite(at,be)}catch(ce){return void He.forEach(ne=>ne.reject(ce))}Oe.push({previous:be,document:at})});return function(De){return dt.apply(this,arguments)}}()));var Be=Oe.length>0?yield this.storageInstance.bulkWrite(Oe,"incremental-write"):{error:[]};return yield Promise.all((0,lt.YN)(this.primaryPath,Oe,Be).map(dt=>{var De=dt[this.primaryPath];this.postWrite(dt),(0,fe.m)(pe,De).forEach(be=>be.resolve(dt))})),Be.error.forEach(dt=>{var De=dt.documentId,He=(0,fe.m)(pe,De),be=(0,ie.sX)(dt);if(be){var at=(0,fe.q)(this.queueByDocId,De,()=>[]);He.reverse().forEach(ce=>{ce.lastKnownDocumentState=(0,se.ZN)(be.documentInDb),(0,se.ZN)(at).unshift(ce)})}else{var ot=(0,ie.cg)(dt);He.forEach(ce=>ce.reject(ot))}}),this.isRunning=!1,this.triggerRun()}});return function Ue(){return ee.apply(this,arguments)}}(),Ve}();function $e(Ve){var xe=function(){var ee=(0,m.A)(function*(Ue){var Te=(0,ae.Xz)(Ue);Te._deleted=Ue._deleted;var Oe=yield Ve(Te),pe=Object.assign({},Oe,{_meta:Ue._meta,_attachments:Ue._attachments,_rev:Ue._rev,_deleted:typeof Oe._deleted<"u"?Oe._deleted:Ue._deleted});return typeof pe._deleted>"u"&&(pe._deleted=!1),pe});return function(Te){return ee.apply(this,arguments)}}();return xe}},3896:(Bt,tt,M)=>{"use strict";M.d(tt,{h:()=>m});var m={isDevMode:()=>!1,deepFreezeWhenDevMode:ie=>ie,tunnelErrorMessage:ie=>"RxDB Error-Code "+ie+".\n        Error messages are not included in RxDB core to reduce build size.\n        "}},7176:(Bt,tt,M)=>{"use strict";M.d(tt,{$r:()=>te,Aj:()=>ae,Hb:()=>Te,S7:()=>$e,Sd:()=>he,dG:()=>ie,j7:()=>Ve,jw:()=>Oe,k_:()=>lt});var m=M(467);function ie(pe){return pe[pe.length-1]}function te(pe){return Array.isArray(pe)?pe.slice(0):[pe]}function ae(pe,Be){pe=pe.slice(0);for(var dt=[];pe.length;){var De=pe.splice(0,Be);dt.push(De)}return dt}function lt(pe){return Array.isArray(pe)}function $e(pe){return null!=pe}function he(pe,Be){var dt=0,De=-1;for(var He of pe){if(!Be(He,De+=1))break;dt+=1}return dt}function Ve(pe,Be){return xe.apply(this,arguments)}function xe(){return(xe=(0,m.A)(function*(pe,Be){var dt=yield Promise.all(pe.map(Be));return pe.filter((...[,De])=>dt[De])})).apply(this,arguments)}function Te(pe,Be){var dt=Be.length;if(0!==dt){var De=pe.length;pe.length=De+Be.length;for(var He=0;He<dt;++He)pe[De+He]=Be[He]}}function Oe(pe){return pe.filter(function(Be,dt,De){return De.indexOf(Be)===dt})}},2060:(Bt,tt,M)=>{"use strict";M.d(tt,{Fq:()=>fe,MC:()=>m,Xz:()=>se,YL:()=>te,o4:()=>ie});var m=1;function ie(){return{lwt:m}}function fe(){return""}function se(qe){return Object.assign({},qe,{_meta:void 0,_deleted:void 0,_rev:void 0})}function te(qe,$e,he){if($e.length!==he.length)return!1;for(var Ve=0,xe=$e.length;Ve<xe;){var ee=$e[Ve],Ue=he[Ve];if(Ve++,ee._rev!==Ue._rev||ee[qe]!==Ue[qe])return!1}return!0}},203:(Bt,tt,M)=>{"use strict";M.d(tt,{S:()=>fe,u:()=>ie});var m=M(720);function ie(se){var te=se.split("-"),ae="RxDB";return te.forEach(de=>{ae+=(0,m.Z2)(de)}),ae+="Plugin",new Error("You are using a function which must be overwritten by a plugin.\n        You should either prevent the usage of this function or add the plugin via:\n            import { "+ae+" } from 'rxdb/plugins/"+se+"';\n            addRxPlugin("+ae+");\n        ")}function fe(se){return{name:se.name,message:se.message,rxdb:se.rxdb,parameters:se.parameters,extensions:se.extensions,code:se.code,url:se.url,stack:se.stack?se.stack.replace(/\n/g," \n "):void 0}}},7014:(Bt,tt,M)=>{"use strict";M.d(tt,{P:()=>m,Y:()=>ie});var m={},ie="6da4936d1425ff3a5c44c02342c6daf791d266be3ae8479b8ec59e261df41b93"},6243:(Bt,tt,M)=>{"use strict";M.d(tt,{V0:()=>$n});var m=M(467);Object.freeze({ignoreUnknown:!1,respectType:!1,respectFunctionNames:!1,respectFunctionProperties:!1,unorderedObjects:!0,unorderedArrays:!1,unorderedSets:!1,excludeKeys:void 0,excludeValues:void 0,replacer:void 0}),Object.freeze(["prototype","__proto__","constructor"]);class qe{constructor(ye,K){ye=this.words=ye||[],this.sigBytes=void 0===K?4*ye.length:K}toString(ye){return(ye||$e).stringify(this)}concat(ye){if(this.clamp(),this.sigBytes%4)for(let K=0;K<ye.sigBytes;K++)this.words[this.sigBytes+K>>>2]|=(ye.words[K>>>2]>>>24-K%4*8&255)<<24-(this.sigBytes+K)%4*8;else for(let K=0;K<ye.sigBytes;K+=4)this.words[this.sigBytes+K>>>2]=ye.words[K>>>2];return this.sigBytes+=ye.sigBytes,this}clamp(){this.words[this.sigBytes>>>2]&=4294967295<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4)}clone(){return new qe([...this.words])}}const $e={stringify(me){const ye=[];for(let K=0;K<me.sigBytes;K++){const H=me.words[K>>>2]>>>24-K%4*8&255;ye.push((H>>>4).toString(16),(15&H).toString(16))}return ye.join("")}},Ve={parse(me){const ye=me.length,K=[];for(let H=0;H<ye;H++)K[H>>>2]|=(255&me.charCodeAt(H))<<24-H%4*8;return new qe(K,ye)}},xe_parse=me=>Ve.parse(unescape(encodeURIComponent(me)));class ee{constructor(){this._data=new qe,this._nDataBytes=0,this._minBufferSize=0,this.blockSize=16}reset(){this._data=new qe,this._nDataBytes=0}_append(ye){"string"==typeof ye&&(ye=xe_parse(ye)),this._data.concat(ye),this._nDataBytes+=ye.sigBytes}_doProcessBlock(ye,K){}_process(ye){let K,H=this._data.sigBytes/(4*this.blockSize);H=ye?Math.ceil(H):Math.max((0|H)-this._minBufferSize,0);const V=H*this.blockSize,q=Math.min(4*V,this._data.sigBytes);if(V){for(let X=0;X<V;X+=this.blockSize)this._doProcessBlock(this._data.words,X);K=this._data.words.splice(0,V),this._data.sigBytes-=q}return new qe(K,q)}}class Ue extends ee{update(ye){return this._append(ye),this._process(),this}finalize(ye){ye&&this._append(ye)}}const Te=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Oe=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],pe=[];class Be extends Ue{constructor(){super(...arguments),this._hash=new qe([...Te])}reset(){super.reset(),this._hash=new qe([...Te])}_doProcessBlock(ye,K){const H=this._hash.words;let V=H[0],q=H[1],X=H[2],re=H[3],oe=H[4],Je=H[5],Ct=H[6],Ft=H[7];for(let Mt=0;Mt<64;Mt++){if(Mt<16)pe[Mt]=0|ye[K+Mt];else{const tn=pe[Mt-15],In=pe[Mt-2];pe[Mt]=((tn<<25|tn>>>7)^(tn<<14|tn>>>18)^tn>>>3)+pe[Mt-7]+((In<<15|In>>>17)^(In<<13|In>>>19)^In>>>10)+pe[Mt-16]}const on=V&q^V&X^q&X,$t=Ft+((oe<<26|oe>>>6)^(oe<<21|oe>>>11)^(oe<<7|oe>>>25))+(oe&Je^~oe&Ct)+Oe[Mt]+pe[Mt];Ft=Ct,Ct=Je,Je=oe,oe=re+$t|0,re=X,X=q,q=V,V=$t+(((V<<30|V>>>2)^(V<<19|V>>>13)^(V<<10|V>>>22))+on)|0}H[0]=H[0]+V|0,H[1]=H[1]+q|0,H[2]=H[2]+X|0,H[3]=H[3]+re|0,H[4]=H[4]+oe|0,H[5]=H[5]+Je|0,H[6]=H[6]+Ct|0,H[7]=H[7]+Ft|0}finalize(ye){super.finalize(ye);const K=8*this._nDataBytes,H=8*this._data.sigBytes;return this._data.words[H>>>5]|=128<<24-H%32,this._data.words[14+(H+64>>>9<<4)]=Math.floor(K/4294967296),this._data.words[15+(H+64>>>9<<4)]=K,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}}function rn(){return(rn=(0,m.A)(function*(me){var ye=(new TextEncoder).encode(me),K=yield crypto.subtle.digest("SHA-256",ye);return Array.prototype.map.call(new Uint8Array(K),V=>("00"+V.toString(16)).slice(-2)).join("")})).apply(this,arguments)}var $n=typeof crypto<"u"&&typeof crypto.subtle<"u"&&"function"==typeof crypto.subtle.digest?function yn(me){return rn.apply(this,arguments)}:function xt(me){return Promise.resolve(function dt(me){return(new Be).finalize(me).toString()}(me))}},9403:(Bt,tt,M)=>{"use strict";function m(fe,se){var te=fe.get(se);if(typeof te>"u")throw new Error("missing value from map "+se);return te}function ie(fe,se,te,ae){var de=fe.get(se);return typeof de>"u"?(de=te(),fe.set(se,de)):ae&&ae(de),de}M.d(tt,{m:()=>m,q:()=>ie})},6636:(Bt,tt,M)=>{"use strict";function m(ie,fe){if(ie===fe)return!0;if(ie&&fe&&"object"==typeof ie&&"object"==typeof fe){if(ie.constructor!==fe.constructor)return!1;var se,te;if(Array.isArray(ie)){if((se=ie.length)!==fe.length)return!1;for(te=se;0!=te--;)if(!m(ie[te],fe[te]))return!1;return!0}if(ie.constructor===RegExp)return ie.source===fe.source&&ie.flags===fe.flags;if(ie.valueOf!==Object.prototype.valueOf)return ie.valueOf()===fe.valueOf();if(ie.toString!==Object.prototype.toString)return ie.toString()===fe.toString();var ae=Object.keys(ie);if((se=ae.length)!==Object.keys(fe).length)return!1;for(te=se;0!=te--;)if(!Object.prototype.hasOwnProperty.call(fe,ae[te]))return!1;for(te=se;0!=te--;){var de=ae[te];if(!m(ie[de],fe[de]))return!1}return!0}return ie!=ie&&fe!=fe}M.d(tt,{b:()=>m})},1744:(Bt,tt,M)=>{"use strict";M.d(tt,{UU:()=>de,oq:()=>lt});var m=Te=>{var Oe=typeof Te;return null!==Te&&("object"===Oe||"function"===Oe)},ie=new Set(["__proto__","prototype","constructor"]),fe=new Set("0123456789");function se(Te){var Oe=[],pe="",Be="start",dt=!1;for(var De of Te)switch(De){case"\\":if("index"===Be)throw new Error("Invalid character in an index");if("indexEnd"===Be)throw new Error("Invalid character after an index");dt&&(pe+=De),Be="property",dt=!dt;break;case".":if("index"===Be)throw new Error("Invalid character in an index");if("indexEnd"===Be){Be="property";break}if(dt){dt=!1,pe+=De;break}if(ie.has(pe))return[];Oe.push(pe),pe="",Be="property";break;case"[":if("index"===Be)throw new Error("Invalid character in an index");if("indexEnd"===Be){Be="index";break}if(dt){dt=!1,pe+=De;break}if("property"===Be){if(ie.has(pe))return[];Oe.push(pe),pe=""}Be="index";break;case"]":if("index"===Be){Oe.push(Number.parseInt(pe,10)),pe="",Be="indexEnd";break}if("indexEnd"===Be)throw new Error("Invalid character after an index");default:if("index"===Be&&!fe.has(De))throw new Error("Invalid character in an index");if("indexEnd"===Be)throw new Error("Invalid character after an index");"start"===Be&&(Be="property"),dt&&(dt=!1,pe+="\\"),pe+=De}switch(dt&&(pe+="\\"),Be){case"property":if(ie.has(pe))return[];Oe.push(pe);break;case"index":throw new Error("Index was not closed");case"start":Oe.push("")}return Oe}function te(Te,Oe){if("number"!=typeof Oe&&Array.isArray(Te)){var pe=Number.parseInt(Oe,10);return Number.isInteger(pe)&&Te[pe]===Te[Oe]}return!1}function ae(Te,Oe){if(te(Te,Oe))throw new Error("Cannot use string index")}function de(Te,Oe,pe){if(Array.isArray(Oe)&&(Oe=Oe.join(".")),!Oe.includes(".")&&!Oe.includes("["))return Te[Oe];if(!m(Te)||"string"!=typeof Oe)return void 0===pe?Te:pe;var Be=se(Oe);if(0===Be.length)return pe;for(var dt=0;dt<Be.length;dt++){var De=Be[dt];if(null==(Te=te(Te,De)?dt===Be.length-1?void 0:null:Te[De])){if(dt!==Be.length-1)return pe;break}}return void 0===Te?pe:Te}function lt(Te,Oe,pe){if(Array.isArray(Oe)&&(Oe=Oe.join(".")),!m(Te)||"string"!=typeof Oe)return Te;for(var Be=Te,dt=se(Oe),De=0;De<dt.length;De++){var He=dt[De];ae(Te,He),De===dt.length-1?Te[He]=pe:m(Te[He])||(Te[He]="number"==typeof dt[De+1]?[]:{}),Te=Te[He]}return Be}},6434:(Bt,tt,M)=>{"use strict";function m(xe){return Object.freeze(xe),Object.getOwnPropertyNames(xe).forEach(function(ee){Object.prototype.hasOwnProperty.call(xe,ee)&&null!==xe[ee]&&("object"==typeof xe[ee]||"function"==typeof xe[ee])&&!Object.isFrozen(xe[ee])&&m(xe[ee])}),xe}function ie(xe){var ee=xe.split("."),Ue=ee.length;return 1===Ue?Te=>Te[xe]:Te=>{for(var Oe=Te,pe=0;pe<Ue;++pe)if(typeof(Oe=Oe[ee[pe]])>"u")return Oe;return Oe}}function se(xe){var ee={};for(var Ue in xe)if(Object.prototype.hasOwnProperty.call(xe,Ue))if("object"==typeof xe[Ue]){var Te=se(xe[Ue]);for(var Oe in Te)Object.prototype.hasOwnProperty.call(Te,Oe)&&(ee[Ue+"."+Oe]=Te[Oe])}else ee[Ue]=xe[Ue];return ee}function te(xe){return Object.assign({},xe)}function ae(xe){return Object.keys(xe)[0]}function lt(xe,ee=!1){if(!xe)return xe;if(!ee&&Array.isArray(xe))return xe.sort((Te,Oe)=>"string"==typeof Te&&"string"==typeof Oe?Te.localeCompare(Oe):"object"==typeof Te?1:-1).map(Te=>lt(Te,ee));if("object"==typeof xe&&!Array.isArray(xe)){var Ue={};return Object.keys(xe).sort((Te,Oe)=>Te.localeCompare(Oe)).forEach(Te=>{Ue[Te]=lt(xe[Te],ee)}),Ue}return xe}M.d(tt,{FD:()=>te,Ln:()=>ae,Ns:()=>he,SQ:()=>ie,YO:()=>se,mf:()=>lt,o8:()=>$e,ol:()=>m});var $e=function qe(xe){if(!xe||null===xe||"object"!=typeof xe)return xe;if(Array.isArray(xe)){for(var ee=new Array(xe.length),Ue=ee.length;Ue--;)ee[Ue]=qe(xe[Ue]);return ee}var Te={};for(var Oe in xe)Te[Oe]=qe(xe[Oe]);return Te};function he(xe,ee,Ue){return Object.defineProperty(xe,ee,{get:function(){return Ue}}),Ue}},8663:(Bt,tt,M)=>{"use strict";function ie(te,ae){if(!te)throw ae||(ae=""),new Error("ensureNotFalsy() is falsy: "+ae);return te}M.d(tt,{ZN:()=>ie,bz:()=>se});var se={bufferSize:1,refCount:!0}},5520:(Bt,tt,M)=>{"use strict";function m(){return new Promise(ee=>setTimeout(ee,0))}function fe(ee){return ee&&"function"==typeof ee.then?ee:Promise.resolve(ee)}M.d(tt,{$A:()=>de,Dr:()=>ae,Ms:()=>te,Ve:()=>he,dY:()=>m,em:()=>lt,h$:()=>xe,hq:()=>fe,vN:()=>qe});var te=Promise.resolve(!0),ae=Promise.resolve(!1),de=Promise.resolve(null),lt=Promise.resolve();function qe(ee=1e4){return"function"==typeof requestIdleCallback?new Promise(Ue=>{requestIdleCallback(()=>Ue(),{timeout:ee})}):function ie(ee=0){return new Promise(Ue=>setTimeout(Ue,ee))}(0)}var $e=lt;function he(ee=void 0){return $e=$e.then(()=>qe(ee))}function xe(ee,Ue){return ee.reduce((Te,Oe)=>Te.then(Oe),Promise.resolve(Ue))}},6568:(Bt,tt,M)=>{"use strict";function ie(se){for(var te="",ae=0;ae<se.length;ae++){var de=se[ae];if("-"===de)return parseInt(te,10);te+=de}throw new Error("malformatted revision: "+se)}function fe(se,te){return(te?ie(te._rev)+1:1)+"-"+se}M.d(tt,{CM:()=>fe,Wg:()=>ie})},6052:(Bt,tt,M)=>{"use strict";M.d(tt,{o:()=>m});var m="15.28.1"},720:(Bt,tt,M)=>{"use strict";M.d(tt,{L$:()=>te,Z2:()=>se,ky:()=>de,z3:()=>ie});var m="abcdefghijklmnopqrstuvwxyz";function ie(he=10){for(var Ve="",xe=0;xe<he;xe++)Ve+=m.charAt(Math.floor(Math.random()*m.length));return Ve}function se(he){return(he+="").charAt(0).toUpperCase()+he.substr(1)}function te(he){for(;"."===he.charAt(0);)he=he.substr(1);for(;"."===he.slice(-1);)he=he.slice(0,-1);return he}function de(he){return!(!he.includes("/")&&!he.includes("\\"))}},4552:(Bt,tt,M)=>{"use strict";M.d(tt,{t:()=>ie});var m=0;function ie(){var fe=Date.now();(fe+=.01)<=m&&(fe=m+.01);var se=parseFloat(fe.toFixed(2));return m=se,se}},6259:(Bt,tt,M)=>{"use strict";M.d(tt,{Cx:()=>he,XA:()=>te,n9:()=>xe});var m=M(9403),ie=M(4552),fe=M(5520),se=function(){function ee(){this._map=new Map}return ee.prototype.getByQuery=function(Oe){var pe=Oe.toString();return(0,m.q)(this._map,pe,()=>Oe)},ee}();function te(){return new se}function ae(ee,Ue){Ue.uncached=!0;var Te=Ue.toString();ee._map.delete(Te)}function de(ee){return ee.refCount$.observers.length}var he=(100,3e4,(Te,Oe)=>{if(!(Oe._map.size<100)){var pe=(0,ie.t)()-3e4,Be=[],dt=Array.from(Oe._map.values());for(var De of dt)if(!(de(De)>0)){if(0===De._lastEnsureEqual&&De._creationTime<pe){ae(Oe,De);continue}Be.push(De)}var He=Be.length-100;He<=0||Be.sort((ot,ce)=>ot._lastEnsureEqual-ce._lastEnsureEqual).slice(0,He).forEach(ot=>ae(Oe,ot))}}),Ve=new WeakSet;function xe(ee){Ve.has(ee)||(Ve.add(ee),(0,fe.dY)().then(()=>(0,fe.Ve)(200)).then(()=>{ee.destroyed||ee.cacheReplacementPolicy(ee,ee._queryCache),Ve.delete(ee)}))}},997:(Bt,tt,M)=>{"use strict";M.d(tt,{Cf:()=>de,OK:()=>te,g0:()=>se,sk:()=>ae});var m=M(7176),ie=M(7650),fe=M(1885),se="\uffff",te=Number.MIN_SAFE_INTEGER;function ae(xe,ee){var Ue=ee.selector,Te=xe.indexes?xe.indexes.slice(0):[];ee.index&&(Te=[ee.index]);var Oe=!!ee.sort.find(be=>"desc"===Object.values(be)[0]),pe=new Set;Object.keys(Ue).forEach(be=>{var at=(0,fe.nT)(xe,be);at&&"boolean"===at.type&&Object.prototype.hasOwnProperty.call(Ue[be],"$eq")&&pe.add(be)});var He,dt=ee.sort.map(be=>Object.keys(be)[0]).filter(be=>!pe.has(be)).join(","),De=-1;if(Te.forEach(be=>{var at=!0,ot=!0,ce=be.map(xt=>{var yn=Ue[xt],rn=yn?Object.keys(yn):[],pn={};return yn&&rn.length?rn.forEach(Ge=>{if(de.has(Ge)){var ye=function he(xe,ee){switch(xe){case"$eq":return{startKey:ee,endKey:ee,inclusiveEnd:!0,inclusiveStart:!0};case"$lte":return{endKey:ee,inclusiveEnd:!0};case"$gte":return{startKey:ee,inclusiveStart:!0};case"$lt":return{endKey:ee,inclusiveEnd:!1};case"$gt":return{startKey:ee,inclusiveStart:!1};default:throw new Error("SNH")}}(Ge,yn[Ge]);pn=Object.assign(pn,ye)}}):pn={startKey:ot?te:se,endKey:at?se:te,inclusiveStart:!0,inclusiveEnd:!0},typeof pn.startKey>"u"&&(pn.startKey=te),typeof pn.endKey>"u"&&(pn.endKey=se),typeof pn.inclusiveStart>"u"&&(pn.inclusiveStart=!0),typeof pn.inclusiveEnd>"u"&&(pn.inclusiveEnd=!0),ot&&!pn.inclusiveStart&&(ot=!1),at&&!pn.inclusiveEnd&&(at=!1),pn}),ne=ce.map(xt=>xt.startKey),W=ce.map(xt=>xt.endKey),ft={index:be,startKeys:ne,endKeys:W,inclusiveEnd:at,inclusiveStart:ot,sortSatisfiedByIndex:!Oe&&dt===be.filter(xt=>!pe.has(xt)).join(","),selectorSatisfiedByIndex:$e(be,ee.selector,ne,W)},At=function Ve(xe,ee,Ue){var Te=0,Oe=be=>{be>0&&(Te+=be)},Be=(0,m.Sd)(Ue.startKeys,be=>be!==te&&be!==se);Oe(10*Be);var dt=(0,m.Sd)(Ue.startKeys,be=>be!==se&&be!==te);Oe(10*dt);var De=(0,m.Sd)(Ue.startKeys,(be,at)=>be===Ue.endKeys[at]);return Oe(10*De*1.5),Oe(Ue.sortSatisfiedByIndex?5:0),Te}(0,0,ft);(At>=De||ee.index)&&(De=At,He=ft)}),!He)throw(0,ie.Br)("SNH",{query:ee});return He}var de=new Set(["$eq","$gt","$gte","$lt","$lte"]),lt=new Set(["$eq","$gt","$gte"]),qe=new Set(["$eq","$lt","$lte"]);function $e(xe,ee,Ue,Te){if(Object.entries(ee).find(([Ge,me])=>!xe.includes(Ge)||Object.entries(me).find(([K,H])=>!de.has(K)))||ee.$and||ee.$or)return!1;var Be=[],dt=new Set;for(var[De,He]of Object.entries(ee)){if(!xe.includes(De))return!1;var be=Object.keys(He).filter(Ge=>lt.has(Ge));if(be.length>1)return!1;var at=be[0];if(at&&dt.add(De),"$eq"!==at){if(Be.length>0)return!1;Be.push(at)}}var ot=[],ce=new Set;for(var[ne,W]of Object.entries(ee)){if(!xe.includes(ne))return!1;var ft=Object.keys(W).filter(Ge=>qe.has(Ge));if(ft.length>1)return!1;var At=ft[0];if(At&&ce.add(ne),"$eq"!==At){if(ot.length>0)return!1;ot.push(At)}}var xt=0;for(var yn of xe){for(var rn of[dt,ce]){if(!rn.has(yn)&&rn.size>0)return!1;rn.delete(yn)}if(Ue[xt]!==Te[xt]&&dt.size>0&&ce.size>0)return!1;xt++}return!0}},327:(Bt,tt,M)=>{"use strict";M.d(tt,{a:()=>lt,r:()=>qe});var m=M(467),ie=M(6636),fe=M(6434),se=M(2060),te=M(4552),ae=M(6568),de=M(6893),lt=function(he,Ve){var xe=(0,de.on)(he.newDocumentState),ee=(0,de.on)(he.realMasterState);return(0,ie.b)(xe,ee)?Promise.resolve({isEqual:!0}):Promise.resolve({isEqual:!1,documentData:he.realMasterState})};function qe(he,Ve,xe){return $e.apply(this,arguments)}function $e(){return($e=(0,m.A)(function*(he,Ve,xe){var ee=he.input.conflictHandler,Ue=yield ee(Ve,"replication-resolve-conflict");if(!Ue.isEqual){var Te=Object.assign({},Ue.documentData,{_meta:(0,fe.FD)(xe._meta),_rev:(0,se.Fq)(),_attachments:(0,fe.FD)(xe._attachments)});return Te._meta.lwt=(0,te.t)(),Te._rev=(0,ae.CM)(yield he.checkpointKey,xe),{resolvedDoc:Te,output:Ue}}})).apply(this,arguments)}},312:(Bt,tt,M)=>{"use strict";M.d(tt,{_r:()=>fe,vk:()=>ie});var m=M(3896);function ie(te){return te.documentData?te.documentData:te.previousDocumentData}function fe(te){switch(te.operation){case"INSERT":return{operation:te.operation,id:te.documentId,doc:te.documentData,previous:null};case"UPDATE":return{operation:te.operation,id:te.documentId,doc:m.h.deepFreezeWhenDevMode(te.documentData),previous:te.previousDocumentData?te.previousDocumentData:"UNKNOWN"};case"DELETE":return{operation:te.operation,id:te.documentId,doc:null,previous:te.previousDocumentData}}}},1318:(Bt,tt,M)=>{"use strict";M.d(tt,{JY:()=>Ve,X3:()=>Oe,vK:()=>xe,vM:()=>Ue});var m=M(467),ie=M(6434),fe=M(2060),se=M(4552),te=M(6568),ae=M(1885),de=M(2284),lt=M(2104),qe=M(6893),$e=M(3896),he=M(7650);function Ve(pe,Be){return Be=(0,ie.FD)(Be),Be=(0,ae.pA)(pe,Be),"string"!=typeof pe.jsonSchema.primaryKey&&(Be=(0,ae.Nq)(pe.primaryPath,pe.jsonSchema,Be)),Be._meta=(0,fe.o4)(),Object.prototype.hasOwnProperty.call(Be,"_deleted")||(Be._deleted=!1),Object.prototype.hasOwnProperty.call(Be,"_attachments")||(Be._attachments={}),Object.prototype.hasOwnProperty.call(Be,"_rev")||(Be._rev=(0,fe.Fq)()),Be}function xe(pe,Be){return ee.apply(this,arguments)}function ee(){return(ee=(0,m.A)(function*(pe,Be){return Be.multiInstance=pe.multiInstance,yield pe.storage.createStorageInstance(Be)})).apply(this,arguments)}function Ue(pe,Be,dt,De,He,be,at){return Te.apply(this,arguments)}function Te(){return Te=(0,m.A)(function*(pe,Be,dt,De,He,be,at){var ce=(yield(0,lt.WY)(Be)).filter(At=>At.data.name===He),ne=[];ce.forEach(At=>{ne.push({collectionName:At.data.name,schema:At.data.schema,isCollection:!0}),At.data.connectedStorages.forEach(xt=>ne.push({collectionName:xt.collectionName,isCollection:!1,schema:xt.schema}))});var W=new Set;if(ne=ne.filter(At=>{var xt=At.collectionName+"||"+At.schema.version;return!W.has(xt)&&(W.add(xt),!0)}),yield Promise.all(ne.map(function(){var At=(0,m.A)(function*(xt){var yn=yield pe.createStorageInstance({collectionName:xt.collectionName,databaseInstanceToken:dt,databaseName:De,multiInstance:!1,options:{},schema:xt.schema,password:be,devMode:$e.h.isDevMode()});yield yn.remove(),xt.isCollection&&(yield(0,de.FX)("postRemoveRxCollection",{storage:pe,databaseName:De,collectionName:He}))});return function(xt){return At.apply(this,arguments)}}())),at){var ft=ce.map(At=>{var xt=(0,qe.C9)(At);return xt._deleted=!0,xt._meta.lwt=(0,se.t)(),xt._rev=(0,te.CM)(dt,At),{previous:At,document:xt}});yield Be.bulkWrite(ft,"rx-database-remove-collection-all")}}),Te.apply(this,arguments)}function Oe(pe){if(pe.destroyed)throw(0,he.Br)("COL21",{collection:pe.name,version:pe.schema.version})}},4395:(Bt,tt,M)=>{"use strict";M.d(tt,{wm:()=>pn,dN:()=>ye});var m=M(467),ie=M(6126),fe=M(5964),se=M(1397),te=M(6354),ae=M(5520),de=M(203),lt=M(8663),qe=M(6434),$e=M(9403),he=M(720),Ve=M(1318),xe=M(5672),ee=M(7650),Ue=M(9825),Te=M(6259),Oe=M(7176),pe=function(){function H(q){this.subs=[],this.counter=0,this.eventCounterMap=new WeakMap,this.buffer=[],this.limit=100,this.tasks=new Set,this.collection=q,this.subs.push(this.collection.database.eventBulks$.pipe((0,fe.p)(X=>X.collectionName===this.collection.name),(0,fe.p)(X=>!X.events[0].isLocal)).subscribe(X=>{this.tasks.add(()=>this._handleChangeEvents(X.events)),this.tasks.size<=1&&(0,ae.vN)().then(()=>{this.processTasks()})}))}var V=H.prototype;return V.processTasks=function(){0!==this.tasks.size&&(Array.from(this.tasks).forEach(re=>re()),this.tasks.clear())},V._handleChangeEvents=function(X){var re=this.counter;this.counter=this.counter+X.length,X.length>this.limit?this.buffer=X.slice(-1*X.length):((0,Oe.Hb)(this.buffer,X),this.buffer=this.buffer.slice(-1*this.limit));for(var oe=re+1,Je=this.eventCounterMap,Ct=0;Ct<X.length;Ct++)Je.set(X[Ct],oe+Ct)},V.getCounter=function(){return this.processTasks(),this.counter},V.getBuffer=function(){return this.processTasks(),this.buffer},V.getArrayIndexByPointer=function(X){this.processTasks();var oe=this.eventCounterMap.get(this.buffer[0]);return X<oe?null:X-oe},V.getFrom=function(X){this.processTasks();var re=[],oe=this.getArrayIndexByPointer(X);if(null===oe)return null;for(;;){var Je=this.buffer[oe];if(oe++,!Je)return re;re.push(Je)}},V.runFrom=function(X,re){this.processTasks();var oe=this.getFrom(X);if(null===oe)throw new Error("out of bounds");oe.forEach(Je=>re(Je))},V.reduceByLastOfDoc=function(X){return this.processTasks(),X.slice(0)},V.destroy=function(){this.tasks.clear(),this.subs.forEach(X=>X.unsubscribe())},H}(),dt=M(2284),De=M(5908),He=M(3896),be=new WeakMap;var W=M(6893),ft=M(327),At=M(6706),xt=["pre","post"],yn=["insert","save","remove","create"],rn=!1,pn=function(){function H(q,X,re,oe,Je={},Ct={},Ft={},Mt={},jt={},on=Te.Cx,en={},ln=ft.a){this.storageInstance={},this.timeouts=new Set,this.incrementalWriteQueue={},this._incrementalUpsertQueues=new Map,this.synced=!1,this.hooks={},this._subs=[],this._docCache={},this._queryCache=(0,Te.XA)(),this.$={},this.checkpoint$={},this._changeEventBuffer={},this.onDestroy=[],this.destroyed=!1,this.onRemove=[],this.database=q,this.name=X,this.schema=re,this.internalStorageInstance=oe,this.instanceCreationOptions=Je,this.migrationStrategies=Ct,this.methods=Ft,this.attachments=Mt,this.options=jt,this.cacheReplacementPolicy=on,this.statics=en,this.conflictHandler=ln,function $n(H){if(!rn){rn=!0;var V=Object.getPrototypeOf(H);yn.forEach(q=>{xt.map(X=>{var re=X+(0,he.Z2)(q);V[re]=function(oe,Je){return this.addHook(X,q,oe,Je)}})})}}(this.asRxCollection)}var V=H.prototype;return V.prepare=function(){var q=(0,m.A)(function*(){var re=this;this.storageInstance=(0,W.AM)(this.database,this.internalStorageInstance,this.schema.jsonSchema),this.incrementalWriteQueue=new At.N6(this.storageInstance,this.schema.primaryPath,(jt,on)=>(0,De.Lt)(this,jt,on),jt=>this._runHooks("post","save",jt));var Je,oe=this.database.eventBulks$.pipe((0,fe.p)(jt=>jt.collectionName===this.name));this.$=oe.pipe((0,se.Z)(jt=>jt.events)),this.checkpoint$=oe.pipe((0,te.T)(jt=>jt.checkpoint)),this._changeEventBuffer=function Be(H){return new pe(H)}(this.asRxCollection),this._docCache=new Ue.K(this.schema.primaryPath,this.database.eventBulks$.pipe((0,fe.p)(jt=>jt.collectionName===this.name&&!jt.events[0].isLocal),(0,te.T)(jt=>jt.events)),jt=>(Je||(Je=function ot(H){return(0,$e.q)(be,H,()=>(0,De.cM)(function at(H){var V=H.schema.getDocumentPrototype(),q=function ne(H){var V={};return Object.entries(H.methods).forEach(([q,X])=>{V[q]=X}),V}(H),re={};return[V,q,De.ky].forEach(oe=>{Object.getOwnPropertyNames(oe).forEach(Ct=>{var Ft=Object.getOwnPropertyDescriptor(oe,Ct),Mt=!0;(Ct.startsWith("_")||Ct.endsWith("_")||Ct.startsWith("$")||Ct.endsWith("$"))&&(Mt=!1),"function"==typeof Ft.value?Object.defineProperty(re,Ct,{get(){return Ft.value.bind(this)},enumerable:Mt,configurable:!1}):(Ft.enumerable=Mt,Ft.configurable=!1,Ft.writable&&(Ft.writable=!1),Object.defineProperty(re,Ct,Ft))})}),re}(H)))}(this.asRxCollection)),function ce(H,V,q){var X=(0,De.Zb)(V,H,He.h.deepFreezeWhenDevMode(q));return H._runHooksSync("post","create",q,X),(0,dt.Xi)("postCreateRxDocument",X),X}(this.asRxCollection,Je,jt)));var Ct=this.database.internalStore.changeStream().pipe((0,fe.p)(jt=>{var on=this.name+"-"+this.schema.version;return!!jt.events.find(ln=>"collection"===ln.documentData.context&&ln.documentData.key===on&&"DELETE"===ln.operation)})).subscribe((0,m.A)(function*(){yield re.destroy(),yield Promise.all(re.onRemove.map(jt=>jt()))}));this._subs.push(Ct);var Ft=yield this.database.storageToken,Mt=this.storageInstance.changeStream().subscribe(jt=>{for(var on=new Array(jt.events.length),en=jt.events,ln=this.name,$t=He.h.deepFreezeWhenDevMode,hn=0;hn<en.length;hn++){var tn=en[hn];on[hn]={documentId:tn.documentId,collectionName:ln,isLocal:!1,operation:tn.operation,documentData:$t(tn.documentData),previousDocumentData:$t(tn.previousDocumentData)}}this.database.$emit({id:jt.id,internal:!1,collectionName:this.name,storageToken:Ft,events:on,databaseToken:this.database.token,checkpoint:jt.checkpoint,context:jt.context,endTime:jt.endTime,startTime:jt.startTime})});return this._subs.push(Mt),this._subs.push(this.storageInstance.conflictResultionTasks().subscribe(jt=>{this.conflictHandler(jt.input,jt.context).then(on=>{this.storageInstance.resolveConflictResultionTask({id:jt.id,output:on})})})),ae.em});return function X(){return q.apply(this,arguments)}}(),V.cleanup=function(X){throw(0,Ve.X3)(this),(0,de.u)("cleanup")},V.migrationNeeded=function(){throw(0,de.u)("migration-schema")},V.getMigrationState=function(){throw(0,de.u)("migration-schema")},V.startMigration=function(X=10){return(0,Ve.X3)(this),this.getMigrationState().startMigration(X)},V.migratePromise=function(X=10){return this.getMigrationState().migratePromise(X)},V.insert=function(){var q=(0,m.A)(function*(re){(0,Ve.X3)(this);var oe=yield this.bulkInsert([re]);return(0,W.WX)(this,re[this.schema.primaryPath],re,oe.error[0]),(0,lt.ZN)(oe.success[0])});return function X(re){return q.apply(this,arguments)}}(),V.bulkInsert=function(){var q=(0,m.A)(function*(re){if((0,Ve.X3)(this),0===re.length)return{success:[],error:[]};var Je,oe=this.schema.primaryPath;if(this.hasHooks("pre","insert"))Je=yield Promise.all(re.map(tn=>{var qn=(0,Ve.JY)(this.schema,tn);return this._runHooks("pre","insert",qn).then(()=>({document:qn}))}));else{Je=new Array(re.length);for(var Ct=this.schema,Ft=0;Ft<re.length;Ft++){var jt=(0,Ve.JY)(Ct,re[Ft]);Je[Ft]={document:jt}}}var en,on=yield this.storageInstance.bulkWrite(Je,"rx-collection-bulk-insert"),ln=this,$t={get success(){if(!en){var tn=(0,W.YN)(ln.schema.primaryPath,Je,on);en=(0,Ue.X)(ln._docCache,tn)}return en},error:on.error};if(this.hasHooks("post","insert")){var hn=new Map;Je.forEach(tn=>{var qn=tn.document;hn.set(qn[oe],qn)}),yield Promise.all($t.success.map(tn=>this._runHooks("post","insert",hn.get(tn.primary),tn)))}return $t});return function X(re){return q.apply(this,arguments)}}(),V.bulkRemove=function(){var q=(0,m.A)(function*(re){(0,Ve.X3)(this);var oe=this.schema.primaryPath;if(0===re.length)return{success:[],error:[]};var Je=yield this.findByIds(re).exec(),Ct=[],Ft=new Map;Array.from(Je.values()).forEach($t=>{var hn=$t.toMutableJSON(!0);Ct.push(hn),Ft.set($t.primary,hn)}),yield Promise.all(Ct.map($t=>this._runHooks("pre","remove",$t,Je.get($t[this.schema.primaryPath]))));var Mt=Ct.map($t=>{var hn=(0,qe.FD)($t);return hn._deleted=!0,{previous:$t,document:hn}}),jt=yield this.storageInstance.bulkWrite(Mt,"rx-collection-bulk-remove"),en=(0,W.YN)(this.schema.primaryPath,Mt,jt).map($t=>$t[oe]);return yield Promise.all(en.map($t=>this._runHooks("post","remove",Ft.get($t),Je.get($t)))),{success:en.map($t=>(0,$e.m)(Je,$t)),error:jt.error}});return function X(re){return q.apply(this,arguments)}}(),V.bulkUpsert=function(){var q=(0,m.A)(function*(re){var oe=this;(0,Ve.X3)(this);var Je=[],Ct=new Map;re.forEach(on=>{var en=(0,Ve.JY)(this.schema,on),ln=en[this.schema.primaryPath];if(!ln)throw(0,ee.Br)("COL3",{primaryPath:this.schema.primaryPath,data:en,schema:this.schema.jsonSchema});Ct.set(ln,en),Je.push(en)});var Ft=yield this.bulkInsert(Je),Mt=Ft.success.slice(0),jt=[];return yield Promise.all(Ft.error.map(function(){var on=(0,m.A)(function*(en){if(409!==en.status)jt.push(en);else{var $t=(0,$e.m)(Ct,en.documentId),hn=(0,lt.ZN)(en.documentInDb),tn=oe._docCache.getCachedRxDocuments([hn])[0],qn=yield tn.incrementalModify(()=>$t);Mt.push(qn)}});return function(en){return on.apply(this,arguments)}}())),{error:jt,success:Mt}});return function X(re){return q.apply(this,arguments)}}(),V.upsert=function(){var q=(0,m.A)(function*(re){(0,Ve.X3)(this);var oe=yield this.bulkUpsert([re]);return(0,W.WX)(this.asRxCollection,re[this.schema.primaryPath],re,oe.error[0]),oe.success[0]});return function X(re){return q.apply(this,arguments)}}(),V.incrementalUpsert=function(X){(0,Ve.X3)(this);var re=(0,Ve.JY)(this.schema,X),oe=re[this.schema.primaryPath];if(!oe)throw(0,ee.Br)("COL4",{data:X});var Je=this._incrementalUpsertQueues.get(oe);return Je||(Je=ae.em),Je=Je.then(()=>function me(H,V,q){var X=H._docCache.getLatestDocumentDataIfExists(V);return X?Promise.resolve({doc:H._docCache.getCachedRxDocuments([X])[0],inserted:!1}):H.findOne(V).exec().then(re=>re?{doc:re,inserted:!1}:H.insert(q).then(oe=>({doc:oe,inserted:!0})))}(this,oe,re)).then(Ct=>Ct.inserted?Ct.doc:function Ge(H,V){return H.incrementalModify(q=>V)}(Ct.doc,re)),this._incrementalUpsertQueues.set(oe,Je),Je},V.find=function(X){if((0,Ve.X3)(this),"string"==typeof X)throw(0,ee.Br)("COL5",{queryObj:X});return X||(X=(0,xe.XX)()),(0,xe.nd)("find",X,this)},V.findOne=function(X){if((0,Ve.X3)(this),"number"==typeof X||Array.isArray(X))throw(0,ee.JX)("COL6",{queryObj:X});var re;if("string"==typeof X)re=(0,xe.nd)("findOne",{selector:{[this.schema.primaryPath]:X},limit:1},this);else{if(X||(X=(0,xe.XX)()),X.limit)throw(0,ee.Br)("QU6");(X=(0,qe.FD)(X)).limit=1,re=(0,xe.nd)("findOne",X,this)}return re},V.count=function(X){return(0,Ve.X3)(this),X||(X=(0,xe.XX)()),(0,xe.nd)("count",X,this)},V.findByIds=function(X){(0,Ve.X3)(this);var re={selector:{[this.schema.primaryPath]:{$in:X.slice(0)}}};return(0,xe.nd)("findByIds",re,this)},V.exportJSON=function(){throw(0,de.u)("json-dump")},V.importJSON=function(X){throw(0,de.u)("json-dump")},V.insertCRDT=function(X){throw(0,de.u)("crdt")},V.addHook=function(X,re,oe,Je=!1){if("function"!=typeof oe)throw(0,ee.JX)("COL7",{key:re,when:X});if(!xt.includes(X))throw(0,ee.JX)("COL8",{key:re,when:X});if(!yn.includes(re))throw(0,ee.Br)("COL9",{key:re});if("post"===X&&"create"===re&&!0===Je)throw(0,ee.Br)("COL10",{when:X,key:re,parallel:Je});var Ct=oe.bind(this),Ft=Je?"parallel":"series";this.hooks[re]=this.hooks[re]||{},this.hooks[re][X]=this.hooks[re][X]||{series:[],parallel:[]},this.hooks[re][X][Ft].push(Ct)},V.getHooks=function(X,re){return this.hooks[re]&&this.hooks[re][X]?this.hooks[re][X]:{series:[],parallel:[]}},V.hasHooks=function(X,re){if(!this.hooks[re]||!this.hooks[re][X])return!1;var oe=this.getHooks(X,re);return!!oe&&(oe.series.length>0||oe.parallel.length>0)},V._runHooks=function(X,re,oe,Je){var Ct=this.getHooks(X,re);if(!Ct)return ae.em;var Ft=Ct.series.map(Mt=>()=>Mt(oe,Je));return(0,ae.h$)(Ft).then(()=>Promise.all(Ct.parallel.map(Mt=>Mt(oe,Je))))},V._runHooksSync=function(X,re,oe,Je){if(this.hasHooks(X,re)){var Ct=this.getHooks(X,re);Ct&&Ct.series.forEach(Ft=>Ft(oe,Je))}},V.promiseWait=function(X){return new Promise(oe=>{var Je=setTimeout(()=>{this.timeouts.delete(Je),oe()},X);this.timeouts.add(Je)})},V.destroy=function(){var q=(0,m.A)(function*(){return this.destroyed?ae.Dr:(yield Promise.all(this.onDestroy.map(re=>re())),this.destroyed=!0,Array.from(this.timeouts).forEach(re=>clearTimeout(re)),this._changeEventBuffer&&this._changeEventBuffer.destroy(),this.database.requestIdlePromise().then(()=>this.storageInstance.close()).then(()=>(this._subs.forEach(re=>re.unsubscribe()),delete this.database.collections[this.name],(0,dt.FX)("postDestroyRxCollection",this).then(()=>!0))))});return function X(){return q.apply(this,arguments)}}(),V.remove=function(){var q=(0,m.A)(function*(){yield this.destroy(),yield Promise.all(this.onRemove.map(re=>re())),yield(0,Ve.vM)(this.database.storage,this.database.internalStore,this.database.token,this.database.name,this.name,this.database.password,this.database.hashFunction)});return function X(){return q.apply(this,arguments)}}(),(0,ie.A)(H,[{key:"insert$",get:function(){return this.$.pipe((0,fe.p)(q=>"INSERT"===q.operation))}},{key:"update$",get:function(){return this.$.pipe((0,fe.p)(q=>"UPDATE"===q.operation))}},{key:"remove$",get:function(){return this.$.pipe((0,fe.p)(q=>"DELETE"===q.operation))}},{key:"asRxCollection",get:function(){return this}}])}();function ye({database:H,name:V,schema:q,instanceCreationOptions:X={},migrationStrategies:re={},autoMigrate:oe=!0,statics:Je={},methods:Ct={},attachments:Ft={},options:Mt={},localDocuments:jt=!1,cacheReplacementPolicy:on=Te.Cx,conflictHandler:en=ft.a}){var ln={databaseInstanceToken:H.token,databaseName:H.name,collectionName:V,schema:q.jsonSchema,options:X,multiInstance:H.multiInstance,password:H.password,devMode:He.h.isDevMode()};return(0,dt.Xi)("preCreateRxStorageInstance",ln),(0,Ve.vK)(H,ln).then($t=>{var hn=new pn(H,V,q,$t,X,re,Ct,Ft,Mt,on,Je,en);return hn.prepare().then(()=>{Object.entries(Je).forEach(([qn,In])=>{Object.defineProperty(hn,qn,{get:()=>In.bind(hn)})});var tn=ae.em;return oe&&0!==hn.schema.version&&(tn=hn.migratePromise()),tn}).then(()=>((0,dt.Xi)("createRxCollection",{collection:hn,creator:{name:V,schema:q,storageInstance:$t,instanceCreationOptions:X,migrationStrategies:re,methods:Ct,attachments:Ft,options:Mt,cacheReplacementPolicy:on,localDocuments:jt,statics:Je}}),hn)).catch(tn=>$t.close().then(()=>Promise.reject(tn)))})}},2104:(Bt,tt,M)=>{"use strict";M.d(tt,{CC:()=>ee,Nu:()=>$e,WY:()=>Te,bD:()=>ot,bV:()=>ne,lz:()=>Ue,ol:()=>dt,vV:()=>be});var m=M(467),ie=M(7650),fe=M(1885),se=M(6893),te=M(720),ae=M(2060),de=M(8663),lt=M(6434),qe=M(5672),$e="collection",he="storage-token",ee=(0,fe.Ud)({version:0,title:"RxInternalDocument",primaryKey:{key:"id",fields:["context","key"],separator:"|"},type:"object",properties:{id:{type:"string",maxLength:200},key:{type:"string"},context:{type:"string",enum:[$e,he,"rx-migration-status","OTHER"]},data:{type:"object",additionalProperties:!0}},indexes:[],required:["key","context","data"],additionalProperties:!1,sharding:{shards:1,mode:"collection"}});function Ue(W,ft){return(0,fe.U)(ee,{key:W,context:ft})}function Te(W){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,m.A)(function*(W){var ft=(0,qe.Ib)(W.schema,{selector:{context:$e,_deleted:{$eq:!1}},sort:[{id:"asc"}],skip:0});return(yield W.query(ft)).documents})).apply(this,arguments)}var pe="storageToken",Be=Ue(pe,he);function dt(W){return De.apply(this,arguments)}function De(){return(De=(0,m.A)(function*(W){var ft=(0,te.z3)(10),At=W.password?yield W.hashFunction(JSON.stringify(W.password)):void 0,yn=[{document:{id:Be,context:he,key:pe,data:{rxdbVersion:W.rxdbVersion,token:ft,instanceToken:W.token,passwordHash:At},_deleted:!1,_meta:(0,ae.o4)(),_rev:(0,ae.Fq)(),_attachments:{}}}],rn=yield W.internalStore.bulkWrite(yn,"internal-add-storage-token");if(!rn.error[0])return(0,se.YN)("id",yn,rn)[0];var pn=(0,de.ZN)(rn.error[0]);if(pn.isError&&(0,ie.sX)(pn)){var $n=pn;if(!function He(W,ft){return!(!W||ft.includes("beta")&&ft!==W)&&W.split(".")[0]===ft.split(".")[0]}($n.documentInDb.data.rxdbVersion,W.rxdbVersion))throw(0,ie.Br)("DM5",{args:{database:W.name,databaseStateVersion:$n.documentInDb.data.rxdbVersion,codeVersion:W.rxdbVersion}});if(At&&At!==$n.documentInDb.data.passwordHash)throw(0,ie.Br)("DB1",{passwordHash:At,existingPasswordHash:$n.documentInDb.data.passwordHash});return(0,de.ZN)($n.documentInDb)}throw pn})).apply(this,arguments)}function be(W,ft,At){return at.apply(this,arguments)}function at(){return(at=(0,m.A)(function*(W,ft,At){if(W.schema.version!==At.version)throw(0,ie.Br)("SNH",{schema:At,version:W.schema.version,name:W.name,collection:W,args:{storageCollectionName:ft}});for(var yn=Ue(ne(W.name,W.schema.jsonSchema),$e);;){var rn=yield(0,se.O5)(W.database.internalStore,yn),pn=(0,lt.o8)((0,de.ZN)(rn));if(pn.data.connectedStorages.find(Ge=>Ge.collectionName===ft&&Ge.schema.version===At.version))return;pn.data.connectedStorages.push({collectionName:ft,schema:At});try{yield(0,se.mQ)(W.database.internalStore,{previous:(0,de.ZN)(rn),document:pn},"add-connected-storage-to-collection")}catch(Ge){if(!(0,ie.sX)(Ge))throw Ge}}})).apply(this,arguments)}function ot(W,ft,At){return ce.apply(this,arguments)}function ce(){return(ce=(0,m.A)(function*(W,ft,At){if(W.schema.version!==At.version)throw(0,ie.Br)("SNH",{schema:At,version:W.schema.version,name:W.name,collection:W,args:{storageCollectionName:ft}});for(var yn=Ue(ne(W.name,W.schema.jsonSchema),$e);;){var rn=yield(0,se.O5)(W.database.internalStore,yn),pn=(0,lt.o8)((0,de.ZN)(rn));if(!pn.data.connectedStorages.find(Ge=>Ge.collectionName===ft&&Ge.schema.version===At.version))return;pn.data.connectedStorages=pn.data.connectedStorages.filter(Ge=>Ge.collectionName!==ft);try{yield(0,se.mQ)(W.database.internalStore,{previous:(0,de.ZN)(rn),document:pn},"remove-connected-storage-from-collection")}catch(Ge){if(!(0,ie.sX)(Ge))throw Ge}}})).apply(this,arguments)}function ne(W,ft){return W+"-"+ft.version}},7396:(Bt,tt,M)=>{"use strict";M.d(tt,{lB:()=>W,uh:()=>yn,NI:()=>me});var m=M(467),ie=M(6126),fe=function(){this._parallels=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1)||1,this._qC=0,this._iC=new Set,this._lHN=0,this._hPM=new Map,this._pHM=new Map};function te(V,q){if(q){if(q._timeoutObj&&clearTimeout(q._timeoutObj),V._pHM.has(q)){var X=V._pHM.get(q);V._hPM.delete(X),V._pHM.delete(q)}V._iC.delete(q)}}function ae(V){V._tryIR||0===V._iC.size||(V._tryIR=!0,setTimeout(function(){V.isIdle()?setTimeout(function(){V.isIdle()?(function se(V){0!==V._iC.size&&(V._iC.values().next().value._manRes(),setTimeout(function(){return ae(V)},0))}(V),V._tryIR=!1):V._tryIR=!1},0):V._tryIR=!1},0))}fe.prototype={isIdle:function(){return this._qC<this._parallels},lock:function(){this._qC++},unlock:function(){this._qC--,ae(this)},wrapCall:function(q){var re,X=this;this.lock();try{re=q()}catch(oe){throw this.unlock(),oe}return re.then&&"function"==typeof re.then?re.then(function(oe){return X.unlock(),oe}).catch(function(oe){throw X.unlock(),oe}):(this.unlock(),re)},requestIdlePromise:function(q){var X=this;q=q||{};var re,oe=new Promise(function(Ft){return re=Ft});if(oe._manRes=function(){te(X,oe),re()},q.timeout){var Ct=setTimeout(function(){oe._manRes()},q.timeout);oe._timeoutObj=Ct}return this._iC.add(oe),ae(this),oe},cancelIdlePromise:function(q){te(this,q)},requestIdleCallback:function(q,X){var re=this._lHN++,oe=this.requestIdlePromise(X);return this._hPM.set(re,oe),this._pHM.set(oe,re),oe.then(function(){return q()}),re},cancelIdleCallback:function(q){var X=this._hPM.get(q);this.cancelIdlePromise(X)},clear:function(){var q=this;this._iC.forEach(function(X){return te(q,X)}),this._qC=0,this._iC.clear(),this._hPM=new Map,this._pHM=new Map}};var de=M(6052),lt=M(5520),qe=M(2060),$e=M(6434),he=M(8663),Ve=M(203),xe=M(6243),ee=M(720),Ue=M(7650),Te=M(9182),Oe=M(2284),pe=M(1413),Be=M(1397),dt=M(4395),De=M(6893),He=M(9556),be=M(2104),at=M(1318),ot=M(3896),ce=new Set,W=function(){function V(X,re,oe,Je,Ct,Ft,Mt=!1,jt={},on,en,ln,$t,hn){this.idleQueue=new fe,this.rxdbVersion=de.o,this.storageInstances=new Set,this._subs=[],this.startupErrors=[],this.onDestroy=[],this.destroyed=!1,this.collections={},this.states={},this.eventBulks$=new pe.B,this.observable$=this.eventBulks$.pipe((0,Be.Z)(tn=>tn.events)),this.storageToken=lt.Dr,this.storageTokenDocument=lt.Dr,this.emittedEventBulkIds=new He.p4(6e4),this.name=X,this.token=re,this.storage=oe,this.instanceCreationOptions=Je,this.password=Ct,this.multiInstance=Ft,this.eventReduce=Mt,this.options=jt,this.internalStore=on,this.hashFunction=en,this.cleanupPolicy=ln,this.allowSlowCount=$t,this.reactivity=hn,"pseudoInstance"!==this.name&&(this.internalStore=(0,De.AM)(this.asRxDatabase,on,be.CC),this.storageTokenDocument=(0,be.ol)(this.asRxDatabase).catch(tn=>this.startupErrors.push(tn)),this.storageToken=this.storageTokenDocument.then(tn=>tn.data.token).catch(tn=>this.startupErrors.push(tn)))}var q=V.prototype;return q.getReactivityFactory=function(){if(!this.reactivity)throw(0,Ue.Br)("DB14",{database:this.name});return this.reactivity},q.$emit=function(re){this.emittedEventBulkIds.has(re.id)||(this.emittedEventBulkIds.add(re.id),this.eventBulks$.next(re))},q.removeCollectionDoc=function(){var X=(0,m.A)(function*(oe,Je){var Ct=yield(0,De.O5)(this.internalStore,(0,be.lz)((0,be.bV)(oe,Je),be.Nu));if(!Ct)throw(0,Ue.Br)("SNH",{name:oe,schema:Je});var Ft=(0,De.C9)(Ct);Ft._deleted=!0,yield this.internalStore.bulkWrite([{document:Ft,previous:Ct}],"rx-database-remove-collection")});return function re(oe,Je){return X.apply(this,arguments)}}(),q.addCollections=function(){var X=(0,m.A)(function*(oe){var Je=this,Ct={},Ft={},Mt=[],jt={};yield Promise.all(Object.entries(oe).map(function(){var ln=(0,m.A)(function*([$t,hn]){var tn=$t,qn=hn.schema;Ct[tn]=qn;var In=(0,Te.Wq)(qn,Je.hashFunction);if(Ft[tn]=In,Je.collections[$t])throw(0,Ue.Br)("DB3",{name:$t});var Ui=(0,be.bV)($t,qn),jr={id:(0,be.lz)(Ui,be.Nu),key:Ui,context:be.Nu,data:{name:tn,schemaHash:yield In.hash,schema:In.jsonSchema,version:In.version,connectedStorages:[]},_deleted:!1,_meta:(0,qe.o4)(),_rev:(0,qe.Fq)(),_attachments:{}};Mt.push({document:jr});var _n=Object.assign({},hn,{name:tn,schema:In,database:Je}),St=(0,$e.FD)(hn);St.database=Je,St.name=$t,(0,Oe.Xi)("preCreateRxCollection",St),_n.conflictHandler=St.conflictHandler,jt[tn]=_n});return function($t){return ln.apply(this,arguments)}}()));var on=yield this.internalStore.bulkWrite(Mt,"rx-database-add-collection");yield function K(V){return H.apply(this,arguments)}(this),yield Promise.all(on.error.map(function(){var ln=(0,m.A)(function*($t){if(409!==$t.status)throw(0,Ue.Br)("DB12",{database:Je.name,writeError:$t});var hn=(0,he.ZN)($t.documentInDb),tn=hn.data.name,qn=Ft[tn];if(hn.data.schemaHash!==(yield qn.hash))throw(0,Ue.Br)("DB6",{database:Je.name,collection:tn,previousSchemaHash:hn.data.schemaHash,schemaHash:yield qn.hash,previousSchema:hn.data.schema,schema:(0,he.ZN)(Ct[tn])})});return function($t){return ln.apply(this,arguments)}}()));var en={};return yield Promise.all(Object.keys(oe).map(function(){var ln=(0,m.A)(function*($t){var hn=jt[$t],tn=yield(0,dt.dN)(hn);en[$t]=tn,Je.collections[$t]=tn,Je[$t]||Object.defineProperty(Je,$t,{get:()=>Je.collections[$t]})});return function($t){return ln.apply(this,arguments)}}())),en});return function re(oe){return X.apply(this,arguments)}}(),q.lockedRun=function(re){return this.idleQueue.wrapCall(re)},q.requestIdlePromise=function(){return this.idleQueue.requestIdlePromise()},q.exportJSON=function(re){throw(0,Ve.u)("json-dump")},q.addState=function(re){throw(0,Ve.u)("state")},q.importJSON=function(re){throw(0,Ve.u)("json-dump")},q.backup=function(re){throw(0,Ve.u)("backup")},q.leaderElector=function(){throw(0,Ve.u)("leader-election")},q.isLeader=function(){throw(0,Ve.u)("leader-election")},q.waitForLeadership=function(){throw(0,Ve.u)("leader-election")},q.migrationStates=function(){throw(0,Ve.u)("migration-schema")},q.destroy=function(){var X=(0,m.A)(function*(){return this.destroyed||(this.destroyed=!0,yield(0,Oe.FX)("preDestroyRxDatabase",this),this.eventBulks$.complete(),this._subs.map(oe=>oe.unsubscribe()),"pseudoInstance"===this.name)?lt.Dr:this.requestIdlePromise().then(()=>Promise.all(this.onDestroy.map(oe=>oe()))).then(()=>Promise.all(Object.keys(this.collections).map(oe=>this.collections[oe]).map(oe=>oe.destroy()))).then(()=>this.internalStore.close()).then(()=>ce.delete(this.storage.name+"|"+this.name)).then(()=>!0)});return function re(){return X.apply(this,arguments)}}(),q.remove=function(){return this.destroy().then(()=>function rn(V,q,X){return pn.apply(this,arguments)}(this.name,this.storage,this.password))},(0,ie.A)(V,[{key:"$",get:function(){return this.observable$}},{key:"asRxDatabase",get:function(){return this}}])}();function At(V,q,X,re,oe,Je){return xt.apply(this,arguments)}function xt(){return(xt=(0,m.A)(function*(V,q,X,re,oe,Je){return yield q.createStorageInstance({databaseInstanceToken:V,databaseName:X,collectionName:De.OG,schema:be.CC,options:re,multiInstance:oe,password:Je,devMode:ot.h.isDevMode()})})).apply(this,arguments)}function yn({storage:V,instanceCreationOptions:q,name:X,password:re,multiInstance:oe=!0,eventReduce:Je=!0,ignoreDuplicate:Ct=!1,options:Ft={},cleanupPolicy:Mt,allowSlowCount:jt=!1,localDocuments:on=!1,hashFunction:en=xe.V0,reactivity:ln}){(0,Oe.Xi)("preCreateRxDatabase",{storage:V,instanceCreationOptions:q,name:X,password:re,multiInstance:oe,eventReduce:Je,ignoreDuplicate:Ct,options:Ft,localDocuments:on}),Ct||function ft(V,q){if(ce.has(q.name+"|"+V))throw(0,Ue.Br)("DB8",{name:V,storage:q.name,link:"https://rxdb.info/rx-database.html#ignoreduplicate"})}(X,V),ce.add(V.name+"|"+X);var $t=(0,ee.z3)(10);return At($t,V,X,q,oe,re).catch(hn=>{throw ce.delete(V.name+"|"+X),hn}).then(hn=>{var tn=new W(X,$t,V,q,re,oe,Je,Ft,hn,en,Mt,jt,ln);return(0,Oe.FX)("createRxDatabase",{database:tn,creator:{storage:V,instanceCreationOptions:q,name:X,password:re,multiInstance:oe,eventReduce:Je,ignoreDuplicate:Ct,options:Ft,localDocuments:on}}).then(()=>tn)})}function pn(){return(pn=(0,m.A)(function*(V,q,X){var re=(0,ee.z3)(10),oe=yield At(re,q,V,{},!1,X),Je=yield(0,be.WY)(oe),Ct=new Set;Je.forEach(Mt=>Ct.add(Mt.data.name));var Ft=Array.from(Ct);return yield Promise.all(Ft.map(Mt=>(0,at.vM)(q,oe,re,V,Mt,X))),yield(0,Oe.FX)("postRemoveRxDatabase",{databaseName:V,storage:q}),yield oe.remove(),Ft})).apply(this,arguments)}function me(V){return ye.apply(this,arguments)}function ye(){return(ye=(0,m.A)(function*(V){return(yield V.storageTokenDocument).data.instanceToken===V.token})).apply(this,arguments)}function H(){return(H=(0,m.A)(function*(V){if(yield V.storageToken,V.startupErrors[0])throw V.startupErrors[0]})).apply(this,arguments)}},5908:(Bt,tt,M)=>{"use strict";M.d(tt,{Lt:()=>ot,Zb:()=>be,cM:()=>He,ky:()=>De});var m=M(467),ie=M(6354),fe=M(5964),se=M(9172),te=M(3294),ae=M(6496),de=M(8663),lt=M(1744),qe=M(5520),$e=M(9403),he=M(6434),Ve=M(720),xe=M(203),ee=M(7650),Ue=M(2284),Te=M(312),Oe=M(3896),pe=M(1885),Be=M(6893),dt=M(6706),De={get primaryPath(){if(this.isInstanceOfRxDocument)return this.collection.schema.primaryPath},get primary(){if(this.isInstanceOfRxDocument)return this._data[this.primaryPath]},get revision(){if(this.isInstanceOfRxDocument)return this._data._rev},get deleted$(){if(this.isInstanceOfRxDocument)return this.$.pipe((0,ie.T)(ne=>ne._data._deleted))},get deleted$$(){return this.collection.database.getReactivityFactory().fromObservable(this.deleted$,this.getLatest().deleted,this.collection.database)},get deleted(){if(this.isInstanceOfRxDocument)return this._data._deleted},getLatest(){var ce=this.collection._docCache.getLatestDocumentData(this.primary);return this.collection._docCache.getCachedRxDocument(ce)},get $(){return this.collection.$.pipe((0,fe.p)(ne=>!ne.isLocal),(0,fe.p)(ne=>ne.documentId===this.primary),(0,ie.T)(ne=>(0,Te.vk)(ne)),(0,se.Z)(this.collection._docCache.getLatestDocumentData(this.primary)),(0,te.F)((ne,W)=>ne._rev===W._rev),(0,ie.T)(ne=>this.collection._docCache.getCachedRxDocument(ne)),(0,ae.t)(de.bz))},get $$(){return this.collection.database.getReactivityFactory().fromObservable(this.$,this.getLatest()._data,this.collection.database)},get$(ce){if(Oe.h.isDevMode()){if(ce.includes(".item."))throw(0,ee.Br)("DOC1",{path:ce});if(ce===this.primaryPath)throw(0,ee.Br)("DOC2");if(this.collection.schema.finalFields.includes(ce))throw(0,ee.Br)("DOC3",{path:ce});if(!(0,pe.nT)(this.collection.schema.jsonSchema,ce))throw(0,ee.Br)("DOC4",{path:ce})}return this.$.pipe((0,ie.T)(W=>(0,lt.UU)(W,ce)),(0,te.F)())},get$$(ce){var ne=this.get$(ce);return this.collection.database.getReactivityFactory().fromObservable(ne,this.getLatest().get(ce),this.collection.database)},populate(ce){var ne=(0,pe.nT)(this.collection.schema.jsonSchema,ce),W=this.get(ce);if(!W)return qe.$A;if(!ne)throw(0,ee.Br)("DOC5",{path:ce});if(!ne.ref)throw(0,ee.Br)("DOC6",{path:ce,schemaObj:ne});var ft=this.collection.database.collections[ne.ref];if(!ft)throw(0,ee.Br)("DOC7",{ref:ne.ref,path:ce,schemaObj:ne});return"array"===ne.type?ft.findByIds(W).exec().then(At=>{var xt=At.values();return Array.from(xt)}):ft.findOne(W).exec()},get(ce){return(0,$e.q)(this._propertyCache,ce,()=>{var ne=(0,lt.UU)(this._data,ce);if("object"!=typeof ne||null===ne||Array.isArray(ne))return Oe.h.deepFreezeWhenDevMode(ne);var W=this;return new Proxy((0,he.FD)(ne),{get(At,xt){if("string"!=typeof xt)return At[xt];var yn=xt.charAt(xt.length-1);if(xt.endsWith("$$")){var rn=xt.slice(0,-2);return W.get$$((0,Ve.L$)(ce+"."+rn))}if("$"===yn){var pn=xt.slice(0,-1);return W.get$((0,Ve.L$)(ce+"."+pn))}if("_"===yn){var $n=xt.slice(0,-1);return W.populate((0,Ve.L$)(ce+"."+$n))}return W.get((0,Ve.L$)(ce+"."+xt))}})})},toJSON(ce=!1){if(ce)return Oe.h.deepFreezeWhenDevMode(this._data);var ne=(0,he.FD)(this._data);return delete ne._rev,delete ne._attachments,delete ne._deleted,delete ne._meta,Oe.h.deepFreezeWhenDevMode(ne)},toMutableJSON(ce=!1){return(0,he.o8)(this.toJSON(ce))},update(ce){throw(0,xe.u)("update")},incrementalUpdate(ce){throw(0,xe.u)("update")},updateCRDT(ce){throw(0,xe.u)("crdt")},putAttachment(){throw(0,xe.u)("attachments")},getAttachment(){throw(0,xe.u)("attachments")},allAttachments(){throw(0,xe.u)("attachments")},get allAttachments$(){throw(0,xe.u)("attachments")},modify(ce,ne){var W=this;return(0,m.A)(function*(){var ft=W._data,At=yield(0,dt.Hl)(ce)(ft);return W._saveData(At,ft)})()},incrementalModify(ce,ne){return this.collection.incrementalWriteQueue.addWrite(this._data,(0,dt.Hl)(ce)).then(W=>this.collection._docCache.getCachedRxDocument(W))},patch(ce){var ne=this._data,W=(0,he.o8)(ne);return Object.entries(ce).forEach(([ft,At])=>{W[ft]=At}),this._saveData(W,ne)},incrementalPatch(ce){return this.incrementalModify(ne=>(Object.entries(ce).forEach(([W,ft])=>{ne[W]=ft}),ne))},_saveData(ce,ne){var W=this;return(0,m.A)(function*(){if(ce=(0,he.FD)(ce),W._data._deleted)throw(0,ee.Br)("DOC11",{id:W.primary,document:W});yield ot(W.collection,ce,ne);var ft=[{previous:ne,document:ce}],At=yield W.collection.storageInstance.bulkWrite(ft,"rx-document-save-data");return(0,Be.WX)(W.collection,W.primary,ce,At.error[0]),yield W.collection._runHooks("post","save",ce,W),W.collection._docCache.getCachedRxDocument((0,Be.YN)(W.collection.schema.primaryPath,ft,At)[0])})()},remove(){var ce=this,ne=this.collection;if(this.deleted)return Promise.reject((0,ee.Br)("DOC13",{document:this,id:this.primary}));var ft,W=(0,he.FD)(this._data);return ne._runHooks("pre","remove",W,this).then((0,m.A)(function*(){W._deleted=!0;var At=[{previous:ce._data,document:W}],xt=yield ne.storageInstance.bulkWrite(At,"rx-document-remove");return(0,Be.WX)(ne,ce.primary,W,xt.error[0]),(0,Be.YN)(ce.collection.schema.primaryPath,At,xt)[0]})).then(At=>(ft=At,this.collection._runHooks("post","remove",W,this))).then(()=>this.collection._docCache.getCachedRxDocument(ft))},incrementalRemove(){var ce=this;return this.incrementalModify(function(){var ne=(0,m.A)(function*(W){return yield ce.collection._runHooks("pre","remove",W,ce),W._deleted=!0,W});return function(W){return ne.apply(this,arguments)}}()).then(function(){var ne=(0,m.A)(function*(W){return yield ce.collection._runHooks("post","remove",W._data,W),W});return function(W){return ne.apply(this,arguments)}}())},destroy(){throw(0,ee.Br)("DOC14")}};function He(ce=De){var ne=function(ft,At){this.collection=ft,this._data=At,this._propertyCache=new Map,this.isInstanceOfRxDocument=!0};return ne.prototype=ce,ne}function be(ce,ne,W){var ft=new ce(ne,W);return(0,Ue.Xi)("createRxDocument",ft),ft}function ot(ce,ne,W){return ne._meta=Object.assign({},W._meta,ne._meta),Oe.h.isDevMode()&&ce.schema.validateChange(W,ne),ce._runHooks("pre","save",ne,W)}},7650:(Bt,tt,M)=>{"use strict";M.d(tt,{sX:()=>pe,Br:()=>Te,JX:()=>Oe,cg:()=>dt});var m=M(6126),ie=M(6719);function fe(De){return(fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(He){return He.__proto__||Object.getPrototypeOf(He)})(De)}var se=M(4394);function ae(){try{var De=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ae=function(){return!!De})()}function lt(De){var He="function"==typeof Map?new Map:void 0;return lt=function(at){if(null===at||!function te(De){try{return-1!==Function.toString.call(De).indexOf("[native code]")}catch{return"function"==typeof De}}(at))return at;if("function"!=typeof at)throw new TypeError("Super expression must either be null or a function");if(void 0!==He){if(He.has(at))return He.get(at);He.set(at,ot)}function ot(){return function de(De,He,be){if(ae())return Reflect.construct.apply(null,arguments);var at=[null];at.push.apply(at,He);var ot=new(De.bind.apply(De,at));return be&&(0,se.A)(ot,be.prototype),ot}(at,arguments,fe(this).constructor)}return ot.prototype=Object.create(at.prototype,{constructor:{value:ot,enumerable:!1,writable:!0,configurable:!0}}),(0,se.A)(ot,at)},lt(De)}var qe=M(3896);function he(De,He,be){return"RxError ("+He+"):\n"+De+"\n"+function $e(De){var He="";return 0===Object.keys(De).length||(He+="Given parameters: {\n",He+=Object.keys(De).map(be=>{var at="[object Object]";try{at="errors"===be?De[be].map(ot=>JSON.stringify(ot,Object.getOwnPropertyNames(ot))):JSON.stringify(De[be],function(ot,ce){return void 0===ce?null:ce},2)}catch{}return be+":"+at}).join("\n"),He+="}"),He}(be)}var Ve=function(De){function He(at,ot,ce={}){var ne,W=he(ot,at,ce);return(ne=De.call(this,W)||this).code=at,ne.message=W,ne.url=ee(at),ne.parameters=ce,ne.rxdb=!0,ne}return(0,ie.A)(He,De),He.prototype.toString=function(){return this.message},(0,m.A)(He,[{key:"name",get:function(){return"RxError ("+this.code+")"}},{key:"typeError",get:function(){return!1}}])}(lt(Error)),xe=function(De){function He(at,ot,ce={}){var ne,W=he(ot,at,ce);return(ne=De.call(this,W)||this).code=at,ne.message=W,ne.url=ee(at),ne.parameters=ce,ne.rxdb=!0,ne}return(0,ie.A)(He,De),He.prototype.toString=function(){return this.message},(0,m.A)(He,[{key:"name",get:function(){return"RxTypeError ("+this.code+")"}},{key:"typeError",get:function(){return!0}}])}(lt(TypeError));function ee(De){return"https://rxdb.info/errors.html?console=errors#"+De}function Ue(De){return"\n You can find out more about this error here: "+ee(De)+" "}function Te(De,He){return new Ve(De,qe.h.tunnelErrorMessage(De)+Ue(De),He)}function Oe(De,He){return new xe(De,qe.h.tunnelErrorMessage(De)+Ue(De),He)}function pe(De){return!(!De||409!==De.status)&&De}var Be={409:"document write conflict",422:"schema validation error",510:"attachment data missing"};function dt(De){return Te("COL20",{name:Be[De.status],document:De.documentId,writeError:De})}},5365:(Bt,tt,M)=>{"use strict";M.d(tt,{Lr:()=>Aa,Xw:()=>Bb,_V:()=>Kg,dx:()=>Ra});var m=M(467),ie=M(997),fe=M(1885),se=M(6434),te=M(7176);class ae extends Error{}const qe=Number.MAX_SAFE_INTEGER,$e=Number.MIN_SAFE_INTEGER,he=Symbol("missing"),Ve=Object.freeze(new Error("mingo: cycle detected while processing object/array")),xe=Object.getPrototypeOf([]),ee=Object.getPrototypeOf({}),Te=/^\[object ([a-zA-Z0-9]+)\]$/;class Oe{}class pe{}const Be=y=>null===y?Oe:void 0===y?pe:y.constructor,dt=y=>{const b=function jr(y){const b=new Set,C=w=>{const O=Be(w);if(ot.has(O))return ot.get(O)(w);const B=O===Object?"":O.name;if(X(w.toJSON))return`${B}(${JSON.stringify(w)})`;if(b.has(w))throw Ve;b.add(w);try{if(O===Array)return"["+w.map(C).join(",")+"]";if(O!==Object){const[Z,ve]=qn(w);if(ye(w))return`${B}${C([...w,Z])}`;w=Z}const Y=Object.keys(w);return Y.sort(),`${B}{`+Y.map(Z=>`${Z}:${C(w[Z])}`).join(",")+"}"}finally{b.delete(w)}};return C(y)}(y);let C=0,w=b.length;for(;w;)C=(C<<5)-C^b.charCodeAt(--w);return C>>>0},De=new Set(["null","undefined","boolean","number","string","date","regexp"]),He=new Set([pe,Oe,Boolean,String,Number]),be=y=>y.toString(),at=y=>`${Be(y).name}[${y.toString()}]`,ot=new Map([[Number,be],[Boolean,be],[RegExp,be],[Function,be],[Symbol,be],[Date,y=>y.toISOString()],[String,JSON.stringify],[Oe,y=>"null"],[pe,y=>"undefined"],[Int8Array,at],[Uint8Array,at],[Uint8ClampedArray,at],[Int16Array,at],[Uint16Array,at],[Int32Array,at],[Uint32Array,at],[Float32Array,at],[Float64Array,at]]);typeof BigInt<"u"&&ot.set(BigInt,y=>"0x"+y.toString(16)),typeof BigInt64Array<"u"&&ot.set(BigInt64Array,at),typeof BigUint64Array<"u"&&ot.set(BigUint64Array,at);const ce={null:0,undefined:0,number:1,string:2,object:3,array:4,boolean:5,date:6,regexp:7,function:8},ne=(y,b)=>{y===he&&(y=void 0),b===he&&(b=void 0);const[C,w]=[y,b].map(O=>ce[xt(O).toLowerCase()]);return C!==w?C-w:1===C||2===C||6===C?y<b?-1:y>b?1:0:In(y,b)?0:y<b?-1:y>b?1:0};function W(y,b){if(!y)throw new ae(b)}const At=y=>{if(He.has(Be(y)))return y;const b=new Set,C=w=>{if(b.has(w))throw Ve;const O=Be(w);if(He.has(O))return w;try{if(ye(w))return b.add(w),w.map(C);if(K(w)){b.add(w);const B={};for(const Y in w)B[Y]=C(w[Y]);return B}}finally{b.delete(w)}return O===Date||O===RegExp||(y=>{const b=Object.getPrototypeOf(Be(y));return b&&"TypedArray"===b.name})(w)?new O(w):w};return C(y)},xt=y=>Te.exec(Object.prototype.toString.call(y))[1],yn=y=>"boolean"==typeof y,rn=y=>"string"==typeof y,$n=y=>!isNaN(y)&&"number"==typeof y,ye=Array.isArray,K=y=>{if(!y)return!1;const b=Object.getPrototypeOf(y);return(b===ee||null===b)&&"[object Object]"===Object.prototype.toString.call(y)},H=y=>y===Object(y),V=y=>y instanceof Date,q=y=>y instanceof RegExp,X=y=>"function"==typeof y,re=y=>null==y,oe=(y,b)=>y.includes(b),Je=(y,b)=>!oe(y,b),Ft=y=>re(y)||rn(y)&&!y||y instanceof Array&&0===y.length||K(y)&&0===Object.keys(y).length,Mt=y=>y===he,jt=y=>y instanceof Array?y:[y],on=(y,b)=>!!y&&Object.prototype.hasOwnProperty.call(y,b),en=(y,b)=>K(y)&&K(b)||ye(y)&&ye(b);function ln(y,b,C){if(C=C||{flatten:!1},Mt(y)||re(y))return b;if(Mt(b)||re(b))return y;if(!en(y,b)){if(C.skipValidation)return b||y;throw Error("mismatched types. must both be array or object")}if(C.skipValidation=!0,ye(y)){const w=y,O=b;if(C.flatten){let B=0,Y=0;for(;B<w.length&&Y<O.length;)w[B]=ln(w[B++],O[Y++],C);for(;Y<O.length;)w.push(b[Y++])}else Cr(w,O)}else for(const w in b)y[w]=ln(y[w],b[w],C);return y}function $t(y,b=dt){const C=new Map;return y.forEach((w,O)=>{const B=_n(w,b);C.has(B)?C.get(B).some(Y=>In(y[Y],w))||C.get(B).push(O):C.set(B,[O])}),C}function hn(y,b=dt){if(y.some(Z=>0==Z.length))return[];if(1===y.length)return Array.from(y);const C=function St(y,b,C=ne){if(Ft(y))return y;const w=new Array,O=new Array;for(let B=0;B<y.length;B++){const Y=y[B],Z=b(Y,B);re(Z)?O.push(Y):w.push([Z,Y])}return w.sort((B,Y)=>C(B[0],Y[0])),Cr(O,w.map(B=>B[1]))}(y.map((Z,ve)=>[ve,Z.length]),Z=>Z[1]),w=y[C[0][0]],O=$t(w,b),B=new Map,Y=new Array;return O.forEach((Z,ve)=>{const st=Z.map(Yt=>w[Yt]),Se=st.map(Yt=>0),wt=st.map(Yt=>[C[0][0],0]);let nn=!1;for(let Yt=1;Yt<y.length;Yt++){const[mn,Un]=C[Yt],Fn=y[mn];if(B.has(Yt)||B.set(Yt,$t(Fn)),B.get(Yt).has(ve)){const lr=B.get(Yt).get(ve).map(di=>Fn[di]);nn=st.map((di,jo)=>lr.some((or,uo)=>{const lo=Se[jo];return In(di,or)&&(Se[jo]++,mn<wt[jo][0]&&(wt[jo]=[mn,B.get(Yt).get(ve)[uo]])),lo<Se[jo]})).some(Boolean)}if(!nn)return}nn&&Cr(Y,Se.map((Yt,mn)=>Yt===y.length-1?[st[mn],wt[mn]]:he).filter(Yt=>Yt!==he))}),Y.sort((Z,ve)=>{const[st,[Se,wt]]=Z,[nn,[Yt,mn]]=ve,Un=ne(Se,Yt);return 0!==Un?Un:ne(wt,mn)}).map(Z=>Z[0])}function tn(y,b=0){const C=new Array;return function w(O,B){for(let Y=0,Z=O.length;Y<Z;Y++)ye(O[Y])&&(B>0||B<0)?w(O[Y],Math.max(-1,B-1)):C.push(O[Y])}(y,b),C}const qn=y=>{let[b,C]=[Object.getPrototypeOf(y),Object.getOwnPropertyNames(y)],w=b;for(;!C.length&&b!==ee&&b!==xe;)w=b,C=Object.getOwnPropertyNames(b),b=Object.getPrototypeOf(b);const O={};return C.forEach(B=>O[B]=y[B]),[O,w]};function In(y,b){const C=[[y,b]];for(;C.length>0;){if([y,b]=C.pop(),y===b)continue;const w=Be(y);if(w!==Be(b)||X(y))return!1;if(ot.has(w)){const O=ot.get(w);if(O(y)!==O(b))return!1}else{if(w!==Array&&w!==Object)return!1;{const O=Object.keys(y),B=Object.keys(b);if(O.length!==B.length||new Set(O.concat(B)).size!=O.length)return!1;for(const Y of O)C.push([y[Y],b[Y]])}}}return!C.length}function _n(y,b){return b=b||dt,re(y)?null:b(y).toString()}function Nr(y,b,C=dt){if(y.length<1)return new Map;const w=new Map,O=new Map;for(let B=0;B<y.length;B++){const Y=y[B],Z=b(Y,B),ve=_n(Z,C);if(null===ve)O.has(null)?O.get(null).push(Y):O.set(null,[Y]);else{const st=w.has(ve)?w.get(ve).find(Se=>In(Se,Z)):null;re(st)?(O.set(Z,[Y]),w.has(ve)?w.get(ve).push(Z):w.set(ve,[Z])):O.get(st).push(Y)}}return O}const Dr=5e4;function Cr(y,...b){return y instanceof Array?b.reduce((C,w)=>{let O=Math.ceil(w.length/Dr),B=0;for(;O-- >0;)Array.prototype.push.apply(C,w.slice(B,B+Dr)),B+=Dr;return C},y):b.filter(H).reduce((C,w)=>(Object.assign(C,w),C),y)}function mr(y,b){return H(y)?y[b]:void 0}function rr(y,b,C){let w=0;const B=De.has(xt(y).toLowerCase())?y:function O(Y,Z){let ve=Y;for(let st=0;st<Z.length;st++){const Se=Z[st];if(null===/^\d+$/.exec(Se)&&ve instanceof Array){if(0===st&&w>0)break;w+=1;const nn=Z.slice(st);ve=ve.reduce((Yt,mn)=>{const Un=O(mn,nn);return void 0!==Un&&Yt.push(Un),Yt},[]);break}if(ve=mr(ve,Se),void 0===ve)break}return ve}(y,b.split("."));return B instanceof Array&&C?.unwrapArray?function Zt(y,b){if(b<1)return y;for(;b--&&1===y.length;)y=y[0];return y}(B,w):B}function vo(y,b,C){const w=b.split("."),O=w[0],B=w.slice(1).join("."),Y=null!==/^\d+$/.exec(O),Z=w.length>1;let ve,st;if(y instanceof Array)if(Y)ve=mr(y,Number(O)),Z&&(ve=vo(ve,B,C)),ve=[ve];else{ve=[];for(const Se of y)st=vo(Se,b,C),C?.preserveMissing?(void 0===st&&(st=he),ve.push(st)):void 0!==st&&ve.push(st)}else{if(st=mr(y,O),Z&&(st=vo(st,B,C)),void 0===st)return;ve=C?.preserveKeys?Object.assign({},y):{},ve[O]=st}return ve}function Yn(y){if(y instanceof Array)for(let b=y.length-1;b>=0;b--)y[b]===he?y.splice(b,1):Yn(y[b]);else if(K(y))for(const b in y)on(y,b)&&Yn(y[b])}const Pt=/^\d+$/;function $i(y,b,C,w){const O=b.split("."),B=O[0],Y=O.slice(1).join(".");if(1===O.length)(K(y)||ye(y)&&Pt.test(B))&&C(y,B);else{w?.buildGraph&&re(y[B])&&(y[B]={});const Z=y[B];if(!Z)return;const ve=!!(O.length>1&&Pt.test(O[1]));Z instanceof Array&&w?.descendArray&&!ve?Z.forEach(st=>$i(st,Y,C,w)):$i(Z,Y,C,w)}}function Gs(y,b,C){$i(y,b,(w,O)=>{w[O]=X(C)?C(w[O]):C},{buildGraph:!0})}function _o(y,b,C){$i(y,b,(w,O)=>{if(w instanceof Array){if(/^\d+$/.test(O))w.splice(parseInt(O),1);else if(C&&C.descendArray)for(const B of w)K(B)&&delete B[O]}else K(w)&&delete w[O]},C)}const ga=/^\$[a-zA-Z0-9_]+$/;function yo(y){return ga.test(y)}function Ur(y){if(De.has(xt(y).toLowerCase()))return q(y)?{$regex:y}:{$eq:y};if(H(y)){if(!Object.keys(y).some(yo))return{$eq:y};if(on(y,"$regex")){const C=Object.assign({},y);return C.$regex=new RegExp(y.$regex,y.$options),delete C.$options,C}}return y}var gi=M(7650),wi=function(y){return y.CLONE_ALL="CLONE_ALL",y.CLONE_INPUT="CLONE_INPUT",y.CLONE_OUTPUT="CLONE_OUTPUT",y.CLONE_OFF="CLONE_OFF",y}(wi||{});class Hi{constructor(b,C,w,O=Date.now()){this._opts=b,this._root=C,this._local=w,this.timestamp=O,this.update(C,w)}static init(b,C,w){return b instanceof Hi?new Hi(b._opts,re(b.root)?C:b.root,Object.assign({},b.local,w)):new Hi(b,C,w)}update(b,C){var w;return this._root=b,this._local=C&&Object.assign({},C,{variables:Object.assign({},null===(w=this._local)||void 0===w?void 0:w.variables,C?.variables)}),this}getOptions(){return Object.freeze(Object.assign(Object.assign({},this._opts),{context:gr.from(this._opts.context)}))}get root(){return this._root}get local(){return this._local}get idKey(){return this._opts.idKey}get collation(){var b;return null===(b=this._opts)||void 0===b?void 0:b.collation}get processingMode(){var b;return(null===(b=this._opts)||void 0===b?void 0:b.processingMode)||wi.CLONE_OFF}get useStrictMode(){var b;return null===(b=this._opts)||void 0===b?void 0:b.useStrictMode}get scriptEnabled(){var b;return null===(b=this._opts)||void 0===b?void 0:b.scriptEnabled}get useGlobalContext(){var b;return null===(b=this._opts)||void 0===b?void 0:b.useGlobalContext}get hashFunction(){var b;return null===(b=this._opts)||void 0===b?void 0:b.hashFunction}get collectionResolver(){var b;return null===(b=this._opts)||void 0===b?void 0:b.collectionResolver}get jsonSchemaValidator(){var b;return null===(b=this._opts)||void 0===b?void 0:b.jsonSchemaValidator}get variables(){var b;return null===(b=this._opts)||void 0===b?void 0:b.variables}get context(){var b;return null===(b=this._opts)||void 0===b?void 0:b.context}}function va(y){return y instanceof Hi?y.getOptions():Object.freeze(Object.assign(Object.assign({idKey:"_id",scriptEnabled:!0,useStrictMode:!0,useGlobalContext:!0,processingMode:wi.CLONE_OFF},y),{context:y?.context?gr.from(y?.context):gr.init({})}))}var gn=function(y){return y.ACCUMULATOR="accumulator",y.EXPRESSION="expression",y.PIPELINE="pipeline",y.PROJECTION="projection",y.QUERY="query",y.WINDOW="window",y}(gn||{});class gr{constructor(b){this.operators={[gn.ACCUMULATOR]:{},[gn.EXPRESSION]:{},[gn.PIPELINE]:{},[gn.PROJECTION]:{},[gn.QUERY]:{},[gn.WINDOW]:{}};for(const[C,w]of Object.entries(b))this.addOperators(C,w)}static init(b={}){return new gr(b)}static from(b){return new gr(b.operators)}addOperators(b,C){for(const[w,O]of Object.entries(C))this.getOperator(b,w)||(this.operators[b][w]=O);return this}addAccumulatorOps(b){return this.addOperators(gn.ACCUMULATOR,b)}addExpressionOps(b){return this.addOperators(gn.EXPRESSION,b)}addQueryOps(b){return this.addOperators(gn.QUERY,b)}addPipelineOps(b){return this.addOperators(gn.PIPELINE,b)}addProjectionOps(b){return this.addOperators(gn.PROJECTION,b)}addWindowOps(b){return this.addOperators(gn.WINDOW,b)}getOperator(b,C){return b in this.operators&&this.operators[b][C]||null}}const Jo=gr.init();function qs(y,b){for(const[C,w]of Object.entries(b)){W(X(w)&&yo(C),`'${C}' is not a valid operator`);const O=bo(y,C,null);W(!O||w===O,`${C} already exists for '${y}' operators. Cannot change operator function once registered.`)}switch(y){case gn.ACCUMULATOR:Jo.addAccumulatorOps(b);break;case gn.EXPRESSION:Jo.addExpressionOps(b);break;case gn.PIPELINE:Jo.addPipelineOps(b);break;case gn.PROJECTION:Jo.addProjectionOps(b);break;case gn.QUERY:Jo.addQueryOps(b);break;case gn.WINDOW:Jo.addWindowOps(b)}}function bo(y,b,C){const{context:w,useGlobalContext:O}=C||{},B=w?w.getOperator(y,b):null;return!B&&O?Jo.getOperator(y,b):B}const Ds={$$ROOT:(y,b,C)=>C.root,$$CURRENT:(y,b,C)=>y,$$REMOVE(y,b,C){},$$NOW:(y,b,C)=>new Date(C.timestamp)},Cs={$$KEEP:(y,b,C)=>y,$$PRUNE(y,b,C){},$$DESCEND(y,b,C){if(!on(b,"$cond"))return y;let w;for(const[O,B]of Object.entries(y))if(H(B)){if(B instanceof Array){const Y=[];for(let Z of B)K(Z)&&(Z=Ts(Z,b,C.update(Z))),re(Z)||Y.push(Z);w=Y}else w=Ts(B,b,C.update(B));re(w)?delete y[O]:y[O]=w}return y}};function vr(y,b,C,w){var O;const B=Hi.init(w,y);if(yo(C=C||"")){const Y=bo(gn.EXPRESSION,C,w);if(Y)return Y(y,b,B);const Z=bo(gn.ACCUMULATOR,C,w);if(Z)return y instanceof Array||(y=vr(y,b,null,B),b=null),W(y instanceof Array,`'${C}' target must be an array.`),Z(y,b,B.update(null,B.local));throw new ae(`operator '${C}' is not registered`)}if(rn(b)&&b.length>0&&"$"===b[0]){if(on(Cs,b))return b;let Y=B.root;const Z=b.split(".");if(on(Ds,Z[0]))Y=Ds[Z[0]](y,null,B),b=b.slice(Z[0].length+1);else if("$$"===Z[0].slice(0,2)){Y=Object.assign({},B.variables,{this:y},null===(O=B.local)||void 0===O?void 0:O.variables);const ve=Z[0].slice(2);W(on(Y,ve),`Use of undefined variable: ${ve}`),b=b.slice(2)}else b=b.slice(1);return""===b?Y:rr(Y,b)}if(ye(b))return b.map(Y=>vr(y,Y,null,B));if(K(b)){const Y={};for(const[Z,ve]of Object.entries(b))if(Y[Z]=vr(y,ve,Z,B),[gn.EXPRESSION,gn.ACCUMULATOR].some(st=>!!bo(st,Z,w)))return W(1===Object.keys(b).length,"Invalid aggregation expression '"+JSON.stringify(b)+"'"),Y[Z];return Y}return b}function Ts(y,b,C){const w=vr(y,b,null,C);return on(Cs,w)?Cs[w](y,b,C):w}function Ii(y){return y instanceof Rs?y:new Rs(y)}function es(y,b){const C=y.slice(b+1);y.splice(b),Array.prototype.push.apply(y,C)}const As=new Error;var si=function(y){return y[y.MAP=0]="MAP",y[y.FILTER=1]="FILTER",y[y.TAKE=2]="TAKE",y[y.DROP=3]="DROP",y}(si||{});class Rs{constructor(b){let C;if(this.iteratees=[],this.yieldedValues=[],this.isDone=!1,b instanceof Function&&(b={next:b}),function Ac(y){return!!y&&"object"==typeof y&&y?.next instanceof Function}(b)){const w=b;C=()=>{const O=w.next();if(O.done)throw As;return O.value}}else if(b instanceof Array){const w=b,O=b.length;let B=0;C=()=>{if(B<O)return w[B++];throw As}}else if(!(b instanceof Function))throw new ae("Lazy must be initialized with an array, generator, or function.");this.getNext=function Rc(y,b,C){let w=!1,O=-1,B=0;return function(Y){try{e:for(;!w;){let Z=y();O++;let ve=-1;const st=b.length;let Se=!1;for(;++ve<st;){const wt=b[ve];switch(wt.action){case si.MAP:Z=wt.func(Z,O);break;case si.FILTER:if(!wt.func(Z,O))continue e;break;case si.TAKE:--wt.count,wt.count||(Se=!0);break;case si.DROP:--wt.count,wt.count||es(b,ve);continue e;default:break e}}if(w=Se,!Y)return{value:Z,done:!1};C[B++]=Z}}catch(Z){if(Z!==As)throw Z}return w=!0,{done:w}}}(C,this.iteratees,this.yieldedValues)}push(b,C){return"function"==typeof C?this.iteratees.push({action:b,func:C}):"number"==typeof C&&this.iteratees.push({action:b,count:C}),this}next(){return this.getNext()}map(b){return this.push(si.MAP,b)}filter(b){return this.push(si.FILTER,b)}take(b){return b>0?this.push(si.TAKE,b):this}drop(b){return b>0?this.push(si.DROP,b):this}transform(b){const C=this;let w;return Ii(()=>(w||(w=Ii(b(C.value()))),w.next()))}value(){return this.isDone||(this.isDone=this.getNext(!0).done),this.yieldedValues}each(b){for(;;){const C=this.next();if(C.done)break;if(!1===b(C.value))return!1}return!0}reduce(b,C){let w=this.next();for(void 0===C&&!w.done&&(C=w.value,w=this.next());!w.done;)C=b(C,w.value),w=this.next();return C}size(){return this.reduce((b,C)=>++b,0)}[Symbol.iterator](){return this}}class br{constructor(b,C){this.pipeline=b,this.options=va(C)}stream(b){let C=Ii(b);const w=this.options.processingMode;(w==wi.CLONE_ALL||w==wi.CLONE_INPUT)&&C.map(At);const O=new Array;if(!Ft(this.pipeline))for(const B of this.pipeline){const Y=Object.keys(B),Z=Y[0],ve=bo(gn.PIPELINE,Z,this.options);W(1===Y.length&&!!ve,`invalid pipeline operator ${Z}`),O.push(Z),C=ve(C,B[Z],this.options)}return(w==wi.CLONE_OUTPUT||w==wi.CLONE_ALL&&hn([["$group","$unwind"],O]).length)&&C.map(At),C}run(b){return this.stream(b).value()}}class ts{constructor(b,C,w,O){this.source=b,this.predicate=C,this.projection=w,this.options=O,this.operators=[],this.result=null,this.buffer=[]}fetch(){return this.result||(K(this.projection)&&this.operators.push({$project:this.projection}),this.result=Ii(this.source).filter(this.predicate),this.operators.length>0&&(this.result=new br(this.operators,this.options).stream(this.result))),this.result}fetchAll(){const b=Ii([...this.buffer]);return this.buffer=[],function Ss(...y){let b=0;return Ii(()=>{for(;b<y.length;){const C=y[b].next();if(!C.done)return C;b++}return{done:!0}})}(b,this.fetch())}all(){return this.fetchAll().value()}count(){return this.all().length}skip(b){return this.operators.push({$skip:b}),this}limit(b){return this.operators.push({$limit:b}),this}sort(b){return this.operators.push({$sort:b}),this}collation(b){return this.options=Object.assign(Object.assign({},this.options),{collation:b}),this}next(){if(this.buffer.length>0)return this.buffer.pop();const b=this.fetch().next();return b.done?void 0:b.value}hasNext(){if(this.buffer.length>0)return!0;const b=this.fetch().next();return!b.done&&(this.buffer.push(b.value),!0)}map(b){return this.all().map(b)}forEach(b){this.all().forEach(b)}[Symbol.iterator](){return this.fetchAll()}}class xi{constructor(b,C){this.condition=b,this.options=va(C),this.compiled=[],this.compile()}compile(){W(K(this.condition),`query criteria must be an object: ${JSON.stringify(this.condition)}`);const b={};for(const[C,w]of Object.entries(this.condition)){if("$where"===C)Object.assign(b,{field:C,expr:w});else if(oe(["$and","$or","$nor","$expr","$jsonSchema"],C))this.processOperator(C,C,w);else{W(!yo(C),`unknown top level operator: ${C}`);for(const[O,B]of Object.entries(Ur(w)))this.processOperator(C,O,B)}b.field&&this.processOperator(b.field,b.field,b.expr)}}processOperator(b,C,w){const O=bo(gn.QUERY,C,this.options);if(!O)throw new ae(`unknown query operator ${C}`);const B=O(b,w,this.options);this.compiled.push(B)}test(b){for(let C=0,w=this.compiled.length;C<w;C++)if(!this.compiled[C](b))return!1;return!0}find(b,C){return new ts(b,w=>this.test(w),C||{},this.options)}remove(b){return b.reduce((C,w)=>(this.test(w)||C.push(w),C),[])}}const _l=(y,b,C)=>{if(Ft(b)||!K(b))return y;let w=ne;const O=C.collation;return K(O)&&rn(O.locale)&&(w=function bl(y){const b={sensitivity:yl[y.strength||3],caseFirst:"off"===y.caseFirst?"false":y.caseFirst||"false",numeric:y.numericOrdering||!1,ignorePunctuation:"shifted"===y.alternate};!0===(y.caseLevel||!1)&&("base"===b.sensitivity&&(b.sensitivity="case"),"accent"===b.sensitivity&&(b.sensitivity="variant"));const C=new Intl.Collator(y.locale,b);return(w,O)=>{if(!rn(w)||!rn(O))return ne(w,O);const B=C.compare(w,O);return B<0?-1:B>0?1:0}}(O)),y.transform(B=>{const Y=Object.keys(b);for(const Z of Y.reverse()){const ve=Nr(B,Se=>rr(Se,Z),C.hashFunction),st=Array.from(ve.keys()).sort(w);-1===b[Z]&&st.reverse(),st.reduce((Se,wt)=>Cr(Se,ve.get(wt)),B=[])}return B})},yl={1:"base",2:"accent",3:"variant"};function io(y){const b=(C,w,O)=>{const B={unwrapArray:!0},Y=Math.max(1,C.split(".").length-1);return Z=>{const ve=rr(Z,C,B);return y(ve,w,Object.assign(Object.assign({},O),{depth:Y}))}};return b.op="query",b}function kc(y){return(b,C,w)=>{const O=vr(b,C,null,w);return y(...O)}}function cp(y,b,C){if(In(y,b)||re(y)&&re(b))return!0;if(y instanceof Array){const w=In.bind(null,b);return y.some(w)||tn(y,C?.depth).some(w)}return!1}function ir(y,b,C){return!cp(y,b,C)}function na(y,b,C){return re(y)?b.some(w=>null===w):hn([jt(y),b],C?.hashFunction).length>0}function xr(y,b,C){return!na(y,b,C)}function Da(y,b,C){return ge(y,b,(w,O)=>ne(w,O)<0)}function oo(y,b,C){return ge(y,b,(w,O)=>ne(w,O)<=0)}function Zd(y,b,C){return ge(y,b,(w,O)=>ne(w,O)>0)}function Il(y,b,C){return ge(y,b,(w,O)=>ne(w,O)>=0)}function Dn(y){return yo(y)&&-1===["$and","$or","$nor"].indexOf(y)}function _(y,b,C){if(ye(y)&&!Ft(y)){let w=Y=>Y,O=b;Object.keys(b).every(Dn)&&(O={temp:b},w=Y=>({temp:Y}));const B=new xi(O,C);for(let Y=0,Z=y.length;Y<Z;Y++)if(B.test(w(y[Y])))return!0}return!1}const I=y=>null===y,A=y=>$n(y)&&y>=-2147483648&&y<=2147483647&&-1===y.toString().indexOf("."),N=y=>$n(y)&&y>=$e&&y<=qe&&-1===y.toString().indexOf("."),L={array:ye,bool:yn,boolean:yn,date:V,decimal:$n,double:$n,int:A,long:N,number:$n,null:I,object:K,regex:q,regexp:q,string:rn,undefined:re,function:y=>{throw new ae("unsupported type key `function`.")},1:$n,2:rn,3:K,4:ye,6:re,8:yn,9:V,10:I,11:q,16:A,18:N,19:$n};function U(y,b,C){const w=L[b];return!!w&&w(y)}function ge(y,b,C){return jt(y).some(w=>xt(w)===xt(b)&&C(w,b))}kc(xr);const je=(y,b)=>(C,w,O)=>{W(ye(w),`${y}: expression must be an array.`);const B=vr(C,w,null,O);return B.some(re)?null:(W(B.every($n),`${y}: expression must evalue to array of numbers.`),b(B))};je("$bitAnd",y=>y.reduce((b,C)=>b&C,-1)),je("$bitOr",y=>y.reduce((b,C)=>b|C,0)),je("$bitXor",y=>y.reduce((b,C)=>b^C,0)),kc(cp),kc(Zd),kc(Il),kc(Da),kc(oo),kc(ir);const Sg=(y,b)=>{const C={};return y.split("").forEach((w,O)=>C[w]=b*(O+1)),C};Object.assign(Object.assign(Object.assign({},Sg("ABCDEFGHIKLM",1)),Sg("NOPQRSTUVWXY",-1)),{Z:0});const Fg={undefined:null,null:null,NaN:NaN,Infinity:new Error,"-Infinity":new Error};function Vo(y,b=Fg){const C=Object.assign({},Fg,b),w=new Set(Object.keys(C));return(O,B,Y)=>{const Z=vr(O,B,null,Y);if(w.has(`${Z}`)){const ve=C[`${Z}`];if(ve instanceof Error)throw new ae(`cannot apply $${y.name} to -inf, value must in (-inf,inf)`);return ve}return y(Z)}}Vo(Math.acos,{Infinity:1/0,0:new Error}),Vo(Math.acosh,{Infinity:1/0,0:new Error}),Vo(Math.asin),Vo(Math.asinh,{Infinity:1/0,"-Infinity":-1/0}),Vo(Math.atan),Vo(Math.atanh,{1:1/0,"-1":-1/0}),Vo(Math.cos),Vo(Math.cosh,{"-Infinity":1/0,Infinity:1/0});const Fb=Math.PI/180,rh=(Vo(y=>y*Fb,{Infinity:1/0,"-Infinity":1/0}),180/Math.PI);Vo(y=>y*rh,{Infinity:1/0,"-Infinity":-1/0}),Vo(Math.sin),Vo(Math.sinh,{"-Infinity":-1/0,Infinity:1/0}),Vo(Math.tan),Error;const Bg=(y,b,C)=>{if(Ft(b))return y;let w=Object.keys(b),O=!1;rc(b,C);const B=C.idKey;if(oe(w,B)){const Z=b[B];(0===Z||!1===Z)&&(w=w.filter(Je.bind(null,[B])),O=0==w.length)}else w.push(B);const Y=Hi.init(C);return y.map(Z=>oh(Z,b,Y.update(Z),w,O))};function oh(y,b,C,w,O){let B={},Y=!1,Z=!1;const ve=[];O&&ve.push(C.idKey);for(const st of w){let Se;const wt=b[st];if(st!==C.idKey&&oe([0,!1],wt)&&(Z=!0),st===C.idKey&&Ft(wt))Se=y[st];else if(rn(wt))Se=vr(y,wt,st,C);else if(!oe([1,!0],wt))if(wt instanceof Array)Se=wt.map(Yt=>{const mn=vr(y,Yt,null,C);return re(mn)?null:mn});else{if(!K(wt)){ve.push(st);continue}{const Yt=wt,mn=Object.keys(wt),Un=1==mn.length?mn[0]:"",Fn=bo(gn.PROJECTION,Un,C);if(Fn)"$slice"===Un?jt(Yt[Un]).every($n)?(Se=Fn(y,Yt[Un],st,C),Y=!0):Se=vr(y,Yt,st,C):Se=Fn(y,Yt[Un],st,C);else if(yo(Un))Se=vr(y,Yt[Un],Un,C);else if(on(y,st)){rc(Yt,C);let lr=y[st];lr instanceof Array?Se=lr.map(di=>oh(di,Yt,C,mn,!1)):(lr=K(lr)?lr:y,Se=oh(lr,Yt,C,mn,!1))}else Se=vr(y,wt,null,C)}}const nn=vo(y,st,{preserveMissing:!0});void 0!==nn&&ln(B,nn,{flatten:!0}),Je([0,1,!1,!0],wt)&&(void 0===Se?_o(B,st,{descendArray:!0}):Gs(B,st,Se))}if(Yn(B),(Y||Z||O)&&(B=Cr({},y,B),ve.length>0))for(const st of ve)_o(B,st,{descendArray:!0});return B}function rc(y,b){const C=[!1,!1];for(const[w,O]of Object.entries(y)){if(w===b?.idKey)return;0===O||!1===O?C[0]=!0:(1===O||!0===O)&&(C[1]=!0),W(!(C[0]&&C[1]),"Projection cannot have a mix of inclusion and exclusion.")}}const ui=(y,b,C)=>{W(ye(b),"Invalid expression: $and expects value to be an Array.");const w=b.map(O=>new xi(O,C));return O=>w.every(B=>B.test(O))},$g=(y,b,C)=>{W(ye(b),"Invalid expression. $or expects value to be an Array");const w=b.map(O=>new xi(O,C));return O=>w.some(B=>B.test(O))},xu=(y,b,C)=>{W(ye(b),"Invalid expression. $nor expects value to be an array.");const w=$g("$or",b,C);return O=>!w(O)},Hg=(y,b,C)=>{const w={};w[y]=Ur(b);const O=new xi(w,C);return B=>!O.test(B)},Vc=io(cp),sh=io(Zd),ah=io(Il),Sa=io(na),Mu=io(Da),zg=io(oo),Bc=io(ir),cs=io(xr),Mi=io(function Iu(y,b,C){return jt(y).some(w=>2===b.length&&w%b[0]===b[1])}),yp=io(function Fo(y,b,C){const w=jt(y),O=B=>rn(B)&&((y,b=!0)=>!!y||b&&""===y)(b.exec(B),C?.useStrictMode);return w.some(O)||tn(w,1).some(O)});io(function Ca(y,b,C){if(!(ye(y)&&ye(b)&&y.length&&b.length))return!1;let w=!0;for(const O of b){if(!w)break;w=K(O)&&oe(Object.keys(O),"$elemMatch")?_(y,O.$elemMatch,C):O instanceof RegExp?y.some(B=>"string"==typeof B&&O.test(B)):y.some(B=>In(O,B))}return w});const Gi=io(_),Gr=io(function ss(y,b,C){return Array.isArray(y)&&y.length===b}),Tl=io(function Fc(y,b,C){return(!1===b||0===b)&&void 0===y||(!0===b||1===b)&&void 0!==y}),wr=io(function J(y,b,C){return Array.isArray(b)?b.findIndex(w=>U(y,w))>=0:U(y,b)});var bi=!1;function Kg(y,b){var C=(0,fe.xQ)(y.primaryKey);b=(0,se.FD)(b);var w=(0,se.o8)(b);if("number"!=typeof w.skip&&(w.skip=0),w.selector?(w.selector=w.selector,Object.entries(w.selector).forEach(([st,Se])=>{("object"!=typeof Se||null===Se)&&(w.selector[st]={$eq:Se})})):w.selector={},w.index){var O=(0,te.$r)(w.index);O.includes(C)||O.push(C),w.index=O}if(w.sort)w.sort.find(st=>(0,se.Ln)(st)===C)||(w.sort=w.sort.slice(0),w.sort.push({[C]:"asc"}));else if(w.index)w.sort=w.index.map(st=>({[st]:"asc"}));else{if(y.indexes){var B=new Set;Object.entries(w.selector).forEach(([st,Se])=>{("object"!=typeof Se||null===Se||Object.keys(Se).find(nn=>ie.Cf.has(nn)))&&B.add(st)});var Z,Y=-1;y.indexes.forEach(st=>{var Se=(0,te.k_)(st)?st:[st],wt=Se.findIndex(nn=>!B.has(nn));wt>0&&wt>Y&&(Y=wt,Z=Se)}),Z&&(w.sort=Z.map(st=>({[st]:"asc"})))}w.sort||(w.sort=[{[C]:"asc"}])}return w}function Bb(y,b){if(!b.sort)throw(0,gi.Br)("SNH",{query:b});var C=[];return b.sort.forEach(O=>{var B=Object.keys(O)[0],Y=Object.values(O)[0];C.push({key:B,direction:Y,getValueFn:(0,se.SQ)(B)})}),(O,B)=>{for(var Y=0;Y<C.length;++Y){var Z=C[Y],ve=Z.getValueFn(O),st=Z.getValueFn(B);if(ve!==st)return"asc"===Z.direction?ne(ve,st):ne(st,ve)}}}function Aa(y,b){if(!b.sort)throw(0,gi.Br)("SNH",{query:b});var C=function ch(y){return bi||(qs(gn.PIPELINE,{$sort:_l,$project:Bg}),qs(gn.QUERY,{$and:ui,$eq:Vc,$elemMatch:Gi,$exists:Tl,$gt:sh,$gte:ah,$in:Sa,$lt:Mu,$lte:zg,$ne:Bc,$nin:cs,$mod:Mi,$nor:xu,$not:Hg,$or:$g,$regex:yp,$size:Gr,$type:wr}),bi=!0),new xi(y)}(b.selector);return O=>C.test(O)}function Ra(y,b){return On.apply(this,arguments)}function On(){return(On=(0,m.A)(function*(y,b){var C=yield y.exec();return C?Array.isArray(C)?Promise.all(C.map(O=>b(O))):yield b(C):null})).apply(this,arguments)}},5672:(Bt,tt,M)=>{"use strict";M.d(tt,{Mh:()=>Po,XX:()=>qa,nd:()=>Ig,Ib:()=>Eo});var m=M(467),ie=M(6126),fe=M(4412),se=M(4843),te=M(7786),ae=M(5964),de=M(9172),lt=M(1397),qe=M(6354),$e=M(6496),he=M(3294),Ve=M(4552),xe=M(5520),ee=M(8663),Ue=M(6434),Te=M(203),Oe=M(2060),pe=M(7176),Be=M(7650),dt=M(2284);const be=$=>{$.previousResults.unshift($.changeEvent.doc),$.keyDocumentMap&&$.keyDocumentMap.set($.changeEvent.id,$.changeEvent.doc)},at=$=>{$.previousResults.push($.changeEvent.doc),$.keyDocumentMap&&$.keyDocumentMap.set($.changeEvent.id,$.changeEvent.doc)},ot=$=>{const Ae=$.previousResults.shift();$.keyDocumentMap&&Ae&&$.keyDocumentMap.delete(Ae[$.queryParams.primaryKey])},ce=$=>{const Ae=$.previousResults.pop();$.keyDocumentMap&&Ae&&$.keyDocumentMap.delete(Ae[$.queryParams.primaryKey])},xt=$=>{$.keyDocumentMap&&$.keyDocumentMap.delete($.changeEvent.id);const Ae=$.queryParams.primaryKey,Ye=$.previousResults;for(let ht=0;ht<Ye.length;ht++)if(Ye[ht][Ae]===$.changeEvent.id){Ye.splice(ht,1);break}},pn=$=>{const Ae=$.changeEvent.id,Ye=$.changeEvent.doc;if($.keyDocumentMap){if($.keyDocumentMap.has(Ae))return;$.keyDocumentMap.set(Ae,Ye)}else if($.previousResults.find(kt=>kt[$.queryParams.primaryKey]===Ae))return;!function De($,Ae,Ye,ht){var Zn,kt=$.length,An=kt-1,jn=0;if(0===kt)return $.push(Ae),0;for(;ht<=An;)Ye(Zn=$[jn=ht+(An-ht>>1)],Ae)<=0?ht=jn+1:An=jn-1;Ye(Zn,Ae)<=0&&jn++,$.splice(jn,0,Ae)}($.previousResults,Ye,$.queryParams.sortComparator,0)},ye=["doNothing","insertFirst","insertLast","removeFirstItem","removeLastItem","removeFirstInsertLast","removeLastInsertFirst","removeFirstInsertFirst","removeLastInsertLast","removeExisting","replaceExisting","alwaysWrong","insertAtSortPosition","removeExistingAndInsertAtSortPosition","runFullQueryAgain","unknownAction"],K={doNothing:$=>{},insertFirst:be,insertLast:at,removeFirstItem:ot,removeLastItem:ce,removeFirstInsertLast:$=>{ot($),at($)},removeLastInsertFirst:$=>{ce($),be($)},removeFirstInsertFirst:$=>{ot($),be($)},removeLastInsertLast:$=>{ce($),at($)},removeExisting:xt,replaceExisting:$=>{const Ae=$.changeEvent.doc,Ye=$.queryParams.primaryKey,ht=$.previousResults;for(let kt=0;kt<ht.length;kt++)if(ht[kt][Ye]===$.changeEvent.id){ht[kt]=Ae,$.keyDocumentMap&&$.keyDocumentMap.set($.changeEvent.id,Ae);break}},alwaysWrong:$=>{const Ae={_id:"wrongHuman"+(new Date).getTime()};$.previousResults.length=0,$.previousResults.push(Ae),$.keyDocumentMap&&($.keyDocumentMap.clear(),$.keyDocumentMap.set(Ae._id,Ae))},insertAtSortPosition:pn,removeExistingAndInsertAtSortPosition:$=>{xt($),pn($)},runFullQueryAgain:$=>{throw new Error("Action runFullQueryAgain must be implemented by yourself")},unknownAction:$=>{throw new Error("Action unknownAction should never be called")}};function V($){return $?"1":"0"}function qn($,Ae){const Ye=[];for(let ht=0,kt=$.length;ht<kt;ht+=Ae)Ye.push($.substring(ht,ht+Ae));return Ye}!function re($=6){let Ae="";for(let kt=0;kt<$;kt++)Ae+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()))}(4);const In=40;function jr($){return $.charCodeAt(0)-In}function go($){return $[$.length-1]}function gi($,Ae,Ye){if(Array.isArray(Ae)&&(Ae=Ae.join(".")),!function ni($){const Ae=typeof $;return null!==$&&("object"===Ae||"function"===Ae)}($)||"string"!=typeof Ae)return void 0===Ye?$:Ye;const ht=Ae.split(".");if(0===ht.length)return Ye;for(let kt=0;kt<ht.length;kt++){const An=ht[kt];if(null==($=wi($,An)?kt===ht.length-1?void 0:null:$[An])){if(kt!==ht.length-1)return Ye;break}}return void 0===$?Ye:$}function wi($,Ae){if("number"!=typeof Ae&&Array.isArray($)){const Ye=Number.parseInt(Ae,10);return Number.isInteger(Ye)&&$[Ye]===$[Ae]}return!1}const Hi=$=>!!$.queryParams.limit,ts={0:$=>"INSERT"===$.changeEvent.operation,1:$=>"UPDATE"===$.changeEvent.operation,2:$=>"DELETE"===$.changeEvent.operation,3:Hi,4:$=>1===$.queryParams.limit,5:$=>!!($.queryParams.skip&&$.queryParams.skip>0),6:$=>0===$.previousResults.length,7:$=>Hi($)&&$.previousResults.length>=$.queryParams.limit,8:$=>{const Ae=$.previousResults[0];return!(!Ae||Ae[$.queryParams.primaryKey]!==$.changeEvent.id)},9:$=>{const Ae=go($.previousResults);return!(!Ae||Ae[$.queryParams.primaryKey]!==$.changeEvent.id)},10:$=>{const Ae=$.queryParams.sortFields,Ye=$.changeEvent.previous,ht=$.changeEvent.doc;if(!ht)return!1;if(!Ye)return!0;for(let kt=0;kt<Ae.length;kt++){const An=Ae[kt];if(gi(Ye,An)!==gi(ht,An))return!0}return!1},11:$=>{const Ae=$.changeEvent.id;if($.keyDocumentMap)return $.keyDocumentMap.has(Ae);{const Ye=$.queryParams.primaryKey,ht=$.previousResults;for(let kt=0;kt<ht.length;kt++)if(ht[kt][Ye]===Ae)return!0;return!1}},12:$=>{const Ae=$.changeEvent.previous;if(!Ae)return!1;const Ye=$.previousResults[0];return!!Ye&&(Ye[$.queryParams.primaryKey]===$.changeEvent.id||$.queryParams.sortComparator(Ae,Ye)<0)},13:$=>{const Ae=$.changeEvent.previous;if(!Ae)return!1;const Ye=go($.previousResults);return!!Ye&&(Ye[$.queryParams.primaryKey]===$.changeEvent.id||$.queryParams.sortComparator(Ae,Ye)>0)},14:$=>{const Ae=$.changeEvent.doc;if(!Ae)return!1;const Ye=$.previousResults[0];return!!Ye&&(Ye[$.queryParams.primaryKey]===$.changeEvent.id||$.queryParams.sortComparator(Ae,Ye)<0)},15:$=>{const Ae=$.changeEvent.doc;if(!Ae)return!1;const Ye=go($.previousResults);return!!Ye&&(Ye[$.queryParams.primaryKey]===$.changeEvent.id||$.queryParams.sortComparator(Ae,Ye)>0)},16:$=>{const Ae=$.changeEvent.previous;return!!Ae&&$.queryParams.queryMatcher(Ae)},17:$=>{const Ae=$.changeEvent.doc;return!!Ae&&$.queryParams.queryMatcher(Ae)}};let _a;const ya=$=>function Cr($,Ae,Ye){let ht=$,kt=$.l;for(;;){if(ht=ht[V(Ae[kt](Ye))],"number"==typeof ht||"string"==typeof ht)return ht;kt=ht.l}}(function fl(){return _a||(_a=function Dr($){const Ae=new Map,ht=2+2*parseInt($.charAt(0)+$.charAt(1),10),An=qn($.substring(2,ht),2);for(let Io=0;Io<An.length;Io++){const ea=An[Io],ta=ea.charAt(0),Do=jr(ea.charAt(1));Ae.set(ta,Do)}const Zn=qn($.substring(ht,$.length-3),4);for(let Io=0;Io<Zn.length;Io++){const ea=Zn[Io],ta=ea.charAt(0),Do=ea.charAt(1),Os=ea.charAt(2),wa=jr(ea.charAt(3));if(!Ae.has(Do))throw new Error("missing node with id "+Do);if(!Ae.has(Os))throw new Error("missing node with id "+Os);const ml=Ae.get(Do),gl=Ae.get(Os);Ae.set(ta,{l:wa,0:ml,1:gl})}const yr=$.slice(-3),kr=yr.charAt(0),Kr=yr.charAt(1);return{l:jr(yr.charAt(2)),0:Ae.get(kr),1:Ae.get(Kr)}}("14a1b,c+d2e5f0g/h.i4j*k-l)m(n6oeh6pnm6qen6ril6snh6tin6ubo9vce9wmh9xns9yne9zmi9{cm9|ad9}cp9~aq9\x7fae9\xa1bf9\xa2bq9\xa3cg9\xa4ck9\xa5cn9\xa6nd9\xa7np9\xa8nq9\xa9nf9\xaang9\xabnm9\xacnk9\xadmr9\xaems9\xafmt9\xb0mj9\xb1mk9\xb2ml9\xb3mn9\xb4mc8\xb5\xb3{8\xb6\xaf}8\xb7\xb0\xa48\xb8\xb3\xa78\xb9mn8\xba\xb3\xab8\xbb\xb3m8\xbcm\xb44\xbdz\xb24\xbe\xb3w4\xbfz\xb54\xc0\xaf\xb64\xc1\xb0\xb74\xc2\xb3\xba4\xc3\xb3\xb84\xc4m\xb94\xc5v\xa47\xc6yn7\xc7\xc0\xc17\xc8~\x7f7\xc9\xa5\xa47\xca\xc3\xc47\xcb\xa8n7\xcc\xba\xb97\xcd\xad\xb07\xce\xaem7\xcf\xaf\xb07\xd0\xb1m7\xd1\xb3m7\xd2\xbcm5\xd3\xc4m5\xd4\xb9m5\xd5\xbd\xb05\xd6\xbem5\xd7\xbf\xb05\xd8\xc7\xcf5\xd9\xc2m5\xda\xca\xd15\xdb\xb1m5\xdc\xbam5\xdd\xcc\xd15\xde\xd5\xcd2\xdf|\x7f2\xe0\xa1u2\xe1\xa3\xc52\xe2\xd6\xce2\xe3\xa6\xc62\xe4\xa9x2\xe5\xaa\xc62\xe6\xd7\xd82\xe7|\xc82\xe8\xa1\xa22\xe9\xa3\xc92\xea\xa4\xa52\xeb\xd9\xda2\xec\xa6\xcb2\xed\xa9n2\xee\xaan2\xef\xdb\xd02\xf0\xdc\xdd2\xf1\xacn2\xf2\xd2\xd3/\xf3an/\xf4bn/\xf5cn/\xf6\xde\xe2/\xf7\xdf\xe3/\xf8\xe0\xe4/\xf9\xe1\xe5/\xfa\xe6\xeb/\xfb\xe7\xec/\xfc\xe8\xed/\xfd\xe9\xee/\xfe\xcd\xce/\xff\xcf\xd1/\u0100\xf2\xd4,\u0101cn,\u0102\xf6\xef,\u0103\xa4\xf1,\u0104\xfa\xf0,\u0105\xea\xf1,\u0106\xfe\xd0,\u0107\xff\xd1,\u0108ac0\u0109bc0\u010a\xf3\xf50\u010b\xf4\u01010\u010c\xdf\xe10\u010d\xe0\xa40\u010e\xe7\xe90\u010f\xe8\xea0\u0110\xf7\xf90\u0111\xf8\u01030\u0112\xfb\xfd0\u0113\xfc\u01050\u0114m\xd2-\u0115m\u0100-\u0116\xde\xe6-\u0117\u010c\u010e-\u0118\u010d\u010f-\u0119\u0102\u0104-\u011a\u0110\u0112-\u011b\u0111\u0113-\u011c\xb2\xbb-\u011d\xcd\xcf-\u011e\u0106\u0107-\u011f\xb2\xb3-\u0120\u0114\u01083\u0121\u0115\u010a3\u0122\u0116\u01173\u0123\u0119\u011a3\u0124\u0122\u011d(\u0125\u011c\u011f(\u0126\u0123\u011e(\u0127\u0120\u0121+\u0128\u0109\u010b+\u0129\u0124\u0126+\u012a\u0118\u011b+\u012b\u0127\u01281\u012c\u0129\u012a1\u012d\u012c\u012b*\u012e\u0125m*\u012d\u012e.")),_a}(),ts,$);var Wa=M(312),xc=M(9403),zi=M(5365);function _r($,Ae){return Ae.sort&&0!==Ae.sort.length?Ae.sort.map(Ye=>Object.keys(Ye)[0]):[$]}var Ys=new WeakMap;function ba($,Ae){if(!$.collection.database.eventReduce)return{runFullQueryAgain:!0};var Ye=function Mc($){return(0,xc.q)(Ys,$,()=>{var Ae=$.collection,Ye=(0,zi._V)(Ae.storageInstance.schema,(0,Ue.o8)($.mangoQuery)),ht=Ae.schema.primaryPath,kt=(0,zi.Xw)(Ae.schema.jsonSchema,Ye),jn=(0,zi.Lr)(Ae.schema.jsonSchema,Ye);return{primaryKey:$.collection.schema.primaryPath,skip:Ye.skip,limit:Ye.limit,sortFields:_r(ht,Ye),sortComparator:(kr,Kr)=>{var ai={docA:kr,docB:Kr,rxQuery:$};return kt(ai.docA,ai.docB)},queryMatcher:kr=>jn({doc:kr,rxQuery:$}.doc)}})}($),ht=(0,ee.ZN)($._result).docsData.slice(0),kt=(0,ee.ZN)($._result).docsDataMap,An=!1,Zn=Ae.map(yr=>(0,Wa._r)(yr)).filter(pe.S7).find(yr=>{var Kr=function Xs($){const Ae=ya($);return ye[Ae]}({queryParams:Ye,changeEvent:yr,previousResults:ht,keyDocumentMap:kt});return"runFullQueryAgain"===Kr||("doNothing"!==Kr?(An=!0,function Gn($,Ae,Ye,ht,kt){(0,K[$])({queryParams:Ae,changeEvent:Ye,previousResults:ht,keyDocumentMap:kt})}(Kr,Ye,yr,ht,kt),!1):void 0)});return Zn?{runFullQueryAgain:!0}:{runFullQueryAgain:!1,changed:An,newResults:ht}}var _u=M(6259),Zs=M(9825),Ms=function(){return(0,ie.A)(function $(Ae,Ye,ht){this.time=(0,Ve.t)(),this.collection=Ae,this.count=ht,this.documents=(0,Zs.X)(this.collection._docCache,Ye)},[{key:"docsData",get:function(){return(0,Ue.Ns)(this,"docsData",this.documents.map(Ae=>Ae._data))}},{key:"docsDataMap",get:function(){var Ae=new Map;return this.documents.forEach(Ye=>{Ae.set(Ye.primary,Ye._data)}),(0,Ue.Ns)(this,"docsDataMap",Ae)}},{key:"docsMap",get:function(){for(var Ae=new Map,Ye=this.documents,ht=0;ht<Ye.length;ht++){var kt=Ye[ht];Ae.set(kt.primary,kt)}return(0,Ue.Ns)(this,"docsMap",Ae)}}])}(),Ea=M(997),yu=0,Po=function(){function $(Ye,ht,kt,An={}){this.id=++yu,this._execOverDatabaseCount=0,this._creationTime=(0,Ve.t)(),this._lastEnsureEqual=0,this.uncached=!1,this.refCount$=new fe.t(null),this._result=null,this._latestChangeEvent=-1,this._lastExecStart=0,this._lastExecEnd=0,this._ensureEqualQueue=xe.Dr,this.op=Ye,this.mangoQuery=ht,this.collection=kt,this.other=An,ht||(this.mangoQuery={selector:{}}),this.isFindOneByIdQuery=function Qa($,Ae){if(!Ae.skip&&Ae.selector&&1===Object.keys(Ae.selector).length&&Ae.selector[$]){var Ye=Ae.selector[$];if("string"==typeof Ye)return Ye;if(1===Object.keys(Ye).length&&"string"==typeof Ye.$eq||1===Object.keys(Ye).length&&Array.isArray(Ye.$eq)&&!Ye.$eq.find(ht=>"string"!=typeof ht))return Ye.$eq}return!1}(this.collection.schema.primaryPath,ht)}var Ae=$.prototype;return Ae._setResultData=function(ht){if("number"!=typeof ht){ht instanceof Map&&(ht=Array.from(ht.values()));var kt=new Ms(this.collection,ht,ht.length);this._result=kt}else this._result=new Ms(this.collection,[],ht)},Ae._execOverDatabase=function(){var Ye=(0,m.A)(function*(){if(this._execOverDatabaseCount=this._execOverDatabaseCount+1,this._lastExecStart=(0,Ve.t)(),"count"===this.op){var kt=this.getPreparedQuery(),An=yield this.collection.storageInstance.count(kt);if("slow"===An.mode&&!this.collection.database.allowSlowCount)throw(0,Be.Br)("QU14",{collection:this.collection,queryObj:this.mangoQuery});return An.count}if("findByIds"===this.op){var jn=(0,ee.ZN)(this.mangoQuery.selector)[this.collection.schema.primaryPath].$in,Zn=new Map,yr=[];return jn.forEach(ai=>{var No=this.collection._docCache.getLatestDocumentDataIfExists(ai);if(No){if(!No._deleted){var Js=this.collection._docCache.getCachedRxDocument(No);Zn.set(ai,Js)}}else yr.push(ai)}),yr.length>0&&(yield this.collection.storageInstance.findDocumentsById(yr,!1)).forEach(ai=>{var No=this.collection._docCache.getCachedRxDocument(ai);Zn.set(No.primary,No)}),Zn}var Kr=function to($){return wo.apply(this,arguments)}(this);return Kr.then(ai=>(this._lastExecEnd=(0,Ve.t)(),ai))});return function ht(){return Ye.apply(this,arguments)}}(),Ae.exec=function(ht){if(ht&&"findOne"!==this.op)throw(0,Be.Br)("QU9",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return Oc(this).then(()=>(0,se._)(this.$)).then(kt=>{if(!kt&&ht)throw(0,Be.Br)("QU10",{collection:this.collection.name,query:this.mangoQuery,op:this.op});return kt})},Ae.toString=function(){var ht=(0,Ue.mf)({op:this.op,query:this.mangoQuery,other:this.other},!0),kt=JSON.stringify(ht);return this.toString=()=>kt,kt},Ae.getPreparedQuery=function(){var ht={rxQuery:this,mangoQuery:(0,zi._V)(this.collection.schema.jsonSchema,this.mangoQuery)};ht.mangoQuery.selector._deleted={$eq:!1},ht.mangoQuery.index&&ht.mangoQuery.index.unshift("_deleted"),(0,dt.Xi)("prePrepareQuery",ht);var kt=Eo(this.collection.schema.jsonSchema,ht.mangoQuery);return this.getPreparedQuery=()=>kt,kt},Ae.doesDocumentDataMatch=function(ht){return!ht._deleted&&this.queryMatcher(ht)},Ae.remove=function(){return this.exec().then(ht=>Array.isArray(ht)?Promise.all(ht.map(kt=>kt.remove())):ht.remove())},Ae.incrementalRemove=function(){return(0,zi.dx)(this.asRxQuery,ht=>ht.incrementalRemove())},Ae.update=function(ht){throw(0,Te.u)("update")},Ae.patch=function(ht){return(0,zi.dx)(this.asRxQuery,kt=>kt.patch(ht))},Ae.incrementalPatch=function(ht){return(0,zi.dx)(this.asRxQuery,kt=>kt.incrementalPatch(ht))},Ae.modify=function(ht){return(0,zi.dx)(this.asRxQuery,kt=>kt.modify(ht))},Ae.incrementalModify=function(ht){return(0,zi.dx)(this.asRxQuery,kt=>kt.incrementalModify(ht))},Ae.where=function(ht){throw(0,Te.u)("query-builder")},Ae.sort=function(ht){throw(0,Te.u)("query-builder")},Ae.skip=function(ht){throw(0,Te.u)("query-builder")},Ae.limit=function(ht){throw(0,Te.u)("query-builder")},(0,ie.A)($,[{key:"$",get:function(){if(!this._$){var Ye=this.collection.$.pipe((0,ae.p)(ht=>!ht.isLocal),(0,de.Z)(null),(0,lt.Z)(()=>Oc(this)),(0,qe.T)(()=>this._result),(0,$e.t)(ee.bz),(0,he.F)((ht,kt)=>!(!ht||ht.time!==(0,ee.ZN)(kt).time)),(0,ae.p)(ht=>!!ht),(0,qe.T)(ht=>{var kt=(0,ee.ZN)(ht);return"count"===this.op?kt.count:"findOne"===this.op?0===kt.documents.length?null:kt.documents[0]:"findByIds"===this.op?kt.docsMap:kt.documents.slice(0)}));this._$=(0,te.h)(Ye,this.refCount$.pipe((0,ae.p)(()=>!1)))}return this._$}},{key:"$$",get:function(){return this.collection.database.getReactivityFactory().fromObservable(this.$,void 0,this.collection.database)}},{key:"queryMatcher",get:function(){var Ye=this.collection.schema.jsonSchema,ht=(0,zi._V)(this.collection.schema.jsonSchema,this.mangoQuery);return(0,Ue.Ns)(this,"queryMatcher",(0,zi.Lr)(Ye,ht))}},{key:"asRxQuery",get:function(){return this}}])}();function qa(){return{selector:{}}}function Ig($,Ae,Ye,ht){(0,dt.Xi)("preCreateRxQuery",{op:$,queryObj:Ae,collection:Ye,other:ht});var kt=new Po($,Ae,Ye,ht);return kt=function pl($){return $.collection._queryCache.getByQuery($)}(kt),(0,_u.n9)(Ye),kt}function Qn($){var Ae=$.asRxQuery.collection._changeEventBuffer.getCounter();return $._latestChangeEvent>=Ae}function Oc($){return $.collection.database.destroyed||Qn($)?xe.Dr:($._ensureEqualQueue=$._ensureEqualQueue.then(()=>function ep($){if($._lastEnsureEqual=(0,Ve.t)(),$.collection.database.destroyed||Qn($))return xe.Dr;var Ae=!1,Ye=!1;if(-1===$._latestChangeEvent&&(Ye=!0),!Ye){var ht=$.asRxQuery.collection._changeEventBuffer.getFrom($._latestChangeEvent+1);if(null===ht)Ye=!0;else{$._latestChangeEvent=$.asRxQuery.collection._changeEventBuffer.getCounter();var kt=$.asRxQuery.collection._changeEventBuffer.reduceByLastOfDoc(ht);if("count"===$.op){var An=(0,ee.ZN)($._result).count,jn=An;kt.forEach(yr=>{var kr=yr.previousDocumentData&&$.doesDocumentDataMatch(yr.previousDocumentData),Kr=$.doesDocumentDataMatch(yr.documentData);!kr&&Kr&&jn++,kr&&!Kr&&jn--}),jn!==An&&(Ae=!0,$._setResultData(jn))}else{var Zn=ba($,kt);Zn.runFullQueryAgain?Ye=!0:Zn.changed&&(Ae=!0,$._setResultData(Zn.newResults))}}}return Ye?$._execOverDatabase().then(yr=>($._latestChangeEvent=$.collection._changeEventBuffer.getCounter(),"number"==typeof yr?((!$._result||yr!==$._result.count)&&(Ae=!0,$._setResultData(yr)),Ae):((!$._result||!(0,Oe.YL)($.collection.schema.primaryPath,yr,$._result.docsData))&&(Ae=!0,$._setResultData(yr)),Ae))):Promise.resolve(Ae)}($)),$._ensureEqualQueue)}function Eo($,Ae){if(!Ae.sort)throw(0,Be.Br)("SNH",{query:Ae});return{query:Ae,queryPlan:(0,Ea.sk)($,Ae)}}function wo(){return(wo=(0,m.A)(function*($){var Ae=[],Ye=$.collection;if($.isFindOneByIdQuery)if(Array.isArray($.isFindOneByIdQuery)){var ht=$.isFindOneByIdQuery;if((ht=ht.filter(Kr=>{var ai=$.collection._docCache.getLatestDocumentDataIfExists(Kr);return!ai||(ai._deleted||Ae.push(ai),!1)})).length>0){var kt=yield Ye.storageInstance.findDocumentsById(ht,!1);(0,pe.Hb)(Ae,kt)}}else{var An=$.isFindOneByIdQuery,jn=$.collection._docCache.getLatestDocumentDataIfExists(An);if(!jn){var Zn=yield Ye.storageInstance.findDocumentsById([An],!1);Zn[0]&&(jn=Zn[0])}jn&&!jn._deleted&&Ae.push(jn)}else{var yr=$.getPreparedQuery(),kr=yield Ye.storageInstance.query(yr);Ae=kr.documents}return Ae})).apply(this,arguments)}},1885:(Bt,tt,M)=>{"use strict";M.d(tt,{pA:()=>De,Nq:()=>Ve,Ud:()=>pe,U:()=>Ue,uK:()=>dt,Hq:()=>ee,xQ:()=>xe,nT:()=>he,d1:()=>Te});var m=M(7650),ie=/\./g,se=M(720),te=M(1744),ae=M(8663),de=M(6434),lt=M(7176);function he(be,at){var ot=at;return ot=ot.replace(ie,".properties."),ot=(0,se.L$)(ot="properties."+ot),(0,te.UU)(be,ot)}function Ve(be,at,ot){if("string"==typeof at.primaryKey)return ot;var ce=Ue(at,ot),ne=ot[be];if(ne&&ne!==ce)throw(0,m.Br)("DOC19",{args:{documentData:ot,existingPrimary:ne,newPrimary:ce},schema:at});return ot[be]=ce,ot}function xe(be){return"string"==typeof be?be:be.key}function ee(be){var ot=he(be,xe(be.primaryKey));return(0,ae.ZN)(ot.maxLength)}function Ue(be,at){if("string"==typeof be.primaryKey)return at[be.primaryKey];var ot=be.primaryKey;return ot.fields.map(ce=>{var ne=(0,te.UU)(at,ce);if(typeof ne>"u")throw(0,m.Br)("DOC18",{args:{field:ce,documentData:at}});return ne}).join(ot.separator)}function Te(be){return(0,de.mf)(be,!0)}function pe(be){var at=xe((be=(0,de.FD)(be)).primaryKey);be.properties=(0,de.FD)(be.properties),be.additionalProperties=!1,Object.prototype.hasOwnProperty.call(be,"keyCompression")||(be.keyCompression=!1),be.indexes=be.indexes?be.indexes.slice(0):[],be.required=be.required?be.required.slice(0):[],be.encrypted=be.encrypted?be.encrypted.slice(0):[],be.properties._rev={type:"string",minLength:1},be.properties._attachments={type:"object"},be.properties._deleted={type:"boolean"},be.properties._meta=Be,be.required=be.required?be.required.slice(0):[],be.required.push("_deleted"),be.required.push("_rev"),be.required.push("_meta"),be.required.push("_attachments");var ot=dt(be);(0,lt.Hb)(be.required,ot),be.required=be.required.filter(W=>!W.includes(".")).filter((W,ft,At)=>At.indexOf(W)===ft),be.version=be.version||0;var ce=be.indexes.map(W=>{var ft=(0,lt.k_)(W)?W.slice(0):[W];return ft.includes(at)||ft.push(at),"_deleted"!==ft[0]&&ft.unshift("_deleted"),ft});0===ce.length&&ce.push(function Oe(be){return["_deleted",be]}(at)),ce.push(["_meta.lwt",at]),be.internalIndexes&&be.internalIndexes.map(W=>{ce.push(W)});var ne=new Set;return ce.filter(W=>{var ft=W.join(",");return!ne.has(ft)&&(ne.add(ft),!0)}),be.indexes=ce,be}var Be={type:"object",properties:{lwt:{type:"number",minimum:M(2060).MC,maximum:1e15,multipleOf:.01}},additionalProperties:!0,required:["lwt"]};function dt(be){var at=Object.keys(be.properties).filter(ce=>be.properties[ce].final),ot=xe(be.primaryKey);return at.push(ot),"string"!=typeof be.primaryKey&&be.primaryKey.fields.forEach(ce=>at.push(ce)),at}function De(be,at){for(var ot=Object.keys(be.defaultValues),ce=0;ce<ot.length;++ce){var ne=ot[ce];(!Object.prototype.hasOwnProperty.call(at,ne)||typeof at[ne]>"u")&&(at[ne]=be.defaultValues[ne])}return at}},9182:(Bt,tt,M)=>{"use strict";M.d(tt,{NP:()=>he,Wq:()=>Ve,wJ:()=>qe});var m=M(6126),ie=M(6636),fe=M(6434),se=M(7176),te=M(7650),ae=M(2284),de=M(1885),lt=M(3896),qe=function(){function Ue(Oe,pe){this.jsonSchema=Oe,this.hashFunction=pe,this.indexes=function $e(Ue){return(Ue.indexes||[]).map(Te=>(0,se.k_)(Te)?Te:[Te])}(this.jsonSchema),this.primaryPath=(0,de.xQ)(this.jsonSchema.primaryKey),this.finalFields=(0,de.uK)(this.jsonSchema)}var Te=Ue.prototype;return Te.validateChange=function(pe,Be){this.finalFields.forEach(dt=>{if(!(0,ie.b)(pe[dt],Be[dt]))throw(0,te.Br)("DOC9",{dataBefore:pe,dataAfter:Be,fieldName:dt,schema:this.jsonSchema})})},Te.getDocumentPrototype=function(){var pe={},Be=(0,de.nT)(this.jsonSchema,"");return Object.keys(Be).forEach(dt=>{var De=dt;pe.__defineGetter__(dt,function(){if(this.get&&"function"==typeof this.get)return this.get(De)}),Object.defineProperty(pe,dt+"$",{get:function(){return this.get$(De)},enumerable:!1,configurable:!1}),Object.defineProperty(pe,dt+"$$",{get:function(){return this.get$$(De)},enumerable:!1,configurable:!1}),Object.defineProperty(pe,dt+"_",{get:function(){return this.populate(De)},enumerable:!1,configurable:!1})}),(0,fe.Ns)(this,"getDocumentPrototype",()=>pe),pe},Te.getPrimaryOfDocumentData=function(pe){return(0,de.U)(this.jsonSchema,pe)},(0,m.A)(Ue,[{key:"version",get:function(){return this.jsonSchema.version}},{key:"defaultValues",get:function(){var Oe={};return Object.entries(this.jsonSchema.properties).filter(([,pe])=>Object.prototype.hasOwnProperty.call(pe,"default")).forEach(([pe,Be])=>Oe[pe]=Be.default),(0,fe.Ns)(this,"defaultValues",Oe)}},{key:"hash",get:function(){return(0,fe.Ns)(this,"hash",this.hashFunction(JSON.stringify(this.jsonSchema)))}}])}();function he(Ue){var Oe=0;return new Array(Ue.version?Ue.version:0).fill(0).map(()=>Oe++)}function Ve(Ue,Te,Oe=!0){Oe&&(0,ae.Xi)("preCreateRxSchema",Ue);var pe=(0,de.Ud)(Ue);pe=(0,de.d1)(pe),lt.h.deepFreezeWhenDevMode(pe);var Be=new qe(pe,Te);return(0,ae.Xi)("createRxSchema",Be),Be}},6893:(Bt,tt,M)=>{"use strict";M.d(tt,{AM:()=>xt,C9:()=>ft,ME:()=>rn,Mu:()=>He,O5:()=>Oe,OG:()=>Ue,WX:()=>be,YN:()=>me,gi:()=>at,mQ:()=>Be,on:()=>W,p0:()=>$n,pZ:()=>yn});var m=M(467),ie=M(3896),fe=M(7650),se=M(1885),te=M(720),ae=M(4552),de=M(8663),lt=M(6434),qe=M(6568),$e=M(7176),he=M(2060),Ve=M(5672),xe=M(5365),ee=M(2284),Ue="_rxdb_internal";function Oe(K,H){return pe.apply(this,arguments)}function pe(){return(pe=(0,m.A)(function*(K,H){var q=(yield K.findDocumentsById([H],!1))[0];if(q)return q})).apply(this,arguments)}function Be(K,H,V){return dt.apply(this,arguments)}function dt(){return(dt=(0,m.A)(function*(K,H,V){var q=yield K.bulkWrite([H],V);if(q.error.length>0)throw q.error[0];return me((0,se.xQ)(K.schema.primaryKey),[H],q)[0]})).apply(this,arguments)}function He(K){return Object.assign({},...K)}function be(K,H,V,q){if(q)throw 409===q.status?(0,fe.Br)("CONFLICT",{collection:K.name,id:H,writeError:q,data:V}):422===q.status?(0,fe.Br)("VD2",{collection:K.name,id:H,writeError:q,data:V}):q}function at(K,H,V,q,X,re,oe){for(var qn,Je=!!K.schema.attachments,Ct=[],Ft=[],Mt=[],on={id:(0,te.z3)(10),events:[],checkpoint:null,context:X,startTime:(0,ae.t)(),endTime:0},en=on.events,ln=[],$t=[],hn=[],tn=V.size>0,In=q.length,Ui=function(){var Zt,_n=q[jr],St=_n.document,Nr=_n.previous,Dr=St[H],Cr=St._deleted,go=Nr&&Nr._deleted,mr=void 0;if(tn&&(mr=V.get(Dr)),mr){if(!Nr||Nr&&mr._rev!==Nr._rev)return Mt.push({isError:!0,status:409,documentId:Dr,writeRow:_n,documentInDb:mr}),1;var $i=Je?ot(_n):_n;Je&&(Cr?Nr&&Object.keys(Nr._attachments).forEach(Ur=>{$t.push({documentId:Dr,attachmentId:Ur,digest:(0,de.ZN)(Nr)._attachments[Ur].digest})}):(Object.entries(St._attachments).find(([Ur,ni])=>(!(Nr?Nr._attachments[Ur]:void 0)&&!ni.data&&(Zt={documentId:Dr,documentInDb:mr,isError:!0,status:510,writeRow:_n,attachmentId:Ur}),!0)),Zt||Object.entries(St._attachments).forEach(([Ur,ni])=>{var gi=Nr?Nr._attachments[Ur]:void 0;gi?ni.data&&gi.digest!==$i.document._attachments[Ur].digest&&hn.push({documentId:Dr,attachmentId:Ur,attachmentData:ni,digest:ni.digest}):ln.push({documentId:Dr,attachmentId:Ur,attachmentData:ni,digest:ni.digest})}))),Zt?Mt.push(Zt):(Je?(Ft.push(ot($i)),oe&&oe(St)):(Ft.push($i),oe&&oe(St)),qn=$i);var Gs=null,_o=null,ga=null;if(go&&!Cr)ga="INSERT",Gs=Je?W(St):St;else if(!Nr||go||Cr){if(!Cr)throw(0,fe.Br)("SNH",{args:{writeRow:_n}});ga="DELETE",Gs=(0,de.ZN)(St),_o=Nr}else ga="UPDATE",Gs=Je?W(St):St,_o=Nr;en.push({documentId:Dr,documentData:Gs,previousDocumentData:_o,operation:ga})}else{var rr=!!Cr;if(Je&&Object.entries(St._attachments).forEach(([Ur,ni])=>{ni.data?ln.push({documentId:Dr,attachmentId:Ur,attachmentData:ni,digest:ni.digest}):Mt.push(Zt={documentId:Dr,isError:!0,status:510,writeRow:_n,attachmentId:Ur})}),Zt||(Je?(Ct.push(ot(_n)),re&&re(St)):(Ct.push(_n),re&&re(St)),qn=_n),!rr){var vo={documentId:Dr,operation:"INSERT",documentData:Je?W(St):St,previousDocumentData:Je&&Nr?W(Nr):Nr};en.push(vo)}}},jr=0;jr<In;jr++)Ui();return{bulkInsertDocs:Ct,bulkUpdateDocs:Ft,newestRow:qn,errors:Mt,eventBulk:on,attachmentsAdd:ln,attachmentsRemove:$t,attachmentsUpdate:hn}}function ot(K){return{previous:K.previous,document:W(K.document)}}function ce(K){return atob(K).length}function W(K){if(!K._attachments||0===Object.keys(K._attachments).length)return K;var H=(0,lt.FD)(K);return H._attachments={},Object.entries(K._attachments).forEach(([V,q])=>{H._attachments[V]=function ne(K){var H=K.data;return H?{length:ce(H),digest:K.digest,type:K.type}:K}(q)}),H}function ft(K){return Object.assign({},K,{_meta:(0,lt.FD)(K._meta)})}var At=new WeakMap;function xt(K,H,V){ie.h.deepFreezeWhenDevMode(V);var q=(0,se.xQ)(H.schema.primaryKey),X={originalStorageInstance:H,schema:H.schema,internals:H.internals,collectionName:H.collectionName,databaseName:H.databaseName,options:H.options,bulkWrite(re,oe){for(var Je=K.token,Ct=new Array(re.length),Ft=(0,ae.t)(),Mt=0;Mt<re.length;Mt++){var jt=re[Mt],on=ft(jt.document);on._meta.lwt=Ft;var en=jt.previous;on._rev=(0,qe.CM)(Je,en),Ct[Mt]={document:on,previous:en}}return(0,ee.Xi)("preStorageWrite",{storageInstance:this.originalStorageInstance,rows:Ct}),K.lockedRun(()=>H.bulkWrite(Ct,oe)).then(ln=>{var $t={error:[]},hn=me(q,Ct,ln);At.set($t,hn);var tn=0===ln.error.length?[]:ln.error.filter(In=>!(409!==In.status||In.writeRow.previous||In.writeRow.document._deleted||!(0,de.ZN)(In.documentInDb)._deleted)||($t.error.push(In),!1));if(tn.length>0){var qn=tn.map(In=>({previous:In.documentInDb,document:Object.assign({},In.writeRow.document,{_rev:(0,qe.CM)(K.token,In.documentInDb)})}));return K.lockedRun(()=>H.bulkWrite(qn,oe)).then(In=>{(0,$e.Hb)($t.error,In.error);var Ui=me(q,qn,In);return(0,$e.Hb)(hn,Ui),$t})}return $t})},query:re=>K.lockedRun(()=>H.query(re)),count:re=>K.lockedRun(()=>H.count(re)),findDocumentsById:(re,oe)=>K.lockedRun(()=>H.findDocumentsById(re,oe)),getAttachmentData:(re,oe,Je)=>K.lockedRun(()=>H.getAttachmentData(re,oe,Je)),getChangedDocumentsSince:H.getChangedDocumentsSince?(re,oe)=>K.lockedRun(()=>H.getChangedDocumentsSince((0,de.ZN)(re),oe)):void 0,cleanup:re=>K.lockedRun(()=>H.cleanup(re)),remove:()=>(K.storageInstances.delete(X),K.lockedRun(()=>H.remove())),close:()=>(K.storageInstances.delete(X),K.lockedRun(()=>H.close())),changeStream:()=>H.changeStream(),conflictResultionTasks:()=>H.conflictResultionTasks(),resolveConflictResultionTask(re){if(re.output.isEqual)return H.resolveConflictResultionTask(re);var oe=Object.assign({},re.output.documentData,{_meta:(0,he.o4)(),_rev:(0,he.Fq)(),_attachments:{}}),Je=(0,lt.FD)(oe);return delete Je._meta,delete Je._rev,delete Je._attachments,H.resolveConflictResultionTask({id:re.id,output:{isEqual:!1,documentData:Je}})}};return K.storageInstances.add(X),X}function yn(K){if(K.schema.keyCompression)throw(0,fe.Br)("UT5",{args:{params:K}});if(rn(K.schema))throw(0,fe.Br)("UT6",{args:{params:K}});if(K.schema.attachments&&K.schema.attachments.compression)throw(0,fe.Br)("UT7",{args:{params:K}})}function rn(K){return!!(K.encrypted&&K.encrypted.length>0||K.attachments&&K.attachments.encrypted)}function $n(K,H,V){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,m.A)(function*(K,H,V){if(K.getChangedDocumentsSince)return K.getChangedDocumentsSince(H,V);var q=(0,se.xQ)(K.schema.primaryKey),X=(0,Ve.Ib)(K.schema,function pn(K,H,V){var q=(0,se.xQ)(K.schema.primaryKey),X=V?V.lwt:he.MC;return(0,xe._V)(K.schema,{selector:{$or:[{"_meta.lwt":{$gt:X}},{"_meta.lwt":{$eq:X},[q]:{$gt:V&&V?V.id:""}}],"_meta.lwt":{$gte:X}},sort:[{"_meta.lwt":"asc"},{[q]:"asc"}],skip:0,limit:H})}(K,H,V)),oe=(yield K.query(X)).documents,Je=(0,$e.dG)(oe);return{documents:oe,checkpoint:Je?{id:Je[q],lwt:Je._meta.lwt}:V||{id:"",lwt:0}}})).apply(this,arguments)}function me(K,H,V){var q=At.get(V);if(q)return q;var X=[];if(V.error.length>0){for(var re=new Set,oe=0;oe<V.error.length;oe++)re.add(V.error[oe].documentId);for(var Ct=0;Ct<H.length;Ct++){var Ft=H[Ct].document;re.has(Ft[K])||X.push(W(Ft))}}else{X.length=H.length-V.error.length;for(var Mt=0;Mt<H.length;Mt++)X[Mt]=W(H[Mt].document)}return X}},467:(Bt,tt,M)=>{"use strict";function m(fe,se,te,ae,de,lt,qe){try{var $e=fe[lt](qe),he=$e.value}catch(Ve){return void te(Ve)}$e.done?se(he):Promise.resolve(he).then(ae,de)}function ie(fe){return function(){var se=this,te=arguments;return new Promise(function(ae,de){var lt=fe.apply(se,te);function qe(he){m(lt,ae,de,qe,$e,"next",he)}function $e(he){m(lt,ae,de,qe,$e,"throw",he)}qe(void 0)})}}M.d(tt,{A:()=>ie})},6126:(Bt,tt,M)=>{"use strict";function m(ae){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(de){return typeof de}:function(de){return de&&"function"==typeof Symbol&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(ae)}function fe(ae){var de=function ie(ae,de){if("object"!=m(ae)||!ae)return ae;var lt=ae[Symbol.toPrimitive];if(void 0!==lt){var qe=lt.call(ae,de||"default");if("object"!=m(qe))return qe;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===de?String:Number)(ae)}(ae,"string");return"symbol"==m(de)?de:de+""}function se(ae,de){for(var lt=0;lt<de.length;lt++){var qe=de[lt];qe.enumerable=qe.enumerable||!1,qe.configurable=!0,"value"in qe&&(qe.writable=!0),Object.defineProperty(ae,fe(qe.key),qe)}}function te(ae,de,lt){return de&&se(ae.prototype,de),lt&&se(ae,lt),Object.defineProperty(ae,"prototype",{writable:!1}),ae}M.d(tt,{A:()=>te})},6719:(Bt,tt,M)=>{"use strict";M.d(tt,{A:()=>ie});var m=M(4394);function ie(fe,se){fe.prototype=Object.create(se.prototype),fe.prototype.constructor=fe,(0,m.A)(fe,se)}},4394:(Bt,tt,M)=>{"use strict";function m(ie,fe){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(se,te){return se.__proto__=te,se})(ie,fe)}M.d(tt,{A:()=>m})},1635:(Bt,tt,M)=>{"use strict";function Ve(Ge,me,ye,K){return new(ye||(ye=Promise))(function(V,q){function X(Je){try{oe(K.next(Je))}catch(Ct){q(Ct)}}function re(Je){try{oe(K.throw(Je))}catch(Ct){q(Ct)}}function oe(Je){Je.done?V(Je.value):function H(V){return V instanceof ye?V:new ye(function(q){q(V)})}(Je.value).then(X,re)}oe((K=K.apply(Ge,me||[])).next())})}function De(Ge){return this instanceof De?(this.v=Ge,this):new De(Ge)}function He(Ge,me,ye){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var H,K=ye.apply(Ge,me||[]),V=[];return H={},X("next"),X("throw"),X("return",function q(Mt){return function(jt){return Promise.resolve(jt).then(Mt,Ct)}}),H[Symbol.asyncIterator]=function(){return this},H;function X(Mt,jt){K[Mt]&&(H[Mt]=function(on){return new Promise(function(en,ln){V.push([Mt,on,en,ln])>1||re(Mt,on)})},jt&&(H[Mt]=jt(H[Mt])))}function re(Mt,jt){try{!function oe(Mt){Mt.value instanceof De?Promise.resolve(Mt.value.v).then(Je,Ct):Ft(V[0][2],Mt)}(K[Mt](jt))}catch(on){Ft(V[0][3],on)}}function Je(Mt){re("next",Mt)}function Ct(Mt){re("throw",Mt)}function Ft(Mt,jt){Mt(jt),V.shift(),V.length&&re(V[0][0],V[0][1])}}function at(Ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ye,me=Ge[Symbol.asyncIterator];return me?me.call(Ge):(Ge=function Te(Ge){var me="function"==typeof Symbol&&Symbol.iterator,ye=me&&Ge[me],K=0;if(ye)return ye.call(Ge);if(Ge&&"number"==typeof Ge.length)return{next:function(){return Ge&&K>=Ge.length&&(Ge=void 0),{value:Ge&&Ge[K++],done:!Ge}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ge),ye={},K("next"),K("throw"),K("return"),ye[Symbol.asyncIterator]=function(){return this},ye);function K(V){ye[V]=Ge[V]&&function(q){return new Promise(function(X,re){!function H(V,q,X,re){Promise.resolve(re).then(function(oe){V({value:oe,done:X})},q)}(X,re,(q=Ge[V](q)).done,q.value)})}}}M.d(tt,{AQ:()=>He,N3:()=>De,sH:()=>Ve,xN:()=>at}),"function"==typeof SuppressedError&&SuppressedError}},Bt=>{Bt(Bt.s=3278)}]);